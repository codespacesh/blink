// This file has been generated by the /home/kyle/projects/coder/blink.so/packages/runtime/scripts/generate.ts script.
// Do not edit this file manually.

export default 'import{createRequire as $j}from"node:module";var lj=Object.defineProperty;var P=(i,n)=>()=>(n||i((n={exports:{}}).exports,n),n.exports);var Xn=(i,n)=>{for(var r in n)lj(i,r,{get:n[r],enumerable:!0,configurable:!0,set:(u)=>n[r]=()=>u})};var T=$j(import.meta.url);var Do=P((wQ,Q0)=>{function Uj(){return Object.keys(globalThis).some((i)=>i.startsWith("__NEXT"))}Q0.exports=function i(){if(globalThis.Deno)return!0;if(globalThis.Bun)return!0;if(Uj())return!0;return!1}});var uw=P((bQ,rw)=>{var{defineProperty:Nu,getOwnPropertyDescriptor:Nj,getOwnPropertyNames:zj}=Object,Wj=Object.prototype.hasOwnProperty,x=(i,n)=>Nu(i,"name",{value:n,configurable:!0}),Dj=(i,n)=>{for(var r in n)Nu(i,r,{get:n[r],enumerable:!0})},Jj=(i,n,r,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of zj(n))!Wj.call(i,t)&&t!==r&&Nu(i,t,{get:()=>n[t],enumerable:!(u=Nj(n,t))||u.enumerable});return i},Ej=(i)=>Jj(Nu({},"__esModule",{value:!0}),i),m0={};Dj(m0,{URLPattern:()=>tw});rw.exports=Ej(m0);var vt=class{type=3;name="";prefix="";value="";suffix="";modifier=3;constructor(i,n,r,u,t,c){this.type=i,this.name=n,this.prefix=r,this.value=u,this.suffix=t,this.modifier=c}hasCustomName(){return this.name!==""&&typeof this.name!="number"}};x(vt,"Part");var Hj=/[$_\\p{ID_Start}]/u,Gj=/[$_\\u200C\\u200D\\p{ID_Continue}]/u,Eo=".*";function S0(i,n){return(n?/^[\\x00-\\xFF]*$/:/^[\\x00-\\x7F]*$/).test(i)}x(S0,"isASCII");function qo(i,n=!1){let r=[],u=0;for(;u<i.length;){let t=i[u],c=x(function(g){if(!n)throw new TypeError(g);r.push({type:"INVALID_CHAR",index:u,value:i[u++]})},"ErrorOrInvalid");if(t==="*"){r.push({type:"ASTERISK",index:u,value:i[u++]});continue}if(t==="+"||t==="?"){r.push({type:"OTHER_MODIFIER",index:u,value:i[u++]});continue}if(t==="\\\\"){r.push({type:"ESCAPED_CHAR",index:u++,value:i[u++]});continue}if(t==="{"){r.push({type:"OPEN",index:u,value:i[u++]});continue}if(t==="}"){r.push({type:"CLOSE",index:u,value:i[u++]});continue}if(t===":"){let g="",h=u+1;for(;h<i.length;){let _=i.substr(h,1);if(h===u+1&&Hj.test(_)||h!==u+1&&Gj.test(_)){g+=i[h++];continue}break}if(!g){c(`Missing parameter name at ${u}`);continue}r.push({type:"NAME",index:u,value:g}),u=h;continue}if(t==="("){let g=1,h="",_=u+1,l=!1;if(i[_]==="?"){c(`Pattern cannot start with "?" at ${_}`);continue}for(;_<i.length;){if(!S0(i[_],!1)){c(`Invalid character \'${i[_]}\' at ${_}.`),l=!0;break}if(i[_]==="\\\\"){h+=i[_++]+i[_++];continue}if(i[_]===")"){if(g--,g===0){_++;break}}else if(i[_]==="("&&(g++,i[_+1]!=="?")){c(`Capturing groups are not allowed at ${_}`),l=!0;break}h+=i[_++]}if(l)continue;if(g){c(`Unbalanced pattern at ${u}`);continue}if(!h){c(`Missing pattern at ${u}`);continue}r.push({type:"REGEX",index:u,value:h}),u=_;continue}r.push({type:"CHAR",index:u,value:i[u++]})}return r.push({type:"END",index:u,value:""}),r}x(qo,"lexer");function Xo(i,n={}){let r=qo(i);n.delimiter??="/#?",n.prefixes??="./";let u=`[^${mi(n.delimiter)}]+?`,t=[],c=0,g=0,h="",_=new Set,l=x((j)=>{if(g<r.length&&r[g].type===j)return r[g++].value},"tryConsume"),$=x(()=>l("OTHER_MODIFIER")??l("ASTERISK"),"tryConsumeModifier"),w=x((j)=>{let O=l(j);if(O!==void 0)return O;let{type:W,index:E}=r[g];throw new TypeError(`Unexpected ${W} at ${E}, expected ${j}`)},"mustConsume"),b=x(()=>{let j="",O;for(;O=l("CHAR")??l("ESCAPED_CHAR");)j+=O;return j},"consumeText"),v=x((j)=>j,"DefaultEncodePart"),f=n.encodePart||v,U="",z=x((j)=>{U+=j},"appendToPendingFixedValue"),J=x(()=>{U.length&&(t.push(new vt(3,"","",f(U),"",3)),U="")},"maybeAddPartFromPendingFixedValue"),N=x((j,O,W,E,X)=>{let H=3;switch(X){case"?":H=1;break;case"*":H=0;break;case"+":H=2;break}if(!O&&!W&&H===3){z(j);return}if(J(),!O&&!W){if(!j)return;t.push(new vt(3,"","",f(j),"",H));return}let Y;W?W==="*"?Y=Eo:Y=W:Y=u;let V=2;Y===u?(V=1,Y=""):Y===Eo&&(V=0,Y="");let Q;if(O?Q=O:W&&(Q=c++),_.has(Q))throw new TypeError(`Duplicate name \'${Q}\'.`);_.add(Q),t.push(new vt(V,Q,f(j),Y,f(E),H))},"addPart");for(;g<r.length;){let j=l("CHAR"),O=l("NAME"),W=l("REGEX");if(!O&&!W&&(W=l("ASTERISK")),O||W){let X=j??"";n.prefixes.indexOf(X)===-1&&(z(X),X=""),J();let H=$();N(X,O,W,"",H);continue}let E=j??l("ESCAPED_CHAR");if(E){z(E);continue}if(l("OPEN")){let X=b(),H=l("NAME"),Y=l("REGEX");!H&&!Y&&(Y=l("ASTERISK"));let V=b();w("CLOSE");let Q=$();N(X,H,Y,V,Q);continue}J(),w("END")}return t}x(Xo,"parse");function mi(i){return i.replace(/([.+*?^${}()[\\]|/\\\\])/g,"\\\\$1")}x(mi,"escapeString");function Ho(i){return i&&i.ignoreCase?"ui":"u"}x(Ho,"flags");function A0(i,n,r){return Lo(Xo(i,r),n,r)}x(A0,"stringToRegexp");function Tn(i){switch(i){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}x(Tn,"modifierToString");function Lo(i,n,r={}){r.delimiter??="/#?",r.prefixes??="./",r.sensitive??=!1,r.strict??=!1,r.end??=!0,r.start??=!0,r.endsWith="";let u=r.start?"^":"";for(let h of i){if(h.type===3){h.modifier===3?u+=mi(h.value):u+=`(?:${mi(h.value)})${Tn(h.modifier)}`;continue}n&&n.push(h.name);let _=`[^${mi(r.delimiter)}]+?`,l=h.value;if(h.type===1?l=_:h.type===0&&(l=Eo),!h.prefix.length&&!h.suffix.length){h.modifier===3||h.modifier===1?u+=`(${l})${Tn(h.modifier)}`:u+=`((?:${l})${Tn(h.modifier)})`;continue}if(h.modifier===3||h.modifier===1){u+=`(?:${mi(h.prefix)}(${l})${mi(h.suffix)})`,u+=Tn(h.modifier);continue}u+=`(?:${mi(h.prefix)}`,u+=`((?:${l})(?:`,u+=mi(h.suffix),u+=mi(h.prefix),u+=`(?:${l}))*)${mi(h.suffix)})`,h.modifier===0&&(u+="?")}let t=`[${mi(r.endsWith)}]|$`,c=`[${mi(r.delimiter)}]`;if(r.end)return r.strict||(u+=`${c}?`),r.endsWith.length?u+=`(?=${t})`:u+="$",new RegExp(u,Ho(r));r.strict||(u+=`(?:${c}(?=${t}))?`);let g=!1;if(i.length){let h=i[i.length-1];h.type===3&&h.modifier===3&&(g=r.delimiter.indexOf(h)>-1)}return g||(u+=`(?=${c}|${t})`),new RegExp(u,Ho(r))}x(Lo,"partsToRegexp");var In={delimiter:"",prefixes:"",sensitive:!0,strict:!0},qj={delimiter:".",prefixes:"",sensitive:!0,strict:!0},Xj={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function B0(i,n){return i.length?i[0]==="/"?!0:!n||i.length<2?!1:(i[0]=="\\\\"||i[0]=="{")&&i[1]=="/":!1}x(B0,"isAbsolutePathname");function Io(i,n){return i.startsWith(n)?i.substring(n.length,i.length):i}x(Io,"maybeStripPrefix");function K0(i,n){return i.endsWith(n)?i.substr(0,i.length-n.length):i}x(K0,"maybeStripSuffix");function Yo(i){return!i||i.length<2?!1:i[0]==="["||(i[0]==="\\\\"||i[0]==="{")&&i[1]==="["}x(Yo,"treatAsIPv6Hostname");var V0=["ftp","file","http","https","ws","wss"];function Qo(i){if(!i)return!0;for(let n of V0)if(i.test(n))return!0;return!1}x(Qo,"isSpecialScheme");function M0(i,n){if(i=Io(i,"#"),n||i==="")return i;let r=new URL("https://example.com");return r.hash=i,r.hash?r.hash.substring(1,r.hash.length):""}x(M0,"canonicalizeHash");function x0(i,n){if(i=Io(i,"?"),n||i==="")return i;let r=new URL("https://example.com");return r.search=i,r.search?r.search.substring(1,r.search.length):""}x(x0,"canonicalizeSearch");function F0(i,n){return n||i===""?i:Yo(i)?Ao(i):So(i)}x(F0,"canonicalizeHostname");function P0(i,n){if(n||i==="")return i;let r=new URL("https://example.com");return r.password=i,r.password}x(P0,"canonicalizePassword");function y0(i,n){if(n||i==="")return i;let r=new URL("https://example.com");return r.username=i,r.username}x(y0,"canonicalizeUsername");function T0(i,n,r){if(r||i==="")return i;if(n&&!V0.includes(n))return new URL(`${n}:${i}`).pathname;let u=i[0]=="/";return i=new URL(u?i:"/-"+i,"https://example.com").pathname,u||(i=i.substring(2,i.length)),i}x(T0,"canonicalizePathname");function k0(i,n,r){return mo(n)===i&&(i=""),r||i===""?i:Bo(i)}x(k0,"canonicalizePort");function C0(i,n){return i=K0(i,":"),n||i===""?i:zu(i)}x(C0,"canonicalizeProtocol");function mo(i){switch(i){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}x(mo,"defaultPortForProtocol");function zu(i){if(i==="")return i;if(/^[-+.A-Za-z0-9]*$/.test(i))return i.toLowerCase();throw new TypeError(`Invalid protocol \'${i}\'.`)}x(zu,"protocolEncodeCallback");function R0(i){if(i==="")return i;let n=new URL("https://example.com");return n.username=i,n.username}x(R0,"usernameEncodeCallback");function Z0(i){if(i==="")return i;let n=new URL("https://example.com");return n.password=i,n.password}x(Z0,"passwordEncodeCallback");function So(i){if(i==="")return i;if(/[\\t\\n\\r #%/:<>?@[\\]^\\\\|]/g.test(i))throw new TypeError(`Invalid hostname \'${i}\'`);let n=new URL("https://example.com");return n.hostname=i,n.hostname}x(So,"hostnameEncodeCallback");function Ao(i){if(i==="")return i;if(/[^0-9a-fA-F[\\]:]/g.test(i))throw new TypeError(`Invalid IPv6 hostname \'${i}\'`);return i.toLowerCase()}x(Ao,"ipv6HostnameEncodeCallback");function Bo(i){if(i===""||/^[0-9]*$/.test(i)&&parseInt(i)<=65535)return i;throw new TypeError(`Invalid port \'${i}\'.`)}x(Bo,"portEncodeCallback");function e0(i){if(i==="")return i;let n=new URL("https://example.com");return n.pathname=i[0]!=="/"?"/-"+i:i,i[0]!=="/"?n.pathname.substring(2,n.pathname.length):n.pathname}x(e0,"standardURLPathnameEncodeCallback");function p0(i){return i===""?i:new URL(`data:${i}`).pathname}x(p0,"pathURLPathnameEncodeCallback");function d0(i){if(i==="")return i;let n=new URL("https://example.com");return n.search=i,n.search.substring(1,n.search.length)}x(d0,"searchEncodeCallback");function a0(i){if(i==="")return i;let n=new URL("https://example.com");return n.hash=i,n.hash.substring(1,n.hash.length)}x(a0,"hashEncodeCallback");var s0=class{#n;#i=[];#r={};#t=0;#u=1;#c=0;#g=0;#w=0;#b=0;#l=!1;constructor(i){this.#n=i}get result(){return this.#r}parse(){for(this.#i=qo(this.#n,!0);this.#t<this.#i.length;this.#t+=this.#u){if(this.#u=1,this.#i[this.#t].type==="END"){if(this.#g===0){this.#$(),this.#v()?this.#o(9,1):this.#f()?this.#o(8,1):this.#o(7,0);continue}else if(this.#g===2){this.#j(5);continue}this.#o(10,0);break}if(this.#w>0)if(this.#G())this.#w-=1;else continue;if(this.#H()){this.#w+=1;continue}switch(this.#g){case 0:this.#W()&&this.#j(1);break;case 1:if(this.#W()){this.#L();let i=7,n=1;this.#D()?(i=2,n=3):this.#l&&(i=2),this.#o(i,n)}break;case 2:this.#N()?this.#j(3):(this.#z()||this.#f()||this.#v())&&this.#j(5);break;case 3:this.#J()?this.#o(4,1):this.#N()&&this.#o(5,1);break;case 4:this.#N()&&this.#o(5,1);break;case 5:this.#q()?this.#b+=1:this.#X()&&(this.#b-=1),this.#E()&&!this.#b?this.#o(6,1):this.#z()?this.#o(7,0):this.#f()?this.#o(8,1):this.#v()&&this.#o(9,1);break;case 6:this.#z()?this.#o(7,0):this.#f()?this.#o(8,1):this.#v()&&this.#o(9,1);break;case 7:this.#f()?this.#o(8,1):this.#v()&&this.#o(9,1);break;case 8:this.#v()&&this.#o(9,1);break;case 9:break;case 10:break}}this.#r.hostname!==void 0&&this.#r.port===void 0&&(this.#r.port="")}#o(i,n){switch(this.#g){case 0:break;case 1:this.#r.protocol=this.#_();break;case 2:break;case 3:this.#r.username=this.#_();break;case 4:this.#r.password=this.#_();break;case 5:this.#r.hostname=this.#_();break;case 6:this.#r.port=this.#_();break;case 7:this.#r.pathname=this.#_();break;case 8:this.#r.search=this.#_();break;case 9:this.#r.hash=this.#_();break;case 10:break}this.#g!==0&&i!==10&&([1,2,3,4].includes(this.#g)&&[6,7,8,9].includes(i)&&(this.#r.hostname??=""),[1,2,3,4,5,6].includes(this.#g)&&[8,9].includes(i)&&(this.#r.pathname??=this.#l?"/":""),[1,2,3,4,5,6,7].includes(this.#g)&&i===9&&(this.#r.search??="")),this.#O(i,n)}#O(i,n){this.#g=i,this.#c=this.#t+n,this.#t+=n,this.#u=0}#$(){this.#t=this.#c,this.#u=0}#j(i){this.#$(),this.#g=i}#U(i){return i<0&&(i=this.#i.length-i),i<this.#i.length?this.#i[i]:this.#i[this.#i.length-1]}#h(i,n){let r=this.#U(i);return r.value===n&&(r.type==="CHAR"||r.type==="ESCAPED_CHAR"||r.type==="INVALID_CHAR")}#W(){return this.#h(this.#t,":")}#D(){return this.#h(this.#t+1,"/")&&this.#h(this.#t+2,"/")}#N(){return this.#h(this.#t,"@")}#J(){return this.#h(this.#t,":")}#E(){return this.#h(this.#t,":")}#z(){return this.#h(this.#t,"/")}#f(){if(this.#h(this.#t,"?"))return!0;if(this.#i[this.#t].value!=="?")return!1;let i=this.#U(this.#t-1);return i.type!=="NAME"&&i.type!=="REGEX"&&i.type!=="CLOSE"&&i.type!=="ASTERISK"}#v(){return this.#h(this.#t,"#")}#H(){return this.#i[this.#t].type=="OPEN"}#G(){return this.#i[this.#t].type=="CLOSE"}#q(){return this.#h(this.#t,"[")}#X(){return this.#h(this.#t,"]")}#_(){let i=this.#i[this.#t],n=this.#U(this.#c).index;return this.#n.substring(n,i.index)}#L(){let i={};Object.assign(i,In),i.encodePart=zu;let n=A0(this.#_(),void 0,i);this.#l=Qo(n)}};x(s0,"Parser");var Jo=["protocol","username","password","hostname","port","pathname","search","hash"],Ln="*";function Go(i,n){if(typeof i!="string")throw new TypeError("parameter 1 is not of type \'string\'.");let r=new URL(i,n);return{protocol:r.protocol.substring(0,r.protocol.length-1),username:r.username,password:r.password,hostname:r.hostname,port:r.port,pathname:r.pathname,search:r.search!==""?r.search.substring(1,r.search.length):void 0,hash:r.hash!==""?r.hash.substring(1,r.hash.length):void 0}}x(Go,"extractValues");function si(i,n){return n?bt(i):i}x(si,"processBaseURLString");function wt(i,n,r){let u;if(typeof n.baseURL=="string")try{u=new URL(n.baseURL),n.protocol===void 0&&(i.protocol=si(u.protocol.substring(0,u.protocol.length-1),r)),!r&&n.protocol===void 0&&n.hostname===void 0&&n.port===void 0&&n.username===void 0&&(i.username=si(u.username,r)),!r&&n.protocol===void 0&&n.hostname===void 0&&n.port===void 0&&n.username===void 0&&n.password===void 0&&(i.password=si(u.password,r)),n.protocol===void 0&&n.hostname===void 0&&(i.hostname=si(u.hostname,r)),n.protocol===void 0&&n.hostname===void 0&&n.port===void 0&&(i.port=si(u.port,r)),n.protocol===void 0&&n.hostname===void 0&&n.port===void 0&&n.pathname===void 0&&(i.pathname=si(u.pathname,r)),n.protocol===void 0&&n.hostname===void 0&&n.port===void 0&&n.pathname===void 0&&n.search===void 0&&(i.search=si(u.search.substring(1,u.search.length),r)),n.protocol===void 0&&n.hostname===void 0&&n.port===void 0&&n.pathname===void 0&&n.search===void 0&&n.hash===void 0&&(i.hash=si(u.hash.substring(1,u.hash.length),r))}catch{throw new TypeError(`invalid baseURL \'${n.baseURL}\'.`)}if(typeof n.protocol=="string"&&(i.protocol=C0(n.protocol,r)),typeof n.username=="string"&&(i.username=y0(n.username,r)),typeof n.password=="string"&&(i.password=P0(n.password,r)),typeof n.hostname=="string"&&(i.hostname=F0(n.hostname,r)),typeof n.port=="string"&&(i.port=k0(n.port,i.protocol,r)),typeof n.pathname=="string"){if(i.pathname=n.pathname,u&&!B0(i.pathname,r)){let t=u.pathname.lastIndexOf("/");t>=0&&(i.pathname=si(u.pathname.substring(0,t+1),r)+i.pathname)}i.pathname=T0(i.pathname,i.protocol,r)}return typeof n.search=="string"&&(i.search=x0(n.search,r)),typeof n.hash=="string"&&(i.hash=M0(n.hash,r)),i}x(wt,"applyInit");function bt(i){return i.replace(/([+*?:{}()\\\\])/g,"\\\\$1")}x(bt,"escapePatternString");function iw(i){return i.replace(/([.+*?^${}()[\\]|/\\\\])/g,"\\\\$1")}x(iw,"escapeRegexpString");function nw(i,n){n.delimiter??="/#?",n.prefixes??="./",n.sensitive??=!1,n.strict??=!1,n.end??=!0,n.start??=!0,n.endsWith="";let r=".*",u=`[^${iw(n.delimiter)}]+?`,t=/[$_\\u200C\\u200D\\p{ID_Continue}]/u,c="";for(let g=0;g<i.length;++g){let h=i[g];if(h.type===3){if(h.modifier===3){c+=bt(h.value);continue}c+=`{${bt(h.value)}}${Tn(h.modifier)}`;continue}let _=h.hasCustomName(),l=!!h.suffix.length||!!h.prefix.length&&(h.prefix.length!==1||!n.prefixes.includes(h.prefix)),$=g>0?i[g-1]:null,w=g<i.length-1?i[g+1]:null;if(!l&&_&&h.type===1&&h.modifier===3&&w&&!w.prefix.length&&!w.suffix.length)if(w.type===3){let b=w.value.length>0?w.value[0]:"";l=t.test(b)}else l=!w.hasCustomName();if(!l&&!h.prefix.length&&$&&$.type===3){let b=$.value[$.value.length-1];l=n.prefixes.includes(b)}l&&(c+="{"),c+=bt(h.prefix),_&&(c+=`:${h.name}`),h.type===2?c+=`(${h.value})`:h.type===1?_||(c+=`(${u})`):h.type===0&&(!_&&(!$||$.type===3||$.modifier!==3||l||h.prefix!=="")?c+="*":c+=`(${r})`),h.type===1&&_&&h.suffix.length&&t.test(h.suffix[0])&&(c+="\\\\"),c+=bt(h.suffix),l&&(c+="}"),h.modifier!==3&&(c+=Tn(h.modifier))}return c}x(nw,"partsToPattern");var tw=class{#n;#i={};#r={};#t={};#u={};#c=!1;constructor(i={},n,r){try{let u;if(typeof n=="string"?u=n:r=n,typeof i=="string"){let h=new s0(i);if(h.parse(),i=h.result,u===void 0&&typeof i.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");i.baseURL=u}else{if(!i||typeof i!="object")throw new TypeError("parameter 1 is not of type \'string\' and cannot convert to dictionary.");if(u)throw new TypeError("parameter 1 is not of type \'string\'.")}typeof r>"u"&&(r={ignoreCase:!1});let t={ignoreCase:r.ignoreCase===!0},c={pathname:Ln,protocol:Ln,username:Ln,password:Ln,hostname:Ln,port:Ln,search:Ln,hash:Ln};this.#n=wt(c,i,!0),mo(this.#n.protocol)===this.#n.port&&(this.#n.port="");let g;for(g of Jo){if(!(g in this.#n))continue;let h={},_=this.#n[g];switch(this.#r[g]=[],g){case"protocol":Object.assign(h,In),h.encodePart=zu;break;case"username":Object.assign(h,In),h.encodePart=R0;break;case"password":Object.assign(h,In),h.encodePart=Z0;break;case"hostname":Object.assign(h,qj),Yo(_)?h.encodePart=Ao:h.encodePart=So;break;case"port":Object.assign(h,In),h.encodePart=Bo;break;case"pathname":Qo(this.#i.protocol)?(Object.assign(h,Xj,t),h.encodePart=e0):(Object.assign(h,In,t),h.encodePart=p0);break;case"search":Object.assign(h,In,t),h.encodePart=d0;break;case"hash":Object.assign(h,In,t),h.encodePart=a0;break}try{this.#u[g]=Xo(_,h),this.#i[g]=Lo(this.#u[g],this.#r[g],h),this.#t[g]=nw(this.#u[g],h),this.#c=this.#c||this.#u[g].some((l)=>l.type===2)}catch{throw new TypeError(`invalid ${g} pattern \'${this.#n[g]}\'.`)}}}catch(u){throw new TypeError(`Failed to construct \'URLPattern\': ${u.message}`)}}get[Symbol.toStringTag](){return"URLPattern"}test(i={},n){let r={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof i!="string"&&n)throw new TypeError("parameter 1 is not of type \'string\'.");if(typeof i>"u")return!1;try{typeof i=="object"?r=wt(r,i,!1):r=wt(r,Go(i,n),!1)}catch{return!1}let u;for(u of Jo)if(!this.#i[u].exec(r[u]))return!1;return!0}exec(i={},n){let r={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof i!="string"&&n)throw new TypeError("parameter 1 is not of type \'string\'.");if(typeof i>"u")return;try{typeof i=="object"?r=wt(r,i,!1):r=wt(r,Go(i,n),!1)}catch{return null}let u={};n?u.inputs=[i,n]:u.inputs=[i];let t;for(t of Jo){let c=this.#i[t].exec(r[t]);if(!c)return null;let g={};for(let[h,_]of this.#r[t].entries())if(typeof _=="string"||typeof _=="number"){let l=c[h+1];g[_]=l}u[t]={input:r[t]??"",groups:g}}return u}static compareComponent(i,n,r){let u=x((h,_)=>{for(let l of["type","modifier","prefix","value","suffix"]){if(h[l]<_[l])return-1;if(h[l]===_[l])continue;return 1}return 0},"comparePart"),t=new vt(3,"","","","",3),c=new vt(0,"","","","",3),g=x((h,_)=>{let l=0;for(;l<Math.min(h.length,_.length);++l){let $=u(h[l],_[l]);if($)return $}return h.length===_.length?0:u(h[l]??t,_[l]??t)},"comparePartList");return!n.#t[i]&&!r.#t[i]?0:n.#t[i]&&!r.#t[i]?g(n.#u[i],[c]):!n.#t[i]&&r.#t[i]?g([c],r.#u[i]):g(n.#u[i],r.#u[i])}get protocol(){return this.#t.protocol}get username(){return this.#t.username}get password(){return this.#t.password}get hostname(){return this.#t.hostname}get port(){return this.#t.port}get pathname(){return this.#t.pathname}get search(){return this.#t.search}get hash(){return this.#t.hash}get hasRegExpGroups(){return this.#c}};x(tw,"URLPattern")});var gw=P((jQ,ow)=>{var{URLPattern:cw}=uw();ow.exports={URLPattern:cw};if(!globalThis.URLPattern)globalThis.URLPattern=cw});var Qn=P((bw)=>{Object.defineProperty(bw,"__esModule",{value:!0});bw.isPromise=Wu;bw.isActualPromise=_w;bw.handleMaybePromise=Yn;bw.fakePromise=nn;bw.createDeferredPromise=Lj;bw.iterateAsync=lw;bw.iterateAsyncVoid=lw;bw.fakeRejectPromise=kn;bw.mapMaybePromise=Ij;bw.mapAsyncIterator=Yj;bw.promiseLikeFinally=$w;bw.unfakePromise=ww;var Du=Symbol.for("@whatwg-node/promise-helpers/FakePromise");function Wu(i){return i?.then!=null}function _w(i){let n=i;return n&&n.then&&n.catch&&n.finally}function Yn(i,n,r,u){let t=nn().then(i).then(n,r);if(u)t=t.finally(u);return ww(t)}function nn(i){if(i&&_w(i))return i;if(Wu(i))return{then:(n,r)=>nn(i.then(n,r)),catch:(n)=>nn(i.then((r)=>r,n)),finally:(n)=>nn(n?$w(i,n):i),[Symbol.toStringTag]:"Promise"};return{then(n){if(n)try{return nn(n(i))}catch(r){return kn(r)}return this},catch(){return this},finally(n){if(n)try{return nn(n()).then(()=>i,()=>i)}catch(r){return kn(r)}return this},[Symbol.toStringTag]:"Promise",__fakePromiseValue:i,[Du]:"resolved"}}function Lj(){if(Promise.withResolvers)return Promise.withResolvers();let i,n;return{promise:new Promise(function u(t,c){i=t,n=c}),get resolve(){return i},get reject(){return n}}}function lw(i,n,r){if(i?.length===0)return;let u=i[Symbol.iterator](),t=0;function c(){let{done:g,value:h}=u.next();if(g)return;let _=!1;function l(){_=!0}return Yn(function $(){return n(h,l,t++)},function $(w){if(w)r?.push(w);if(_)return;return c()})}return c()}function kn(i){return{then(n,r){if(r)try{return nn(r(i))}catch(u){return kn(u)}return this},catch(n){if(n)try{return nn(n(i))}catch(r){return kn(r)}return this},finally(n){if(n)try{n()}catch(r){return kn(r)}return this},__fakeRejectError:i,[Symbol.toStringTag]:"Promise",[Du]:"rejected"}}function Ij(i,n,r){return Yn(()=>i,n,r)}function Yj(i,n,r,u){if(Symbol.asyncIterator in i)i=i[Symbol.asyncIterator]();let t,c,g;if(u){let l;g=($)=>{return l||=Yn(u,()=>$,()=>$),l}}if(typeof i.return==="function")t=i.return,c=(l)=>{let $=()=>{throw l};return t.call(i).then($,$)};function h(l){if(l.done)return g?g(l):l;return Yn(()=>l.value,($)=>Yn(()=>n($),hw,c))}let _;if(r){let l,$=r;_=(w)=>{return l||=Yn(()=>w,(b)=>Yn(()=>$(b),hw,c)),l}}return{next(){return i.next().then(h,_)},return(){let l=t?t.call(i).then(h,_):nn({value:void 0,done:!0});return g?l.then(g):l},throw(l){if(typeof i.throw==="function")return i.throw(l).then(h,_);if(c)return c(l);return kn(l)},[Symbol.asyncIterator](){return this}}}function hw(i){return{value:i,done:!1}}function Qj(i){return i?.[Du]==="resolved"}function mj(i){return i?.[Du]==="rejected"}function $w(i,n){if("finally"in i)return i.finally(n);return i.then((r)=>{let u=n();return Wu(u)?u.then(()=>r):r},(r)=>{let u=n();if(Wu(u))return u.then(()=>{throw r});else throw r})}function ww(i){if(Qj(i))return i.__fakePromiseValue;if(mj(i))throw i.__fakeRejectError;return i}});var Ko=P((NQ,vw)=>{var{EventEmitter:Cj}=T("node:events"),{inherits:Rj}=T("node:util");function Cn(i){if(typeof i==="string")i=Buffer.from(i);if(!Buffer.isBuffer(i))throw new TypeError("The needle has to be a String or a Buffer.");let n=i.length,r=n-1;if(n===0)throw new Error("The needle cannot be an empty String/Buffer.");if(n>256)throw new Error("The needle cannot have a length bigger than 256.");this.maxMatches=1/0,this.matches=0,this._occ=new Uint8Array(256).fill(n),this._lookbehind_size=0,this._needle=i,this._bufpos=0,this._lookbehind=Buffer.alloc(r);for(var u=0;u<r;++u)this._occ[i[u]]=r-u}Rj(Cn,Cj);Cn.prototype.reset=function(){this._lookbehind_size=0,this.matches=0,this._bufpos=0};Cn.prototype.push=function(i,n){if(!Buffer.isBuffer(i))i=Buffer.from(i,"binary");let r=i.length;this._bufpos=n||0;let u;while(u!==r&&this.matches<this.maxMatches)u=this._sbmh_feed(i);return u};Cn.prototype._sbmh_feed=function(i){let n=i.length,r=this._needle,u=r.length,t=u-1,c=r[t],g=-this._lookbehind_size,h;if(g<0){while(g<0&&g<=n-u){if(h=i[g+t],h===c&&this._sbmh_memcmp(i,g,t))return this._lookbehind_size=0,++this.matches,this.emit("info",!0),this._bufpos=g+u;g+=this._occ[h]}while(g<0&&!this._sbmh_memcmp(i,g,n-g))++g;if(g>=0)this.emit("info",!1,this._lookbehind,0,this._lookbehind_size),this._lookbehind_size=0;else{let _=this._lookbehind_size+g;if(_>0)this.emit("info",!1,this._lookbehind,0,_);return this._lookbehind_size-=_,this._lookbehind.copy(this._lookbehind,0,_,this._lookbehind_size),i.copy(this._lookbehind,this._lookbehind_size),this._lookbehind_size+=n,this._bufpos=n,n}}if(g=i.indexOf(r,g+this._bufpos),g!==-1){if(++this.matches,g===0)this.emit("info",!0);else this.emit("info",!0,i,this._bufpos,g);return this._bufpos=g+u}if(g=n-t,g<0)g=0;while(g!==n&&(i[g]!==r[0]||Buffer.compare(i.subarray(g+1,n),r.subarray(1,n-g))!==0))++g;if(g!==n)i.copy(this._lookbehind,0,g,n),this._lookbehind_size=n-g;if(g!==0)this.emit("info",!1,i,this._bufpos,g);return this._bufpos=n,n};Cn.prototype._sbmh_lookup_char=function(i,n){return n<0?this._lookbehind[this._lookbehind_size+n]:i[n]};Cn.prototype._sbmh_memcmp=function(i,n,r){for(var u=0;u<r;++u)if(this._sbmh_lookup_char(i,n+u)!==this._needle[u])return!1;return!0};vw.exports=Cn});var jw=P((zQ,Ow)=>{var Zj=T("node:util").inherits,fw=T("node:stream").Readable;function Vo(i){fw.call(this,i)}Zj(Vo,fw);Vo.prototype._read=function(i){};Ow.exports=Vo});var Ju=P((WQ,Uw)=>{Uw.exports=function i(n,r,u){if(!n||n[r]===void 0||n[r]===null)return u;if(typeof n[r]!=="number"||isNaN(n[r]))throw new TypeError("Limit "+r+" is not a valid number");return n[r]}});var Dw=P((DQ,Ww)=>{var zw=T("node:events").EventEmitter,ej=T("node:util").inherits,Nw=Ju(),pj=Ko(),dj=Buffer.from(`\\r\n\\r\n`),aj=/\\r\\n/g,sj=/^([^:]+):[ \\t]?([\\x00-\\xFF]+)?$/;function ft(i){zw.call(this),i=i||{};let n=this;this.nread=0,this.maxed=!1,this.npairs=0,this.maxHeaderPairs=Nw(i,"maxHeaderPairs",2000),this.maxHeaderSize=Nw(i,"maxHeaderSize",81920),this.buffer="",this.header={},this.finished=!1,this.ss=new pj(dj),this.ss.on("info",function(r,u,t,c){if(u&&!n.maxed){if(n.nread+c-t>=n.maxHeaderSize)c=n.maxHeaderSize-n.nread+t,n.nread=n.maxHeaderSize,n.maxed=!0;else n.nread+=c-t;n.buffer+=u.toString("binary",t,c)}if(r)n._finish()})}ej(ft,zw);ft.prototype.push=function(i){let n=this.ss.push(i);if(this.finished)return n};ft.prototype.reset=function(){this.finished=!1,this.buffer="",this.header={},this.ss.reset()};ft.prototype._finish=function(){if(this.buffer)this._parseHeader();this.ss.matches=this.ss.maxMatches;let i=this.header;this.header={},this.buffer="",this.finished=!0,this.nread=this.npairs=0,this.maxed=!1,this.emit("header",i)};ft.prototype._parseHeader=function(){if(this.npairs===this.maxHeaderPairs)return;let i=this.buffer.split(aj),n=i.length,r,u;for(var t=0;t<n;++t){if(i[t].length===0)continue;if(i[t][0]==="\\t"||i[t][0]===" "){if(u){this.header[u][this.header[u].length-1]+=i[t];continue}}let c=i[t].indexOf(":");if(c===-1||c===0)return;if(r=sj.exec(i[t]),u=r[1].toLowerCase(),this.header[u]=this.header[u]||[],this.header[u].push(r[2]||""),++this.npairs===this.maxHeaderPairs)break}};Ww.exports=ft});var xo=P((JQ,Ew)=>{var Mo=T("node:stream").Writable,iU=T("node:util").inherits,nU=Ko(),Jw=jw(),tU=Dw(),rU=Buffer.from("-"),uU=Buffer.from(`\\r\n`),cU=function(){};function ki(i){if(!(this instanceof ki))return new ki(i);if(Mo.call(this,i),!i||!i.headerFirst&&typeof i.boundary!=="string")throw new TypeError("Boundary required");if(typeof i.boundary==="string")this.setBoundary(i.boundary);else this._bparser=void 0;this._headerFirst=i.headerFirst,this._dashes=0,this._parts=0,this._finished=!1,this._realFinish=!1,this._isPreamble=!0,this._justMatched=!1,this._firstWrite=!0,this._inHeader=!0,this._part=void 0,this._cb=void 0,this._ignoreData=!1,this._partOpts={highWaterMark:i.partHwm},this._pause=!1;let n=this;this._hparser=new tU(i),this._hparser.on("header",function(r){n._inHeader=!1,n._part.emit("header",r)})}iU(ki,Mo);ki.prototype.emit=function(i){if(i==="finish"&&!this._realFinish){if(!this._finished){let n=this;process.nextTick(function(){if(n.emit("error",new Error("Unexpected end of multipart data")),n._part&&!n._ignoreData){let r=n._isPreamble?"Preamble":"Part";n._part.emit("error",new Error(r+" terminated early due to unexpected end of multipart data")),n._part.push(null),process.nextTick(function(){n._realFinish=!0,n.emit("finish"),n._realFinish=!1});return}n._realFinish=!0,n.emit("finish"),n._realFinish=!1})}}else Mo.prototype.emit.apply(this,arguments)};ki.prototype._write=function(i,n,r){if(!this._hparser&&!this._bparser)return r();if(this._headerFirst&&this._isPreamble){if(!this._part)if(this._part=new Jw(this._partOpts),this.listenerCount("preamble")!==0)this.emit("preamble",this._part);else this._ignore();let u=this._hparser.push(i);if(!this._inHeader&&u!==void 0&&u<i.length)i=i.slice(u);else return r()}if(this._firstWrite)this._bparser.push(uU),this._firstWrite=!1;if(this._bparser.push(i),this._pause)this._cb=r;else r()};ki.prototype.reset=function(){this._part=void 0,this._bparser=void 0,this._hparser=void 0};ki.prototype.setBoundary=function(i){let n=this;this._bparser=new nU(`\\r\n--`+i),this._bparser.on("info",function(r,u,t,c){n._oninfo(r,u,t,c)})};ki.prototype._ignore=function(){if(this._part&&!this._ignoreData)this._ignoreData=!0,this._part.on("error",cU),this._part.resume()};ki.prototype._oninfo=function(i,n,r,u){let t,c=this,g=0,h,_=!0;if(!this._part&&this._justMatched&&n){while(this._dashes<2&&r+g<u)if(n[r+g]===45)++g,++this._dashes;else{if(this._dashes)t=rU;this._dashes=0;break}if(this._dashes===2){if(r+g<u&&this.listenerCount("trailer")!==0)this.emit("trailer",n.slice(r+g,u));if(this.reset(),this._finished=!0,c._parts===0)c._realFinish=!0,c.emit("finish"),c._realFinish=!1}if(this._dashes)return}if(this._justMatched)this._justMatched=!1;if(!this._part){if(this._part=new Jw(this._partOpts),this._part._read=function(l){c._unpause()},this._isPreamble&&this.listenerCount("preamble")!==0)this.emit("preamble",this._part);else if(this._isPreamble!==!0&&this.listenerCount("part")!==0)this.emit("part",this._part);else this._ignore();if(!this._isPreamble)this._inHeader=!0}if(n&&r<u&&!this._ignoreData){if(this._isPreamble||!this._inHeader){if(t)_=this._part.push(t);if(_=this._part.push(n.slice(r,u)),!_)this._pause=!0}else if(!this._isPreamble&&this._inHeader){if(t)this._hparser.push(t);if(h=this._hparser.push(n.slice(r,u)),!this._inHeader&&h!==void 0&&h<u)this._oninfo(!1,n,r+h,u)}}if(i){if(this._hparser.reset(),this._isPreamble)this._isPreamble=!1;else if(r!==u)++this._parts,this._part.on("end",function(){if(--c._parts===0)if(c._finished)c._realFinish=!0,c.emit("finish"),c._realFinish=!1;else c._unpause()});this._part.push(null),this._part=void 0,this._ignoreData=!1,this._justMatched=!0,this._dashes=0}};ki.prototype._unpause=function(){if(!this._pause)return;if(this._pause=!1,this._cb){let i=this._cb;this._cb=void 0,i()}};Ew.exports=ki});var Eu=P((Fo,qw)=>{var Hw=new TextDecoder("utf-8"),Gw=new Map([["utf-8",Hw],["utf8",Hw]]);function oU(i){let n;while(!0)switch(i){case"utf-8":case"utf8":return xt.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return xt.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return xt.utf16le;case"base64":return xt.base64;default:if(n===void 0){n=!0,i=i.toLowerCase();continue}return xt.other.bind(i)}}var xt={utf8:(i,n)=>{if(i.length===0)return"";if(typeof i==="string")i=Buffer.from(i,n);return i.utf8Slice(0,i.length)},latin1:(i,n)=>{if(i.length===0)return"";if(typeof i==="string")return i;return i.latin1Slice(0,i.length)},utf16le:(i,n)=>{if(i.length===0)return"";if(typeof i==="string")i=Buffer.from(i,n);return i.ucs2Slice(0,i.length)},base64:(i,n)=>{if(i.length===0)return"";if(typeof i==="string")i=Buffer.from(i,n);return i.base64Slice(0,i.length)},other:(i,n)=>{if(i.length===0)return"";if(typeof i==="string")i=Buffer.from(i,n);if(Gw.has(Fo.toString()))try{return Gw.get(Fo).decode(i)}catch{}return typeof i==="string"?i:i.toString()}};function gU(i,n,r){if(i)return oU(r)(i,n);return i}qw.exports=gU});var yo=P((EQ,Qw)=>{var Hu=Eu(),Xw=/%[a-fA-F0-9][a-fA-F0-9]/g,hU={"%00":"\\x00","%01":"\\x01","%02":"\\x02","%03":"\\x03","%04":"\\x04","%05":"\\x05","%06":"\\x06","%07":"\\x07","%08":"\\b","%09":"\\t","%0a":`\n`,"%0A":`\n`,"%0b":"\\v","%0B":"\\v","%0c":"\\f","%0C":"\\f","%0d":"\\r","%0D":"\\r","%0e":"\\x0E","%0E":"\\x0E","%0f":"\\x0F","%0F":"\\x0F","%10":"\\x10","%11":"\\x11","%12":"\\x12","%13":"\\x13","%14":"\\x14","%15":"\\x15","%16":"\\x16","%17":"\\x17","%18":"\\x18","%19":"\\x19","%1a":"\\x1A","%1A":"\\x1A","%1b":"\\x1B","%1B":"\\x1B","%1c":"\\x1C","%1C":"\\x1C","%1d":"\\x1D","%1D":"\\x1D","%1e":"\\x1E","%1E":"\\x1E","%1f":"\\x1F","%1F":"\\x1F","%20":" ","%21":"!","%22":\'"\',"%23":"#","%24":"$","%25":"%","%26":"&","%27":"\'","%28":"(","%29":")","%2a":"*","%2A":"*","%2b":"+","%2B":"+","%2c":",","%2C":",","%2d":"-","%2D":"-","%2e":".","%2E":".","%2f":"/","%2F":"/","%30":"0","%31":"1","%32":"2","%33":"3","%34":"4","%35":"5","%36":"6","%37":"7","%38":"8","%39":"9","%3a":":","%3A":":","%3b":";","%3B":";","%3c":"<","%3C":"<","%3d":"=","%3D":"=","%3e":">","%3E":">","%3f":"?","%3F":"?","%40":"@","%41":"A","%42":"B","%43":"C","%44":"D","%45":"E","%46":"F","%47":"G","%48":"H","%49":"I","%4a":"J","%4A":"J","%4b":"K","%4B":"K","%4c":"L","%4C":"L","%4d":"M","%4D":"M","%4e":"N","%4E":"N","%4f":"O","%4F":"O","%50":"P","%51":"Q","%52":"R","%53":"S","%54":"T","%55":"U","%56":"V","%57":"W","%58":"X","%59":"Y","%5a":"Z","%5A":"Z","%5b":"[","%5B":"[","%5c":"\\\\","%5C":"\\\\","%5d":"]","%5D":"]","%5e":"^","%5E":"^","%5f":"_","%5F":"_","%60":"`","%61":"a","%62":"b","%63":"c","%64":"d","%65":"e","%66":"f","%67":"g","%68":"h","%69":"i","%6a":"j","%6A":"j","%6b":"k","%6B":"k","%6c":"l","%6C":"l","%6d":"m","%6D":"m","%6e":"n","%6E":"n","%6f":"o","%6F":"o","%70":"p","%71":"q","%72":"r","%73":"s","%74":"t","%75":"u","%76":"v","%77":"w","%78":"x","%79":"y","%7a":"z","%7A":"z","%7b":"{","%7B":"{","%7c":"|","%7C":"|","%7d":"}","%7D":"}","%7e":"~","%7E":"~","%7f":"","%7F":"","%80":"","%81":"","%82":"","%83":"","%84":"","%85":"","%86":"","%87":"","%88":"","%89":"","%8a":"","%8A":"","%8b":"","%8B":"","%8c":"","%8C":"","%8d":"","%8D":"","%8e":"","%8E":"","%8f":"","%8F":"","%90":"","%91":"","%92":"","%93":"","%94":"","%95":"","%96":"","%97":"","%98":"","%99":"","%9a":"","%9A":"","%9b":"","%9B":"","%9c":"","%9C":"","%9d":"","%9D":"","%9e":"","%9E":"","%9f":"","%9F":"","%a0":" ","%A0":" ","%a1":"¡","%A1":"¡","%a2":"¢","%A2":"¢","%a3":"£","%A3":"£","%a4":"¤","%A4":"¤","%a5":"¥","%A5":"¥","%a6":"¦","%A6":"¦","%a7":"§","%A7":"§","%a8":"¨","%A8":"¨","%a9":"©","%A9":"©","%aa":"ª","%Aa":"ª","%aA":"ª","%AA":"ª","%ab":"«","%Ab":"«","%aB":"«","%AB":"«","%ac":"¬","%Ac":"¬","%aC":"¬","%AC":"¬","%ad":"­","%Ad":"­","%aD":"­","%AD":"­","%ae":"®","%Ae":"®","%aE":"®","%AE":"®","%af":"¯","%Af":"¯","%aF":"¯","%AF":"¯","%b0":"°","%B0":"°","%b1":"±","%B1":"±","%b2":"²","%B2":"²","%b3":"³","%B3":"³","%b4":"´","%B4":"´","%b5":"µ","%B5":"µ","%b6":"¶","%B6":"¶","%b7":"·","%B7":"·","%b8":"¸","%B8":"¸","%b9":"¹","%B9":"¹","%ba":"º","%Ba":"º","%bA":"º","%BA":"º","%bb":"»","%Bb":"»","%bB":"»","%BB":"»","%bc":"¼","%Bc":"¼","%bC":"¼","%BC":"¼","%bd":"½","%Bd":"½","%bD":"½","%BD":"½","%be":"¾","%Be":"¾","%bE":"¾","%BE":"¾","%bf":"¿","%Bf":"¿","%bF":"¿","%BF":"¿","%c0":"À","%C0":"À","%c1":"Á","%C1":"Á","%c2":"Â","%C2":"Â","%c3":"Ã","%C3":"Ã","%c4":"Ä","%C4":"Ä","%c5":"Å","%C5":"Å","%c6":"Æ","%C6":"Æ","%c7":"Ç","%C7":"Ç","%c8":"È","%C8":"È","%c9":"É","%C9":"É","%ca":"Ê","%Ca":"Ê","%cA":"Ê","%CA":"Ê","%cb":"Ë","%Cb":"Ë","%cB":"Ë","%CB":"Ë","%cc":"Ì","%Cc":"Ì","%cC":"Ì","%CC":"Ì","%cd":"Í","%Cd":"Í","%cD":"Í","%CD":"Í","%ce":"Î","%Ce":"Î","%cE":"Î","%CE":"Î","%cf":"Ï","%Cf":"Ï","%cF":"Ï","%CF":"Ï","%d0":"Ð","%D0":"Ð","%d1":"Ñ","%D1":"Ñ","%d2":"Ò","%D2":"Ò","%d3":"Ó","%D3":"Ó","%d4":"Ô","%D4":"Ô","%d5":"Õ","%D5":"Õ","%d6":"Ö","%D6":"Ö","%d7":"×","%D7":"×","%d8":"Ø","%D8":"Ø","%d9":"Ù","%D9":"Ù","%da":"Ú","%Da":"Ú","%dA":"Ú","%DA":"Ú","%db":"Û","%Db":"Û","%dB":"Û","%DB":"Û","%dc":"Ü","%Dc":"Ü","%dC":"Ü","%DC":"Ü","%dd":"Ý","%Dd":"Ý","%dD":"Ý","%DD":"Ý","%de":"Þ","%De":"Þ","%dE":"Þ","%DE":"Þ","%df":"ß","%Df":"ß","%dF":"ß","%DF":"ß","%e0":"à","%E0":"à","%e1":"á","%E1":"á","%e2":"â","%E2":"â","%e3":"ã","%E3":"ã","%e4":"ä","%E4":"ä","%e5":"å","%E5":"å","%e6":"æ","%E6":"æ","%e7":"ç","%E7":"ç","%e8":"è","%E8":"è","%e9":"é","%E9":"é","%ea":"ê","%Ea":"ê","%eA":"ê","%EA":"ê","%eb":"ë","%Eb":"ë","%eB":"ë","%EB":"ë","%ec":"ì","%Ec":"ì","%eC":"ì","%EC":"ì","%ed":"í","%Ed":"í","%eD":"í","%ED":"í","%ee":"î","%Ee":"î","%eE":"î","%EE":"î","%ef":"ï","%Ef":"ï","%eF":"ï","%EF":"ï","%f0":"ð","%F0":"ð","%f1":"ñ","%F1":"ñ","%f2":"ò","%F2":"ò","%f3":"ó","%F3":"ó","%f4":"ô","%F4":"ô","%f5":"õ","%F5":"õ","%f6":"ö","%F6":"ö","%f7":"÷","%F7":"÷","%f8":"ø","%F8":"ø","%f9":"ù","%F9":"ù","%fa":"ú","%Fa":"ú","%fA":"ú","%FA":"ú","%fb":"û","%Fb":"û","%fB":"û","%FB":"û","%fc":"ü","%Fc":"ü","%fC":"ü","%FC":"ü","%fd":"ý","%Fd":"ý","%fD":"ý","%FD":"ý","%fe":"þ","%Fe":"þ","%fE":"þ","%FE":"þ","%ff":"ÿ","%Ff":"ÿ","%fF":"ÿ","%FF":"ÿ"};function Lw(i){return hU[i]}var Gu=0,Iw=1,Po=2,Yw=3;function _U(i){let n=[],r=Gu,u="",t=!1,c=!1,g=0,h="",_=i.length;for(var l=0;l<_;++l){let $=i[l];if($==="\\\\"&&t)if(c)c=!1;else{c=!0;continue}else if($===\'"\')if(!c){if(t){t=!1,r=Gu;while(l+1<_&&i[l+1]!==";")++l}else t=!0;continue}else c=!1;else{if(c&&t)h+="\\\\";if(c=!1,(r===Po||r===Yw)&&$==="\'"){if(r===Po)r=Yw,u=h.substring(1);else r=Iw;h="";continue}else if(r===Gu&&($==="*"||$==="=")&&n.length){r=$==="*"?Po:Iw,n[g]=[h,void 0],h="";continue}else if(!t&&$===";"){if(r=Gu,u){if(h.length)h=Hu(h.replace(Xw,Lw),"binary",u);u=""}else if(h.length)h=Hu(h,"binary","utf8");if(n[g]===void 0)n[g]=h;else n[g][1]=h;h="",++g;continue}else if(!t&&($===" "||$==="\\t"))continue}h+=$}if(u&&h.length)h=Hu(h.replace(Xw,Lw),"binary",u);else if(h)h=Hu(h,"binary","utf8");if(n[g]===void 0){if(h)n[g]=h}else n[g][1]=h;return n}Qw.exports=_U});var Sw=P((HQ,mw)=>{mw.exports=function i(n){if(typeof n!=="string")return"";for(var r=n.length-1;r>=0;--r)switch(n.charCodeAt(r)){case 47:case 92:return n=n.slice(r+1),n===".."||n==="."?"":n}return n===".."||n==="."?"":n}});var Vw=P((GQ,Kw)=>{var{Readable:Bw}=T("node:stream"),{inherits:lU}=T("node:util"),$U=xo(),Aw=yo(),wU=Eu(),bU=Sw(),Rn=Ju(),vU=/^boundary$/i,fU=/^form-data$/i,OU=/^charset$/i,jU=/^filename$/i,UU=/^name$/i;qu.detect=/^multipart\\/form-data/i;function qu(i,n){let r,u,t=this,c,g=n.limits,h=n.isPartAFile||((Q,M,p)=>M==="application/octet-stream"||p!==void 0),_=n.parsedConType||[],l=n.defCharset||"utf8",$=n.preservePath,w={highWaterMark:n.fileHwm};for(r=0,u=_.length;r<u;++r)if(Array.isArray(_[r])&&vU.test(_[r][0])){c=_[r][1];break}function b(){if(E===0&&Y&&!i._done)Y=!1,t.end()}if(typeof c!=="string")throw new Error("Multipart: Boundary not found");let v=Rn(g,"fieldSize",1048576),f=Rn(g,"fileSize",1/0),U=Rn(g,"files",1/0),z=Rn(g,"fields",1/0),J=Rn(g,"parts",1/0),N=Rn(g,"headerPairs",2000),j=Rn(g,"headerSize",81920),O=0,W=0,E=0,X,H,Y=!1;this._needDrain=!1,this._pause=!1,this._cb=void 0,this._nparts=0,this._boy=i;let V={boundary:c,maxHeaderPairs:N,maxHeaderSize:j,partHwm:w.highWaterMark,highWaterMark:n.highWaterMark};this.parser=new $U(V),this.parser.on("drain",function(){if(t._needDrain=!1,t._cb&&!t._pause){let Q=t._cb;t._cb=void 0,Q()}}).on("part",function Q(M){if(++t._nparts>J)return t.parser.removeListener("part",Q),t.parser.on("part",Ot),i.hitPartsLimit=!0,i.emit("partsLimit"),Ot(M);if(H){let p=H;p.emit("end"),p.removeAllListeners("end")}M.on("header",function(p){let li,Mi,s,Ti,Di,Ni,di=0;if(p["content-type"]){if(s=Aw(p["content-type"][0]),s[0]){li=s[0].toLowerCase();for(r=0,u=s.length;r<u;++r)if(OU.test(s[r][0])){Ti=s[r][1].toLowerCase();break}}}if(li===void 0)li="text/plain";if(Ti===void 0)Ti=l;if(p["content-disposition"]){if(s=Aw(p["content-disposition"][0]),!fU.test(s[0]))return Ot(M);for(r=0,u=s.length;r<u;++r)if(UU.test(s[r][0]))Mi=s[r][1];else if(jU.test(s[r][0])){if(Ni=s[r][1],!$)Ni=bU(Ni)}}else return Ot(M);if(p["content-transfer-encoding"])Di=p["content-transfer-encoding"][0].toLowerCase();else Di="7bit";let Uo,No;if(h(Mi,li,Ni)){if(O===U){if(!i.hitFilesLimit)i.hitFilesLimit=!0,i.emit("filesLimit");return Ot(M)}if(++O,i.listenerCount("file")===0){t.parser._ignore();return}++E;let Oi=new To(w);X=Oi,Oi.on("end",function(){if(--E,t._pause=!1,b(),t._cb&&!t._needDrain){let ai=t._cb;t._cb=void 0,ai()}}),Oi._read=function(ai){if(!t._pause)return;if(t._pause=!1,t._cb&&!t._needDrain){let _n=t._cb;t._cb=void 0,_n()}},i.emit("file",Mi,Oi,Ni,Di,li),Uo=function(ai){if((di+=ai.length)>f){let _n=f-di+ai.length;if(_n>0)Oi.push(ai.slice(0,_n));Oi.truncated=!0,Oi.bytesRead=f,M.removeAllListeners("data"),Oi.emit("limit");return}else if(!Oi.push(ai))t._pause=!0;Oi.bytesRead=di},No=function(){X=void 0,Oi.push(null)}}else{if(W===z){if(!i.hitFieldsLimit)i.hitFieldsLimit=!0,i.emit("fieldsLimit");return Ot(M)}++W,++E;let Oi="",ai=!1;H=M,Uo=function(_n){if((di+=_n.length)>v){let _j=v-(di-_n.length);Oi+=_n.toString("binary",0,_j),ai=!0,M.removeAllListeners("data")}else Oi+=_n.toString("binary")},No=function(){if(H=void 0,Oi.length)Oi=wU(Oi,"binary",Ti);i.emit("field",Mi,Oi,!1,ai,Di,li),--E,b()}}M._readableState.sync=!1,M.on("data",Uo),M.on("end",No)}).on("error",function(p){if(X)X.emit("error",p)})}).on("error",function(Q){i.emit("error",Q)}).on("finish",function(){Y=!0,b()})}qu.prototype.write=function(i,n){let r=this.parser.write(i);if(r&&!this._pause)n();else this._needDrain=!r,this._cb=n};qu.prototype.end=function(){let i=this;if(i.parser.writable)i.parser.end();else if(!i._boy._done)process.nextTick(function(){i._boy._done=!0,i._boy.emit("finish")})};function Ot(i){i.resume()}function To(i){Bw.call(this,i),this.bytesRead=0,this.truncated=!1}lU(To,Bw);To.prototype._read=function(i){};Kw.exports=qu});var xw=P((qQ,Mw)=>{var NU=/\\+/g,zU=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function ko(){this.buffer=void 0}ko.prototype.write=function(i){i=i.replace(NU," ");let n="",r=0,u=0,t=i.length;for(;r<t;++r)if(this.buffer!==void 0){if(!zU[i.charCodeAt(r)])n+="%"+this.buffer,this.buffer=void 0,--r;else if(this.buffer+=i[r],++u,this.buffer.length===2)n+=String.fromCharCode(parseInt(this.buffer,16)),this.buffer=void 0}else if(i[r]==="%"){if(r>u)n+=i.substring(u,r),u=r;this.buffer="",++u}if(u<t&&this.buffer===void 0)n+=i.substring(u);return n};ko.prototype.reset=function(){this.buffer=void 0};Mw.exports=ko});var Pw=P((XQ,Fw)=>{var WU=xw(),jt=Eu(),Co=Ju(),DU=/^charset$/i;Xu.detect=/^application\\/x-www-form-urlencoded/i;function Xu(i,n){let{limits:r,parsedConType:u}=n;this.boy=i,this.fieldSizeLimit=Co(r,"fieldSize",1048576),this.fieldNameSizeLimit=Co(r,"fieldNameSize",100),this.fieldsLimit=Co(r,"fields",1/0);let t;for(var c=0,g=u.length;c<g;++c)if(Array.isArray(u[c])&&DU.test(u[c][0])){t=u[c][1].toLowerCase();break}if(t===void 0)t=n.defCharset||"utf8";this.decoder=new WU,this.charset=t,this._fields=0,this._state="key",this._checkingBytes=!0,this._bytesKey=0,this._bytesVal=0,this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._hitLimit=!1}Xu.prototype.write=function(i,n){if(this._fields===this.fieldsLimit){if(!this.boy.hitFieldsLimit)this.boy.hitFieldsLimit=!0,this.boy.emit("fieldsLimit");return n()}let r,u,t,c=0,g=i.length;while(c<g)if(this._state==="key"){r=u=void 0;for(t=c;t<g;++t){if(!this._checkingBytes)++c;if(i[t]===61){r=t;break}else if(i[t]===38){u=t;break}if(this._checkingBytes&&this._bytesKey===this.fieldNameSizeLimit){this._hitLimit=!0;break}else if(this._checkingBytes)++this._bytesKey}if(r!==void 0){if(r>c)this._key+=this.decoder.write(i.toString("binary",c,r));this._state="val",this._hitLimit=!1,this._checkingBytes=!0,this._val="",this._bytesVal=0,this._valTrunc=!1,this.decoder.reset(),c=r+1}else if(u!==void 0){++this._fields;let h,_=this._keyTrunc;if(u>c)h=this._key+=this.decoder.write(i.toString("binary",c,u));else h=this._key;if(this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),h.length)this.boy.emit("field",jt(h,"binary",this.charset),"",_,!1);if(c=u+1,this._fields===this.fieldsLimit)return n()}else if(this._hitLimit){if(t>c)this._key+=this.decoder.write(i.toString("binary",c,t));if(c=t,(this._bytesKey=this._key.length)===this.fieldNameSizeLimit)this._checkingBytes=!1,this._keyTrunc=!0}else{if(c<g)this._key+=this.decoder.write(i.toString("binary",c));c=g}}else{u=void 0;for(t=c;t<g;++t){if(!this._checkingBytes)++c;if(i[t]===38){u=t;break}if(this._checkingBytes&&this._bytesVal===this.fieldSizeLimit){this._hitLimit=!0;break}else if(this._checkingBytes)++this._bytesVal}if(u!==void 0){if(++this._fields,u>c)this._val+=this.decoder.write(i.toString("binary",c,u));if(this.boy.emit("field",jt(this._key,"binary",this.charset),jt(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this._state="key",this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),c=u+1,this._fields===this.fieldsLimit)return n()}else if(this._hitLimit){if(t>c)this._val+=this.decoder.write(i.toString("binary",c,t));if(c=t,this._val===""&&this.fieldSizeLimit===0||(this._bytesVal=this._val.length)===this.fieldSizeLimit)this._checkingBytes=!1,this._valTrunc=!0}else{if(c<g)this._val+=this.decoder.write(i.toString("binary",c));c=g}}n()};Xu.prototype.end=function(){if(this.boy._done)return;if(this._state==="key"&&this._key.length>0)this.boy.emit("field",jt(this._key,"binary",this.charset),"",this._keyTrunc,!1);else if(this._state==="val")this.boy.emit("field",jt(this._key,"binary",this.charset),jt(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc);this.boy._done=!0,this.boy.emit("finish")};Fw.exports=Xu});var kw=P((LQ,Ft)=>{var Ro=T("node:stream").Writable,{inherits:JU}=T("node:util"),EU=xo(),yw=Vw(),Tw=Pw(),HU=yo();function $n(i){if(!(this instanceof $n))return new $n(i);if(typeof i!=="object")throw new TypeError("Busboy expected an options-Object.");if(typeof i.headers!=="object")throw new TypeError("Busboy expected an options-Object with headers-attribute.");if(typeof i.headers["content-type"]!=="string")throw new TypeError("Missing Content-Type-header.");let{headers:n,...r}=i;this.opts={autoDestroy:!1,...r},Ro.call(this,this.opts),this._done=!1,this._parser=this.getParserByHeaders(n),this._finished=!1}JU($n,Ro);$n.prototype.emit=function(i){if(i==="finish"){if(!this._done){this._parser?.end();return}else if(this._finished)return;this._finished=!0}Ro.prototype.emit.apply(this,arguments)};$n.prototype.getParserByHeaders=function(i){let n=HU(i["content-type"]),r={defCharset:this.opts.defCharset,fileHwm:this.opts.fileHwm,headers:i,highWaterMark:this.opts.highWaterMark,isPartAFile:this.opts.isPartAFile,limits:this.opts.limits,parsedConType:n,preservePath:this.opts.preservePath};if(yw.detect.test(n[0]))return new yw(this,r);if(Tw.detect.test(n[0]))return new Tw(this,r);throw new Error("Unsupported Content-Type.")};$n.prototype._write=function(i,n,r){this._parser.write(i,r)};Ft.exports=$n;Ft.exports.default=$n;Ft.exports.Busboy=$n;Ft.exports.Dicer=EU});var Ci=P((Zo)=>{Object.defineProperty(Zo,"__esModule",{value:!0});Zo.fakePromise=void 0;Zo.getHeadersObj=qU;Zo.defaultHeadersSerializer=XU;Zo.isArrayBufferView=IU;Zo.isNodeReadable=YU;Zo.isIterable=QU;Zo.shouldRedirect=mU;Zo.pipeThrough=SU;Zo.endStream=AU;Zo.safeWrite=BU;var GU=T("node:events");function Cw(i){return i?.forEach!=null}function qU(i){if(i==null||!Cw(i))return i;if(i.headersInit&&!i._map&&!Cw(i.headersInit))return i.headersInit;return Object.fromEntries(i.entries())}function XU(i,n){let r=[];return i.forEach((u,t)=>{if(n&&t==="content-length")n(u);r.push(`${t}: ${u}`)}),r}var LU=Qn();Object.defineProperty(Zo,"fakePromise",{enumerable:!0,get:function(){return LU.fakePromise}});function IU(i){return i!=null&&i.buffer!=null&&i.byteLength!=null&&i.byteOffset!=null}function YU(i){return i!=null&&i.pipe!=null}function QU(i){return i?.[Symbol.iterator]!=null}function mU(i){return i===301||i===302||i===303||i===307||i===308}function SU({src:i,dest:n,signal:r,onError:u}){if(u)n.once("error",u);if(i.once("error",(t)=>{n.destroy(t)}),n.once("close",()=>{if(!i.destroyed)i.destroy()}),r){let g=function(){c.deref()?.removeEventListener("abort",h),t.deref()?.removeListener("end",g),t.deref()?.removeListener("error",g),t.deref()?.removeListener("close",g)},h=function(){t.deref()?.destroy(new Rw),g()},t=new WeakRef(i),c=new WeakRef(r);r.addEventListener("abort",h,{once:!0}),i.once("end",g),i.once("error",g),i.once("close",g)}i.pipe(n,{end:!0})}function AU(i){return i.end(null,null,null)}function BU(i,n){if(!n.write(i))return GU.once(n,"drain")}class Rw extends Error{constructor(i="The operation was aborted",n=void 0){super(i,n);this.name="AbortError"}}});var Ut=P((dw)=>{Object.defineProperty(dw,"__esModule",{value:!0});dw.PonyfillReadableStream=void 0;var Zw=T("node:buffer"),eo=T("node:events"),po=T("node:stream"),RU=T("node:stream/promises"),ao=Qn(),so=Ci();function ew(i,n){let r=[],u=!1,t=!1;return{desiredSize:i,enqueue(c){let g=typeof c==="string"?Zw.Buffer.from(c):c;if(!t)r.push(g);else n.push(g)},close(){if(r.length>0)this._flush();n.push(null),u=!0},error(c){if(r.length>0)this._flush();n.destroy(c)},get _closed(){return u},_flush(){if(t=!0,r.length>0){let c=r.length>1?Zw.Buffer.concat(r):r[0];n.push(c),r=[]}}}}function ZU(i){return i?.read!=null}function pw(i){return i?.getReader!=null}class Lu{readable;constructor(i){if(i instanceof Lu&&i.readable!=null)this.readable=i.readable;else if(ZU(i))this.readable=i;else if(pw(i))this.readable=po.Readable.fromWeb(i);else{let n=!1,r=!1,u=(c)=>{if(!n){let g=ew(c,this.readable);return n=!0,ao.handleMaybePromise(()=>i?.start?.(g),()=>{if(g._flush(),g._closed)return!1;return!0})}return!0},t=(c)=>{return ao.handleMaybePromise(()=>u(c),(g)=>{if(!g)return;let h=ew(c,this.readable);return ao.handleMaybePromise(()=>i?.pull?.(h),()=>{h._flush(),r=!1})})};this.readable=new po.Readable({read(c){if(r)return;return r=!0,t(c)},destroy(c,g){if(i?.cancel)try{let h=i.cancel(c);if(h?.then)return h.then(()=>{g(null)},(_)=>{g(_)})}catch(h){g(h);return}g(null)}})}}cancel(i){return this.readable.destroy(i),eo.once(this.readable,"close")}locked=!1;getReader(i){let n=this.readable[Symbol.asyncIterator]();this.locked=!0;let r=this.readable;return{read(){return n.next()},releaseLock:()=>{if(n.return){let u=n.return();if(u.then){u.then(()=>{this.locked=!1});return}}this.locked=!1},cancel:(u)=>{if(n.return){let t=n.return(u);if(t.then)return t.then(()=>{this.locked=!1})}return this.locked=!1,so.fakePromise()},get closed(){return Promise.race([eo.once(r,"end"),eo.once(r,"error").then((u)=>Promise.reject(u))])}}}[Symbol.asyncIterator](){let i=this.readable[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return this},next:()=>i.next(),return:()=>{if(!this.readable.destroyed)this.readable.destroy();return i.return?.()||so.fakePromise({done:!0,value:void 0})},throw:(n)=>{if(!this.readable.destroyed)this.readable.destroy(n);return i.throw?.(n)||so.fakePromise({done:!0,value:void 0})}}}tee(){throw new Error("Not implemented")}async pipeToWriter(i){try{for await(let n of this)await i.write(n);await i.close()}catch(n){await i.abort(n)}}pipeTo(i){if(pU(i))return RU.pipeline(this.readable,i.writable,{end:!0});else{let n=i.getWriter();return this.pipeToWriter(n)}}pipeThrough({writable:i,readable:n}){if(this.pipeTo(i).catch((r)=>{this.readable.destroy(r)}),eU(n))n.readable.once("error",(r)=>this.readable.destroy(r)),n.readable.once("finish",()=>this.readable.push(null)),n.readable.once("close",()=>this.readable.push(null));return n}static[Symbol.hasInstance](i){return pw(i)}static from(i){return new Lu(po.Readable.from(i))}[Symbol.toStringTag]="ReadableStream"}dw.PonyfillReadableStream=Lu;function eU(i){return i?.readable!=null}function pU(i){return i?.writable!=null}});var Iu=P((cb)=>{Object.defineProperty(cb,"__esModule",{value:!0});cb.PonyfillBlob=void 0;cb.hasBufferMethod=yt;cb.hasArrayBufferMethod=Tt;cb.hasBytesMethod=kt;cb.hasTextMethod=sw;cb.hasSizeProperty=ib;cb.hasStreamMethod=nb;cb.hasBlobSignature=tb;cb.isArrayBuffer=rb;var qi=T("node:buffer"),ig=Ut(),Gi=Ci();function Pt(i){if(typeof i==="string")return qi.Buffer.from(i);else if(qi.Buffer.isBuffer(i))return i;else if(Gi.isArrayBufferView(i))return qi.Buffer.from(i.buffer,i.byteOffset,i.byteLength);else return qi.Buffer.from(i)}function yt(i){return i!=null&&i.buffer!=null&&typeof i.buffer==="function"}function Tt(i){return i!=null&&i.arrayBuffer!=null&&typeof i.arrayBuffer==="function"}function kt(i){return i!=null&&i.bytes!=null&&typeof i.bytes==="function"}function sw(i){return i!=null&&i.text!=null&&typeof i.text==="function"}function ib(i){return i!=null&&typeof i.size==="number"}function nb(i){return i!=null&&i.stream!=null&&typeof i.stream==="function"}function tb(i){return i!=null&&i[Symbol.toStringTag]==="Blob"}function rb(i){return i!=null&&i.byteLength!=null&&i.slice!=null}class ub{blobParts;type;encoding;_size=null;constructor(i=[],n){if(this.blobParts=i,this.type=n?.type||"application/octet-stream",this.encoding=n?.encoding||"utf8",this._size=n?.size||null,i.length===1&&tb(i[0]))return i[0]}_buffer=null;buffer(){if(this._buffer)return Gi.fakePromise(this._buffer);if(this.blobParts.length===1){let r=this.blobParts[0];if(yt(r))return r.buffer().then((u)=>{return this._buffer=u,this._buffer});if(kt(r))return r.bytes().then((u)=>{return this._buffer=qi.Buffer.from(u),this._buffer});if(Tt(r))return r.arrayBuffer().then((u)=>{return this._buffer=qi.Buffer.from(u,void 0,r.size),this._buffer});return this._buffer=Pt(r),Gi.fakePromise(this._buffer)}let i=[],n=this.blobParts.map((r,u)=>{if(yt(r)){i.push(r.buffer().then((t)=>{n[u]=t}));return}else if(Tt(r)){i.push(r.arrayBuffer().then((t)=>{n[u]=qi.Buffer.from(t,void 0,r.size)}));return}else if(kt(r)){i.push(r.bytes().then((t)=>{n[u]=qi.Buffer.from(t)}));return}else return Pt(r)});if(i.length>0)return Promise.all(i).then(()=>qi.Buffer.concat(n,this._size||void 0));return Gi.fakePromise(qi.Buffer.concat(n,this._size||void 0))}arrayBuffer(){if(this._buffer)return Gi.fakePromise(this._buffer);if(this.blobParts.length===1){if(rb(this.blobParts[0]))return Gi.fakePromise(this.blobParts[0]);if(Tt(this.blobParts[0]))return this.blobParts[0].arrayBuffer()}return this.buffer()}bytes(){if(this._buffer)return Gi.fakePromise(this._buffer);if(this.blobParts.length===1){if(qi.Buffer.isBuffer(this.blobParts[0]))return this._buffer=this.blobParts[0],Gi.fakePromise(this._buffer);if(this.blobParts[0]instanceof Uint8Array)return this._buffer=qi.Buffer.from(this.blobParts[0]),Gi.fakePromise(this._buffer);if(kt(this.blobParts[0]))return this.blobParts[0].bytes();if(yt(this.blobParts[0]))return this.blobParts[0].buffer()}return this.buffer()}_text=null;text(){if(this._text)return Gi.fakePromise(this._text);if(this.blobParts.length===1){let i=this.blobParts[0];if(typeof i==="string")return this._text=i,Gi.fakePromise(this._text);if(sw(i))return i.text().then((r)=>{return this._text=r,this._text});let n=Pt(i);return this._text=n.toString(this.encoding),Gi.fakePromise(this._text)}return this.buffer().then((i)=>{return this._text=i.toString(this.encoding),this._text})}_json=null;json(){if(this._json)return Gi.fakePromise(this._json);return this.text().then((i)=>{return this._json=JSON.parse(i),this._json})}_formData=null;formData(){if(this._formData)return Gi.fakePromise(this._formData);throw new Error("Not implemented")}get size(){if(this._size==null){this._size=0;for(let i of this.blobParts)if(typeof i==="string")this._size+=qi.Buffer.byteLength(i);else if(ib(i))this._size+=i.size;else if(Gi.isArrayBufferView(i))this._size+=i.byteLength}return this._size}stream(){if(this.blobParts.length===1){let n=this.blobParts[0];if(nb(n))return n.stream();let r=Pt(n);return new ig.PonyfillReadableStream({start:(u)=>{u.enqueue(r),u.close()}})}if(this._buffer!=null)return new ig.PonyfillReadableStream({start:(n)=>{n.enqueue(this._buffer),n.close()}});let i;return new ig.PonyfillReadableStream({start:(n)=>{if(this.blobParts.length===0){n.close();return}i=this.blobParts[Symbol.iterator]()},pull:(n)=>{let{value:r,done:u}=i.next();if(u){n.close();return}if(r){if(yt(r))return r.buffer().then((c)=>{n.enqueue(c)});if(kt(r))return r.bytes().then((c)=>{let g=qi.Buffer.from(c);n.enqueue(g)});if(Tt(r))return r.arrayBuffer().then((c)=>{let g=qi.Buffer.from(c,void 0,r.size);n.enqueue(g)});let t=Pt(r);n.enqueue(t)}}})}slice(){throw new Error("Not implemented")}}cb.PonyfillBlob=ub});var ng=P((hb)=>{Object.defineProperty(hb,"__esModule",{value:!0});hb.PonyfillFile=void 0;var cN=Iu();class gb extends cN.PonyfillBlob{name;lastModified;constructor(i,n,r){super(i,r);this.name=n,this.lastModified=r?.lastModified||Date.now()}webkitRelativePath=""}hb.PonyfillFile=gb});var rg=P((SQ,mu)=>{var lb,$b,wb,bb,vb,fb,Ob,jb,Ub,Nb,zb,Wb,Db,Yu,tg,Jb,Eb,Hb,Nt,Gb,qb,Xb,Lb,Ib,Yb,Qb,mb,Sb,Qu,Ab,Bb,Kb;(function(i){var n=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd)define("tslib",["exports"],function(u){i(r(n,r(u)))});else if(typeof mu==="object"&&typeof SQ==="object")i(r(n,r(SQ)));else i(r(n));function r(u,t){if(u!==n)if(typeof Object.create==="function")Object.defineProperty(u,"__esModule",{value:!0});else u.__esModule=!0;return function(c,g){return u[c]=t?t(c,g):g}}})(function(i){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var h in g)if(Object.prototype.hasOwnProperty.call(g,h))c[h]=g[h]};lb=function(c,g){if(typeof g!=="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");n(c,g);function h(){this.constructor=c}c.prototype=g===null?Object.create(g):(h.prototype=g.prototype,new h)},$b=Object.assign||function(c){for(var g,h=1,_=arguments.length;h<_;h++){g=arguments[h];for(var l in g)if(Object.prototype.hasOwnProperty.call(g,l))c[l]=g[l]}return c},wb=function(c,g){var h={};for(var _ in c)if(Object.prototype.hasOwnProperty.call(c,_)&&g.indexOf(_)<0)h[_]=c[_];if(c!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var l=0,_=Object.getOwnPropertySymbols(c);l<_.length;l++)if(g.indexOf(_[l])<0&&Object.prototype.propertyIsEnumerable.call(c,_[l]))h[_[l]]=c[_[l]]}return h},bb=function(c,g,h,_){var l=arguments.length,$=l<3?g:_===null?_=Object.getOwnPropertyDescriptor(g,h):_,w;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")$=Reflect.decorate(c,g,h,_);else for(var b=c.length-1;b>=0;b--)if(w=c[b])$=(l<3?w($):l>3?w(g,h,$):w(g,h))||$;return l>3&&$&&Object.defineProperty(g,h,$),$},vb=function(c,g){return function(h,_){g(h,_,c)}},fb=function(c,g,h,_,l,$){function w(E){if(E!==void 0&&typeof E!=="function")throw new TypeError("Function expected");return E}var b=_.kind,v=b==="getter"?"get":b==="setter"?"set":"value",f=!g&&c?_.static?c:c.prototype:null,U=g||(f?Object.getOwnPropertyDescriptor(f,_.name):{}),z,J=!1;for(var N=h.length-1;N>=0;N--){var j={};for(var O in _)j[O]=O==="access"?{}:_[O];for(var O in _.access)j.access[O]=_.access[O];j.addInitializer=function(E){if(J)throw new TypeError("Cannot add initializers after decoration has completed");$.push(w(E||null))};var W=h[N](b==="accessor"?{get:U.get,set:U.set}:U[v],j);if(b==="accessor"){if(W===void 0)continue;if(W===null||typeof W!=="object")throw new TypeError("Object expected");if(z=w(W.get))U.get=z;if(z=w(W.set))U.set=z;if(z=w(W.init))l.unshift(z)}else if(z=w(W))if(b==="field")l.unshift(z);else U[v]=z}if(f)Object.defineProperty(f,_.name,U);J=!0},Ob=function(c,g,h){var _=arguments.length>2;for(var l=0;l<g.length;l++)h=_?g[l].call(c,h):g[l].call(c);return _?h:void 0},jb=function(c){return typeof c==="symbol"?c:"".concat(c)},Ub=function(c,g,h){if(typeof g==="symbol")g=g.description?"[".concat(g.description,"]"):"";return Object.defineProperty(c,"name",{configurable:!0,value:h?"".concat(h," ",g):g})},Nb=function(c,g){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(c,g)},zb=function(c,g,h,_){function l($){return $ instanceof h?$:new h(function(w){w($)})}return new(h||(h=Promise))(function($,w){function b(U){try{f(_.next(U))}catch(z){w(z)}}function v(U){try{f(_.throw(U))}catch(z){w(z)}}function f(U){U.done?$(U.value):l(U.value).then(b,v)}f((_=_.apply(c,g||[])).next())})},Wb=function(c,g){var h={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},_,l,$,w=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return w.next=b(0),w.throw=b(1),w.return=b(2),typeof Symbol==="function"&&(w[Symbol.iterator]=function(){return this}),w;function b(f){return function(U){return v([f,U])}}function v(f){if(_)throw new TypeError("Generator is already executing.");while(w&&(w=0,f[0]&&(h=0)),h)try{if(_=1,l&&($=f[0]&2?l.return:f[0]?l.throw||(($=l.return)&&$.call(l),0):l.next)&&!($=$.call(l,f[1])).done)return $;if(l=0,$)f=[f[0]&2,$.value];switch(f[0]){case 0:case 1:$=f;break;case 4:return h.label++,{value:f[1],done:!1};case 5:h.label++,l=f[1],f=[0];continue;case 7:f=h.ops.pop(),h.trys.pop();continue;default:if(($=h.trys,!($=$.length>0&&$[$.length-1]))&&(f[0]===6||f[0]===2)){h=0;continue}if(f[0]===3&&(!$||f[1]>$[0]&&f[1]<$[3])){h.label=f[1];break}if(f[0]===6&&h.label<$[1]){h.label=$[1],$=f;break}if($&&h.label<$[2]){h.label=$[2],h.ops.push(f);break}if($[2])h.ops.pop();h.trys.pop();continue}f=g.call(c,h)}catch(U){f=[6,U],l=0}finally{_=$=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Db=function(c,g){for(var h in c)if(h!=="default"&&!Object.prototype.hasOwnProperty.call(g,h))Qu(g,c,h)},Qu=Object.create?function(c,g,h,_){if(_===void 0)_=h;var l=Object.getOwnPropertyDescriptor(g,h);if(!l||("get"in l?!g.__esModule:l.writable||l.configurable))l={enumerable:!0,get:function(){return g[h]}};Object.defineProperty(c,_,l)}:function(c,g,h,_){if(_===void 0)_=h;c[_]=g[h]},Yu=function(c){var g=typeof Symbol==="function"&&Symbol.iterator,h=g&&c[g],_=0;if(h)return h.call(c);if(c&&typeof c.length==="number")return{next:function(){if(c&&_>=c.length)c=void 0;return{value:c&&c[_++],done:!c}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},tg=function(c,g){var h=typeof Symbol==="function"&&c[Symbol.iterator];if(!h)return c;var _=h.call(c),l,$=[],w;try{while((g===void 0||g-- >0)&&!(l=_.next()).done)$.push(l.value)}catch(b){w={error:b}}finally{try{if(l&&!l.done&&(h=_.return))h.call(_)}finally{if(w)throw w.error}}return $},Jb=function(){for(var c=[],g=0;g<arguments.length;g++)c=c.concat(tg(arguments[g]));return c},Eb=function(){for(var c=0,g=0,h=arguments.length;g<h;g++)c+=arguments[g].length;for(var _=Array(c),l=0,g=0;g<h;g++)for(var $=arguments[g],w=0,b=$.length;w<b;w++,l++)_[l]=$[w];return _},Hb=function(c,g,h){if(h||arguments.length===2){for(var _=0,l=g.length,$;_<l;_++)if($||!(_ in g)){if(!$)$=Array.prototype.slice.call(g,0,_);$[_]=g[_]}}return c.concat($||Array.prototype.slice.call(g))},Nt=function(c){return this instanceof Nt?(this.v=c,this):new Nt(c)},Gb=function(c,g,h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _=h.apply(c,g||[]),l,$=[];return l=Object.create((typeof AsyncIterator==="function"?AsyncIterator:Object).prototype),b("next"),b("throw"),b("return",w),l[Symbol.asyncIterator]=function(){return this},l;function w(N){return function(j){return Promise.resolve(j).then(N,z)}}function b(N,j){if(_[N]){if(l[N]=function(O){return new Promise(function(W,E){$.push([N,O,W,E])>1||v(N,O)})},j)l[N]=j(l[N])}}function v(N,j){try{f(_[N](j))}catch(O){J($[0][3],O)}}function f(N){N.value instanceof Nt?Promise.resolve(N.value.v).then(U,z):J($[0][2],N)}function U(N){v("next",N)}function z(N){v("throw",N)}function J(N,j){if(N(j),$.shift(),$.length)v($[0][0],$[0][1])}},qb=function(c){var g,h;return g={},_("next"),_("throw",function(l){throw l}),_("return"),g[Symbol.iterator]=function(){return this},g;function _(l,$){g[l]=c[l]?function(w){return(h=!h)?{value:Nt(c[l](w)),done:!1}:$?$(w):w}:$}},Xb=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=c[Symbol.asyncIterator],h;return g?g.call(c):(c=typeof Yu==="function"?Yu(c):c[Symbol.iterator](),h={},_("next"),_("throw"),_("return"),h[Symbol.asyncIterator]=function(){return this},h);function _($){h[$]=c[$]&&function(w){return new Promise(function(b,v){w=c[$](w),l(b,v,w.done,w.value)})}}function l($,w,b,v){Promise.resolve(v).then(function(f){$({value:f,done:b})},w)}},Lb=function(c,g){if(Object.defineProperty)Object.defineProperty(c,"raw",{value:g});else c.raw=g;return c};var r=Object.create?function(c,g){Object.defineProperty(c,"default",{enumerable:!0,value:g})}:function(c,g){c.default=g},u=function(c){return u=Object.getOwnPropertyNames||function(g){var h=[];for(var _ in g)if(Object.prototype.hasOwnProperty.call(g,_))h[h.length]=_;return h},u(c)};Ib=function(c){if(c&&c.__esModule)return c;var g={};if(c!=null){for(var h=u(c),_=0;_<h.length;_++)if(h[_]!=="default")Qu(g,c,h[_])}return r(g,c),g},Yb=function(c){return c&&c.__esModule?c:{default:c}},Qb=function(c,g,h,_){if(h==="a"&&!_)throw new TypeError("Private accessor was defined without a getter");if(typeof g==="function"?c!==g||!_:!g.has(c))throw new TypeError("Cannot read private member from an object whose class did not declare it");return h==="m"?_:h==="a"?_.call(c):_?_.value:g.get(c)},mb=function(c,g,h,_,l){if(_==="m")throw new TypeError("Private method is not writable");if(_==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof g==="function"?c!==g||!l:!g.has(c))throw new TypeError("Cannot write private member to an object whose class did not declare it");return _==="a"?l.call(c,h):l?l.value=h:g.set(c,h),h},Sb=function(c,g){if(g===null||typeof g!=="object"&&typeof g!=="function")throw new TypeError("Cannot use \'in\' operator on non-object");return typeof c==="function"?g===c:c.has(g)},Ab=function(c,g,h){if(g!==null&&g!==void 0){if(typeof g!=="object"&&typeof g!=="function")throw new TypeError("Object expected.");var _,l;if(h){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");_=g[Symbol.asyncDispose]}if(_===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");if(_=g[Symbol.dispose],h)l=_}if(typeof _!=="function")throw new TypeError("Object not disposable.");if(l)_=function(){try{l.call(this)}catch($){return Promise.reject($)}};c.stack.push({value:g,dispose:_,async:h})}else if(h)c.stack.push({async:!0});return g};var t=typeof SuppressedError==="function"?SuppressedError:function(c,g,h){var _=new Error(h);return _.name="SuppressedError",_.error=c,_.suppressed=g,_};Bb=function(c){function g($){c.error=c.hasError?new t($,c.error,"An error was suppressed during disposal."):$,c.hasError=!0}var h,_=0;function l(){while(h=c.stack.pop())try{if(!h.async&&_===1)return _=0,c.stack.push(h),Promise.resolve().then(l);if(h.dispose){var $=h.dispose.call(h.value);if(h.async)return _|=2,Promise.resolve($).then(l,function(w){return g(w),l()})}else _|=1}catch(w){g(w)}if(_===1)return c.hasError?Promise.reject(c.error):Promise.resolve();if(c.hasError)throw c.error}return l()},Kb=function(c,g){if(typeof c==="string"&&/^\\.\\.?\\//.test(c))return c.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i,function(h,_,l,$,w){return _?g?".jsx":".js":l&&(!$||!w)?h:l+$+"."+w.toLowerCase()+"js"});return c},i("__extends",lb),i("__assign",$b),i("__rest",wb),i("__decorate",bb),i("__param",vb),i("__esDecorate",fb),i("__runInitializers",Ob),i("__propKey",jb),i("__setFunctionName",Ub),i("__metadata",Nb),i("__awaiter",zb),i("__generator",Wb),i("__exportStar",Db),i("__createBinding",Qu),i("__values",Yu),i("__read",tg),i("__spread",Jb),i("__spreadArrays",Eb),i("__spreadArray",Hb),i("__await",Nt),i("__asyncGenerator",Gb),i("__asyncDelegator",qb),i("__asyncValues",Xb),i("__makeTemplateObject",Lb),i("__importStar",Ib),i("__importDefault",Yb),i("__classPrivateFieldGet",Qb),i("__classPrivateFieldSet",mb),i("__classPrivateFieldIn",Sb),i("__addDisposableResource",Ab),i("__disposeResources",Bb),i("__rewriteRelativeImportExtension",Kb)})});var Su=P((Mb)=>{Object.defineProperty(Mb,"__esModule",{value:!0});Mb.PonyfillSuppressedError=void 0;class Vb extends Error{error;suppressed;constructor(i,n,r){super(r);this.error=i,this.suppressed=n,this.name="SuppressedError",Error.captureStackTrace(this,this.constructor)}}Mb.PonyfillSuppressedError=Vb});var Ct=P((Fb)=>{Object.defineProperty(Fb,"__esModule",{value:!0});Fb.DisposableSymbols=void 0;Fb.patchSymbols=oN;Fb.DisposableSymbols={get dispose(){return Symbol.dispose||Symbol.for("dispose")},get asyncDispose(){return Symbol.asyncDispose||Symbol.for("asyncDispose")}};function oN(){Symbol.dispose||=Symbol.for("dispose"),Symbol.asyncDispose||=Symbol.for("asyncDispose")}});var ug=P((Tb)=>{Object.defineProperty(Tb,"__esModule",{value:!0});Tb.isSyncDisposable=hN;Tb.isAsyncDisposable=_N;var yb=Ct();function hN(i){return i?.[yb.DisposableSymbols.dispose]!=null}function _N(i){return i?.[yb.DisposableSymbols.asyncDispose]!=null}});var Zb=P((Cb)=>{Object.defineProperty(Cb,"__esModule",{value:!0});Cb.PonyfillAsyncDisposableStack=void 0;var wN=Qn(),bN=Su(),Au=Ct(),kb=ug(),vN=globalThis.SuppressedError||bN.PonyfillSuppressedError;class cg{callbacks=[];get disposed(){return this.callbacks.length===0}use(i){if(kb.isAsyncDisposable(i))this.callbacks.push(()=>i[Au.DisposableSymbols.asyncDispose]());else if(kb.isSyncDisposable(i))this.callbacks.push(()=>i[Au.DisposableSymbols.dispose]());return i}adopt(i,n){if(n)this.callbacks.push(()=>n(i));return i}defer(i){if(i)this.callbacks.push(i)}move(){let i=new cg;return i.callbacks=this.callbacks,this.callbacks=[],i}disposeAsync(){return this[Au.DisposableSymbols.asyncDispose]()}_error;_iterateCallbacks(){let i=this.callbacks.pop();if(i)return wN.handleMaybePromise(i,()=>this._iterateCallbacks(),(n)=>{return this._error=this._error?new vN(n,this._error):n,this._iterateCallbacks()})}[Au.DisposableSymbols.asyncDispose](){let i=this._iterateCallbacks();if(i?.then)return i.then(()=>{if(this._error){let n=this._error;throw this._error=void 0,n}});if(this._error){let n=this._error;throw this._error=void 0,n}return}[Symbol.toStringTag]="AsyncDisposableStack"}Cb.PonyfillAsyncDisposableStack=cg});var db=P((eb)=>{Object.defineProperty(eb,"__esModule",{value:!0});eb.PonyfillDisposableStack=void 0;var fN=Su(),og=Ct(),ON=ug(),jN=globalThis.SuppressedError||fN.PonyfillSuppressedError;class gg{callbacks=[];get disposed(){return this.callbacks.length===0}use(i){if(ON.isSyncDisposable(i))this.callbacks.push(()=>i[og.DisposableSymbols.dispose]());return i}adopt(i,n){if(n)this.callbacks.push(()=>n(i));return i}defer(i){if(i)this.callbacks.push(i)}move(){let i=new gg;return i.callbacks=this.callbacks,this.callbacks=[],i}dispose(){return this[og.DisposableSymbols.dispose]()}_error;_iterateCallbacks(){let i=this.callbacks.pop();if(i){try{i()}catch(n){this._error=this._error?new jN(n,this._error):n}return this._iterateCallbacks()}}[og.DisposableSymbols.dispose](){if(this._iterateCallbacks(),this._error){let i=this._error;throw this._error=void 0,i}}[Symbol.toStringTag]="DisposableStack"}eb.PonyfillDisposableStack=gg});var sb=P((hg)=>{Object.defineProperty(hg,"__esModule",{value:!0});hg.SuppressedError=hg.AsyncDisposableStack=hg.DisposableStack=void 0;var UN=rg(),NN=Zb(),zN=db(),WN=Su();hg.DisposableStack=globalThis.DisposableStack||zN.PonyfillDisposableStack;hg.AsyncDisposableStack=globalThis.AsyncDisposableStack||NN.PonyfillAsyncDisposableStack;hg.SuppressedError=globalThis.SuppressedError||WN.PonyfillSuppressedError;UN.__exportStar(Ct(),hg)});var Bu=P((t1)=>{Object.defineProperty(t1,"__esModule",{value:!0});t1.PonyfillIteratorObject=void 0;var i1=T("node:util"),EN=sb(),HN=Ci();class n1{iterableIterator;[Symbol.toStringTag]="IteratorObject";constructor(i,n){this.iterableIterator=i,this[Symbol.toStringTag]=n}*map(i){let n=0;for(let r of this.iterableIterator)yield i(r,n++);return}*filter(i){let n=0;for(let r of this.iterableIterator)if(i(r,n++))yield r;return}reduce(i,n){let r=0,u=n;for(let t of this.iterableIterator)u=i(u,t,r++);return u}forEach(i){let n=0;for(let r of this.iterableIterator)i(r,n++)}*take(i){let n=0;for(let r of this.iterableIterator){if(n>=i)break;yield r,n++}return}*drop(i){let n=0;for(let r of this.iterableIterator){if(n>=i)yield r;n++}return}*flatMap(i){let n=0;for(let r of this.iterableIterator){let u=i(r,n++);if(HN.isIterable(u))for(let t of u)yield t;else for(let t of{[Symbol.iterator]:()=>u})yield t}return}some(i){let n=0;for(let r of this.iterableIterator)if(i(r,n++))return!0;return!1}every(i){let n=0;for(let r of this.iterableIterator)if(!i(r,n++))return!1;return!0}find(i){let n=0;for(let r of this.iterableIterator)if(i(r,n++))return r;return}toArray(){return Array.from(this.iterableIterator)}[EN.DisposableSymbols.dispose](){this.iterableIterator.return?.()}next(...[i]){return this.iterableIterator.next(i)}[Symbol.iterator](){return this}[Symbol.for("nodejs.util.inspect.custom")](){let i={};return this.forEach((n,r)=>{let u=i1.inspect(n);i[r]=u.includes(",")?u.split(",").map((t)=>t.trim()):u}),`${this[Symbol.toStringTag]} ${i1.inspect(i)}`}}t1.PonyfillIteratorObject=n1});var lg=P((g1)=>{Object.defineProperty(g1,"__esModule",{value:!0});g1.PonyfillFormData=void 0;g1.getStreamFromFormData=qN;var Zn=T("node:buffer"),_g=Bu(),GN=Ut();class o1{map=new Map;append(i,n,r){let u=this.map.get(i);if(!u)u=[],this.map.set(i,u);let t=c1(n)?u1(i,n,r):n;u.push(t)}delete(i){this.map.delete(i)}get(i){let n=this.map.get(i);return n?n[0]:null}getAll(i){return this.map.get(i)||[]}has(i){return this.map.has(i)}set(i,n,r){let u=c1(n)?u1(i,n,r):n;this.map.set(i,[u])}[Symbol.iterator](){return this._entries()}*_entries(){for(let[i,n]of this.map)for(let r of n)yield[i,r]}entries(){return new _g.PonyfillIteratorObject(this._entries(),"FormDataIterator")}_keys(){return this.map.keys()}keys(){return new _g.PonyfillIteratorObject(this._keys(),"FormDataIterator")}*_values(){for(let i of this.map.values())for(let n of i)yield n}values(){return new _g.PonyfillIteratorObject(this._values(),"FormDataIterator")}forEach(i){for(let[n,r]of this)i(r,n,this)}}g1.PonyfillFormData=o1;function qN(i,n="---"){let r,u=!1,t,c=!1;function g(h){let{done:_,value:l}=r.next();if(_)return h.enqueue(Zn.Buffer.from(`\\r\n--${n}--\\r\n`)),h.close();if(c)h.enqueue(Zn.Buffer.from(`\\r\n--${n}\\r\n`));if(l){let[$,w]=l;if(typeof w==="string")h.enqueue(Zn.Buffer.from(`Content-Disposition: form-data; name="${$}"\\r\n\\r\n`)),h.enqueue(Zn.Buffer.from(w));else{let b="";if(w.name)b=`; filename="${w.name}"`;h.enqueue(Zn.Buffer.from(`Content-Disposition: form-data; name="${$}"${b}\\r\n`)),h.enqueue(Zn.Buffer.from(`Content-Type: ${w.type||"application/octet-stream"}\\r\n\\r\n`)),t=w.stream()[Symbol.asyncIterator]()}c=!0}}return new GN.PonyfillReadableStream({start:()=>{r=i.entries()},pull:(h)=>{if(!u)return u=!0,h.enqueue(Zn.Buffer.from(`--${n}\\r\n`));if(t)return t.next().then(({done:_,value:l})=>{if(_)t=void 0;if(l)return h.enqueue(l);else return g(h)});return g(h)},cancel:(h)=>{r?.return?.(h),t?.return?.(h)}})}function u1(i,n,r){return Object.defineProperty(n,"name",{configurable:!0,enumerable:!0,value:r||n.name||i}),n}function c1(i){return i?.arrayBuffer!=null}});var Vu=P(($1)=>{Object.defineProperty($1,"__esModule",{value:!0});$1.PonyfillBody=void 0;var tn=T("node:buffer"),bn=T("node:stream"),LN=kw(),Ku=Qn(),zt=Iu(),IN=ng(),_1=lg(),wn=Ut(),Wi=Ci(),wi;(function(i){i.ReadableStream="ReadableStream",i.Blob="Blob",i.FormData="FormData",i.String="String",i.Readable="Readable",i.Buffer="Buffer",i.AsyncIterable="AsyncIterable"})(wi||(wi={}));class l1{bodyInit;options;bodyUsed=!1;contentType=null;contentLength=null;constructor(i,n={}){this.bodyInit=i,this.options=n;let{bodyFactory:r,contentType:u,contentLength:t,bodyType:c,buffer:g}=YN(i);this._bodyFactory=r,this.contentType=u,this.contentLength=t,this.bodyType=c,this._buffer=g,this._signal=n.signal}bodyType;_bodyFactory=()=>null;_generatedBody=null;_buffer;_signal;generateBody(){if(this._generatedBody?.readable?.destroyed&&this._buffer)this._generatedBody.readable=bn.Readable.from(this._buffer);if(this._generatedBody)return this._generatedBody;let i=this._bodyFactory();return this._generatedBody=i,i}handleContentLengthHeader(i=!1){let n=this.headers.get("content-type");if(!n){if(this.contentType)this.headers.set("content-type",this.contentType)}else this.contentType=n;let r=this.headers.get("content-length");if(i&&this.bodyInit==null&&!r)this.contentLength=0,this.headers.set("content-length","0");if(!r){if(this.contentLength)this.headers.set("content-length",this.contentLength.toString())}else this.contentLength=parseInt(r,10)}get body(){let i=this.generateBody();if(i!=null){let n=i,r=i.readable;return new Proxy(i.readable,{get(u,t){if(t in n){let c=n[t];if(typeof c==="function")return c.bind(n);return c}if(t in r){let c=r[t];if(typeof c==="function")return c.bind(r);return c}}})}return null}_chunks=null;_doCollectChunksFromReadableJob(){if(this.bodyType===wi.AsyncIterable){if(Array.fromAsync)return Ku.handleMaybePromise(()=>Array.fromAsync(this.bodyInit),(c)=>{return this._chunks=c,this._chunks});let r=this.bodyInit[Symbol.asyncIterator](),u=[],t=()=>Ku.handleMaybePromise(()=>r.next(),({value:c,done:g})=>{if(c)u.push(c);if(!g)return t();return this._chunks=u,this._chunks});return t()}let i=this.generateBody();if(!i)return this._chunks=[],Wi.fakePromise(this._chunks);if(i.readable.destroyed)return Wi.fakePromise(this._chunks=[]);let n=[];return new Promise((r,u)=>{i.readable.on("data",(t)=>{n.push(t)}),i.readable.once("error",u),i.readable.once("end",()=>{r(this._chunks=n)})})}_collectChunksFromReadable(){if(this._chunks)return Wi.fakePromise(this._chunks);return this._chunks||=this._doCollectChunksFromReadableJob(),this._chunks}_blob=null;blob(){if(this._blob)return Wi.fakePromise(this._blob);if(this.bodyType===wi.String)this._text=this.bodyInit,this._blob=new zt.PonyfillBlob([this._text],{type:this.contentType||"text/plain;charset=UTF-8",size:this.contentLength});if(this.bodyType===wi.Blob)return this._blob=this.bodyInit,Wi.fakePromise(this._blob);if(this._buffer)return this._blob=new zt.PonyfillBlob([this._buffer],{type:this.contentType||"",size:this.contentLength}),Wi.fakePromise(this._blob);return Wi.fakePromise(Ku.handleMaybePromise(()=>this._collectChunksFromReadable(),(i)=>{return this._blob=new zt.PonyfillBlob(i,{type:this.contentType||"",size:this.contentLength}),this._blob}))}_formData=null;formData(i){if(this._formData)return Wi.fakePromise(this._formData);if(this.bodyType===wi.FormData)return this._formData=this.bodyInit,Wi.fakePromise(this._formData);if(this._formData=new _1.PonyfillFormData,this.generateBody()==null)return Wi.fakePromise(this._formData);let r={...this.options.formDataLimits,...i?.formDataLimits};return new Promise((u,t)=>{let c=this.body?.readable;if(!c)return t(new Error("No stream available"));let g=null,h=new LN.Busboy({headers:{"content-length":typeof this.contentLength==="number"?this.contentLength.toString():this.contentLength||"","content-type":this.contentType||""},limits:r,defCharset:"utf-8"});if(this._signal)bn.addAbortSignal(this._signal,h);let _=!1,l=($)=>{if(_)return;if(_=!0,c.unpipe(h),h.destroy(),g)g.destroy(),g=null;if($)t($);else u(this._formData)};c.on("error",l),h.on("field",($,w,b,v)=>{if(b)return l(new Error(`Field name size exceeded: ${r?.fieldNameSize} bytes`));if(v)return l(new Error(`Field value size exceeded: ${r?.fieldSize} bytes`));this._formData.set($,w)}),h.on("file",($,w,b,v,f)=>{g=w;let U=[];w.on("data",(z)=>{U.push(z)}),w.on("error",l),w.on("limit",()=>{l(new Error(`File size limit exceeded: ${r?.fileSize} bytes`))}),w.on("close",()=>{if(w.truncated)l(new Error(`File size limit exceeded: ${r?.fileSize} bytes`));g=null;let z=new IN.PonyfillFile(U,b,{type:f});this._formData.set($,z)})}),h.on("fieldsLimit",()=>{l(new Error(`Fields limit exceeded: ${r?.fields}`))}),h.on("filesLimit",()=>{l(new Error(`Files limit exceeded: ${r?.files}`))}),h.on("partsLimit",()=>{l(new Error(`Parts limit exceeded: ${r?.parts}`))}),h.on("end",l),h.on("finish",l),h.on("close",l),h.on("error",l),c.pipe(h)})}buffer(){if(this._buffer)return Wi.fakePromise(this._buffer);if(this._text)return this._buffer=tn.Buffer.from(this._text,"utf-8"),Wi.fakePromise(this._buffer);if(this.bodyType===wi.String)return this.text().then((i)=>{return this._text=i,this._buffer=tn.Buffer.from(i,"utf-8"),this._buffer});if(this.bodyType===wi.Blob){if(zt.hasBufferMethod(this.bodyInit))return this.bodyInit.buffer().then((i)=>{return this._buffer=i,this._buffer});if(zt.hasBytesMethod(this.bodyInit))return this.bodyInit.bytes().then((i)=>{return this._buffer=tn.Buffer.from(i),this._buffer});if(zt.hasArrayBufferMethod(this.bodyInit))return this.bodyInit.arrayBuffer().then((i)=>{return this._buffer=tn.Buffer.from(i,void 0,i.byteLength),this._buffer})}return Wi.fakePromise(Ku.handleMaybePromise(()=>this._collectChunksFromReadable(),(i)=>{if(i.length===1)return this._buffer=i[0],this._buffer;return this._buffer=tn.Buffer.concat(i),this._buffer}))}bytes(){return this.buffer()}arrayBuffer(){return this.buffer()}_json=null;json(){if(this._json)return Wi.fakePromise(this._json);return this.text().then((i)=>{try{this._json=JSON.parse(i)}catch(n){if(n instanceof SyntaxError)n.message+=`, "${i}" is not valid JSON`;throw n}return this._json})}_text=null;text(){if(this._text)return Wi.fakePromise(this._text);if(this.bodyType===wi.String)return this._text=this.bodyInit,Wi.fakePromise(this._text);return this.buffer().then((i)=>{return this._text=i.toString("utf-8"),this._text})}}$1.PonyfillBody=l1;function YN(i){if(i==null)return{bodyFactory:()=>null,contentType:null,contentLength:null};if(typeof i==="string"){let n=tn.Buffer.byteLength(i);return{bodyType:wi.String,contentType:"text/plain;charset=UTF-8",contentLength:n,bodyFactory(){let r=bn.Readable.from(tn.Buffer.from(i,"utf-8"));return new wn.PonyfillReadableStream(r)}}}if(tn.Buffer.isBuffer(i)){let n=i;return{bodyType:wi.Buffer,contentType:null,contentLength:i.length,buffer:i,bodyFactory(){let r=bn.Readable.from(n);return new wn.PonyfillReadableStream(r)}}}if(Wi.isArrayBufferView(i)){let n=tn.Buffer.from(i.buffer,i.byteOffset,i.byteLength);return{bodyType:wi.Buffer,contentLength:i.byteLength,contentType:null,buffer:n,bodyFactory(){let r=bn.Readable.from(n);return new wn.PonyfillReadableStream(r)}}}if(i instanceof wn.PonyfillReadableStream&&i.readable!=null){let n=i;return{bodyType:wi.ReadableStream,bodyFactory:()=>n,contentType:null,contentLength:null}}if(mN(i)){let n=i;return{bodyType:wi.Blob,contentType:i.type,contentLength:i.size,bodyFactory(){return n.stream()}}}if(i instanceof ArrayBuffer){let n=i.byteLength,r=tn.Buffer.from(i,void 0,i.byteLength);return{bodyType:wi.Buffer,contentType:null,contentLength:n,buffer:r,bodyFactory(){let u=bn.Readable.from(r);return new wn.PonyfillReadableStream(u)}}}if(i instanceof bn.Readable)return{bodyType:wi.Readable,contentType:null,contentLength:null,bodyFactory(){return new wn.PonyfillReadableStream(i)}};if(SN(i))return{bodyType:wi.String,contentType:"application/x-www-form-urlencoded;charset=UTF-8",contentLength:null,bodyFactory(){return new wn.PonyfillReadableStream(bn.Readable.from(i.toString()))}};if(QN(i)){let n=Math.random().toString(36).substr(2),r=`multipart/form-data; boundary=${n}`;return{bodyType:wi.FormData,contentType:r,contentLength:null,bodyFactory(){return _1.getStreamFromFormData(i,n)}}}if(AN(i))return{contentType:null,contentLength:null,bodyFactory(){return new wn.PonyfillReadableStream(i)}};if(i[Symbol.iterator]||i[Symbol.asyncIterator])return{contentType:null,contentLength:null,bodyType:wi.AsyncIterable,bodyFactory(){let n=bn.Readable.from(i);return new wn.PonyfillReadableStream(n)}};throw new Error("Unknown body type")}function QN(i){return i?.forEach!=null}function mN(i){return i?.stream!=null&&typeof i.stream==="function"}function SN(i){return i?.sort!=null}function AN(i){return i?.getReader!=null}});var Mu=P((v1)=>{Object.defineProperty(v1,"__esModule",{value:!0});v1.PonyfillHeaders=void 0;v1.isHeadersLike=mn;var BN=T("node:util"),$g=Bu();function mn(i){return i?.get&&i?.forEach}class b1{headersInit;_map;objectNormalizedKeysOfHeadersInit=[];objectOriginalKeysOfHeadersInit=[];_setCookies;constructor(i){this.headersInit=i}_get(i){let n=i.toLowerCase();if(n==="set-cookie"&&this._setCookies?.length)return this._setCookies.join(", ");if(this._map)return this._map.get(n)||null;if(this.headersInit==null)return null;if(Array.isArray(this.headersInit)){let r=this.headersInit.filter(([u])=>u.toLowerCase()===n);if(r.length===0)return null;if(r.length===1)return r[0][1];return r.map(([,u])=>u).join(", ")}else if(mn(this.headersInit))return this.headersInit.get(n);else{let r=this.headersInit[i]||this.headersInit[n];if(r!=null)return r;if(!this.objectNormalizedKeysOfHeadersInit.length)Object.keys(this.headersInit).forEach((c)=>{this.objectOriginalKeysOfHeadersInit.push(c),this.objectNormalizedKeysOfHeadersInit.push(c.toLowerCase())});let u=this.objectNormalizedKeysOfHeadersInit.indexOf(n);if(u===-1)return null;let t=this.objectOriginalKeysOfHeadersInit[u];return this.headersInit[t]}}getMap(){if(!this._map)if(this._setCookies||=[],this.headersInit!=null)if(Array.isArray(this.headersInit)){this._map=new Map;for(let[i,n]of this.headersInit){let r=i.toLowerCase();if(r==="set-cookie"){this._setCookies.push(n);continue}this._map.set(r,n)}}else if(mn(this.headersInit))this._map=new Map,this.headersInit.forEach((i,n)=>{if(n==="set-cookie"){this._setCookies||=[],this._setCookies.push(i);return}this._map.set(n,i)});else{this._map=new Map;for(let i in this.headersInit){let n=this.headersInit[i];if(n!=null){let r=i.toLowerCase();if(r==="set-cookie"){this._setCookies||=[],this._setCookies.push(n);continue}this._map.set(r,n)}}}else this._map=new Map;return this._map}append(i,n){let r=i.toLowerCase();if(r==="set-cookie"){this._setCookies||=[],this._setCookies.push(n);return}let u=this.getMap().get(r),t=u?`${u}, ${n}`:n;this.getMap().set(r,t)}get(i){let n=this._get(i);if(n==null)return null;return n.toString()}has(i){if(i.toLowerCase()==="set-cookie")return!!this._setCookies?.length;return!!this._get(i)}set(i,n){let r=i.toLowerCase();if(r==="set-cookie"){this._setCookies=[n];return}if(!this._map&&this.headersInit!=null)if(Array.isArray(this.headersInit)){let u=this.headersInit.find(([t])=>t.toLowerCase()===r);if(u)u[1]=n;else this.headersInit.push([r,n]);return}else if(mn(this.headersInit)){this.headersInit.set(r,n);return}else{this.headersInit[r]=n;return}this.getMap().set(r,n)}delete(i){let n=i.toLowerCase();if(n==="set-cookie"){this._setCookies=[];return}this.getMap().delete(n)}forEach(i){if(this._setCookies?.forEach((n)=>{i(n,"set-cookie",this)}),!this._map){if(this.headersInit){if(Array.isArray(this.headersInit)){this.headersInit.forEach(([n,r])=>{i(r,n,this)});return}if(mn(this.headersInit)){this.headersInit.forEach(i);return}Object.entries(this.headersInit).forEach(([n,r])=>{if(r!=null)i(r,n,this)})}return}this.getMap().forEach((n,r)=>{i(n,r,this)})}*_keys(){if(this._setCookies?.length)yield"set-cookie";if(!this._map){if(this.headersInit){if(Array.isArray(this.headersInit)){yield*this.headersInit.map(([i])=>i)[Symbol.iterator]();return}if(mn(this.headersInit)){yield*this.headersInit.keys();return}yield*Object.keys(this.headersInit)[Symbol.iterator]();return}}yield*this.getMap().keys()}keys(){return new $g.PonyfillIteratorObject(this._keys(),"HeadersIterator")}*_values(){if(this._setCookies?.length)yield*this._setCookies;if(!this._map){if(this.headersInit){if(Array.isArray(this.headersInit)){yield*this.headersInit.map(([,i])=>i)[Symbol.iterator]();return}if(mn(this.headersInit)){yield*this.headersInit.values();return}yield*Object.values(this.headersInit)[Symbol.iterator]();return}}yield*this.getMap().values()}values(){return new $g.PonyfillIteratorObject(this._values(),"HeadersIterator")}*_entries(){if(this._setCookies?.length)yield*this._setCookies.map((i)=>["set-cookie",i]);if(!this._map){if(this.headersInit){if(Array.isArray(this.headersInit)){yield*this.headersInit;return}if(mn(this.headersInit)){yield*this.headersInit.entries();return}yield*Object.entries(this.headersInit);return}}yield*this.getMap().entries()}entries(){return new $g.PonyfillIteratorObject(this._entries(),"HeadersIterator")}getSetCookie(){if(!this._setCookies)this.getMap();return this._setCookies}[Symbol.iterator](){return this.entries()}[Symbol.for("nodejs.util.inspect.custom")](){let i={};return this.forEach((n,r)=>{if(r==="set-cookie")i["set-cookie"]=this._setCookies||[];else i[r]=n?.includes(",")?n.split(",").map((u)=>u.trim()):n}),`Headers ${BN.inspect(i)}`}}v1.PonyfillHeaders=b1});var et=P((O1)=>{Object.defineProperty(O1,"__esModule",{value:!0});O1.PonyfillResponse=void 0;var VN=T("node:http"),MN=Vu(),wg=Mu(),Rt="application/json; charset=utf-8";class Zt extends MN.PonyfillBody{headers;constructor(i,n){super(i||null,n);this.headers=n?.headers&&wg.isHeadersLike(n.headers)?n.headers:new wg.PonyfillHeaders(n?.headers),this.status=n?.status||200,this.statusText=n?.statusText||VN.STATUS_CODES[this.status]||"OK",this.url=n?.url||"",this.redirected=n?.redirected||!1,this.type=n?.type||"default",this.handleContentLengthHeader()}get ok(){return this.status>=200&&this.status<300}status;statusText;url;redirected;type;clone(){return this}static error(){return new Zt(null,{status:500,statusText:"Internal Server Error"})}static redirect(i,n=302){if(n<300||n>399)throw new RangeError("Invalid status code");return new Zt(null,{headers:{location:i},status:n})}static json(i,n){let r=JSON.stringify(i);if(!n)n={headers:{"content-type":Rt,"content-length":Buffer.byteLength(r).toString()}};else if(!n.headers)n.headers={"content-type":Rt,"content-length":Buffer.byteLength(r).toString()};else if(wg.isHeadersLike(n.headers)){if(!n.headers.has("content-type"))n.headers.set("content-type",Rt);if(!n.headers.has("content-length"))n.headers.set("content-length",Buffer.byteLength(r).toString())}else if(Array.isArray(n.headers)){let u=!1,t=!1;for(let[c]of n.headers){if(t&&u)break;if(!u&&c.toLowerCase()==="content-type")u=!0;else if(!t&&c.toLowerCase()==="content-length")t=!0}if(!u)n.headers.push(["content-type",Rt]);if(!t)n.headers.push(["content-length",Buffer.byteLength(r).toString()])}else if(typeof n.headers==="object"){if(n.headers?.["content-type"]==null)n.headers["content-type"]=Rt;if(n.headers?.["content-length"]==null)n.headers["content-length"]=Buffer.byteLength(r).toString()}return new Zt(r,n)}[Symbol.toStringTag]="Response"}O1.PonyfillResponse=Zt});var z1=P((N1)=>{Object.defineProperty(N1,"__esModule",{value:!0});N1.fetchCurl=yN;var U1=T("node:stream"),xN=T("node:tls"),FN=Qn(),PN=et(),bg=Ci();function yN(i){let{Curl:n,CurlFeature:r,CurlPause:u,CurlProgressFunc:t}=globalThis.libcurl,c=new n;if(c.enable(r.NoDataParsing),c.setOpt("URL",i.url),process.env.NODE_TLS_REJECT_UNAUTHORIZED==="0")c.setOpt("SSL_VERIFYPEER",!1);if(process.env.NODE_EXTRA_CA_CERTS)c.setOpt("CAINFO",process.env.NODE_EXTRA_CA_CERTS);else c.setOpt("CAINFO_BLOB",xN.rootCertificates.join(`\n`));c.enable(r.StreamResponse);let g;if(i._signal===null)g=void 0;else if(i._signal)g=i._signal;if(c.setStreamProgressCallback(function(){return g?.aborted?process.env.DEBUG?t.Continue:1:0}),i.bodyType==="String")c.setOpt("POSTFIELDS",i.bodyInit);else{let v=i.body!=null?bg.isNodeReadable(i.body)?i.body:U1.Readable.from(i.body):null;if(v)c.setOpt("UPLOAD",!0),c.setUploadStream(v)}if(process.env.DEBUG)c.setOpt("VERBOSE",!0);c.setOpt("TRANSFER_ENCODING",!1),c.setOpt("HTTP_TRANSFER_DECODING",!0),c.setOpt("FOLLOWLOCATION",i.redirect==="follow"),c.setOpt("MAXREDIRS",20),c.setOpt("ACCEPT_ENCODING",""),c.setOpt("CUSTOMREQUEST",i.method);let h=i.headersSerializer||bg.defaultHeadersSerializer,_,l=h(i.headers,(v)=>{_=Number(v)});if(_!=null)c.setOpt("INFILESIZE",_);c.setOpt("HTTPHEADER",l),c.enable(r.NoHeaderParsing);let $=FN.createDeferredPromise(),w;function b(){if(c.isOpen)try{c.pause(u.Recv)}catch(v){$.reject(v)}}return g?.addEventListener("abort",b,{once:!0}),c.once("end",function v(){try{c.close()}catch(f){$.reject(f)}g?.removeEventListener("abort",b)}),c.once("error",function v(f){if(w&&!w.closed&&!w.destroyed)w.destroy(f);else{if(f.message==="Operation was aborted by an application callback")f.message="The operation was aborted.";$.reject(f)}try{c.close()}catch(U){$.reject(U)}}),c.once("stream",function v(f,U,z){let J=f.pipe(new U1.PassThrough,{end:!0}),j=z.toString("utf8").split(/\\r?\\n|\\r/g).filter((W)=>{if(W&&!W.startsWith("HTTP/")){if(i.redirect==="error"&&W.toLowerCase().includes("location")&&bg.shouldRedirect(U)){if(!f.destroyed)f.resume();J.destroy(),$.reject(new Error("redirect is not allowed"))}return!0}return!1}).map((W)=>W.split(/:\\s(.+)/).slice(0,2)),O=new PN.PonyfillResponse(J,{status:U,headers:j,url:c.getInfo(n.info.REDIRECT_URL)?.toString()||i.url,redirected:Number(c.getInfo(n.info.REDIRECT_COUNT))>0});$.resolve(O),w=J}),setImmediate(()=>{c.perform()}),$.promise}});var pt=P((J1)=>{Object.defineProperty(J1,"__esModule",{value:!0});J1.PonyfillURL=void 0;var kN=rg(),CN=kN.__importDefault(T("node:buffer")),RN=T("node:crypto"),W1=globalThis.URL;class D1 extends W1{static blobRegistry=new Map;static createObjectURL(i){let n=`blob:whatwgnode:${RN.randomUUID()}`;return this.blobRegistry.set(n,i),n}static revokeObjectURL(i){if(!this.blobRegistry.has(i))W1.revokeObjectURL(i);else this.blobRegistry.delete(i)}static getBlobFromURL(i){return this.blobRegistry.get(i)||CN.default?.resolveObjectURL?.(i)}}J1.PonyfillURL=D1});var xu=P((q1)=>{Object.defineProperty(q1,"__esModule",{value:!0});q1.PonyfillRequest=void 0;var ZN=T("node:http"),eN=T("node:https"),pN=Vu(),H1=Mu(),dN=pt();function aN(i){return i[Symbol.toStringTag]==="Request"}function sN(i){return i?.href!=null}class G1 extends pN.PonyfillBody{constructor(i,n){let r,u,t=null,c;if(typeof i==="string")r=i;else if(sN(i))u=i;else if(aN(i)){if(i._parsedUrl)u=i._parsedUrl;else if(i._url)r=i._url;else r=i.url;t=i.body,c=i}if(n!=null)t=n.body||null,c=n;super(t,c);if(this._url=r,this._parsedUrl=u,this.cache=c?.cache||"default",this.credentials=c?.credentials||"same-origin",this.headers=c?.headers&&H1.isHeadersLike(c.headers)?c.headers:new H1.PonyfillHeaders(c?.headers),this.integrity=c?.integrity||"",this.keepalive=c?.keepalive!=null?c?.keepalive:!1,this.method=c?.method?.toUpperCase()||"GET",this.mode=c?.mode||"cors",this.redirect=c?.redirect||"follow",this.referrer=c?.referrer||"about:client",this.referrerPolicy=c?.referrerPolicy||"no-referrer",this.headersSerializer=c?.headersSerializer,this.duplex=c?.duplex||"half",this.destination="document",this.priority="auto",this.method!=="GET"&&this.method!=="HEAD")this.handleContentLengthHeader(!0);if(c?.agent!=null){let g=u?.protocol||r||this.url;if(c.agent===!1)this.agent=!1;else if(g.startsWith("http:")&&c.agent instanceof ZN.Agent)this.agent=c.agent;else if(g.startsWith("https:")&&c.agent instanceof eN.Agent)this.agent=c.agent}}headersSerializer;cache;credentials;destination;headers;integrity;keepalive;method;mode;priority;redirect;referrer;referrerPolicy;_url;get signal(){return this._signal||=new AbortController().signal,this._signal}get url(){if(this._url==null)if(this._parsedUrl)this._url=this._parsedUrl.toString();else throw new TypeError("Invalid URL");return this._url}_parsedUrl;get parsedUrl(){if(this._parsedUrl==null)if(this._url!=null)this._parsedUrl=new dN.PonyfillURL(this._url,"http://localhost");else throw new TypeError("Invalid URL");return this._parsedUrl}duplex;agent;clone(){return this}[Symbol.toStringTag]="Request"}q1.PonyfillRequest=G1});var m1=P((Q1)=>{Object.defineProperty(Q1,"__esModule",{value:!0});Q1.fetchNodeHttp=Y1;var I1=T("node:http"),iz=T("node:https"),L1=T("node:stream"),Fu=T("node:zlib"),nz=Qn(),tz=xu(),rz=et(),uz=pt(),en=Ci();function cz(i){if(i.startsWith("http:"))return I1.request;else if(i.startsWith("https:"))return iz.request;throw new Error(`Unsupported protocol: ${i.split(":")[0]||i}`)}function Y1(i){return new Promise((n,r)=>{try{let u=cz(i.parsedUrl?.protocol||i.url),c=(i.headersSerializer||en.getHeadersObj)(i.headers);c["accept-encoding"]||="gzip, deflate, br",c["user-agent"]||="node";let g;if(i._signal==null)g=void 0;else if(i._signal)g=i._signal;let h;if(i.parsedUrl)h=u(i.parsedUrl,{method:i.method,headers:c,signal:g,agent:i.agent});else h=u(i.url,{method:i.method,headers:c,signal:g,agent:i.agent});if(h.once("error",r),h.once("response",(_)=>{let l;switch(_.headers["content-encoding"]){case"x-gzip":case"gzip":l=Fu.createGunzip();break;case"x-deflate":case"deflate":l=Fu.createInflate();break;case"x-deflate-raw":case"deflate-raw":l=Fu.createInflateRaw();break;case"br":l=Fu.createBrotliDecompress();break}if(_.headers.location&&en.shouldRedirect(_.statusCode)){if(i.redirect==="error"){let f=new Error("Redirects are not allowed");r(f),_.resume();return}if(i.redirect==="follow"){let f=new uz.PonyfillURL(_.headers.location,i.parsedUrl||i.url),U=Y1(new tz.PonyfillRequest(f,i));n(U.then((z)=>{return z.redirected=!0,z})),_.resume();return}}l||=new L1.PassThrough,en.pipeThrough({src:_,dest:l,signal:g,onError:(f)=>{if(!_.destroyed)_.destroy(f);if(!l.destroyed)l.destroy(f);r(f)}});let w=_.statusCode||200,b=_.statusMessage||I1.STATUS_CODES[w];if(b==null)b="";let v=new rz.PonyfillResponse(l||_,{status:w,statusText:b,headers:_.headers,url:i.url,signal:g});n(v)}),i._buffer!=null)nz.handleMaybePromise(()=>en.safeWrite(i._buffer,h),()=>en.endStream(h),r);else{let _=i.body!=null?en.isNodeReadable(i.body)?i.body:L1.Readable.from(i.body):null;if(_)_.pipe(h);else en.endStream(h)}}catch(u){r(u)}})}});var V1=P((K1)=>{Object.defineProperty(K1,"__esModule",{value:!0});K1.fetchPonyfill=B1;var gz=T("node:buffer"),Pu=T("node:fs"),hz=T("node:url"),_z=z1(),lz=m1(),$z=xu(),Wt=et(),wz=pt(),S1=Ci(),A1=";base64";async function bz(i){let n=hz.fileURLToPath(i);try{await Pu.promises.access(n,Pu.promises.constants.R_OK);let r=await Pu.promises.stat(n,{bigint:!0}),u=Pu.createReadStream(n);return new Wt.PonyfillResponse(u,{status:200,statusText:"OK",headers:{"content-type":"application/octet-stream","last-modified":r.mtime.toUTCString()}})}catch(r){if(r.code==="ENOENT")return new Wt.PonyfillResponse(null,{status:404,statusText:"Not Found"});else if(r.code==="EACCES")return new Wt.PonyfillResponse(null,{status:403,statusText:"Forbidden"});throw r}}function vz(i){let[n="text/plain",...r]=i.substring(5).split(","),u=decodeURIComponent(r.join(","));if(n.endsWith(A1)){let t=gz.Buffer.from(u,"base64url"),c=n.slice(0,-A1.length);return new Wt.PonyfillResponse(t,{status:200,statusText:"OK",headers:{"content-type":c}})}return new Wt.PonyfillResponse(u,{status:200,statusText:"OK",headers:{"content-type":n}})}function fz(i){let n=wz.PonyfillURL.getBlobFromURL(i);if(!n)throw new TypeError("Invalid Blob URL");return new Wt.PonyfillResponse(n,{status:200,headers:{"content-type":n.type,"content-length":n.size.toString()}})}function Oz(i){return i!=null&&i.href!=null}function B1(i,n){if(typeof i==="string"||Oz(i)){let u=new $z.PonyfillRequest(i,n);return B1(u)}let r=i;if(r.url.startsWith("data:")){let u=vz(r.url);return S1.fakePromise(u)}if(r.url.startsWith("file:"))return bz(r.url);if(r.url.startsWith("blob:")){let u=fz(r.url);return S1.fakePromise(u)}if(globalThis.libcurl&&!r.agent)return _z.fetchCurl(r);return lz.fetchNodeHttp(r)}});var vg=P((F1)=>{Object.defineProperty(F1,"__esModule",{value:!0});F1.PonyfillTextDecoder=F1.PonyfillTextEncoder=void 0;F1.PonyfillBtoa=Nz;var dt=T("node:buffer"),Uz=Ci();class M1{encoding;constructor(i="utf-8"){this.encoding=i}encode(i){return dt.Buffer.from(i,this.encoding)}encodeInto(i,n){let u=this.encode(i).copy(n);return{read:u,written:u}}}F1.PonyfillTextEncoder=M1;class x1{encoding;fatal=!1;ignoreBOM=!1;constructor(i="utf-8",n){if(this.encoding=i,n)this.fatal=n.fatal||!1,this.ignoreBOM=n.ignoreBOM||!1}decode(i){if(dt.Buffer.isBuffer(i))return i.toString(this.encoding);if(Uz.isArrayBufferView(i))return dt.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString(this.encoding);return dt.Buffer.from(i).toString(this.encoding)}}F1.PonyfillTextDecoder=x1;function Nz(i){return dt.Buffer.from(i,"binary").toString("base64")}});var k1=P((y1)=>{Object.defineProperty(y1,"__esModule",{value:!0});y1.PonyfillURLSearchParams=void 0;y1.PonyfillURLSearchParams=globalThis.URLSearchParams});var Og=P((Z1)=>{Object.defineProperty(Z1,"__esModule",{value:!0});Z1.PonyfillWritableStream=void 0;var yu=T("node:events"),fg=T("node:stream"),C1=Qn(),Sn=Ci();class R1{writable;constructor(i){if(i instanceof fg.Writable)this.writable=i;else if(i){let n=new fg.Writable({write(t,c,g){try{let h=i.write?.(t,u);if(h instanceof Promise)h.then(()=>{g()},(_)=>{g(_)});else g()}catch(h){g(h)}},final(t){let c=i.close?.();if(c instanceof Promise)c.then(()=>{t()},(g)=>{t(g)});else t()}});this.writable=n;let r=new AbortController,u={signal:r.signal,error(t){n.destroy(t)}};n.once("error",(t)=>r.abort(t)),n.once("close",()=>r.abort())}else this.writable=new fg.Writable}getWriter(){let i=this.writable;return{get closed(){return yu.once(i,"close")},get desiredSize(){return i.writableLength},get ready(){return yu.once(i,"drain")},releaseLock(){},write(n){let r=Sn.fakePromise();if(n==null)return r;return r.then(()=>Sn.safeWrite(n,i))},close(){if(!i.errored&&i.closed)return Sn.fakePromise();if(i.errored)return C1.fakeRejectPromise(i.errored);return Sn.fakePromise().then(()=>Sn.endStream(i))},abort(n){return i.destroy(n),yu.once(i,"close")}}}close(){if(!this.writable.errored&&this.writable.closed)return Sn.fakePromise();if(this.writable.errored)return C1.fakeRejectPromise(this.writable.errored);return Sn.fakePromise().then(()=>Sn.endStream(this.writable))}abort(i){return this.writable.destroy(i),yu.once(this.writable,"close")}locked=!1}Z1.PonyfillWritableStream=R1});var at=P((d1)=>{Object.defineProperty(d1,"__esModule",{value:!0});d1.PonyfillTransformStream=void 0;var jg=T("node:stream"),Dz=Ut(),Jz=Ci(),Ez=Og();class p1{transform;writable;readable;constructor(i){if(i instanceof jg.Transform)this.transform=i;else if(i){let n={enqueue(u){r.push(u)},error(u){r.destroy(u)},terminate(){Jz.endStream(r)},get desiredSize(){return r.writableLength}},r=new jg.Transform({read(){},write(u,t,c){try{let g=i.transform?.(u,n);if(g instanceof Promise)g.then(()=>{c()},(h)=>{c(h)});else c()}catch(g){c(g)}},final(u){try{let t=i.flush?.(n);if(t instanceof Promise)t.then(()=>{u()},(c)=>{u(c)});else u()}catch(t){u(t)}}});this.transform=r}else this.transform=new jg.Transform;this.writable=new Ez.PonyfillWritableStream(this.transform),this.readable=new Dz.PonyfillReadableStream(this.transform)}}d1.PonyfillTransformStream=p1});var tv=P((iv)=>{Object.defineProperty(iv,"__esModule",{value:!0});iv.PonyfillCompressionStream=void 0;var Tu=T("node:zlib"),Hz=at();class s1 extends Hz.PonyfillTransformStream{static supportedFormats=globalThis.process?.version?.startsWith("v2")?["gzip","deflate","br"]:["gzip","deflate","deflate-raw","br"];constructor(i){switch(i){case"x-gzip":case"gzip":super(Tu.createGzip());break;case"x-deflate":case"deflate":super(Tu.createDeflate());break;case"deflate-raw":super(Tu.createDeflateRaw());break;case"br":super(Tu.createBrotliCompress());break;default:throw new Error(`Unsupported compression format: ${i}`)}}}iv.PonyfillCompressionStream=s1});var ov=P((uv)=>{Object.defineProperty(uv,"__esModule",{value:!0});uv.PonyfillDecompressionStream=void 0;var ku=T("node:zlib"),Gz=at();class rv extends Gz.PonyfillTransformStream{static supportedFormats=globalThis.process?.version?.startsWith("v2")?["gzip","deflate","br"]:["gzip","deflate","deflate-raw","br"];constructor(i){switch(i){case"x-gzip":case"gzip":super(ku.createGunzip());break;case"x-deflate":case"deflate":super(ku.createInflate());break;case"deflate-raw":super(ku.createInflateRaw());break;case"br":super(ku.createBrotliDecompress());break;default:throw new TypeError(`Unsupported compression format: \'${i}\'`)}}}uv.PonyfillDecompressionStream=rv});var bv=P(($v)=>{Object.defineProperty($v,"__esModule",{value:!0});$v.PonyfillTextEncoderStream=$v.PonyfillTextDecoderStream=void 0;var gv=vg(),hv=at();class _v extends hv.PonyfillTransformStream{textDecoder;constructor(i,n){super({transform:(r,u)=>u.enqueue(this.textDecoder.decode(r,{stream:!0}))});this.textDecoder=new gv.PonyfillTextDecoder(i,n)}get encoding(){return this.textDecoder.encoding}get fatal(){return this.textDecoder.fatal}get ignoreBOM(){return this.textDecoder.ignoreBOM}}$v.PonyfillTextDecoderStream=_v;class lv extends hv.PonyfillTransformStream{textEncoder;constructor(i){super({transform:(n,r)=>r.enqueue(this.textEncoder.encode(n))});this.textEncoder=new gv.PonyfillTextEncoder(i)}get encoding(){return this.textEncoder.encoding}encode(i){return this.textEncoder.encode(i)}}$v.PonyfillTextEncoderStream=lv});var fv=P((ti)=>{Object.defineProperty(ti,"__esModule",{value:!0});ti.TextEncoderStream=ti.TextDecoderStream=ti.IteratorObject=ti.DecompressionStream=ti.CompressionStream=ti.TransformStream=ti.WritableStream=ti.URLSearchParams=ti.URL=ti.btoa=ti.TextDecoder=ti.TextEncoder=ti.Blob=ti.FormData=ti.File=ti.ReadableStream=ti.Response=ti.Request=ti.Body=ti.Headers=ti.fetch=void 0;var Xz=V1();Object.defineProperty(ti,"fetch",{enumerable:!0,get:function(){return Xz.fetchPonyfill}});var Lz=Mu();Object.defineProperty(ti,"Headers",{enumerable:!0,get:function(){return Lz.PonyfillHeaders}});var Iz=Vu();Object.defineProperty(ti,"Body",{enumerable:!0,get:function(){return Iz.PonyfillBody}});var Yz=xu();Object.defineProperty(ti,"Request",{enumerable:!0,get:function(){return Yz.PonyfillRequest}});var Qz=et();Object.defineProperty(ti,"Response",{enumerable:!0,get:function(){return Qz.PonyfillResponse}});var mz=Ut();Object.defineProperty(ti,"ReadableStream",{enumerable:!0,get:function(){return mz.PonyfillReadableStream}});var Sz=ng();Object.defineProperty(ti,"File",{enumerable:!0,get:function(){return Sz.PonyfillFile}});var Az=lg();Object.defineProperty(ti,"FormData",{enumerable:!0,get:function(){return Az.PonyfillFormData}});var Bz=Iu();Object.defineProperty(ti,"Blob",{enumerable:!0,get:function(){return Bz.PonyfillBlob}});var Ug=vg();Object.defineProperty(ti,"TextEncoder",{enumerable:!0,get:function(){return Ug.PonyfillTextEncoder}});Object.defineProperty(ti,"TextDecoder",{enumerable:!0,get:function(){return Ug.PonyfillTextDecoder}});Object.defineProperty(ti,"btoa",{enumerable:!0,get:function(){return Ug.PonyfillBtoa}});var Kz=pt();Object.defineProperty(ti,"URL",{enumerable:!0,get:function(){return Kz.PonyfillURL}});var Vz=k1();Object.defineProperty(ti,"URLSearchParams",{enumerable:!0,get:function(){return Vz.PonyfillURLSearchParams}});var Mz=Og();Object.defineProperty(ti,"WritableStream",{enumerable:!0,get:function(){return Mz.PonyfillWritableStream}});var xz=at();Object.defineProperty(ti,"TransformStream",{enumerable:!0,get:function(){return xz.PonyfillTransformStream}});var Fz=tv();Object.defineProperty(ti,"CompressionStream",{enumerable:!0,get:function(){return Fz.PonyfillCompressionStream}});var Pz=ov();Object.defineProperty(ti,"DecompressionStream",{enumerable:!0,get:function(){return Pz.PonyfillDecompressionStream}});var yz=Bu();Object.defineProperty(ti,"IteratorObject",{enumerable:!0,get:function(){return yz.PonyfillIteratorObject}});var vv=bv();Object.defineProperty(ti,"TextDecoderStream",{enumerable:!0,get:function(){return vv.PonyfillTextDecoderStream}});Object.defineProperty(ti,"TextEncoderStream",{enumerable:!0,get:function(){return vv.PonyfillTextEncoderStream}})});var jv=P((H9,Ov)=>{var kz=Do(),ri;Ov.exports=function i(n={}){let r={};if(r.URLPattern=globalThis.URLPattern,!r.URLPattern){let u=gw();r.URLPattern=u.URLPattern}if(n.skipPonyfill||kz())return{fetch:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response,FormData:globalThis.FormData,ReadableStream:globalThis.ReadableStream,WritableStream:globalThis.WritableStream,TransformStream:globalThis.TransformStream,CompressionStream:globalThis.CompressionStream,DecompressionStream:globalThis.DecompressionStream,TextDecoderStream:globalThis.TextDecoderStream,TextEncoderStream:globalThis.TextEncoderStream,Blob:globalThis.Blob,File:globalThis.File,crypto:globalThis.crypto,btoa:globalThis.btoa,TextEncoder:globalThis.TextEncoder,TextDecoder:globalThis.TextDecoder,URLPattern:r.URLPattern,URL:globalThis.URL,URLSearchParams:globalThis.URLSearchParams};if(ri||=fv(),r.fetch=ri.fetch,r.Request=ri.Request,r.Response=ri.Response,r.Headers=ri.Headers,r.FormData=ri.FormData,r.ReadableStream=ri.ReadableStream,r.URL=ri.URL,r.URLSearchParams=ri.URLSearchParams,r.WritableStream=ri.WritableStream,r.TransformStream=ri.TransformStream,r.CompressionStream=ri.CompressionStream,r.DecompressionStream=ri.DecompressionStream,r.TextDecoderStream=ri.TextDecoderStream,r.TextEncoderStream=ri.TextEncoderStream,r.Blob=ri.Blob,r.File=ri.File,r.crypto=globalThis.crypto,r.btoa=ri.btoa,r.TextEncoder=ri.TextEncoder,r.TextDecoder=ri.TextDecoder,n.formDataLimits)r.Body=class u extends ri.Body{constructor(t,c){super(t,{formDataLimits:n.formDataLimits,...c})}},r.Request=class u extends ri.Request{constructor(t,c){super(t,{formDataLimits:n.formDataLimits,...c})}},r.Response=class u extends ri.Response{constructor(t,c){super(t,{formDataLimits:n.formDataLimits,...c})}};if(!r.crypto){let u=T("crypto");r.crypto=u.webcrypto}return r}});var H0="x-blink-invocation-token",G0="INTERNAL_BLINK_API_SERVER_URL",zo="INTERNAL_BLINK_API_SERVER_LISTEN_PORT";import AY from"http";import{resolve as BY}from"node:path";import{createServer as SY,Server as oj}from"node:http";var vu=Symbol.for("@whatwg-node/promise-helpers/FakePromise");function ln(i){return i?.then!=null}function wj(i){let n=i;return n&&n.then&&n.catch&&n.finally}function ji(i,n,r,u){let t=zi().then(i).then(n,r);if(u)t=t.finally(u);return Wo(t)}function zi(i){if(i&&wj(i))return i;if(ln(i))return{then:(n,r)=>zi(i.then(n,r)),catch:(n)=>zi(i.then((r)=>r,n)),finally:(n)=>zi(n?fj(i,n):i),[Symbol.toStringTag]:"Promise"};return{then(n){if(n)try{return zi(n(i))}catch(r){return Mt(r)}return this},catch(){return this},finally(n){if(n)try{return zi(n()).then(()=>i,()=>i)}catch(r){return Mt(r)}return this},[Symbol.toStringTag]:"Promise",__fakePromiseValue:i,[vu]:"resolved"}}function q0(){if(Promise.withResolvers)return Promise.withResolvers();let i,n;return{promise:new Promise(function u(t,c){i=t,n=c}),get resolve(){return i},get reject(){return n}}}function fu(i,n,r){if(i?.length===0)return;let u=i[Symbol.iterator](),t=0;function c(){let{done:g,value:h}=u.next();if(g)return;let _=!1;function l(){_=!0}return ji(function $(){return n(h,l,t++)},function $(w){if(w)r?.push(w);if(_)return;return c()})}return c()}function Mt(i){return{then(n,r){if(r)try{return zi(r(i))}catch(u){return Mt(u)}return this},catch(n){if(n)try{return zi(n(i))}catch(r){return Mt(r)}return this},finally(n){if(n)try{n()}catch(r){return Mt(r)}return this},__fakeRejectError:i,[Symbol.toStringTag]:"Promise",[vu]:"rejected"}}function bj(i){return i?.[vu]==="resolved"}function vj(i){return i?.[vu]==="rejected"}function fj(i,n){if("finally"in i)return i.finally(n);return i.then((r)=>{let u=n();return ln(u)?u.then(()=>r):r},(r)=>{let u=n();if(ln(u))return u.then(()=>{throw r});else throw r})}function Wo(i){if(bj(i))return i.__fakePromiseValue;if(vj(i))throw i.__fakeRejectError;return i}function X0(i,n){let r={...n,...i};for(let u of Object.keys(r))if(u in i&&u in n)r[u]=(t,c)=>i[u](t,()=>n[u](t,c));return r}var L0=(i)=>({fn(n,r){if(!n)return r;return(...u)=>{let t;return n(i,()=>{t=r(...u)}),t}},asyncFn(n,r){if(!n)return r;return(...u)=>{let t;return ji(()=>n(i,()=>{return t=r(...u),ln(t)?t.then(()=>{return}):void 0}),()=>{return t})}}});class yn extends Error{error;suppressed;constructor(i,n,r){super(r);this.error=i,this.suppressed=n,this.name="SuppressedError",Error.captureStackTrace(this,this.constructor)}}var Ji={get dispose(){return Symbol.dispose||Symbol.for("dispose")},get asyncDispose(){return Symbol.asyncDispose||Symbol.for("asyncDispose")}};function Ou(i){return i?.[Ji.dispose]!=null}function I0(i){return i?.[Ji.asyncDispose]!=null}var Oj=globalThis.SuppressedError||yn;class ju{callbacks=[];get disposed(){return this.callbacks.length===0}use(i){if(I0(i))this.callbacks.push(()=>i[Ji.asyncDispose]());else if(Ou(i))this.callbacks.push(()=>i[Ji.dispose]());return i}adopt(i,n){if(n)this.callbacks.push(()=>n(i));return i}defer(i){if(i)this.callbacks.push(i)}move(){let i=new ju;return i.callbacks=this.callbacks,this.callbacks=[],i}disposeAsync(){return this[Ji.asyncDispose]()}_error;_iterateCallbacks(){let i=this.callbacks.pop();if(i)return ji(i,()=>this._iterateCallbacks(),(n)=>{return this._error=this._error?new Oj(n,this._error):n,this._iterateCallbacks()})}[Ji.asyncDispose](){let i=this._iterateCallbacks();if(i?.then)return i.then(()=>{if(this._error){let n=this._error;throw this._error=void 0,n}});if(this._error){let n=this._error;throw this._error=void 0,n}return}[Symbol.toStringTag]="AsyncDisposableStack"}var jj=globalThis.SuppressedError||yn;class Uu{callbacks=[];get disposed(){return this.callbacks.length===0}use(i){if(Ou(i))this.callbacks.push(()=>i[Ji.dispose]());return i}adopt(i,n){if(n)this.callbacks.push(()=>n(i));return i}defer(i){if(i)this.callbacks.push(i)}move(){let i=new Uu;return i.callbacks=this.callbacks,this.callbacks=[],i}dispose(){return this[Ji.dispose]()}_error;_iterateCallbacks(){let i=this.callbacks.pop();if(i){try{i()}catch(n){this._error=this._error?new jj(n,this._error):n}return this._iterateCallbacks()}}[Ji.dispose](){if(this._iterateCallbacks(),this._error){let i=this._error;throw this._error=void 0,i}}[Symbol.toStringTag]="DisposableStack"}var hQ=globalThis.DisposableStack||Uu,Y0=globalThis.AsyncDisposableStack||ju,_Q=globalThis.SuppressedError||yn;var Ng={};Xn(Ng,{fetch:()=>Nv,crypto:()=>mv,createFetch:()=>xv,btoa:()=>Sv,WritableStream:()=>Hv,URLSearchParams:()=>Mv,URLPattern:()=>Kv,URL:()=>Vv,TransformStream:()=>Gv,TextEncoderStream:()=>Iv,TextEncoder:()=>Av,TextDecoderStream:()=>Lv,TextDecoder:()=>Bv,Response:()=>Dv,Request:()=>Wv,ReadableStream:()=>Ev,Headers:()=>zv,FormData:()=>Jv,File:()=>Qv,DecompressionStream:()=>Xv,CompressionStream:()=>qv,Blob:()=>Yv});var Uv=jv(),Cz=Do(),hi=Uv();if(!Cz())try{globalThis.libcurl=globalThis.libcurl||(()=>{throw new Error("Cannot require module "+"node-libcurl");})()}catch(i){}var{fetch:Nv,Headers:zv,Request:Wv,Response:Dv,FormData:Jv,ReadableStream:Ev,WritableStream:Hv,TransformStream:Gv,CompressionStream:qv,DecompressionStream:Xv,TextDecoderStream:Lv,TextEncoderStream:Iv,Blob:Yv,File:Qv,crypto:mv,btoa:Sv,TextEncoder:Av,TextDecoder:Bv,URLPattern:Kv,URL:Vv,URLSearchParams:Mv}=hi,xv=Uv;function Pv(i){return i!=null&&typeof i==="object"&&typeof i[Symbol.asyncIterator]==="function"}function Rz(i){if(i.socket?.localPort)return i.socket?.localPort;let r=(i.headers?.[":authority"]||i.headers?.host)?.split(":")?.[1];if(r)return r;return 80}function Zz(i){if(i.headers?.[":authority"])return i.headers?.[":authority"];if(i.headers?.host)return i.headers?.host;let n=Rz(i);if(i.hostname)return i.hostname+":"+n;let r=i.socket?.localAddress;if(r&&!r?.includes("::")&&!r?.includes("ffff"))return`${r}:${n}`;return"localhost"}function ez(i){let n=Zz(i),r=i.protocol||(i.socket?.encrypted?"https":"http"),u=i.originalUrl||i.url||"/graphql";return`${r}://${n}${u}`}function pz(i){let n=i[Symbol.toStringTag];if(typeof i==="string"||n==="Uint8Array"||n==="Blob"||n==="FormData"||n==="URLSearchParams"||Pv(i))return!0;return!1}function zg(i,n,r,u){let t=i.raw||i.req||i,c=ez(t);if(i.query){let l=new n.URL(c);for(let $ in i.query)l.searchParams.set($,i.query[$]);c=l.toString()}let g=i.headers;if(i.headers?.[":method"]){g={};for(let l in i.headers)if(!l.startsWith(":"))g[l]=i.headers[l]}let h=u?Hg():new AbortController;if(r?.once){let l=()=>{if(!h.signal.aborted)Object.defineProperty(t,"aborted",{value:!0}),h.abort(r.errored??void 0)};r.once("error",l),r.once("close",l),r.once("finish",()=>{r.removeListener("close",l)})}if(i.method==="GET"||i.method==="HEAD")return new n.Request(c,{method:i.method,headers:g,signal:h.signal});let _=i.body;if(_!=null&&Object.keys(_).length>0){if(pz(_))return new n.Request(c,{method:i.method||"GET",headers:g,body:_,signal:h.signal});let l=new n.Request(c,{method:i.method||"GET",headers:g,signal:h.signal});if(!l.headers.get("content-type")?.includes("json"))l.headers.set("content-type","application/json; charset=utf-8");return new Proxy(l,{get:($,w,b)=>{switch(w){case"json":return()=>zi(_);case"text":return()=>zi(JSON.stringify(_));default:if(globalThis.Bun)return Reflect.get($,w);return Reflect.get($,w,b)}}})}return new n.Request(c,{method:i.method,headers:g,signal:h.signal,body:t,duplex:"half"})}function yv(i){return i.read!=null}function Tv(i){return yv(i)}function Wg(i){return i!=null&&i.setHeader!=null&&i.end!=null&&i.once!=null&&i.write!=null}function dz(i){return i!=null&&i.getReader!=null}function kv(i){return i!=null&&i.request!=null&&i.respondWith!=null}function az(i){i?.socket?.setTimeout?.(0),i?.socket?.setNoDelay?.(!0),i?.socket?.setKeepAlive?.(!0)}function pn(i){i.end(null,null,null)}function sz(i,n){let r=!1,u=()=>{r=!0};i.once("error",u),i.once("close",u),i.once("finish",()=>{i.removeListener("close",u),i.removeListener("error",u)});let t=n[Symbol.asyncIterator](),c=()=>t.next().then(({done:g,value:h})=>{if(r||g)return;return ji(()=>st(h,i),()=>r?pn(i):c())});return c()}function st(i,n){if(!n.write(i))return new Promise((u)=>n.once("drain",u))}function Cv(i,n,r,u){if(n.closed||n.destroyed||n.writableEnded)return;if(!i){n.statusCode=404,pn(n);return}if(u&&i.headers?.headersInit&&!Array.isArray(i.headers.headersInit)&&!i.headers.headersInit.get&&!i.headers._map&&!i.headers._setCookies?.length)n.writeHead(i.status,i.statusText,i.headers.headersInit);else{if(n.setHeaders)n.setHeaders(i.headers);else{let g=!1;i.headers.forEach((h,_)=>{if(_==="set-cookie"){if(g)return;g=!0;let l=i.headers.getSetCookie?.();if(l){n.setHeader("set-cookie",l);return}}n.setHeader(_,h)})}n.writeHead(i.status,i.statusText)}if(i.bodyType==="String")return ji(()=>st(i.bodyInit,n),()=>pn(n));let t=i._buffer;if(t)return ji(()=>st(t,n),()=>pn(n));let c=i.body;if(c==null){pn(n);return}if(c[Symbol.toStringTag]==="Uint8Array")return ji(()=>st(c,n),()=>pn(n));if(az(r),yv(c)){n.once("close",()=>{c.destroy()}),c.pipe(n,{end:!0});return}if(dz(c))return iW(r,n,c);if(Pv(c))return sz(n,c)}function iW(i,n,r){let u=r.getReader();i?.once?.("error",(c)=>{u.cancel(c)});function t(){return u.read().then(({done:c,value:g})=>c?pn(n):ji(()=>st(g,n),t))}return t()}function Rv(i){return i!=null&&typeof i==="object"&&(("body"in i)||("cache"in i)||("credentials"in i)||("headers"in i)||("integrity"in i)||("keepalive"in i)||("method"in i)||("mode"in i)||("redirect"in i)||("referrer"in i)||("referrerPolicy"in i)||("signal"in i)||("window"in i))}function dn(...i){let[n,...r]=i.filter((u)=>u!=null&&typeof u==="object");return r.forEach((u)=>{let t=Object.getOwnPropertyNames(u).reduce((c,g)=>{if(Object.getOwnPropertyDescriptor(u,g))c[g]=Object.getOwnPropertyDescriptor(u,g);return c},{});Object.getOwnPropertySymbols(u).forEach((c)=>{let g=Object.getOwnPropertyDescriptor(u,c);if(g?.enumerable)t[c]=g}),Object.defineProperties(n,t)}),n}function Dg(i,n){return new n(i.stack||i.message||i.toString(),{status:i.status||500})}function Jg(i,n){if(i==null){if(n==null)return{};return{waitUntil:n}}return dn(Object.create(i),{waitUntil:n},i)}function Eg(i,n){if(n?.aborted)throw n.reason;if(ln(i)&&n){let u=function(){r.reject(n.reason)},r=q0();return n.addEventListener("abort",u,{once:!0}),i.then(function t(c){r.resolve(c)}).catch(function t(c){r.reject(c)}).finally(()=>{n.removeEventListener("abort",u)}),r.promise}return i}var nW=["SIGINT","exit","SIGTERM"],Cu=new Set,Fv=!1;function tW(){if(Fv)return;Fv=!0;for(let i of nW)globalThis.process.once(i,function n(){return Promise.allSettled([...Cu].map((r)=>!r.disposed&&r.disposeAsync()))})}function Zv(i){if(globalThis.process){if(tW(),!Cu.has(i))Cu.add(i),i.defer(()=>{Cu.delete(i)})}}class ev extends EventTarget{aborted=!1;_onabort=null;_reason;constructor(){super();let i=globalThis.process?.getBuiltinModule?.("node:events");if(i?.kMaxEventTargetListeners)this[i.kMaxEventTargetListeners]=0}throwIfAborted(){if(this._nativeCtrl?.signal?.throwIfAborted)return this._nativeCtrl.signal.throwIfAborted();if(this.aborted)throw this._reason}_nativeCtrl;ensureNativeCtrl(){if(!this._nativeCtrl){let i=this.aborted;if(this._nativeCtrl=new AbortController,i)this._nativeCtrl.abort(this._reason)}return this._nativeCtrl}abort(i){if(this._nativeCtrl?.abort)return this._nativeCtrl?.abort(i);this._reason=i||new DOMException("This operation was aborted","AbortError"),this.aborted=!0,this.dispatchEvent(new Event("abort"))}get signal(){if(this._nativeCtrl?.signal)return this._nativeCtrl.signal;return this}get reason(){if(this._nativeCtrl?.signal)return this._nativeCtrl.signal.reason;return this._reason}get onabort(){if(this._onabort)return this._onabort;return this._onabort}set onabort(i){if(this._nativeCtrl?.signal){this._nativeCtrl.signal.onabort=i;return}if(this._onabort)this.removeEventListener("abort",this._onabort);if(this._onabort=i,i)this.addEventListener("abort",i)}}function Hg(){if(globalThis.Bun||globalThis.Deno)return new AbortController;return new Proxy(new ev,{get(i,n,r){if(n.toString().includes("kDependantSignals")){let u=i.ensureNativeCtrl();return Reflect.get(u.signal,n,u.signal)}return Reflect.get(i,n,r)},set(i,n,r,u){if(n.toString().includes("kDependantSignals")){let t=i.ensureNativeCtrl();return Reflect.set(t.signal,n,r,t.signal)}return Reflect.set(i,n,r,u)},getPrototypeOf(){return AbortSignal.prototype}})}function pv(i){return!!i.onData}function dv({req:i,res:n,fetchAPI:r,controller:u}){let t=i.getMethod(),c,g=[],h=[(W)=>{g.push(W)}],_=(W)=>{for(let E of h)E(W)},l=!1,$=[()=>{l=!0}],w=()=>{for(let W of $)W()};n.onData(function(W,E){if(_(Buffer.from(Buffer.from(W,0,W.byteLength))),E)w()});let b;if(t!=="get"&&t!=="head"){c="half",u.signal.addEventListener("abort",()=>{w()},{once:!0});let W;b=()=>{if(!W)W=new r.ReadableStream({start(E){for(let X of g)E.enqueue(X);if(l){E.close();return}h.push((X)=>{E.enqueue(X)}),$.push(()=>{if(u.signal.reason){E.error(u.signal.reason);return}if(E.desiredSize)E.close()})}});return W}}let v=new r.Headers;i.forEach((W,E)=>{v.append(W,E)});let f=`http://localhost${i.getUrl()}`,U=i.getQuery();if(U)f+=`?${U}`;let z;function J(){if(!b)return null;if(l)return j();return b()}let N=new r.Request(f,{method:t,headers:v,get body(){return J()},signal:u.signal,duplex:c});function j(){if(!z)z=g.length===1?g[0]:Buffer.concat(g);return z}function O(){if(l)return zi(j());return new Promise((W,E)=>{try{$.push(()=>{W(j())})}catch(X){E(X)}})}return Object.defineProperties(N,{body:{get(){return J()},configurable:!0,enumerable:!0},json:{value(){return O().then((W)=>W.toString("utf8")).then((W)=>JSON.parse(W))},configurable:!0,enumerable:!0},text:{value(){return O().then((W)=>W.toString("utf8"))},configurable:!0,enumerable:!0},arrayBuffer:{value(){return O()},configurable:!0,enumerable:!0}}),N}function rW(i,n){return new n.WritableStream({write(r){i.cork(()=>{i.write(r)})},close(){i.cork(()=>{i.end()})}})}function av(i,n,r,u){if(!n){i.writeStatus("404 Not Found"),i.end();return}let t=n._buffer,c=n.bodyType==="String"?n.bodyInit:void 0;if(r.signal.aborted)return;if(i.cork(()=>{i.writeStatus(`${n.status} ${n.statusText}`);for(let[g,h]of n.headers)if(g!=="content-length"){if(g==="set-cookie"){let _=n.headers.getSetCookie?.();if(_){for(let l of _)i.writeHeader(g,l);continue}}i.writeHeader(g,h)}if(c)i.end(c);else if(t)i.end(t);else if(!n.body)i.end()}),c||t||!n.body)return;return r.signal.addEventListener("abort",()=>{if(!n.body?.locked)n.body?.cancel(r.signal.reason)},{once:!0}),n.body.pipeTo(rW(i,u),{signal:r.signal}).catch((g)=>{if(r.signal.aborted)return;throw g})}function uW(i){try{return!!i?.request}catch{return!1}}var cW={};function Gg(i,n){let r=n?.__useSingleWriteHead==null?!0:n.__useSingleWriteHead,u={...Ng,...n?.fetchAPI},t=n?.__useCustomAbortCtrl==null?u.Request!==globalThis.Request:n.__useCustomAbortCtrl,c=typeof i==="function"?i:i.handle,g=[],h=[],_,l=new Set,$;function w(){if(!$){if($=new Y0,n?.disposeOnProcessTerminate)Zv($);$.defer(()=>{if(l.size>0)return Promise.allSettled(l).then(()=>{l.clear()},()=>{l.clear()})})}return $}function b(H){if(ln(H))w(),l.add(H),H.then(()=>{l.delete(H)},(Y)=>{console.error(`Unexpected error while waiting: ${Y.message||Y}`),l.delete(H)})}if(n?.plugins!=null)for(let H of n.plugins){if(H.instrumentation)_=_?X0(_,H.instrumentation):H.instrumentation;if(H.onRequest)g.push(H.onRequest);if(H.onResponse)h.push(H.onResponse);let Y=H[Ji.dispose];if(Y)w().defer(Y);let V=H[Ji.asyncDispose];if(V)w().defer(V);if(H.onDispose)w().defer(H.onDispose)}let v=g.length>0||h.length>0?function H(Y,V){let Q=c,M;if(g.length===0)return Mi();let p=Y.parsedUrl||new Proxy(cW,{get(s,Ti,Di){return p=new u.URL(Y.url,"http://localhost"),Reflect.get(p,Ti,p)}});function li(s){if(h.length===0)return s;return ji(()=>fu(h,(Ti)=>Ti({request:Y,response:s,serverContext:V,setResponse(Di){s=Di},fetchAPI:u})),()=>s)}function Mi(){if(!M)return ji(()=>Q(Y,V),li);return li(M)}return ji(()=>fu(g,(s,Ti)=>s({request:Y,setRequest(Di){Y=Di},serverContext:V,fetchAPI:u,url:p,requestHandler:Q,setRequestHandler(Di){Q=Di},endResponse(Di){if(M=Di,Di)Ti()}})),Mi)}:c;if(_?.request){let H=v;v=(Y,V)=>{return L0({request:Y}).asyncFn(_.request,H)(Y,V)}}function f(H,...Y){let V=Y.length>1?dn(...Y):Y[0]||{};if(!V.waitUntil)V.waitUntil=b;let Q=zg(H,u,void 0,t);return v(Q,V)}function U(H,Y,...V){let Q=Y.raw||Y,M=V.length>1?dn(...V):V[0]||{};if(!M.waitUntil)M.waitUntil=b;let p=zg(H,u,Q,t);return v(p,M)}function z(H,Y,...V){let Q={req:H,res:Y,waitUntil:b};return Wo(zi().then(()=>U(H,Y,Q,...V)).catch((M)=>Dg(M,u.Response)).then((M)=>Cv(M,Y,H,r)).catch((M)=>console.error(`Unexpected error while handling request: ${M.message||M}`)))}function J(H,Y,...V){let Q={res:H,req:Y,waitUntil:b},p=V.filter((Ni)=>Ni!=null).length>0?dn(Q,...V):Q,li=t?Hg():new AbortController,Mi=H.end.bind(H),s=!1;H.end=function(Ni){return s=!0,Mi(Ni)},H.onAborted.bind(H)(function(){li.abort()}),H.onAborted=function(Ni){li.signal.addEventListener("abort",Ni,{once:!0})};let Di=dv({req:Y,res:H,fetchAPI:u,controller:li});return ji(()=>ji(()=>v(Di,p),(Ni)=>Ni,(Ni)=>Dg(Ni,u.Response)),(Ni)=>{if(!li.signal.aborted&&!s)return ji(()=>av(H,Ni,li,u),(di)=>di,(di)=>{console.error(`Unexpected error while handling request: ${di.message||di}`)})})}function N(H,...Y){if(!H.respondWith||!H.request)throw new TypeError(`Expected FetchEvent, got ${H}`);let V=Y.filter((p)=>p!=null),Q=V.length>0?dn({},H,...V):Jg(H),M=v(H.request,Q);H.respondWith(M)}function j(H,...Y){let V=Y.filter((M)=>M!=null),Q=V.length>1?dn({},...V):Jg(V[0],V[0]==null||V[0].waitUntil==null?b:void 0);return v(H,Q)}let O=(H,...Y)=>{if(typeof H==="string"||"href"in H){let[Q,...M]=Y;if(Rv(Q)){let li=new u.Request(H,Q),Mi=j(li,...M),s=Q.signal;if(s)return Eg(Mi,s);return Mi}let p=new u.Request(H);return j(p,...Y)}let V=j(H,...Y);return Eg(V,H.signal)},W=(H,...Y)=>{let[V,...Q]=Y;if(Tv(H)){if(!Wg(V))throw new TypeError(`Expected ServerResponse, got ${V}`);return z(H,V,...Q)}if(pv(H))return J(H,V,...Q);if(Wg(V))throw new TypeError("Got Node response without Node request");if(uW(H)){if(kv(H))return N(H,...Y);return j(H.request,H,...Y)}return O(H,...Y)},E={handleRequest:j,fetch:O,handleNodeRequest:f,handleNodeRequestAndResponse:U,requestListener:z,handleEvent:N,handleUWS:J,handle:W,get disposableStack(){return w()},[Ji.asyncDispose](){if($&&!$.disposed)return $.disposeAsync();return zi()},dispose(){if($&&!$.disposed)return $.disposeAsync();return zi()},waitUntil:b},X=new Proxy(W,{has:(H,Y)=>{return Y in E||Y in W||i&&Y in i},get:(H,Y)=>{if(globalThis.Deno||Y===Symbol.asyncDispose||Y===Symbol.dispose){let M=Reflect.get(E,Y,E);if(M)return M}let V=E[Y];if(V){if(V.bind)return V.bind(E);return V}let Q=W[Y];if(Q){if(Q.bind)return Q.bind(W);return Q}if(i){let M=i[Y];if(M){if(M.bind)return function(...p){let li=i[Y](...p);if(li===i)return X;return li};return M}}},apply(H,Y,V){return W(...V)}});return X}class Ru{baseURL;authToken;constructor(i){this.baseURL=i?.baseURL??"https://blink.so",this.authToken=i?.authToken}async deleteStorage(i){let n=await this.request("DELETE",`/api/agents/me/storage/${encodeURIComponent(i)}`);await this.assertResponseStatus(n,204)}async setStorage(i,n,r){let u=new URLSearchParams;if(r?.ttl)u.set("ttl",r.ttl.toString());let t=await this.request("PUT",`/api/agents/me/storage/${encodeURIComponent(i)}?${u.toString()}`,n);await this.assertResponseStatus(t,204)}async getStorage(i){let n=await this.request("GET",`/api/agents/me/storage/${encodeURIComponent(i)}`);if(n.status===404)return;return await this.assertResponseStatus(n,200),await n.text()}async listStorage(i,n){let r=await this.request("GET","/api/agents/me/storage",JSON.stringify({prefix:i,limit:n?.limit,cursor:n?.cursor}));return await this.assertResponseStatus(r,200),await r.json()}async upsertChat(i){let n=await this.request("PUT",`/api/agents/me/chats/${encodeURIComponent(i)}`);if(n.status!==200&&n.status!==204)await this.assertResponseStatus(n,200);return await n.json()}async sendMessages(i,n){let r=await this.request("POST",`/api/agents/me/chats/${encodeURIComponent(i)}/messages`,JSON.stringify(n));await this.assertResponseStatus(r,204)}async getChat(i){let n=await this.request("GET",`/api/agents/me/chats/${encodeURIComponent(i)}`);if(n.status===404)return;return await this.assertResponseStatus(n,200),await n.json()}async deleteChat(i){let n=await this.request("DELETE",`/api/agents/me/chats/${encodeURIComponent(i)}`);await this.assertResponseStatus(n,204)}async startChat(i){let n=await this.request("POST",`/api/agents/me/chats/${encodeURIComponent(i)}/start`);await this.assertResponseStatus(n,204)}async stopChat(i){let n=await this.request("POST",`/api/agents/me/chats/${encodeURIComponent(i)}/stop`);await this.assertResponseStatus(n,204)}async getMessages(i){let n=await this.request("GET",`/api/agents/me/chats/${encodeURIComponent(i)}/messages`);return await this.assertResponseStatus(n,200),await n.json()}async deleteMessages(i,n){let r=await this.request("POST",`/api/agents/me/chats/${encodeURIComponent(i)}/messages/delete`,JSON.stringify({message_ids:n}));await this.assertResponseStatus(r,204)}async proxyOtlpTraces(i){if(!this.authToken){if((i.headers.get("content-type")?.toLowerCase()||"").includes("application/x-protobuf"))return new Response(new Uint8Array(0),{status:200,headers:{"Content-Type":"application/x-protobuf"}});return new Response(JSON.stringify({}),{status:200,headers:{"Content-Type":"application/json"}})}let n=new Set(["transfer-encoding","content-length","host","connection","keep-alive","proxy-authenticate","proxy-authorization","te","trailer","upgrade"]),r={};return i.headers.forEach((u,t)=>{if(n.has(t.toLowerCase()))return;r[t]=u}),this.request(i.method,"/api/otlp/v1/traces",i.body??void 0,{headers:r})}async assertResponseStatus(i,n){if(i.status===n)return;let r=await i.text();try{let u=JSON.parse(r);if(u.error)throw new Error(u.error);throw new Error(r)}catch(u){throw new Error(`Expected status ${n}, got ${i.status}: ${r}`)}}request(i,n,r,u){let t=new URL(n,this.baseURL),c=new Headers;if(this.authToken)c.set("Authorization",`Bearer ${this.authToken}`);if(typeof r==="string")c.set("Content-Type","application/json");if(u?.headers)for(let[h,_]of Object.entries(u.headers))c.set(h,_);let g;if(u?.timeout)g=AbortSignal.timeout(u.timeout);return fetch(t.toString(),{method:i,headers:c,body:r,signal:g,duplex:r?"half":void 0})}}var Xg=(i)=>{let n=i.split("/");return n[0]===""&&n.shift(),n},sv=(i)=>{let{groups:n,path:r}=oW(i),u=Xg(r);return gW(u,n)},oW=(i)=>{let n=[];return i=i.replace(/\\{[^}]+\\}/g,(r,u)=>{let t=`@${u}`;return n.push([t,r]),t}),{groups:n,path:i}},gW=(i,n)=>{for(let r=n.length-1;r>=0;r--){let[u]=n[r];for(let t=i.length-1;t>=0;t--)if(i[t].includes(u)){i[t]=i[t].replace(u,n[r][1]);break}}return i},Zu={},nf=(i,n)=>{if(i==="*")return"*";let r=i.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);if(r){let u=`${i}#${n}`;return Zu[u]||(r[2]?Zu[u]=n&&n[0]!==":"&&n[0]!=="*"?[u,r[1],RegExp(`^${r[2]}(?=/${n})`)]:[i,r[1],RegExp(`^${r[2]}$`)]:Zu[u]=[i,r[1],!0]),Zu[u]}return null},ir=(i,n)=>{try{return n(i)}catch{return i.replace(/(?:%[0-9A-Fa-f]{2})+/g,(r)=>{try{return n(r)}catch{return r}})}},hW=(i)=>ir(i,decodeURI),Lg=(i)=>{let n=i.url,r=n.indexOf("/",n.indexOf(":")+4),u=r;for(;u<n.length;u++){let t=n.charCodeAt(u);if(t===37){let c=n.indexOf("?",u),g=n.slice(r,c===-1?void 0:c);return hW(g.includes("%25")?g.replace(/%25/g,"%2525"):g)}else if(t===63)break}return n.slice(r,u)},tf=(i)=>{let n=Lg(i);return n.length>1&&n.at(-1)==="/"?n.slice(0,-1):n},an=(i,n,...r)=>(r.length&&(n=an(n,...r)),`${i?.[0]==="/"?"":"/"}${i}${n==="/"?"":`${i?.at(-1)==="/"?"":"/"}${n?.[0]==="/"?n.slice(1):n}`}`),Ig=(i)=>{if(i.charCodeAt(i.length-1)!==63||!i.includes(":"))return null;let n=i.split("/"),r=[],u="";return n.forEach((t)=>{if(t!==""&&!/\\:/.test(t))u+="/"+t;else if(/\\:/.test(t))if(/\\?/.test(t)){r.length===0&&u===""?r.push("/"):r.push(u);let c=t.replace("?","");u+="/"+c,r.push(u)}else u+="/"+t}),r.filter((t,c,g)=>g.indexOf(t)===c)},qg=(i)=>/[%+]/.test(i)?(i.indexOf("+")!==-1&&(i=i.replace(/\\+/g," ")),i.indexOf("%")===-1?i:ir(i,eu)):i,rf=(i,n,r)=>{let u;if(!r&&n&&!/[%+]/.test(n)){let g=i.indexOf(`?${n}`,8);for(g===-1&&(g=i.indexOf(`&${n}`,8));g!==-1;){let h=i.charCodeAt(g+n.length+1);if(h===61){let _=g+n.length+2,l=i.indexOf("&",_);return qg(i.slice(_,l===-1?void 0:l))}else if(h==38||isNaN(h))return"";g=i.indexOf(`&${n}`,g+1)}if(u=/[%+]/.test(i),!u)return}let t={};u??=/[%+]/.test(i);let c=i.indexOf("?",8);for(;c!==-1;){let g=i.indexOf("&",c+1),h=i.indexOf("=",c);h>g&&g!==-1&&(h=-1);let _=i.slice(c+1,h===-1?g===-1?void 0:g:h);if(u&&(_=qg(_)),c=g,_==="")continue;let l;h===-1?l="":(l=i.slice(h+1,g===-1?void 0:g),u&&(l=qg(l))),r?(t[_]&&Array.isArray(t[_])||(t[_]=[]),t[_].push(l)):t[_]??=l}return n?t[n]:t},uf=rf,cf=(i,n)=>rf(i,n,!0),eu=decodeURIComponent,_W=/^[\\w!#$%&\'*.^`|~+-]+$/,lW=/^[ !#-:<-[\\]-~]*$/,Yg=(i,n)=>{if(n&&i.indexOf(n)===-1)return{};let r=i.trim().split(";"),u={};for(let t of r){t=t.trim();let c=t.indexOf("=");if(c===-1)continue;let g=t.substring(0,c).trim();if(n&&n!==g||!_W.test(g))continue;let h=t.substring(c+1).trim();if(h.startsWith(\'"\')&&h.endsWith(\'"\')&&(h=h.slice(1,-1)),lW.test(h)&&(u[g]=h.indexOf("%")===-1?h:ir(h,eu),n))break}return u};var of=(i,n,r)=>(u,t)=>{let c=-1;return g(0);async function g(h){if(h<=c)throw Error("next() called multiple times");c=h;let _,l=!1,$;if(i[h]?($=i[h][0][0],u.req.routeIndex=h):$=h===i.length&&t||void 0,$)try{_=await $(u,()=>g(h+1))}catch(w){if(w instanceof Error&&n)u.error=w,_=await n(w,u),l=!0;else throw w}else u.finalized===!1&&r&&(_=await r(u));return _&&(u.finalized===!1||l)&&(u.res=_),u}},$W=Symbol(),wW=async(i,n=Object.create(null))=>{let{all:r=!1,dot:u=!1}=n,t=(i instanceof lf?i.raw.headers:i.headers).get("Content-Type");return t?.startsWith("multipart/form-data")||t?.startsWith("application/x-www-form-urlencoded")?bW(i,{all:r,dot:u}):{}};async function bW(i,n){let r=await i.formData();return r?vW(r,n):{}}function vW(i,n){let r=Object.create(null);return i.forEach((u,t)=>{n.all||t.endsWith("[]")?fW(r,t,u):r[t]=u}),n.dot&&Object.entries(r).forEach(([u,t])=>{u.includes(".")&&(OW(r,u,t),delete r[u])}),r}var fW=(i,n,r)=>{i[n]===void 0?n.endsWith("[]")?i[n]=[r]:i[n]=r:Array.isArray(i[n])?i[n].push(r):i[n]=[i[n],r]},OW=(i,n,r)=>{let u=i,t=n.split(".");t.forEach((c,g)=>{g===t.length-1?u[c]=r:((!u[c]||typeof u[c]!="object"||Array.isArray(u[c])||u[c]instanceof File)&&(u[c]=Object.create(null)),u=u[c])})},gf=(i)=>ir(i,eu),lf=class{raw;#n;#i;routeIndex=0;path;bodyCache={};constructor(i,n="/",r=[[]]){this.raw=i,this.path=n,this.#i=r,this.#n={}}param(i){return i?this.#r(i):this.#t()}#r(i){let n=this.#i[0][this.routeIndex][1][i],r=this.#u(n);return r&&/\\%/.test(r)?gf(r):r}#t(){let i={},n=Object.keys(this.#i[0][this.routeIndex][1]);for(let r of n){let u=this.#u(this.#i[0][this.routeIndex][1][r]);u!==void 0&&(i[r]=/\\%/.test(u)?gf(u):u)}return i}#u(i){return this.#i[1]?this.#i[1][i]:i}query(i){return uf(this.url,i)}queries(i){return cf(this.url,i)}header(i){if(i)return this.raw.headers.get(i)??void 0;let n={};return this.raw.headers.forEach((r,u)=>{n[u]=r}),n}async parseBody(i){return this.bodyCache.parsedBody??=await wW(this,i)}#c=(i)=>{let{bodyCache:n,raw:r}=this,u=n[i];if(u)return u;let t=Object.keys(n)[0];return t?n[t].then((c)=>(t==="json"&&(c=JSON.stringify(c)),new Response(c)[i]())):n[i]=r[i]()};json(){return this.#c("text").then((i)=>JSON.parse(i))}text(){return this.#c("text")}arrayBuffer(){return this.#c("arrayBuffer")}blob(){return this.#c("blob")}formData(){return this.#c("formData")}addValidatedData(i,n){this.#n[i]=n}valid(i){return this.#n[i]}get url(){return this.raw.url}get method(){return this.raw.method}get[$W](){return this.#i}get matchedRoutes(){return this.#i[0].map(([[,i]])=>i)}get routePath(){return this.#i[0].map(([[,i]])=>i)[this.routeIndex].path}},jW={Stringify:1,BeforeStream:2,Stream:3},UW=(i,n)=>{let r=new String(i);return r.isEscaped=!0,r.callbacks=n,r},$f=async(i,n,r,u,t)=>{typeof i=="object"&&!(i instanceof String)&&(i instanceof Promise||(i=i.toString()),i instanceof Promise&&(i=await i));let c=i.callbacks;if(!c?.length)return Promise.resolve(i);t?t[0]+=i:t=[i];let g=Promise.all(c.map((h)=>h({phase:n,buffer:t,context:u}))).then((h)=>Promise.all(h.filter(Boolean).map((_)=>$f(_,n,!1,u,t))).then(()=>t[0]));return r?UW(await g,c):g},NW="text/plain; charset=UTF-8",Qg=(i,n)=>({"Content-Type":i,...n}),zW=class{#n;#i;env={};#r;finalized=!1;error;#t;#u;#c;#g;#w;#b;#l;#o;#O;constructor(i,n){this.#n=i,n&&(this.#u=n.executionCtx,this.env=n.env,this.#b=n.notFoundHandler,this.#O=n.path,this.#o=n.matchResult)}get req(){return this.#i??=new lf(this.#n,this.#O,this.#o),this.#i}get event(){if(this.#u&&"respondWith"in this.#u)return this.#u;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#u)return this.#u;throw Error("This context has no ExecutionContext")}get res(){return this.#c||=new Response(null,{headers:this.#l??=new Headers})}set res(i){if(this.#c&&i){i=new Response(i.body,i);for(let[n,r]of this.#c.headers.entries())if(n!=="content-type")if(n==="set-cookie"){let u=this.#c.headers.getSetCookie();i.headers.delete("set-cookie");for(let t of u)i.headers.append("set-cookie",t)}else i.headers.set(n,r)}this.#c=i,this.finalized=!0}render=(...i)=>(this.#w??=(n)=>this.html(n),this.#w(...i));setLayout=(i)=>this.#g=i;getLayout=()=>this.#g;setRenderer=(i)=>{this.#w=i};header=(i,n,r)=>{this.finalized&&(this.#c=new Response(this.#c.body,this.#c));let u=this.#c?this.#c.headers:this.#l??=new Headers;n===void 0?u.delete(i):r?.append?u.append(i,n):u.set(i,n)};status=(i)=>{this.#t=i};set=(i,n)=>{this.#r??=new Map,this.#r.set(i,n)};get=(i)=>this.#r?this.#r.get(i):void 0;get var(){return this.#r?Object.fromEntries(this.#r):{}}#$(i,n,r){let u=this.#c?new Headers(this.#c.headers):this.#l??new Headers;if(typeof n=="object"&&"headers"in n){let c=n.headers instanceof Headers?n.headers:new Headers(n.headers);for(let[g,h]of c)g.toLowerCase()==="set-cookie"?u.append(g,h):u.set(g,h)}if(r)for(let[c,g]of Object.entries(r))if(typeof g=="string")u.set(c,g);else{u.delete(c);for(let h of g)u.append(c,h)}let t=typeof n=="number"?n:n?.status??this.#t;return new Response(i,{status:t,headers:u})}newResponse=(...i)=>this.#$(...i);body=(i,n,r)=>this.#$(i,n,r);text=(i,n,r)=>!this.#l&&!this.#t&&!n&&!r&&!this.finalized?new Response(i):this.#$(i,n,Qg(NW,r));json=(i,n,r)=>this.#$(JSON.stringify(i),n,Qg("application/json",r));html=(i,n,r)=>{let u=(t)=>this.#$(t,n,Qg("text/html; charset=UTF-8",r));return typeof i=="object"?$f(i,jW.Stringify,!1,{}).then(u):u(i)};redirect=(i,n)=>{let r=String(i);return this.header("Location",/[^\\x00-\\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,n??302)};notFound=()=>(this.#b??=()=>new Response,this.#b(this))},bi="ALL",WW="all",DW=["get","post","put","delete","options","patch"],wf="Can not add a route since the matcher is already built.",bf=class extends Error{},JW="__COMPOSED_HANDLER",EW=(i)=>i.text("404 Not Found",404),hf=(i,n)=>{if("getResponse"in i){let r=i.getResponse();return n.newResponse(r.body,r)}return console.error(i),n.text("Internal Server Error",500)},vf=class{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#n="/";routes=[];constructor(i={}){[...DW,WW].forEach((u)=>{this[u]=(t,...c)=>(typeof t=="string"?this.#n=t:this.#t(u,this.#n,t),c.forEach((g)=>{this.#t(u,this.#n,g)}),this)}),this.on=(u,t,...c)=>{for(let g of[t].flat()){this.#n=g;for(let h of[u].flat())c.map((_)=>{this.#t(h.toUpperCase(),this.#n,_)})}return this},this.use=(u,...t)=>(typeof u=="string"?this.#n=u:(this.#n="*",t.unshift(u)),t.forEach((c)=>{this.#t(bi,this.#n,c)}),this);let{strict:n,...r}=i;Object.assign(this,r),this.getPath=n??!0?i.getPath??Lg:tf}#i(){let i=new vf({router:this.router,getPath:this.getPath});return i.errorHandler=this.errorHandler,i.#r=this.#r,i.routes=this.routes,i}#r=EW;errorHandler=hf;route(i,n){let r=this.basePath(i);return n.routes.map((u)=>{let t;n.errorHandler===hf?t=u.handler:(t=async(c,g)=>(await of([],n.errorHandler)(c,()=>u.handler(c,g))).res,t[JW]=u.handler),r.#t(u.method,u.path,t)}),this}basePath(i){let n=this.#i();return n._basePath=an(this._basePath,i),n}onError=(i)=>(this.errorHandler=i,this);notFound=(i)=>(this.#r=i,this);mount(i,n,r){let u,t;r&&(typeof r=="function"?t=r:(t=r.optionHandler,u=r.replaceRequest===!1?(g)=>g:r.replaceRequest));let c=t?(g)=>{let h=t(g);return Array.isArray(h)?h:[h]}:(g)=>{let h;try{h=g.executionCtx}catch{}return[g.env,h]};return u||=(()=>{let g=an(this._basePath,i),h=g==="/"?0:g.length;return(_)=>{let l=new URL(_.url);return l.pathname=l.pathname.slice(h)||"/",new Request(l,_)}})(),this.#t(bi,an(i,"*"),async(g,h)=>{let _=await n(u(g.req.raw),...c(g));if(_)return _;await h()}),this}#t(i,n,r){i=i.toUpperCase(),n=an(this._basePath,n);let u={basePath:this._basePath,path:n,method:i,handler:r};this.router.add(i,n,[r,u]),this.routes.push(u)}#u(i,n){if(i instanceof Error)return this.errorHandler(i,n);throw i}#c(i,n,r,u){if(u==="HEAD")return(async()=>new Response(null,await this.#c(i,n,r,"GET")))();let t=this.getPath(i,{env:r}),c=this.router.match(u,t),g=new zW(i,{path:t,matchResult:c,env:r,executionCtx:n,notFoundHandler:this.#r});if(c[0].length===1){let _;try{_=c[0][0][0][0](g,async()=>{g.res=await this.#r(g)})}catch(l){return this.#u(l,g)}return _ instanceof Promise?_.then((l)=>l||(g.finalized?g.res:this.#r(g))).catch((l)=>this.#u(l,g)):_??this.#r(g)}let h=of(c[0],this.errorHandler,this.#r);return(async()=>{try{let _=await h(g);if(!_.finalized)throw Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return _.res}catch(_){return this.#u(_,g)}})()}fetch=(i,...n)=>this.#c(i,n[1],n[0],i.method);request=(i,n,r,u)=>i instanceof Request?this.fetch(n?new Request(i,n):i,r,u):(i=i.toString(),this.fetch(new Request(/^https?:\\/\\//.test(i)?i:`http://localhost${an("/",i)}`,n),r,u));fire=()=>{addEventListener("fetch",(i)=>{i.respondWith(this.#c(i.request,i,void 0,i.request.method))})}},pu="[^/]+",rr=".*",ur="(?:|/.*)",tr=Symbol(),HW=new Set(".\\\\+*[^]$()");function GW(i,n){return i.length===1?n.length===1?i<n?-1:1:-1:n.length===1||i===rr||i===ur?1:n===rr||n===ur?-1:i===pu?1:n===pu?-1:i.length===n.length?i<n?-1:1:n.length-i.length}var Sg=class{#n;#i;#r=Object.create(null);insert(i,n,r,u,t){if(i.length===0){if(this.#n!==void 0)throw tr;if(t)return;this.#n=n;return}let[c,...g]=i,h=c==="*"?g.length===0?["","",rr]:["","",pu]:c==="/*"?["","",ur]:c.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/),_;if(h){let l=h[1],$=h[2]||pu;if(l&&h[2]&&($===".*"||($=$.replace(/^\\((?!\\?:)(?=[^)]+\\)$)/,"(?:"),/\\((?!\\?:)/.test($))))throw tr;if(_=this.#r[$],!_){if(Object.keys(this.#r).some((w)=>w!==rr&&w!==ur))throw tr;if(t)return;_=this.#r[$]=new Sg,l!==""&&(_.#i=u.varIndex++)}!t&&l!==""&&r.push([l,_.#i])}else if(_=this.#r[c],!_){if(Object.keys(this.#r).some((l)=>l.length>1&&l!==rr&&l!==ur))throw tr;if(t)return;_=this.#r[c]=new Sg}_.insert(g,n,r,u,t)}buildRegExpStr(){let i=Object.keys(this.#r).sort(GW).map((n)=>{let r=this.#r[n];return(typeof r.#i=="number"?`(${n})@${r.#i}`:HW.has(n)?`\\\\${n}`:n)+r.buildRegExpStr()});return typeof this.#n=="number"&&i.unshift(`#${this.#n}`),i.length===0?"":i.length===1?i[0]:"(?:"+i.join("|")+")"}},qW=class{#n={varIndex:0};#i=new Sg;insert(i,n,r){let u=[],t=[];for(let g=0;;){let h=!1;if(i=i.replace(/\\{[^}]+\\}/g,(_)=>{let l=`@\\\\${g}`;return t[g]=[l,_],g++,h=!0,l}),!h)break}let c=i.match(/(?::[^\\/]+)|(?:\\/\\*$)|./g)||[];for(let g=t.length-1;g>=0;g--){let[h]=t[g];for(let _=c.length-1;_>=0;_--)if(c[_].indexOf(h)!==-1){c[_]=c[_].replace(h,t[g][1]);break}}return this.#i.insert(c,n,u,this.#n,r),u}buildRegExp(){let i=this.#i.buildRegExpStr();if(i==="")return[/^$/,[],[]];let n=0,r=[],u=[];return i=i.replace(/#(\\d+)|@(\\d+)|\\.\\*\\$/g,(t,c,g)=>c===void 0?(g===void 0||(u[Number(g)]=++n),""):(r[++n]=Number(c),"$()")),[RegExp(`^${i}`),r,u]}},ff=[],XW=[/^$/,[],Object.create(null)],Of=Object.create(null);function jf(i){return Of[i]??=RegExp(i==="*"?"":`^${i.replace(/\\/\\*$|([.\\\\+*[^\\]$()])/g,(n,r)=>r?`\\\\${r}`:"(?:|/.*)")}$`)}function LW(){Of=Object.create(null)}function IW(i){let n=new qW,r=[];if(i.length===0)return XW;let u=i.map((l)=>[!/\\*|\\/:/.test(l[0]),...l]).sort(([l,$],[w,b])=>l?1:w?-1:$.length-b.length),t=Object.create(null);for(let l=0,$=-1,w=u.length;l<w;l++){let[b,v,f]=u[l];b?t[v]=[f.map(([z])=>[z,Object.create(null)]),ff]:$++;let U;try{U=n.insert(v,$,b)}catch(z){throw z===tr?new bf(v):z}b||(r[$]=f.map(([z,J])=>{let N=Object.create(null);for(--J;J>=0;J--){let[j,O]=U[J];N[j]=O}return[z,N]}))}let[c,g,h]=n.buildRegExp();for(let l=0,$=r.length;l<$;l++)for(let w=0,b=r[l].length;w<b;w++){let v=r[l][w]?.[1];if(!v)continue;let f=Object.keys(v);for(let U=0,z=f.length;U<z;U++)v[f[U]]=h[v[f[U]]]}let _=[];for(let l in g)_[l]=r[g[l]];return[c,_,t]}function Dt(i,n){if(i){for(let r of Object.keys(i).sort((u,t)=>t.length-u.length))if(jf(r).test(n))return[...i[r]]}}var YW=class{name="RegExpRouter";#n;#i;constructor(){this.#n={[bi]:Object.create(null)},this.#i={[bi]:Object.create(null)}}add(i,n,r){let u=this.#n,t=this.#i;if(!u||!t)throw Error(wf);u[i]||[u,t].forEach((h)=>{h[i]=Object.create(null),Object.keys(h[bi]).forEach((_)=>{h[i][_]=[...h[bi][_]]})}),n==="/*"&&(n="*");let c=(n.match(/\\/:/g)||[]).length;if(/\\*$/.test(n)){let h=jf(n);i===bi?Object.keys(u).forEach((_)=>{u[_][n]||=Dt(u[_],n)||Dt(u[bi],n)||[]}):u[i][n]||=Dt(u[i],n)||Dt(u[bi],n)||[],Object.keys(u).forEach((_)=>{(i===bi||i===_)&&Object.keys(u[_]).forEach((l)=>{h.test(l)&&u[_][l].push([r,c])})}),Object.keys(t).forEach((_)=>{(i===bi||i===_)&&Object.keys(t[_]).forEach((l)=>h.test(l)&&t[_][l].push([r,c]))});return}let g=Ig(n)||[n];for(let h=0,_=g.length;h<_;h++){let l=g[h];Object.keys(t).forEach(($)=>{(i===bi||i===$)&&(t[$][l]||=[...Dt(u[$],l)||Dt(u[bi],l)||[]],t[$][l].push([r,c-_+h+1]))})}}match(i,n){LW();let r=this.#r();return this.match=(u,t)=>{let c=r[u]||r[bi],g=c[2][t];if(g)return g;let h=t.match(c[0]);if(!h)return[[],ff];let _=h.indexOf("",1);return[c[1][_],h]},this.match(i,n)}#r(){let i=Object.create(null);return Object.keys(this.#i).concat(Object.keys(this.#n)).forEach((n)=>{i[n]||=this.#t(n)}),this.#n=this.#i=void 0,i}#t(i){let n=[],r=i===bi;return[this.#n,this.#i].forEach((u)=>{let t=u[i]?Object.keys(u[i]).map((c)=>[c,u[i][c]]):[];t.length===0?i!==bi&&n.push(...Object.keys(u[bi]).map((c)=>[c,u[bi][c]])):(r||=!0,n.push(...t))}),r?IW(n):null}},QW=class{name="SmartRouter";#n=[];#i=[];constructor(i){this.#n=i.routers}add(i,n,r){if(!this.#i)throw Error(wf);this.#i.push([i,n,r])}match(i,n){if(!this.#i)throw Error("Fatal error");let r=this.#n,u=this.#i,t=r.length,c=0,g;for(;c<t;c++){let h=r[c];try{for(let _=0,l=u.length;_<l;_++)h.add(...u[_]);g=h.match(i,n)}catch(_){if(_ instanceof bf)continue;throw _}this.match=h.match.bind(h),this.#n=[h],this.#i=void 0;break}if(c===t)throw Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,g}get activeRouter(){if(this.#i||this.#n.length!==1)throw Error("No active router has been determined yet.");return this.#n[0]}},nr=Object.create(null),Uf=class{#n;#i;#r;#t=0;#u=nr;constructor(i,n,r){if(this.#i=r||Object.create(null),this.#n=[],i&&n){let u=Object.create(null);u[i]={handler:n,possibleKeys:[],score:0},this.#n=[u]}this.#r=[]}insert(i,n,r){this.#t=++this.#t;let u=this,t=sv(n),c=[];for(let g=0,h=t.length;g<h;g++){let _=t[g],l=t[g+1],$=nf(_,l),w=Array.isArray($)?$[0]:_;if(w in u.#i){u=u.#i[w],$&&c.push($[1]);continue}u.#i[w]=new Uf,$&&(u.#r.push($),c.push($[1])),u=u.#i[w]}return u.#n.push({[i]:{handler:r,possibleKeys:c.filter((g,h,_)=>_.indexOf(g)===h),score:this.#t}}),u}#c(i,n,r,u){let t=[];for(let c=0,g=i.#n.length;c<g;c++){let h=i.#n[c],_=h[n]||h[bi],l={};if(_!==void 0&&(_.params=Object.create(null),t.push(_),r!==nr||u&&u!==nr))for(let $=0,w=_.possibleKeys.length;$<w;$++){let b=_.possibleKeys[$],v=l[_.score];_.params[b]=u?.[b]&&!v?u[b]:r[b]??u?.[b],l[_.score]=!0}}return t}search(i,n){let r=[];this.#u=nr;let u=[this],t=Xg(n),c=[];for(let g=0,h=t.length;g<h;g++){let _=t[g],l=g===h-1,$=[];for(let w=0,b=u.length;w<b;w++){let v=u[w],f=v.#i[_];f&&(f.#u=v.#u,l?(f.#i["*"]&&r.push(...this.#c(f.#i["*"],i,v.#u)),r.push(...this.#c(f,i,v.#u))):$.push(f));for(let U=0,z=v.#r.length;U<z;U++){let J=v.#r[U],N=v.#u===nr?{}:{...v.#u};if(J==="*"){let H=v.#i["*"];H&&(r.push(...this.#c(H,i,v.#u)),H.#u=N,$.push(H));continue}let[j,O,W]=J;if(!_&&!(W instanceof RegExp))continue;let E=v.#i[j],X=t.slice(g).join("/");if(W instanceof RegExp){let H=W.exec(X);if(H){if(N[O]=H[0],r.push(...this.#c(E,i,v.#u,N)),Object.keys(E.#i).length){E.#u=N;let Y=H[0].match(/\\//)?.length??0;(c[Y]||=[]).push(E)}continue}}(W===!0||W.test(_))&&(N[O]=_,l?(r.push(...this.#c(E,i,N,v.#u)),E.#i["*"]&&r.push(...this.#c(E.#i["*"],i,N,v.#u))):(E.#u=N,$.push(E)))}}u=$.concat(c.shift()??[])}return r.length>1&&r.sort((g,h)=>g.score-h.score),[r.map(({handler:g,params:h})=>[g,h])]}},mW=class{name="TrieRouter";#n;constructor(){this.#n=new Uf}add(i,n,r){let u=Ig(n);if(u){for(let t=0,c=u.length;t<c;t++)this.#n.insert(i,u[t],r);return}this.#n.insert(i,n,r)}match(i,n){return this.#n.search(i,n)}},Nf=class extends vf{constructor(i={}){super(i),this.router=i.router??new QW({routers:[new YW,new mW]})}},SW=(i,n,r)=>{let u=i.req.raw.headers.get("Cookie");if(typeof n=="string"){if(!u)return;let t=n;return r==="secure"?t="__Secure-"+n:r==="host"&&(t="__Host-"+n),Yg(u,t)[t]}return u?Yg(u):{}},_f=class extends Error{res;status;constructor(i=500,n){super(n?.message,{cause:n?.cause}),this.res=n?.res,this.status=i}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}},AW=(i,n)=>new Response(i,{headers:{"Content-Type":n}}).formData(),BW=/^application\\/([a-z-\\.]+\\+)?json(;\\s*[a-zA-Z0-9\\-]+\\=([^;]+))*$/,KW=/^multipart\\/form-data(;\\s?boundary=[a-zA-Z0-9\'"()+_,\\-./:=?]+)?$/,VW=/^application\\/x-www-form-urlencoded(;\\s*[a-zA-Z0-9\\-]+\\=([^;]+))*$/,du=(i,n)=>async(r,u)=>{let t={},c=r.req.header("Content-Type");switch(i){case"json":if(!c||!BW.test(c))break;try{t=await r.req.json()}catch{throw new _f(400,{message:"Malformed JSON in request body"})}break;case"form":{if(!c||!(KW.test(c)||VW.test(c)))break;let h;if(r.req.bodyCache.formData)h=await r.req.bodyCache.formData;else try{let l=await r.req.arrayBuffer();h=await AW(l,c),r.req.bodyCache.formData=h}catch(l){let $="Malformed FormData request.";throw $+=l instanceof Error?` ${l.message}`:` ${String(l)}`,new _f(400,{message:$})}let _={};h.forEach((l,$)=>{$.endsWith("[]")?(_[$]??=[]).push(l):Array.isArray(_[$])?_[$].push(l):($ in _)?_[$]=[_[$],l]:_[$]=l}),t=_;break}case"query":t=Object.fromEntries(Object.entries(r.req.queries()).map(([h,_])=>_.length===1?[h,_[0]]:[h,_]));break;case"param":t=r.req.param();break;case"header":t=r.req.header();break;case"cookie":t=SW(r);break}let g=await n(t,r);if(g instanceof Response)return g;r.req.addValidatedData(i,g),await u()},An=(i,n)=>i.json({error:n},400),mg=(i)=>{let n=i.req.param("key");return!n||n===""?{key:n,err:"Key is required"}:n.length>475?{key:n,err:"Key is too long. Max length is 475 characters."}:{key:n}},Ag=()=>new Nf,MW=Ag().get("/:key",async(i)=>{let{key:n,err:r}=mg(i);if(r)return An(i,r);let u=await i.env.store.get(n);return i.json({value:u},200)}).post("/:key",du("json",(i,n)=>{let r=i.value;return r?typeof r=="string"?r.length>20000?An(n,"Value is too long. Max length is 20,000 characters."):{value:r}:An(n,"Value must be a string"):An(n,"Value is required")}),async(i)=>{let{key:n,err:r}=mg(i);if(r)return An(i,r);let{value:u}=i.req.valid("json");return await i.env.store.set(n,u),i.body(null,204)}).delete("/:key",async(i)=>{let{key:n,err:r}=mg(i);return r?An(i,r):(await i.env.store.delete(n),i.body(null,204))}).get("/",async(i)=>{let{cursor:n,limit:r,prefix:u}=i.req.query(),{entries:t,cursor:c}=await i.env.store.list(u,{cursor:n?String(n):void 0,limit:r?Number(r):100});return i.json({entries:t,cursor:c})}),xW=(i)=>{let n=i.req.param("key");return n?n.length>475?{key:n,err:"Key is too long. Max length is 475 characters."}:{key:n}:{key:n,err:"Key is required"}},Jt=du("param",(i)=>({id:i.id})),FW=Ag().post("/:key",async(i)=>{let{key:n,err:r}=xW(i);return r?An(i,r):i.json(await i.env.chat.upsert(n),200)}).get("/:id",Jt,async(i)=>{let{id:n}=i.req.valid("param");return i.json(await i.env.chat.get(n),200)}).get("/:id/messages",Jt,async(i)=>{let{id:n}=i.req.valid("param");return i.json(await i.env.chat.getMessages(n),200)}).post("/:id/sendMessages",du("json",(i)=>({id:i.id,messages:i.messages,options:i.options})),async(i)=>{let{id:n,messages:r,options:u}=i.req.valid("json");return n?(await i.env.chat.sendMessages(n,r,u),i.body(null,204)):An(i,"ID is required")}).delete("/:id/messages",Jt,du("query",(i)=>(typeof i.message=="string"&&(i.message=[i.message]),{messages:i.message})),async(i)=>{let{id:n}=i.req.valid("param"),{messages:r}=i.req.valid("query");return await i.env.chat.deleteMessages(n,r),i.body(null,204)}).post("/:id/start",Jt,async(i)=>{let{id:n}=i.req.valid("param");return await i.env.chat.start(n),i.body(null,204)}).post("/:id/stop",Jt,async(i)=>{let{id:n}=i.req.valid("param");return await i.env.chat.stop(n),i.body(null,204)}).delete("/:id",Jt,async(i)=>{let{id:n}=i.req.valid("param");return await i.env.chat.delete(n),i.body(null,204)}),PW=Ag().post("/v1/traces",async(i)=>i.env.otlp?i.env.otlp.traces(i.req.raw):i.body(null,204)),zf=new Nf().onError((i,n)=>n.json({error:i instanceof Error?i.message:"Unknown error"},500)).route("/kv",MW).route("/chat",FW).route("/otlp",PW);var Wf="vercel.ai.error",yW=Symbol.for(Wf),Df,TW=class i extends Error{constructor({name:n,message:r,cause:u}){super(r);this[Df]=!0,this.name=n,this.cause=u}static isInstance(n){return i.hasMarker(n,Wf)}static hasMarker(n,r){let u=Symbol.for(r);return n!=null&&typeof n==="object"&&u in n&&typeof n[u]==="boolean"&&n[u]===!0}};Df=yW;var xi=TW,kW="AI_APICallError",CW=`vercel.ai.error.${kW}`,RW=Symbol.for(CW),ZW;ZW=RW;var eW="AI_EmptyResponseBodyError",pW=`vercel.ai.error.${eW}`,dW=Symbol.for(pW),aW;aW=dW;function au(i){if(i==null)return"unknown error";if(typeof i==="string")return i;if(i instanceof Error)return i.message;return JSON.stringify(i)}var Jf="AI_InvalidArgumentError",Ef=`vercel.ai.error.${Jf}`,sW=Symbol.for(Ef),Hf,Gf=class extends xi{constructor({message:i,cause:n,argument:r}){super({name:Jf,message:i,cause:n});this[Hf]=!0,this.argument=r}static isInstance(i){return xi.hasMarker(i,Ef)}};Hf=sW;var iD="AI_InvalidPromptError",nD=`vercel.ai.error.${iD}`,tD=Symbol.for(nD),rD;rD=tD;var uD="AI_InvalidResponseDataError",cD=`vercel.ai.error.${uD}`,oD=Symbol.for(cD),gD;gD=oD;var qf="AI_JSONParseError",Xf=`vercel.ai.error.${qf}`,hD=Symbol.for(Xf),Lf,Bg=class extends xi{constructor({text:i,cause:n}){super({name:qf,message:`JSON parsing failed: Text: ${i}.\nError message: ${au(n)}`,cause:n});this[Lf]=!0,this.text=i}static isInstance(i){return xi.hasMarker(i,Xf)}};Lf=hD;var _D="AI_LoadAPIKeyError",lD=`vercel.ai.error.${_D}`,$D=Symbol.for(lD),wD;wD=$D;var bD="AI_LoadSettingError",vD=`vercel.ai.error.${bD}`,fD=Symbol.for(vD),OD;OD=fD;var jD="AI_NoContentGeneratedError",UD=`vercel.ai.error.${jD}`,ND=Symbol.for(UD),zD;zD=ND;var WD="AI_NoSuchModelError",DD=`vercel.ai.error.${WD}`,JD=Symbol.for(DD),ED;ED=JD;var HD="AI_TooManyEmbeddingValuesForCallError",GD=`vercel.ai.error.${HD}`,qD=Symbol.for(GD),XD;XD=qD;var If="AI_TypeValidationError",Yf=`vercel.ai.error.${If}`,LD=Symbol.for(Yf),Qf,ID=class i extends xi{constructor({value:n,cause:r}){super({name:If,message:`Type validation failed: Value: ${JSON.stringify(n)}.\nError message: ${au(r)}`,cause:r});this[Qf]=!0,this.value=n}static isInstance(n){return xi.hasMarker(n,Yf)}static wrap({value:n,cause:r}){return i.isInstance(r)&&r.value===n?r:new i({value:n,cause:r})}};Qf=LD;var sn=ID,YD="AI_UnsupportedFunctionalityError",QD=`vercel.ai.error.${YD}`,mD=Symbol.for(QD),SD;SD=mD;var o={};Xn(o,{xid:()=>IE,void:()=>pE,uuidv7:()=>JE,uuidv6:()=>DE,uuidv4:()=>WE,uuid:()=>zE,url:()=>EE,uppercase:()=>Xr,unknown:()=>kc,union:()=>sc,undefined:()=>ZE,ulid:()=>LE,uint64:()=>CE,uint32:()=>yE,tuple:()=>rH,trim:()=>Sr,treeifyError:()=>Zg,transform:()=>d$,toUpperCase:()=>Br,toLowerCase:()=>Ar,toJSONSchema:()=>Vr,templateLiteral:()=>wH,symbol:()=>RE,superRefine:()=>C4,success:()=>lH,stringbool:()=>OH,string:()=>G$,strictObject:()=>iH,startsWith:()=>Ir,size:()=>Hr,setErrorMap:()=>DH,set:()=>oH,safeParseAsync:()=>Mr,safeParse:()=>H$,registry:()=>Oc,regexes:()=>rt,regex:()=>Gr,refine:()=>k4,record:()=>z4,readonly:()=>M4,property:()=>$$,promise:()=>bH,prettifyError:()=>eg,preprocess:()=>UH,prefault:()=>Q4,positive:()=>g$,pipe:()=>Zc,partialRecord:()=>uH,parseAsync:()=>E$,parse:()=>J$,overwrite:()=>Un,optional:()=>Cc,object:()=>sE,number:()=>o4,nullish:()=>_H,nullable:()=>Rc,null:()=>$4,normalize:()=>mr,nonpositive:()=>_$,nonoptional:()=>m4,nonnegative:()=>l$,never:()=>pc,negative:()=>h$,nativeEnum:()=>gH,nanoid:()=>GE,nan:()=>$H,multipleOf:()=>ct,minSize:()=>ot,minLength:()=>Vn,mime:()=>Qr,maxSize:()=>qt,maxLength:()=>Xt,map:()=>cH,lte:()=>Fi,lt:()=>On,lowercase:()=>qr,looseObject:()=>nH,locales:()=>Dr,literal:()=>H4,length:()=>Lt,lazy:()=>P4,ksuid:()=>YE,keyof:()=>aE,jwt:()=>ME,json:()=>jH,iso:()=>yc,ipv6:()=>mE,ipv4:()=>QE,intersection:()=>U4,int64:()=>kE,int32:()=>PE,int:()=>q$,instanceof:()=>fH,includes:()=>Lr,guid:()=>NE,gte:()=>Yi,gt:()=>jn,globalRegistry:()=>rn,getErrorMap:()=>JH,function:()=>U$,formatError:()=>Or,float64:()=>FE,float32:()=>xE,flattenError:()=>fr,file:()=>hH,enum:()=>J4,endsWith:()=>Yr,emoji:()=>HE,email:()=>UE,e164:()=>VE,discriminatedUnion:()=>tH,date:()=>dE,custom:()=>vH,cuid2:()=>XE,cuid:()=>qE,core:()=>Nn,config:()=>$i,coerce:()=>n0,clone:()=>Si,cidrv6:()=>AE,cidrv4:()=>SE,check:()=>T4,catch:()=>B4,boolean:()=>g4,bigint:()=>TE,base64url:()=>KE,base64:()=>BE,array:()=>Z$,any:()=>eE,_default:()=>I4,_ZodString:()=>X$,ZodXID:()=>B$,ZodVoid:()=>v4,ZodUnknown:()=>R$,ZodUnion:()=>e$,ZodUndefined:()=>_4,ZodUUID:()=>zn,ZodURL:()=>I$,ZodULID:()=>A$,ZodType:()=>C,ZodTuple:()=>N4,ZodTransform:()=>q4,ZodTemplateLiteral:()=>x4,ZodSymbol:()=>h4,ZodSuccess:()=>S4,ZodStringFormat:()=>ni,ZodString:()=>ec,ZodSet:()=>D4,ZodRecord:()=>p$,ZodRealError:()=>It,ZodReadonly:()=>V4,ZodPromise:()=>y4,ZodPrefault:()=>Y4,ZodPipe:()=>i0,ZodOptional:()=>a$,ZodObject:()=>ac,ZodNumberFormat:()=>Yt,ZodNumber:()=>Fr,ZodNullable:()=>X4,ZodNull:()=>l4,ZodNonOptional:()=>s$,ZodNever:()=>b4,ZodNanoID:()=>Q$,ZodNaN:()=>K4,ZodMap:()=>W4,ZodLiteral:()=>E4,ZodLazy:()=>F4,ZodKSUID:()=>K$,ZodJWT:()=>k$,ZodIssueCode:()=>NH,ZodIntersection:()=>j4,ZodISOTime:()=>Fc,ZodISODuration:()=>Pc,ZodISODateTime:()=>Mc,ZodISODate:()=>xc,ZodIPv6:()=>M$,ZodIPv4:()=>V$,ZodGUID:()=>Tc,ZodFile:()=>G4,ZodError:()=>OE,ZodEnum:()=>xr,ZodEmoji:()=>Y$,ZodEmail:()=>L$,ZodE164:()=>T$,ZodDiscriminatedUnion:()=>O4,ZodDefault:()=>L4,ZodDate:()=>dc,ZodCustom:()=>io,ZodCatch:()=>A4,ZodCUID2:()=>S$,ZodCUID:()=>m$,ZodCIDRv6:()=>F$,ZodCIDRv4:()=>x$,ZodBoolean:()=>Pr,ZodBigIntFormat:()=>C$,ZodBigInt:()=>yr,ZodBase64URL:()=>y$,ZodBase64:()=>P$,ZodArray:()=>f4,ZodAny:()=>w4,NEVER:()=>WH,$output:()=>Yl,$input:()=>Ql,$brand:()=>Kg});var Nn={};Xn(Nn,{version:()=>kh,util:()=>S,treeifyError:()=>Zg,toJSONSchema:()=>Vr,toDotPath:()=>Af,safeParseAsync:()=>dg,safeParse:()=>pg,registry:()=>Oc,regexes:()=>rt,prettifyError:()=>eg,parseAsync:()=>uc,parse:()=>tc,locales:()=>Dr,isValidJWT:()=>sf,isValidBase64URL:()=>af,isValidBase64:()=>w_,globalRegistry:()=>rn,globalConfig:()=>cr,function:()=>U$,formatError:()=>Or,flattenError:()=>fr,config:()=>$i,clone:()=>Si,_xid:()=>Xc,_void:()=>r$,_uuidv7:()=>Wc,_uuidv6:()=>zc,_uuidv4:()=>Nc,_uuid:()=>Uc,_url:()=>Dc,_uppercase:()=>Xr,_unknown:()=>Gt,_union:()=>ZJ,_undefined:()=>sl,_ulid:()=>qc,_uint64:()=>dl,_uint32:()=>kl,_tuple:()=>w$,_trim:()=>Sr,_transform:()=>rE,_toUpperCase:()=>Br,_toLowerCase:()=>Ar,_templateLiteral:()=>wE,_symbol:()=>al,_success:()=>hE,_stringbool:()=>O$,_string:()=>ml,_startsWith:()=>Ir,_size:()=>Hr,_set:()=>sJ,_safeParseAsync:()=>oc,_safeParse:()=>cc,_regex:()=>Gr,_refine:()=>f$,_record:()=>dJ,_readonly:()=>$E,_property:()=>$$,_promise:()=>vE,_positive:()=>g$,_pipe:()=>lE,_parseAsync:()=>rc,_parse:()=>nc,_overwrite:()=>Un,_optional:()=>uE,_number:()=>Ml,_nullable:()=>cE,_null:()=>i$,_normalize:()=>mr,_nonpositive:()=>_$,_nonoptional:()=>gE,_nonnegative:()=>l$,_never:()=>t$,_negative:()=>h$,_nativeEnum:()=>nE,_nanoid:()=>Ec,_nan:()=>o$,_multipleOf:()=>ct,_minSize:()=>ot,_minLength:()=>Vn,_min:()=>Yi,_mime:()=>Qr,_maxSize:()=>qt,_maxLength:()=>Xt,_max:()=>Fi,_map:()=>aJ,_lte:()=>Fi,_lt:()=>On,_lowercase:()=>qr,_literal:()=>tE,_length:()=>Lt,_lazy:()=>bE,_ksuid:()=>Lc,_jwt:()=>Kc,_isoTime:()=>Kl,_isoDuration:()=>Vl,_isoDateTime:()=>Al,_isoDate:()=>Bl,_ipv6:()=>Yc,_ipv4:()=>Ic,_intersection:()=>pJ,_int64:()=>pl,_int32:()=>Tl,_int:()=>Fl,_includes:()=>Lr,_guid:()=>Er,_gte:()=>Yi,_gt:()=>jn,_float64:()=>yl,_float32:()=>Pl,_file:()=>b$,_enum:()=>iE,_endsWith:()=>Yr,_emoji:()=>Jc,_email:()=>jc,_e164:()=>Bc,_discriminatedUnion:()=>eJ,_default:()=>oE,_date:()=>u$,_custom:()=>v$,_cuid2:()=>Gc,_cuid:()=>Hc,_coercedString:()=>Sl,_coercedNumber:()=>xl,_coercedDate:()=>c$,_coercedBoolean:()=>Rl,_coercedBigint:()=>el,_cidrv6:()=>mc,_cidrv4:()=>Qc,_catch:()=>_E,_boolean:()=>Cl,_bigint:()=>Zl,_base64url:()=>Ac,_base64:()=>Sc,_array:()=>Kr,_any:()=>n$,JSONSchemaGenerator:()=>Vc,JSONSchema:()=>r4,Doc:()=>lc,$output:()=>Yl,$input:()=>Ql,$constructor:()=>D,$brand:()=>Kg,$ZodXID:()=>t_,$ZodVoid:()=>E_,$ZodUnknown:()=>Kn,$ZodUnion:()=>fc,$ZodUndefined:()=>z_,$ZodUUID:()=>Zh,$ZodURL:()=>ph,$ZodULID:()=>n_,$ZodType:()=>y,$ZodTuple:()=>ut,$ZodTransform:()=>A_,$ZodTemplateLiteral:()=>k_,$ZodSymbol:()=>N_,$ZodSuccess:()=>F_,$ZodStringFormat:()=>ii,$ZodString:()=>jr,$ZodSet:()=>Y_,$ZodRegistry:()=>Jr,$ZodRecord:()=>L_,$ZodRealError:()=>Et,$ZodReadonly:()=>T_,$ZodPromise:()=>C_,$ZodPrefault:()=>M_,$ZodPipe:()=>zr,$ZodOptional:()=>B_,$ZodObject:()=>G_,$ZodNumberFormat:()=>j_,$ZodNumber:()=>bc,$ZodNullable:()=>K_,$ZodNull:()=>W_,$ZodNonOptional:()=>x_,$ZodNever:()=>J_,$ZodNanoID:()=>ah,$ZodNaN:()=>y_,$ZodMap:()=>I_,$ZodLiteral:()=>m_,$ZodLazy:()=>R_,$ZodKSUID:()=>r_,$ZodJWT:()=>O_,$ZodIntersection:()=>X_,$ZodISOTime:()=>o_,$ZodISODuration:()=>g_,$ZodISODateTime:()=>u_,$ZodISODate:()=>c_,$ZodIPv6:()=>__,$ZodIPv4:()=>h_,$ZodGUID:()=>Rh,$ZodFunction:()=>j$,$ZodFile:()=>S_,$ZodError:()=>vr,$ZodEnum:()=>Q_,$ZodEmoji:()=>dh,$ZodEmail:()=>eh,$ZodE164:()=>f_,$ZodDiscriminatedUnion:()=>q_,$ZodDefault:()=>V_,$ZodDate:()=>H_,$ZodCustom:()=>Z_,$ZodCheckUpperCase:()=>Vh,$ZodCheckStringFormat:()=>Ht,$ZodCheckStartsWith:()=>xh,$ZodCheckSizeEquals:()=>Qh,$ZodCheckRegex:()=>Bh,$ZodCheckProperty:()=>Ph,$ZodCheckOverwrite:()=>Th,$ZodCheckNumberFormat:()=>Xh,$ZodCheckMultipleOf:()=>qh,$ZodCheckMinSize:()=>Yh,$ZodCheckMinLength:()=>Sh,$ZodCheckMimeType:()=>yh,$ZodCheckMaxSize:()=>Ih,$ZodCheckMaxLength:()=>mh,$ZodCheckLowerCase:()=>Kh,$ZodCheckLessThan:()=>hc,$ZodCheckLengthEquals:()=>Ah,$ZodCheckIncludes:()=>Mh,$ZodCheckGreaterThan:()=>_c,$ZodCheckEndsWith:()=>Fh,$ZodCheckBigIntFormat:()=>Lh,$ZodCheck:()=>ui,$ZodCatch:()=>P_,$ZodCUID2:()=>i_,$ZodCUID:()=>sh,$ZodCIDRv6:()=>$_,$ZodCIDRv4:()=>l_,$ZodBoolean:()=>Ur,$ZodBigIntFormat:()=>U_,$ZodBigInt:()=>vc,$ZodBase64URL:()=>v_,$ZodBase64:()=>b_,$ZodAsyncError:()=>vn,$ZodArray:()=>Nr,$ZodAny:()=>D_});function D(i,n,r){function u(h,_){var l;Object.defineProperty(h,"_zod",{value:h._zod??{},enumerable:!1}),(l=h._zod).traits??(l.traits=new Set),h._zod.traits.add(i),n(h,_);for(let $ in g.prototype)if(!($ in h))Object.defineProperty(h,$,{value:g.prototype[$].bind(h)});h._zod.constr=g,h._zod.def=_}let t=r?.Parent??Object;class c extends t{}Object.defineProperty(c,"name",{value:i});function g(h){var _;let l=r?.Parent?new c:this;u(l,h),(_=l._zod).deferred??(_.deferred=[]);for(let $ of l._zod.deferred)$();return l}return Object.defineProperty(g,"init",{value:u}),Object.defineProperty(g,Symbol.hasInstance,{value:(h)=>{if(r?.Parent&&h instanceof r.Parent)return!0;return h?._zod?.traits?.has(i)}}),Object.defineProperty(g,"name",{value:i}),g}var Kg=Symbol("zod_brand");class vn extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}var cr={};function $i(i){if(i)Object.assign(cr,i);return cr}var S={};Xn(S,{unwrapMessage:()=>or,stringifyPrimitive:()=>A,required:()=>pD,randomString:()=>su,propertyKeyTypes:()=>$r,promiseAllObject:()=>FD,primitiveTypes:()=>yg,prefixIssues:()=>Ii,pick:()=>kD,partial:()=>eD,optionalKeys:()=>Tg,omit:()=>CD,numKeys:()=>PD,nullish:()=>Bn,normalizeParams:()=>I,merge:()=>ZD,jsonStringifyReplacer:()=>Mg,joinValues:()=>G,issue:()=>Rg,isPlainObject:()=>lr,isObject:()=>ic,getSizableOrigin:()=>wr,getParsedType:()=>yD,getLengthableOrigin:()=>br,getEnumValues:()=>gr,getElementAtPath:()=>xD,floatSafeRemainder:()=>xg,finalizeIssue:()=>Ai,extend:()=>RD,escapeRegex:()=>fn,esc:()=>it,defineLazy:()=>d,createTransparentProxy:()=>TD,clone:()=>Si,cleanRegex:()=>_r,cleanEnum:()=>dD,cached:()=>hr,assignProp:()=>Fg,assertNotEqual:()=>BD,assertNever:()=>VD,assertIs:()=>KD,assertEqual:()=>AD,assert:()=>MD,allowsEval:()=>Pg,aborted:()=>nt,NUMBER_FORMAT_RANGES:()=>kg,Class:()=>mf,BIGINT_FORMAT_RANGES:()=>Cg});function AD(i){return i}function BD(i){return i}function KD(i){}function VD(i){throw new Error}function MD(i){}function gr(i){let n=Object.values(i).filter((u)=>typeof u==="number");return Object.entries(i).filter(([u,t])=>n.indexOf(+u)===-1).map(([u,t])=>t)}function G(i,n="|"){return i.map((r)=>A(r)).join(n)}function Mg(i,n){if(typeof n==="bigint")return n.toString();return n}function hr(i){return{get value(){{let r=i();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}function Bn(i){return i===null||i===void 0}function _r(i){let n=i.startsWith("^")?1:0,r=i.endsWith("$")?i.length-1:i.length;return i.slice(n,r)}function xg(i,n){let r=(i.toString().split(".")[1]||"").length,u=(n.toString().split(".")[1]||"").length,t=r>u?r:u,c=Number.parseInt(i.toFixed(t).replace(".","")),g=Number.parseInt(n.toFixed(t).replace(".",""));return c%g/10**t}function d(i,n,r){Object.defineProperty(i,n,{get(){{let t=r();return i[n]=t,t}throw new Error("cached value already set")},set(t){Object.defineProperty(i,n,{value:t})},configurable:!0})}function Fg(i,n,r){Object.defineProperty(i,n,{value:r,writable:!0,enumerable:!0,configurable:!0})}function xD(i,n){if(!n)return i;return n.reduce((r,u)=>r?.[u],i)}function FD(i){let n=Object.keys(i),r=n.map((u)=>i[u]);return Promise.all(r).then((u)=>{let t={};for(let c=0;c<n.length;c++)t[n[c]]=u[c];return t})}function su(i=10){let r="";for(let u=0;u<i;u++)r+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return r}function it(i){return JSON.stringify(i)}function ic(i){return typeof i==="object"&&i!==null&&!Array.isArray(i)}var Pg=hr(()=>{try{return new Function(""),!0}catch(i){return!1}});function lr(i){return typeof i==="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function PD(i){let n=0;for(let r in i)if(Object.prototype.hasOwnProperty.call(i,r))n++;return n}var yD=(i)=>{let n=typeof i;switch(n){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(i)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(i))return"array";if(i===null)return"null";if(i.then&&typeof i.then==="function"&&i.catch&&typeof i.catch==="function")return"promise";if(typeof Map!=="undefined"&&i instanceof Map)return"map";if(typeof Set!=="undefined"&&i instanceof Set)return"set";if(typeof Date!=="undefined"&&i instanceof Date)return"date";if(typeof File!=="undefined"&&i instanceof File)return"file";return"object";default:throw new Error(`Unknown data type: ${n}`)}},$r=new Set(["string","number","symbol"]),yg=new Set(["string","number","bigint","boolean","symbol","undefined"]);function fn(i){return i.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\\\$&")}function Si(i,n,r){let u=new i._zod.constr(n??i._zod.def);if(!n||r?.parent)u._zod.parent=i;return u}function I(i){let n=i;if(!n)return{};if(typeof n==="string")return{error:()=>n};if(n?.message!==void 0){if(n?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}if(delete n.message,typeof n.error==="string")return{...n,error:()=>n.error};return n}function TD(i){let n;return new Proxy({},{get(r,u,t){return n??(n=i()),Reflect.get(n,u,t)},set(r,u,t,c){return n??(n=i()),Reflect.set(n,u,t,c)},has(r,u){return n??(n=i()),Reflect.has(n,u)},deleteProperty(r,u){return n??(n=i()),Reflect.deleteProperty(n,u)},ownKeys(r){return n??(n=i()),Reflect.ownKeys(n)},getOwnPropertyDescriptor(r,u){return n??(n=i()),Reflect.getOwnPropertyDescriptor(n,u)},defineProperty(r,u,t){return n??(n=i()),Reflect.defineProperty(n,u,t)}})}function A(i){if(typeof i==="bigint")return i.toString()+"n";if(typeof i==="string")return`"${i}"`;return`${i}`}function Tg(i){return Object.keys(i).filter((n)=>{return i[n]._zod.optin==="optional"&&i[n]._zod.optout==="optional"})}var kg={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Cg={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function kD(i,n){let r={},u=i._zod.def;for(let t in n){if(!(t in u.shape))throw new Error(`Unrecognized key: "${t}"`);if(!n[t])continue;r[t]=u.shape[t]}return Si(i,{...i._zod.def,shape:r,checks:[]})}function CD(i,n){let r={...i._zod.def.shape},u=i._zod.def;for(let t in n){if(!(t in u.shape))throw new Error(`Unrecognized key: "${t}"`);if(!n[t])continue;delete r[t]}return Si(i,{...i._zod.def,shape:r,checks:[]})}function RD(i,n){let r={...i._zod.def,get shape(){let u={...i._zod.def.shape,...n};return Fg(this,"shape",u),u},checks:[]};return Si(i,r)}function ZD(i,n){return Si(i,{...i._zod.def,get shape(){let r={...i._zod.def.shape,...n._zod.def.shape};return Fg(this,"shape",r),r},catchall:n._zod.def.catchall,checks:[]})}function eD(i,n,r){let u=n._zod.def.shape,t={...u};if(r)for(let c in r){if(!(c in u))throw new Error(`Unrecognized key: "${c}"`);if(!r[c])continue;t[c]=i?new i({type:"optional",innerType:u[c]}):u[c]}else for(let c in u)t[c]=i?new i({type:"optional",innerType:u[c]}):u[c];return Si(n,{...n._zod.def,shape:t,checks:[]})}function pD(i,n,r){let u=n._zod.def.shape,t={...u};if(r)for(let c in r){if(!(c in t))throw new Error(`Unrecognized key: "${c}"`);if(!r[c])continue;t[c]=new i({type:"nonoptional",innerType:u[c]})}else for(let c in u)t[c]=new i({type:"nonoptional",innerType:u[c]});return Si(n,{...n._zod.def,shape:t,checks:[]})}function nt(i,n=0){for(let r=n;r<i.issues.length;r++)if(i.issues[r].continue!==!0)return!0;return!1}function Ii(i,n){return n.map((r)=>{var u;return(u=r).path??(u.path=[]),r.path.unshift(i),r})}function or(i){return typeof i==="string"?i:i?.message}function Ai(i,n,r){let u={...i,path:i.path??[]};if(!i.message){let t=or(i.inst?._zod.def?.error?.(i))??or(n?.error?.(i))??or(r.customError?.(i))??or(r.localeError?.(i))??"Invalid input";u.message=t}if(delete u.inst,delete u.continue,!n?.reportInput)delete u.input;return u}function wr(i){if(i instanceof Set)return"set";if(i instanceof Map)return"map";if(i instanceof File)return"file";return"unknown"}function br(i){if(Array.isArray(i))return"array";if(typeof i==="string")return"string";return"unknown"}function Rg(...i){let[n,r,u]=i;if(typeof n==="string")return{message:n,code:"custom",input:r,inst:u};return{...n}}function dD(i){return Object.entries(i).filter(([n,r])=>{return Number.isNaN(Number.parseInt(n,10))}).map((n)=>n[1])}class mf{constructor(...i){}}var Sf=(i,n)=>{i.name="$ZodError",Object.defineProperty(i,"_zod",{value:i._zod,enumerable:!1}),Object.defineProperty(i,"issues",{value:n,enumerable:!1}),Object.defineProperty(i,"message",{get(){return JSON.stringify(n,Mg,2)},enumerable:!0})},vr=D("$ZodError",Sf),Et=D("$ZodError",Sf,{Parent:Error});function fr(i,n=(r)=>r.message){let r={},u=[];for(let t of i.issues)if(t.path.length>0)r[t.path[0]]=r[t.path[0]]||[],r[t.path[0]].push(n(t));else u.push(n(t));return{formErrors:u,fieldErrors:r}}function Or(i,n){let r=n||function(c){return c.message},u={_errors:[]},t=(c)=>{for(let g of c.issues)if(g.code==="invalid_union"&&g.errors.length)g.errors.map((h)=>t({issues:h}));else if(g.code==="invalid_key")t({issues:g.issues});else if(g.code==="invalid_element")t({issues:g.issues});else if(g.path.length===0)u._errors.push(r(g));else{let h=u,_=0;while(_<g.path.length){let l=g.path[_];if(_!==g.path.length-1)h[l]=h[l]||{_errors:[]};else h[l]=h[l]||{_errors:[]},h[l]._errors.push(r(g));h=h[l],_++}}};return t(i),u}function Zg(i,n){let r=n||function(c){return c.message},u={errors:[]},t=(c,g=[])=>{var h,_;for(let l of c.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(($)=>t({issues:$},l.path));else if(l.code==="invalid_key")t({issues:l.issues},l.path);else if(l.code==="invalid_element")t({issues:l.issues},l.path);else{let $=[...g,...l.path];if($.length===0){u.errors.push(r(l));continue}let w=u,b=0;while(b<$.length){let v=$[b],f=b===$.length-1;if(typeof v==="string")w.properties??(w.properties={}),(h=w.properties)[v]??(h[v]={errors:[]}),w=w.properties[v];else w.items??(w.items=[]),(_=w.items)[v]??(_[v]={errors:[]}),w=w.items[v];if(f)w.errors.push(r(l));b++}}};return t(i),u}function Af(i){let n=[];for(let r of i)if(typeof r==="number")n.push(`[${r}]`);else if(typeof r==="symbol")n.push(`[${JSON.stringify(String(r))}]`);else if(/[^\\w$]/.test(r))n.push(`[${JSON.stringify(r)}]`);else{if(n.length)n.push(".");n.push(r)}return n.join("")}function eg(i){let n=[],r=[...i.issues].sort((u,t)=>u.path.length-t.path.length);for(let u of r)if(n.push(`✖ ${u.message}`),u.path?.length)n.push(`  → at ${Af(u.path)}`);return n.join(`\n`)}var nc=(i)=>(n,r,u,t)=>{let c=u?Object.assign(u,{async:!1}):{async:!1},g=n._zod.run({value:r,issues:[]},c);if(g instanceof Promise)throw new vn;if(g.issues.length){let h=new(t?.Err??i)(g.issues.map((_)=>Ai(_,c,$i())));throw Error.captureStackTrace(h,t?.callee),h}return g.value},tc=nc(Et),rc=(i)=>async(n,r,u,t)=>{let c=u?Object.assign(u,{async:!0}):{async:!0},g=n._zod.run({value:r,issues:[]},c);if(g instanceof Promise)g=await g;if(g.issues.length){let h=new(t?.Err??i)(g.issues.map((_)=>Ai(_,c,$i())));throw Error.captureStackTrace(h,t?.callee),h}return g.value},uc=rc(Et),cc=(i)=>(n,r,u)=>{let t=u?{...u,async:!1}:{async:!1},c=n._zod.run({value:r,issues:[]},t);if(c instanceof Promise)throw new vn;return c.issues.length?{success:!1,error:new(i??vr)(c.issues.map((g)=>Ai(g,t,$i())))}:{success:!0,data:c.value}},pg=cc(Et),oc=(i)=>async(n,r,u)=>{let t=u?Object.assign(u,{async:!0}):{async:!0},c=n._zod.run({value:r,issues:[]},t);if(c instanceof Promise)c=await c;return c.issues.length?{success:!1,error:new i(c.issues.map((g)=>Ai(g,t,$i())))}:{success:!0,data:c.value}},dg=oc(Et);var rt={};Xn(rt,{xid:()=>nh,uuid7:()=>tJ,uuid6:()=>nJ,uuid4:()=>iJ,uuid:()=>tt,uppercase:()=>Gh,unicodeEmail:()=>cJ,undefined:()=>Eh,ulid:()=>ih,time:()=>Oh,string:()=>Uh,rfc5322Email:()=>uJ,number:()=>Wh,null:()=>Jh,nanoid:()=>rh,lowercase:()=>Hh,ksuid:()=>th,ipv6:()=>_h,ipv4:()=>hh,integer:()=>zh,html5Email:()=>rJ,hostname:()=>bh,guid:()=>ch,extendedDuration:()=>sD,emoji:()=>gh,email:()=>oh,e164:()=>vh,duration:()=>uh,domain:()=>hJ,datetime:()=>jh,date:()=>fh,cuid2:()=>sg,cuid:()=>ag,cidrv6:()=>$h,cidrv4:()=>lh,browserEmail:()=>oJ,boolean:()=>Dh,bigint:()=>Nh,base64url:()=>gc,base64:()=>wh,_emoji:()=>gJ});var ag=/^[cC][^\\s-]{8,}$/,sg=/^[0-9a-z]+$/,ih=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,nh=/^[0-9a-vA-V]{20}$/,th=/^[A-Za-z0-9]{27}$/,rh=/^[a-zA-Z0-9_-]{21}$/,uh=/^P(?:(\\d+W)|(?!.*W)(?=\\d|T\\d)(\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+([.,]\\d+)?S)?)?)$/,sD=/^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/,ch=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,tt=(i)=>{if(!i)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${i}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)},iJ=tt(4),nJ=tt(6),tJ=tt(7),oh=/^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_\'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/,rJ=/^[a-zA-Z0-9.!#$%&\'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,uJ=/^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,cJ=/^[^\\s@"]{1,64}@[^\\s@]{1,255}$/u,oJ=/^[a-zA-Z0-9.!#$%&\'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,gJ="^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$";function gh(){return new RegExp("^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$","u")}var hh=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_h=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,lh=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/([0-9]|[1-2][0-9]|3[0-2])$/,$h=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,wh=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,gc=/^[A-Za-z0-9_-]*$/,bh=/^([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+$/,hJ=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/,vh=/^\\+(?:[0-9]){6,14}[0-9]$/,Bf="((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))",fh=new RegExp(`^${Bf}$`);function Kf(i){let n="([01]\\\\d|2[0-3]):[0-5]\\\\d:[0-5]\\\\d";if(i.precision)n=`${n}\\\\.\\\\d{${i.precision}}`;else if(i.precision==null)n=`${n}(\\\\.\\\\d+)?`;return n}function Oh(i){return new RegExp(`^${Kf(i)}$`)}function jh(i){let n=`${Bf}T${Kf(i)}`,r=[];if(r.push(i.local?"Z?":"Z"),i.offset)r.push("([+-]\\\\d{2}:?\\\\d{2})");return n=`${n}(${r.join("|")})`,new RegExp(`^${n}$`)}var Uh=(i)=>{let n=i?`[\\\\s\\\\S]{${i?.minimum??0},${i?.maximum??""}}`:"[\\\\s\\\\S]*";return new RegExp(`^${n}$`)},Nh=/^\\d+n?$/,zh=/^\\d+$/,Wh=/^-?\\d+(?:\\.\\d+)?/i,Dh=/true|false/i,Jh=/null/i;var Eh=/undefined/i;var Hh=/^[^A-Z]*$/,Gh=/^[^a-z]*$/;var ui=D("$ZodCheck",(i,n)=>{var r;i._zod??(i._zod={}),i._zod.def=n,(r=i._zod).onattach??(r.onattach=[])}),Mf={number:"number",bigint:"bigint",object:"date"},hc=D("$ZodCheckLessThan",(i,n)=>{ui.init(i,n);let r=Mf[typeof n.value];i._zod.onattach.push((u)=>{let t=u._zod.bag,c=(n.inclusive?t.maximum:t.exclusiveMaximum)??Number.POSITIVE_INFINITY;if(n.value<c)if(n.inclusive)t.maximum=n.value;else t.exclusiveMaximum=n.value}),i._zod.check=(u)=>{if(n.inclusive?u.value<=n.value:u.value<n.value)return;u.issues.push({origin:r,code:"too_big",maximum:n.value,input:u.value,inclusive:n.inclusive,inst:i,continue:!n.abort})}}),_c=D("$ZodCheckGreaterThan",(i,n)=>{ui.init(i,n);let r=Mf[typeof n.value];i._zod.onattach.push((u)=>{let t=u._zod.bag,c=(n.inclusive?t.minimum:t.exclusiveMinimum)??Number.NEGATIVE_INFINITY;if(n.value>c)if(n.inclusive)t.minimum=n.value;else t.exclusiveMinimum=n.value}),i._zod.check=(u)=>{if(n.inclusive?u.value>=n.value:u.value>n.value)return;u.issues.push({origin:r,code:"too_small",minimum:n.value,input:u.value,inclusive:n.inclusive,inst:i,continue:!n.abort})}}),qh=D("$ZodCheckMultipleOf",(i,n)=>{ui.init(i,n),i._zod.onattach.push((r)=>{var u;(u=r._zod.bag).multipleOf??(u.multipleOf=n.value)}),i._zod.check=(r)=>{if(typeof r.value!==typeof n.value)throw new Error("Cannot mix number and bigint in multiple_of check.");if(typeof r.value==="bigint"?r.value%n.value===BigInt(0):xg(r.value,n.value)===0)return;r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:n.value,input:r.value,inst:i,continue:!n.abort})}}),Xh=D("$ZodCheckNumberFormat",(i,n)=>{ui.init(i,n),n.format=n.format||"float64";let r=n.format?.includes("int"),u=r?"int":"number",[t,c]=kg[n.format];i._zod.onattach.push((g)=>{let h=g._zod.bag;if(h.format=n.format,h.minimum=t,h.maximum=c,r)h.pattern=zh}),i._zod.check=(g)=>{let h=g.value;if(r){if(!Number.isInteger(h)){g.issues.push({expected:u,format:n.format,code:"invalid_type",input:h,inst:i});return}if(!Number.isSafeInteger(h)){if(h>0)g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:i,origin:u,continue:!n.abort});else g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:i,origin:u,continue:!n.abort});return}}if(h<t)g.issues.push({origin:"number",input:h,code:"too_small",minimum:t,inclusive:!0,inst:i,continue:!n.abort});if(h>c)g.issues.push({origin:"number",input:h,code:"too_big",maximum:c,inst:i})}}),Lh=D("$ZodCheckBigIntFormat",(i,n)=>{ui.init(i,n);let[r,u]=Cg[n.format];i._zod.onattach.push((t)=>{let c=t._zod.bag;c.format=n.format,c.minimum=r,c.maximum=u}),i._zod.check=(t)=>{let c=t.value;if(c<r)t.issues.push({origin:"bigint",input:c,code:"too_small",minimum:r,inclusive:!0,inst:i,continue:!n.abort});if(c>u)t.issues.push({origin:"bigint",input:c,code:"too_big",maximum:u,inst:i})}}),Ih=D("$ZodCheckMaxSize",(i,n)=>{ui.init(i,n),i._zod.when=(r)=>{let u=r.value;return!Bn(u)&&u.size!==void 0},i._zod.onattach.push((r)=>{let u=r._zod.bag.maximum??Number.POSITIVE_INFINITY;if(n.maximum<u)r._zod.bag.maximum=n.maximum}),i._zod.check=(r)=>{let u=r.value;if(u.size<=n.maximum)return;r.issues.push({origin:wr(u),code:"too_big",maximum:n.maximum,input:u,inst:i,continue:!n.abort})}}),Yh=D("$ZodCheckMinSize",(i,n)=>{ui.init(i,n),i._zod.when=(r)=>{let u=r.value;return!Bn(u)&&u.size!==void 0},i._zod.onattach.push((r)=>{let u=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(n.minimum>u)r._zod.bag.minimum=n.minimum}),i._zod.check=(r)=>{let u=r.value;if(u.size>=n.minimum)return;r.issues.push({origin:wr(u),code:"too_small",minimum:n.minimum,input:u,inst:i,continue:!n.abort})}}),Qh=D("$ZodCheckSizeEquals",(i,n)=>{ui.init(i,n),i._zod.when=(r)=>{let u=r.value;return!Bn(u)&&u.size!==void 0},i._zod.onattach.push((r)=>{let u=r._zod.bag;u.minimum=n.size,u.maximum=n.size,u.size=n.size}),i._zod.check=(r)=>{let u=r.value,t=u.size;if(t===n.size)return;let c=t>n.size;r.issues.push({origin:wr(u),...c?{code:"too_big",maximum:n.size}:{code:"too_small",minimum:n.size},input:r.value,inst:i,continue:!n.abort})}}),mh=D("$ZodCheckMaxLength",(i,n)=>{ui.init(i,n),i._zod.when=(r)=>{let u=r.value;return!Bn(u)&&u.length!==void 0},i._zod.onattach.push((r)=>{let u=r._zod.bag.maximum??Number.POSITIVE_INFINITY;if(n.maximum<u)r._zod.bag.maximum=n.maximum}),i._zod.check=(r)=>{let u=r.value;if(u.length<=n.maximum)return;let c=br(u);r.issues.push({origin:c,code:"too_big",maximum:n.maximum,inclusive:!0,input:u,inst:i,continue:!n.abort})}}),Sh=D("$ZodCheckMinLength",(i,n)=>{ui.init(i,n),i._zod.when=(r)=>{let u=r.value;return!Bn(u)&&u.length!==void 0},i._zod.onattach.push((r)=>{let u=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(n.minimum>u)r._zod.bag.minimum=n.minimum}),i._zod.check=(r)=>{let u=r.value;if(u.length>=n.minimum)return;let c=br(u);r.issues.push({origin:c,code:"too_small",minimum:n.minimum,inclusive:!0,input:u,inst:i,continue:!n.abort})}}),Ah=D("$ZodCheckLengthEquals",(i,n)=>{ui.init(i,n),i._zod.when=(r)=>{let u=r.value;return!Bn(u)&&u.length!==void 0},i._zod.onattach.push((r)=>{let u=r._zod.bag;u.minimum=n.length,u.maximum=n.length,u.length=n.length}),i._zod.check=(r)=>{let u=r.value,t=u.length;if(t===n.length)return;let c=br(u),g=t>n.length;r.issues.push({origin:c,...g?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},input:r.value,inst:i,continue:!n.abort})}}),Ht=D("$ZodCheckStringFormat",(i,n)=>{var r;ui.init(i,n),i._zod.onattach.push((u)=>{let t=u._zod.bag;if(t.format=n.format,n.pattern)t.patterns??(t.patterns=new Set),t.patterns.add(n.pattern)}),(r=i._zod).check??(r.check=(u)=>{if(!n.pattern)throw new Error("Not implemented.");if(n.pattern.lastIndex=0,n.pattern.test(u.value))return;u.issues.push({origin:"string",code:"invalid_format",format:n.format,input:u.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:i,continue:!n.abort})})}),Bh=D("$ZodCheckRegex",(i,n)=>{Ht.init(i,n),i._zod.check=(r)=>{if(n.pattern.lastIndex=0,n.pattern.test(r.value))return;r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:n.pattern.toString(),inst:i,continue:!n.abort})}}),Kh=D("$ZodCheckLowerCase",(i,n)=>{n.pattern??(n.pattern=Hh),Ht.init(i,n)}),Vh=D("$ZodCheckUpperCase",(i,n)=>{n.pattern??(n.pattern=Gh),Ht.init(i,n)}),Mh=D("$ZodCheckIncludes",(i,n)=>{ui.init(i,n);let r=fn(n.includes),u=new RegExp(typeof n.position==="number"?`^.{${n.position}}${r}`:r);n.pattern=u,i._zod.onattach.push((t)=>{let c=t._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(u)}),i._zod.check=(t)=>{if(t.value.includes(n.includes,n.position))return;t.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:t.value,inst:i,continue:!n.abort})}}),xh=D("$ZodCheckStartsWith",(i,n)=>{ui.init(i,n);let r=new RegExp(`^${fn(n.prefix)}.*`);n.pattern??(n.pattern=r),i._zod.onattach.push((u)=>{let t=u._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),i._zod.check=(u)=>{if(u.value.startsWith(n.prefix))return;u.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:u.value,inst:i,continue:!n.abort})}}),Fh=D("$ZodCheckEndsWith",(i,n)=>{ui.init(i,n);let r=new RegExp(`.*${fn(n.suffix)}$`);n.pattern??(n.pattern=r),i._zod.onattach.push((u)=>{let t=u._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),i._zod.check=(u)=>{if(u.value.endsWith(n.suffix))return;u.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:u.value,inst:i,continue:!n.abort})}});function Vf(i,n,r){if(i.issues.length)n.issues.push(...Ii(r,i.issues))}var Ph=D("$ZodCheckProperty",(i,n)=>{ui.init(i,n),i._zod.check=(r)=>{let u=n.schema._zod.run({value:r.value[n.property],issues:[]},{});if(u instanceof Promise)return u.then((t)=>Vf(t,r,n.property));Vf(u,r,n.property);return}}),yh=D("$ZodCheckMimeType",(i,n)=>{ui.init(i,n);let r=new Set(n.mime);i._zod.onattach.push((u)=>{u._zod.bag.mime=n.mime}),i._zod.check=(u)=>{if(r.has(u.value.type))return;u.issues.push({code:"invalid_value",values:n.mime,input:u.value.type,path:["type"],inst:i})}}),Th=D("$ZodCheckOverwrite",(i,n)=>{ui.init(i,n),i._zod.check=(r)=>{r.value=n.tx(r.value)}});class lc{constructor(i=[]){if(this.content=[],this.indent=0,this)this.args=i}indented(i){this.indent+=1,i(this),this.indent-=1}write(i){if(typeof i==="function"){i(this,{execution:"sync"}),i(this,{execution:"async"});return}let r=i.split(`\n`).filter((c)=>c),u=Math.min(...r.map((c)=>c.length-c.trimStart().length)),t=r.map((c)=>c.slice(u)).map((c)=>" ".repeat(this.indent*2)+c);for(let c of t)this.content.push(c)}compile(){let i=Function,n=this?.args,u=[...(this?.content??[""]).map((t)=>`  ${t}`)];return new i(...n,u.join(`\n`))}}var kh={major:4,minor:0,patch:0};var y=D("$ZodType",(i,n)=>{var r;i??(i={}),i._zod.id=n.type+"_"+su(10),i._zod.def=n,i._zod.bag=i._zod.bag||{},i._zod.version=kh;let u=[...i._zod.def.checks??[]];if(i._zod.traits.has("$ZodCheck"))u.unshift(i);for(let t of u)for(let c of t._zod.onattach)c(i);if(u.length===0)(r=i._zod).deferred??(r.deferred=[]),i._zod.deferred?.push(()=>{i._zod.run=i._zod.parse});else{let t=(c,g,h)=>{let _=nt(c),l;for(let $ of g){if($._zod.when){if(!$._zod.when(c))continue}else if(_)continue;let w=c.issues.length,b=$._zod.check(c);if(b instanceof Promise&&h?.async===!1)throw new vn;if(l||b instanceof Promise)l=(l??Promise.resolve()).then(async()=>{if(await b,c.issues.length===w)return;if(!_)_=nt(c,w)});else{if(c.issues.length===w)continue;if(!_)_=nt(c,w)}}if(l)return l.then(()=>{return c});return c};i._zod.run=(c,g)=>{let h=i._zod.parse(c,g);if(h instanceof Promise){if(g.async===!1)throw new vn;return h.then((_)=>t(_,u,g))}return t(h,u,g)}}i["~standard"]={validate:(t)=>{try{let c=pg(i,t);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return dg(i,t).then((g)=>g.success?{value:g.data}:{issues:g.error?.issues})}},vendor:"zod",version:1}}),jr=D("$ZodString",(i,n)=>{y.init(i,n),i._zod.pattern=[...i?._zod.bag?.patterns??[]].pop()??Uh(i._zod.bag),i._zod.parse=(r,u)=>{if(n.coerce)try{r.value=String(r.value)}catch(t){}if(typeof r.value==="string")return r;return r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:i}),r}}),ii=D("$ZodStringFormat",(i,n)=>{Ht.init(i,n),jr.init(i,n)}),Rh=D("$ZodGUID",(i,n)=>{n.pattern??(n.pattern=ch),ii.init(i,n)}),Zh=D("$ZodUUID",(i,n)=>{if(n.version){let u={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(u===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=tt(u))}else n.pattern??(n.pattern=tt());ii.init(i,n)}),eh=D("$ZodEmail",(i,n)=>{n.pattern??(n.pattern=oh),ii.init(i,n)}),ph=D("$ZodURL",(i,n)=>{ii.init(i,n),i._zod.check=(r)=>{try{let u=new URL(r.value);if(n.hostname){if(n.hostname.lastIndex=0,!n.hostname.test(u.hostname))r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:bh.source,input:r.value,inst:i})}if(n.protocol){if(n.protocol.lastIndex=0,!n.protocol.test(u.protocol.endsWith(":")?u.protocol.slice(0,-1):u.protocol))r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:r.value,inst:i})}return}catch(u){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:i})}}}),dh=D("$ZodEmoji",(i,n)=>{n.pattern??(n.pattern=gh()),ii.init(i,n)}),ah=D("$ZodNanoID",(i,n)=>{n.pattern??(n.pattern=rh),ii.init(i,n)}),sh=D("$ZodCUID",(i,n)=>{n.pattern??(n.pattern=ag),ii.init(i,n)}),i_=D("$ZodCUID2",(i,n)=>{n.pattern??(n.pattern=sg),ii.init(i,n)}),n_=D("$ZodULID",(i,n)=>{n.pattern??(n.pattern=ih),ii.init(i,n)}),t_=D("$ZodXID",(i,n)=>{n.pattern??(n.pattern=nh),ii.init(i,n)}),r_=D("$ZodKSUID",(i,n)=>{n.pattern??(n.pattern=th),ii.init(i,n)}),u_=D("$ZodISODateTime",(i,n)=>{n.pattern??(n.pattern=jh(n)),ii.init(i,n)}),c_=D("$ZodISODate",(i,n)=>{n.pattern??(n.pattern=fh),ii.init(i,n)}),o_=D("$ZodISOTime",(i,n)=>{n.pattern??(n.pattern=Oh(n)),ii.init(i,n)}),g_=D("$ZodISODuration",(i,n)=>{n.pattern??(n.pattern=uh),ii.init(i,n)}),h_=D("$ZodIPv4",(i,n)=>{n.pattern??(n.pattern=hh),ii.init(i,n),i._zod.onattach.push((r)=>{let u=r._zod.bag;u.format="ipv4"})}),__=D("$ZodIPv6",(i,n)=>{n.pattern??(n.pattern=_h),ii.init(i,n),i._zod.onattach.push((r)=>{let u=r._zod.bag;u.format="ipv6"}),i._zod.check=(r)=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:i})}}}),l_=D("$ZodCIDRv4",(i,n)=>{n.pattern??(n.pattern=lh),ii.init(i,n)}),$_=D("$ZodCIDRv6",(i,n)=>{n.pattern??(n.pattern=$h),ii.init(i,n),i._zod.check=(r)=>{let[u,t]=r.value.split("/");try{if(!t)throw new Error;let c=Number(t);if(`${c}`!==t)throw new Error;if(c<0||c>128)throw new Error;new URL(`http://[${u}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:i})}}});function w_(i){if(i==="")return!0;if(i.length%4!==0)return!1;try{return atob(i),!0}catch{return!1}}var b_=D("$ZodBase64",(i,n)=>{n.pattern??(n.pattern=wh),ii.init(i,n),i._zod.onattach.push((r)=>{r._zod.bag.contentEncoding="base64"}),i._zod.check=(r)=>{if(w_(r.value))return;r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:i})}});function af(i){if(!gc.test(i))return!1;let n=i.replace(/[-_]/g,(u)=>u==="-"?"+":"/"),r=n.padEnd(Math.ceil(n.length/4)*4,"=");return w_(r)}var v_=D("$ZodBase64URL",(i,n)=>{n.pattern??(n.pattern=gc),ii.init(i,n),i._zod.onattach.push((r)=>{r._zod.bag.contentEncoding="base64url"}),i._zod.check=(r)=>{if(af(r.value))return;r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:i})}}),f_=D("$ZodE164",(i,n)=>{n.pattern??(n.pattern=vh),ii.init(i,n)});function sf(i,n=null){try{let r=i.split(".");if(r.length!==3)return!1;let[u]=r,t=JSON.parse(atob(u));if("typ"in t&&t?.typ!=="JWT")return!1;if(!t.alg)return!1;if(n&&(!("alg"in t)||t.alg!==n))return!1;return!0}catch{return!1}}var O_=D("$ZodJWT",(i,n)=>{ii.init(i,n),i._zod.check=(r)=>{if(sf(r.value,n.alg))return;r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:i})}}),bc=D("$ZodNumber",(i,n)=>{y.init(i,n),i._zod.pattern=i._zod.bag.pattern??Wh,i._zod.parse=(r,u)=>{if(n.coerce)try{r.value=Number(r.value)}catch(g){}let t=r.value;if(typeof t==="number"&&!Number.isNaN(t)&&Number.isFinite(t))return r;let c=typeof t==="number"?Number.isNaN(t)?"NaN":!Number.isFinite(t)?"Infinity":void 0:void 0;return r.issues.push({expected:"number",code:"invalid_type",input:t,inst:i,...c?{received:c}:{}}),r}}),j_=D("$ZodNumber",(i,n)=>{Xh.init(i,n),bc.init(i,n)}),Ur=D("$ZodBoolean",(i,n)=>{y.init(i,n),i._zod.pattern=Dh,i._zod.parse=(r,u)=>{if(n.coerce)try{r.value=Boolean(r.value)}catch(c){}let t=r.value;if(typeof t==="boolean")return r;return r.issues.push({expected:"boolean",code:"invalid_type",input:t,inst:i}),r}}),vc=D("$ZodBigInt",(i,n)=>{y.init(i,n),i._zod.pattern=Nh,i._zod.parse=(r,u)=>{if(n.coerce)try{r.value=BigInt(r.value)}catch(c){}let{value:t}=r;if(typeof t==="bigint")return r;return r.issues.push({expected:"bigint",code:"invalid_type",input:t,inst:i}),r}}),U_=D("$ZodBigInt",(i,n)=>{Lh.init(i,n),vc.init(i,n)}),N_=D("$ZodSymbol",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{let{value:t}=r;if(typeof t==="symbol")return r;return r.issues.push({expected:"symbol",code:"invalid_type",input:t,inst:i}),r}}),z_=D("$ZodUndefined",(i,n)=>{y.init(i,n),i._zod.pattern=Eh,i._zod.values=new Set([void 0]),i._zod.parse=(r,u)=>{let{value:t}=r;if(typeof t==="undefined")return r;return r.issues.push({expected:"undefined",code:"invalid_type",input:t,inst:i}),r}}),W_=D("$ZodNull",(i,n)=>{y.init(i,n),i._zod.pattern=Jh,i._zod.values=new Set([null]),i._zod.parse=(r,u)=>{let{value:t}=r;if(t===null)return r;return r.issues.push({expected:"null",code:"invalid_type",input:t,inst:i}),r}}),D_=D("$ZodAny",(i,n)=>{y.init(i,n),i._zod.parse=(r)=>r}),Kn=D("$ZodUnknown",(i,n)=>{y.init(i,n),i._zod.parse=(r)=>r}),J_=D("$ZodNever",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{return r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:i}),r}}),E_=D("$ZodVoid",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{let{value:t}=r;if(typeof t==="undefined")return r;return r.issues.push({expected:"void",code:"invalid_type",input:t,inst:i}),r}}),H_=D("$ZodDate",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{if(n.coerce)try{r.value=new Date(r.value)}catch(h){}let t=r.value,c=t instanceof Date;if(c&&!Number.isNaN(t.getTime()))return r;return r.issues.push({expected:"date",code:"invalid_type",input:t,...c?{received:"Invalid Date"}:{},inst:i}),r}});function Ff(i,n,r){if(i.issues.length)n.issues.push(...Ii(r,i.issues));n.value[r]=i.value}var Nr=D("$ZodArray",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{let t=r.value;if(!Array.isArray(t))return r.issues.push({expected:"array",code:"invalid_type",input:t,inst:i}),r;r.value=Array(t.length);let c=[];for(let g=0;g<t.length;g++){let h=t[g],_=n.element._zod.run({value:h,issues:[]},u);if(_ instanceof Promise)c.push(_.then((l)=>Ff(l,r,g)));else Ff(_,r,g)}if(c.length)return Promise.all(c).then(()=>r);return r}});function $c(i,n,r){if(i.issues.length)n.issues.push(...Ii(r,i.issues));n.value[r]=i.value}function Pf(i,n,r,u){if(i.issues.length)if(u[r]===void 0)if(r in u)n.value[r]=void 0;else n.value[r]=i.value;else n.issues.push(...Ii(r,i.issues));else if(i.value===void 0){if(r in u)n.value[r]=void 0}else n.value[r]=i.value}var G_=D("$ZodObject",(i,n)=>{y.init(i,n);let r=hr(()=>{let w=Object.keys(n.shape);for(let v of w)if(!(n.shape[v]instanceof y))throw new Error(`Invalid element at key "${v}": expected a Zod schema`);let b=Tg(n.shape);return{shape:n.shape,keys:w,keySet:new Set(w),numKeys:w.length,optionalKeys:new Set(b)}});d(i._zod,"propValues",()=>{let w=n.shape,b={};for(let v in w){let f=w[v]._zod;if(f.values){b[v]??(b[v]=new Set);for(let U of f.values)b[v].add(U)}}return b});let u=(w)=>{let b=new lc(["shape","payload","ctx"]),{keys:v,optionalKeys:f}=r.value,U=(N)=>{let j=it(N);return`shape[${j}]._zod.run({ value: input[${j}], issues: [] }, ctx)`};b.write("const input = payload.value;");let z=Object.create(null);for(let N of v)z[N]=su(15);b.write("const newResult = {}");for(let N of v)if(f.has(N)){let j=z[N];b.write(`const ${j} = ${U(N)};`);let O=it(N);b.write(`\n        if (${j}.issues.length) {\n          if (input[${O}] === undefined) {\n            if (${O} in input) {\n              newResult[${O}] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ${j}.issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [${O}, ...iss.path] : [${O}],\n              }))\n            );\n          }\n        } else if (${j}.value === undefined) {\n          if (${O} in input) newResult[${O}] = undefined;\n        } else {\n          newResult[${O}] = ${j}.value;\n        }\n        `)}else{let j=z[N];b.write(`const ${j} = ${U(N)};`),b.write(`\n          if (${j}.issues.length) payload.issues = payload.issues.concat(${j}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${it(N)}, ...iss.path] : [${it(N)}]\n          })));`),b.write(`newResult[${it(N)}] = ${j}.value`)}b.write("payload.value = newResult;"),b.write("return payload;");let J=b.compile();return(N,j)=>J(w,N,j)},t,c=ic,g=!cr.jitless,_=g&&Pg.value,{catchall:l}=n,$;i._zod.parse=(w,b)=>{$??($=r.value);let v=w.value;if(!c(v))return w.issues.push({expected:"object",code:"invalid_type",input:v,inst:i}),w;let f=[];if(g&&_&&b?.async===!1&&b.jitless!==!0){if(!t)t=u(n.shape);w=t(w,b)}else{w.value={};let j=$.shape;for(let O of $.keys){let W=j[O],E=W._zod.run({value:v[O],issues:[]},b),X=W._zod.optin==="optional"&&W._zod.optout==="optional";if(E instanceof Promise)f.push(E.then((H)=>X?Pf(H,w,O,v):$c(H,w,O)));else if(X)Pf(E,w,O,v);else $c(E,w,O)}}if(!l)return f.length?Promise.all(f).then(()=>w):w;let U=[],z=$.keySet,J=l._zod,N=J.def.type;for(let j of Object.keys(v)){if(z.has(j))continue;if(N==="never"){U.push(j);continue}let O=J.run({value:v[j],issues:[]},b);if(O instanceof Promise)f.push(O.then((W)=>$c(W,w,j)));else $c(O,w,j)}if(U.length)w.issues.push({code:"unrecognized_keys",keys:U,input:v,inst:i});if(!f.length)return w;return Promise.all(f).then(()=>{return w})}});function yf(i,n,r,u){for(let t of i)if(t.issues.length===0)return n.value=t.value,n;return n.issues.push({code:"invalid_union",input:n.value,inst:r,errors:i.map((t)=>t.issues.map((c)=>Ai(c,u,$i())))}),n}var fc=D("$ZodUnion",(i,n)=>{y.init(i,n),d(i._zod,"values",()=>{if(n.options.every((r)=>r._zod.values))return new Set(n.options.flatMap((r)=>Array.from(r._zod.values)));return}),d(i._zod,"pattern",()=>{if(n.options.every((r)=>r._zod.pattern)){let r=n.options.map((u)=>u._zod.pattern);return new RegExp(`^(${r.map((u)=>_r(u.source)).join("|")})$`)}return}),i._zod.parse=(r,u)=>{let t=!1,c=[];for(let g of n.options){let h=g._zod.run({value:r.value,issues:[]},u);if(h instanceof Promise)c.push(h),t=!0;else{if(h.issues.length===0)return h;c.push(h)}}if(!t)return yf(c,r,i,u);return Promise.all(c).then((g)=>{return yf(g,r,i,u)})}}),q_=D("$ZodDiscriminatedUnion",(i,n)=>{fc.init(i,n);let r=i._zod.parse;d(i._zod,"propValues",()=>{let t={};for(let c of n.options){let g=c._zod.propValues;if(!g||Object.keys(g).length===0)throw new Error(`Invalid discriminated union option at index "${n.options.indexOf(c)}"`);for(let[h,_]of Object.entries(g)){if(!t[h])t[h]=new Set;for(let l of _)t[h].add(l)}}return t});let u=hr(()=>{let t=n.options,c=new Map;for(let g of t){let h=g._zod.propValues[n.discriminator];if(!h||h.size===0)throw new Error(`Invalid discriminated union option at index "${n.options.indexOf(g)}"`);for(let _ of h){if(c.has(_))throw new Error(`Duplicate discriminator value "${String(_)}"`);c.set(_,g)}}return c});i._zod.parse=(t,c)=>{let g=t.value;if(!ic(g))return t.issues.push({code:"invalid_type",expected:"object",input:g,inst:i}),t;let h=u.value.get(g?.[n.discriminator]);if(h)return h._zod.run(t,c);if(n.unionFallback)return r(t,c);return t.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:g,path:[n.discriminator],inst:i}),t}}),X_=D("$ZodIntersection",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{let{value:t}=r,c=n.left._zod.run({value:t,issues:[]},u),g=n.right._zod.run({value:t,issues:[]},u);if(c instanceof Promise||g instanceof Promise)return Promise.all([c,g]).then(([_,l])=>{return Tf(r,_,l)});return Tf(r,c,g)}});function Ch(i,n){if(i===n)return{valid:!0,data:i};if(i instanceof Date&&n instanceof Date&&+i===+n)return{valid:!0,data:i};if(lr(i)&&lr(n)){let r=Object.keys(n),u=Object.keys(i).filter((c)=>r.indexOf(c)!==-1),t={...i,...n};for(let c of u){let g=Ch(i[c],n[c]);if(!g.valid)return{valid:!1,mergeErrorPath:[c,...g.mergeErrorPath]};t[c]=g.data}return{valid:!0,data:t}}if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let u=0;u<i.length;u++){let t=i[u],c=n[u],g=Ch(t,c);if(!g.valid)return{valid:!1,mergeErrorPath:[u,...g.mergeErrorPath]};r.push(g.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Tf(i,n,r){if(n.issues.length)i.issues.push(...n.issues);if(r.issues.length)i.issues.push(...r.issues);if(nt(i))return i;let u=Ch(n.value,r.value);if(!u.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(u.mergeErrorPath)}`);return i.value=u.data,i}var ut=D("$ZodTuple",(i,n)=>{y.init(i,n);let r=n.items,u=r.length-[...r].reverse().findIndex((t)=>t._zod.optin!=="optional");i._zod.parse=(t,c)=>{let g=t.value;if(!Array.isArray(g))return t.issues.push({input:g,inst:i,expected:"tuple",code:"invalid_type"}),t;t.value=[];let h=[];if(!n.rest){let l=g.length>r.length,$=g.length<u-1;if(l||$)return t.issues.push({input:g,inst:i,origin:"array",...l?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length}}),t}let _=-1;for(let l of r){if(_++,_>=g.length){if(_>=u)continue}let $=l._zod.run({value:g[_],issues:[]},c);if($ instanceof Promise)h.push($.then((w)=>wc(w,t,_)));else wc($,t,_)}if(n.rest){let l=g.slice(r.length);for(let $ of l){_++;let w=n.rest._zod.run({value:$,issues:[]},c);if(w instanceof Promise)h.push(w.then((b)=>wc(b,t,_)));else wc(w,t,_)}}if(h.length)return Promise.all(h).then(()=>t);return t}});function wc(i,n,r){if(i.issues.length)n.issues.push(...Ii(r,i.issues));n.value[r]=i.value}var L_=D("$ZodRecord",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{let t=r.value;if(!lr(t))return r.issues.push({expected:"record",code:"invalid_type",input:t,inst:i}),r;let c=[];if(n.keyType._zod.values){let g=n.keyType._zod.values;r.value={};for(let _ of g)if(typeof _==="string"||typeof _==="number"||typeof _==="symbol"){let l=n.valueType._zod.run({value:t[_],issues:[]},u);if(l instanceof Promise)c.push(l.then(($)=>{if($.issues.length)r.issues.push(...Ii(_,$.issues));r.value[_]=$.value}));else{if(l.issues.length)r.issues.push(...Ii(_,l.issues));r.value[_]=l.value}}let h;for(let _ in t)if(!g.has(_))h=h??[],h.push(_);if(h&&h.length>0)r.issues.push({code:"unrecognized_keys",input:t,inst:i,keys:h})}else{r.value={};for(let g of Reflect.ownKeys(t)){if(g==="__proto__")continue;let h=n.keyType._zod.run({value:g,issues:[]},u);if(h instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(h.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:h.issues.map((l)=>Ai(l,u,$i())),input:g,path:[g],inst:i}),r.value[h.value]=h.value;continue}let _=n.valueType._zod.run({value:t[g],issues:[]},u);if(_ instanceof Promise)c.push(_.then((l)=>{if(l.issues.length)r.issues.push(...Ii(g,l.issues));r.value[h.value]=l.value}));else{if(_.issues.length)r.issues.push(...Ii(g,_.issues));r.value[h.value]=_.value}}}if(c.length)return Promise.all(c).then(()=>r);return r}}),I_=D("$ZodMap",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{let t=r.value;if(!(t instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:t,inst:i}),r;let c=[];r.value=new Map;for(let[g,h]of t){let _=n.keyType._zod.run({value:g,issues:[]},u),l=n.valueType._zod.run({value:h,issues:[]},u);if(_ instanceof Promise||l instanceof Promise)c.push(Promise.all([_,l]).then(([$,w])=>{kf($,w,r,g,t,i,u)}));else kf(_,l,r,g,t,i,u)}if(c.length)return Promise.all(c).then(()=>r);return r}});function kf(i,n,r,u,t,c,g){if(i.issues.length)if($r.has(typeof u))r.issues.push(...Ii(u,i.issues));else r.issues.push({origin:"map",code:"invalid_key",input:t,inst:c,issues:i.issues.map((h)=>Ai(h,g,$i()))});if(n.issues.length)if($r.has(typeof u))r.issues.push(...Ii(u,n.issues));else r.issues.push({origin:"map",code:"invalid_element",input:t,inst:c,key:u,issues:n.issues.map((h)=>Ai(h,g,$i()))});r.value.set(i.value,n.value)}var Y_=D("$ZodSet",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{let t=r.value;if(!(t instanceof Set))return r.issues.push({input:t,inst:i,expected:"set",code:"invalid_type"}),r;let c=[];r.value=new Set;for(let g of t){let h=n.valueType._zod.run({value:g,issues:[]},u);if(h instanceof Promise)c.push(h.then((_)=>Cf(_,r)));else Cf(h,r)}if(c.length)return Promise.all(c).then(()=>r);return r}});function Cf(i,n){if(i.issues.length)n.issues.push(...i.issues);n.value.add(i.value)}var Q_=D("$ZodEnum",(i,n)=>{y.init(i,n);let r=gr(n.entries);i._zod.values=new Set(r),i._zod.pattern=new RegExp(`^(${r.filter((u)=>$r.has(typeof u)).map((u)=>typeof u==="string"?fn(u):u.toString()).join("|")})$`),i._zod.parse=(u,t)=>{let c=u.value;if(i._zod.values.has(c))return u;return u.issues.push({code:"invalid_value",values:r,input:c,inst:i}),u}}),m_=D("$ZodLiteral",(i,n)=>{y.init(i,n),i._zod.values=new Set(n.values),i._zod.pattern=new RegExp(`^(${n.values.map((r)=>typeof r==="string"?fn(r):r?r.toString():String(r)).join("|")})$`),i._zod.parse=(r,u)=>{let t=r.value;if(i._zod.values.has(t))return r;return r.issues.push({code:"invalid_value",values:n.values,input:t,inst:i}),r}}),S_=D("$ZodFile",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{let t=r.value;if(t instanceof File)return r;return r.issues.push({expected:"file",code:"invalid_type",input:t,inst:i}),r}}),A_=D("$ZodTransform",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{let t=n.transform(r.value,r);if(u.async)return(t instanceof Promise?t:Promise.resolve(t)).then((g)=>{return r.value=g,r});if(t instanceof Promise)throw new vn;return r.value=t,r}}),B_=D("$ZodOptional",(i,n)=>{y.init(i,n),i._zod.optin="optional",i._zod.optout="optional",d(i._zod,"values",()=>{return n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0}),d(i._zod,"pattern",()=>{let r=n.innerType._zod.pattern;return r?new RegExp(`^(${_r(r.source)})?$`):void 0}),i._zod.parse=(r,u)=>{if(r.value===void 0)return r;return n.innerType._zod.run(r,u)}}),K_=D("$ZodNullable",(i,n)=>{y.init(i,n),d(i._zod,"optin",()=>n.innerType._zod.optin),d(i._zod,"optout",()=>n.innerType._zod.optout),d(i._zod,"pattern",()=>{let r=n.innerType._zod.pattern;return r?new RegExp(`^(${_r(r.source)}|null)$`):void 0}),d(i._zod,"values",()=>{return n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0}),i._zod.parse=(r,u)=>{if(r.value===null)return r;return n.innerType._zod.run(r,u)}}),V_=D("$ZodDefault",(i,n)=>{y.init(i,n),i._zod.optin="optional",d(i._zod,"values",()=>n.innerType._zod.values),i._zod.parse=(r,u)=>{if(r.value===void 0)return r.value=n.defaultValue,r;let t=n.innerType._zod.run(r,u);if(t instanceof Promise)return t.then((c)=>Rf(c,n));return Rf(t,n)}});function Rf(i,n){if(i.value===void 0)i.value=n.defaultValue;return i}var M_=D("$ZodPrefault",(i,n)=>{y.init(i,n),i._zod.optin="optional",d(i._zod,"values",()=>n.innerType._zod.values),i._zod.parse=(r,u)=>{if(r.value===void 0)r.value=n.defaultValue;return n.innerType._zod.run(r,u)}}),x_=D("$ZodNonOptional",(i,n)=>{y.init(i,n),d(i._zod,"values",()=>{let r=n.innerType._zod.values;return r?new Set([...r].filter((u)=>u!==void 0)):void 0}),i._zod.parse=(r,u)=>{let t=n.innerType._zod.run(r,u);if(t instanceof Promise)return t.then((c)=>Zf(c,i));return Zf(t,i)}});function Zf(i,n){if(!i.issues.length&&i.value===void 0)i.issues.push({code:"invalid_type",expected:"nonoptional",input:i.value,inst:n});return i}var F_=D("$ZodSuccess",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{let t=n.innerType._zod.run(r,u);if(t instanceof Promise)return t.then((c)=>{return r.value=c.issues.length===0,r});return r.value=t.issues.length===0,r}}),P_=D("$ZodCatch",(i,n)=>{y.init(i,n),d(i._zod,"optin",()=>n.innerType._zod.optin),d(i._zod,"optout",()=>n.innerType._zod.optout),d(i._zod,"values",()=>n.innerType._zod.values),i._zod.parse=(r,u)=>{let t=n.innerType._zod.run(r,u);if(t instanceof Promise)return t.then((c)=>{if(r.value=c.value,c.issues.length)r.value=n.catchValue({...r,error:{issues:c.issues.map((g)=>Ai(g,u,$i()))},input:r.value}),r.issues=[];return r});if(r.value=t.value,t.issues.length)r.value=n.catchValue({...r,error:{issues:t.issues.map((c)=>Ai(c,u,$i()))},input:r.value}),r.issues=[];return r}}),y_=D("$ZodNaN",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{if(typeof r.value!=="number"||!Number.isNaN(r.value))return r.issues.push({input:r.value,inst:i,expected:"nan",code:"invalid_type"}),r;return r}}),zr=D("$ZodPipe",(i,n)=>{y.init(i,n),d(i._zod,"values",()=>n.in._zod.values),d(i._zod,"optin",()=>n.in._zod.optin),d(i._zod,"optout",()=>n.out._zod.optout),i._zod.parse=(r,u)=>{let t=n.in._zod.run(r,u);if(t instanceof Promise)return t.then((c)=>ef(c,n,u));return ef(t,n,u)}});function ef(i,n,r){if(nt(i))return i;return n.out._zod.run({value:i.value,issues:i.issues},r)}var T_=D("$ZodReadonly",(i,n)=>{y.init(i,n),d(i._zod,"propValues",()=>n.innerType._zod.propValues),d(i._zod,"optin",()=>n.innerType._zod.optin),d(i._zod,"optout",()=>n.innerType._zod.optout),i._zod.parse=(r,u)=>{let t=n.innerType._zod.run(r,u);if(t instanceof Promise)return t.then(pf);return pf(t)}});function pf(i){return i.value=Object.freeze(i.value),i}var k_=D("$ZodTemplateLiteral",(i,n)=>{y.init(i,n);let r=[];for(let u of n.parts)if(u instanceof y){if(!u._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...u._zod.traits].shift()}`);let t=u._zod.pattern instanceof RegExp?u._zod.pattern.source:u._zod.pattern;if(!t)throw new Error(`Invalid template literal part: ${u._zod.traits}`);let c=t.startsWith("^")?1:0,g=t.endsWith("$")?t.length-1:t.length;r.push(t.slice(c,g))}else if(u===null||yg.has(typeof u))r.push(fn(`${u}`));else throw new Error(`Invalid template literal part: ${u}`);i._zod.pattern=new RegExp(`^${r.join("")}$`),i._zod.parse=(u,t)=>{if(typeof u.value!=="string")return u.issues.push({input:u.value,inst:i,expected:"template_literal",code:"invalid_type"}),u;if(i._zod.pattern.lastIndex=0,!i._zod.pattern.test(u.value))return u.issues.push({input:u.value,inst:i,code:"invalid_format",format:"template_literal",pattern:i._zod.pattern.source}),u;return u}}),C_=D("$ZodPromise",(i,n)=>{y.init(i,n),i._zod.parse=(r,u)=>{return Promise.resolve(r.value).then((t)=>n.innerType._zod.run({value:t,issues:[]},u))}}),R_=D("$ZodLazy",(i,n)=>{y.init(i,n),d(i._zod,"innerType",()=>n.getter()),d(i._zod,"pattern",()=>i._zod.innerType._zod.pattern),d(i._zod,"propValues",()=>i._zod.innerType._zod.propValues),d(i._zod,"optin",()=>i._zod.innerType._zod.optin),d(i._zod,"optout",()=>i._zod.innerType._zod.optout),i._zod.parse=(r,u)=>{return i._zod.innerType._zod.run(r,u)}}),Z_=D("$ZodCustom",(i,n)=>{ui.init(i,n),y.init(i,n),i._zod.parse=(r,u)=>{return r},i._zod.check=(r)=>{let u=r.value,t=n.fn(u);if(t instanceof Promise)return t.then((c)=>df(c,r,u,i));df(t,r,u,i);return}});function df(i,n,r,u){if(!i){let t={code:"custom",input:r,inst:u,path:[...u._zod.def.path??[]],continue:!u._zod.def.abort};if(u._zod.def.params)t.params=u._zod.def.params;n.issues.push(Rg(t))}}var Dr={};Xn(Dr,{zhTW:()=>Il,zhCN:()=>Ll,vi:()=>Xl,ur:()=>ql,ua:()=>Gl,tr:()=>Hl,th:()=>El,ta:()=>Jl,sv:()=>Dl,sl:()=>Wl,ru:()=>zl,pt:()=>Nl,pl:()=>Ul,ota:()=>jl,no:()=>Ol,nl:()=>fl,ms:()=>vl,mk:()=>bl,ko:()=>wl,kh:()=>$l,ja:()=>ll,it:()=>_l,id:()=>hl,hu:()=>gl,he:()=>ol,frCA:()=>cl,fr:()=>ul,fi:()=>rl,fa:()=>tl,es:()=>nl,en:()=>Wr,de:()=>il,cs:()=>s_,ca:()=>a_,be:()=>d_,az:()=>p_,ar:()=>e_});var _J=()=>{let i={string:{unit:"حرف",verb:"أن يحوي"},file:{unit:"بايت",verb:"أن يحوي"},array:{unit:"عنصر",verb:"أن يحوي"},set:{unit:"عنصر",verb:"أن يحوي"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"مدخل",email:"بريد إلكتروني",url:"رابط",emoji:"إيموجي",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"تاريخ ووقت بمعيار ISO",date:"تاريخ بمعيار ISO",time:"وقت بمعيار ISO",duration:"مدة بمعيار ISO",ipv4:"عنوان IPv4",ipv6:"عنوان IPv6",cidrv4:"مدى عناوين بصيغة IPv4",cidrv6:"مدى عناوين بصيغة IPv6",base64:"نَص بترميز base64-encoded",base64url:"نَص بترميز base64url-encoded",json_string:"نَص على هيئة JSON",e164:"رقم هاتف بمعيار E.164",jwt:"JWT",template_literal:"مدخل"};return(t)=>{switch(t.code){case"invalid_type":return`مدخلات غير مقبولة: يفترض إدخال ${t.expected}، ولكن تم إدخال ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`مدخلات غير مقبولة: يفترض إدخال ${A(t.values[0])}`;return`اختيار غير مقبول: يتوقع انتقاء أحد هذه الخيارات: ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return` أكبر من اللازم: يفترض أن تكون ${t.origin??"القيمة"} ${c} ${t.maximum.toString()} ${g.unit??"عنصر"}`;return`أكبر من اللازم: يفترض أن تكون ${t.origin??"القيمة"} ${c} ${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`أصغر من اللازم: يفترض لـ ${t.origin} أن يكون ${c} ${t.minimum.toString()} ${g.unit}`;return`أصغر من اللازم: يفترض لـ ${t.origin} أن يكون ${c} ${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`نَص غير مقبول: يجب أن يبدأ بـ "${t.prefix}"`;if(c.format==="ends_with")return`نَص غير مقبول: يجب أن ينتهي بـ "${c.suffix}"`;if(c.format==="includes")return`نَص غير مقبول: يجب أن يتضمَّن "${c.includes}"`;if(c.format==="regex")return`نَص غير مقبول: يجب أن يطابق النمط ${c.pattern}`;return`${u[c.format]??t.format} غير مقبول`}case"not_multiple_of":return`رقم غير مقبول: يجب أن يكون من مضاعفات ${t.divisor}`;case"unrecognized_keys":return`معرف${t.keys.length>1?"ات":""} غريب${t.keys.length>1?"ة":""}: ${G(t.keys,"، ")}`;case"invalid_key":return`معرف غير مقبول في ${t.origin}`;case"invalid_union":return"مدخل غير مقبول";case"invalid_element":return`مدخل غير مقبول في ${t.origin}`;default:return"مدخل غير مقبول"}}};function e_(){return{localeError:_J()}}var lJ=()=>{let i={string:{unit:"simvol",verb:"olmalıdır"},file:{unit:"bayt",verb:"olmalıdır"},array:{unit:"element",verb:"olmalıdır"},set:{unit:"element",verb:"olmalıdır"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(t)=>{switch(t.code){case"invalid_type":return`Yanlış dəyər: gözlənilən ${t.expected}, daxil olan ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Yanlış dəyər: gözlənilən ${A(t.values[0])}`;return`Yanlış seçim: aşağıdakılardan biri olmalıdır: ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Çox böyük: gözlənilən ${t.origin??"dəyər"} ${c}${t.maximum.toString()} ${g.unit??"element"}`;return`Çox böyük: gözlənilən ${t.origin??"dəyər"} ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Çox kiçik: gözlənilən ${t.origin} ${c}${t.minimum.toString()} ${g.unit}`;return`Çox kiçik: gözlənilən ${t.origin} ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Yanlış mətn: "${c.prefix}" ilə başlamalıdır`;if(c.format==="ends_with")return`Yanlış mətn: "${c.suffix}" ilə bitməlidir`;if(c.format==="includes")return`Yanlış mətn: "${c.includes}" daxil olmalıdır`;if(c.format==="regex")return`Yanlış mətn: ${c.pattern} şablonuna uyğun olmalıdır`;return`Yanlış ${u[c.format]??t.format}`}case"not_multiple_of":return`Yanlış ədəd: ${t.divisor} ilə bölünə bilən olmalıdır`;case"unrecognized_keys":return`Tanınmayan açar${t.keys.length>1?"lar":""}: ${G(t.keys,", ")}`;case"invalid_key":return`${t.origin} daxilində yanlış açar`;case"invalid_union":return"Yanlış dəyər";case"invalid_element":return`${t.origin} daxilində yanlış dəyər`;default:return"Yanlış dəyər"}}};function p_(){return{localeError:lJ()}}function n4(i,n,r,u){let t=Math.abs(i),c=t%10,g=t%100;if(g>=11&&g<=19)return u;if(c===1)return n;if(c>=2&&c<=4)return r;return u}var $J=()=>{let i={string:{unit:{one:"сімвал",few:"сімвалы",many:"сімвалаў"},verb:"мець"},array:{unit:{one:"элемент",few:"элементы",many:"элементаў"},verb:"мець"},set:{unit:{one:"элемент",few:"элементы",many:"элементаў"},verb:"мець"},file:{unit:{one:"байт",few:"байты",many:"байтаў"},verb:"мець"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"лік";case"object":{if(Array.isArray(t))return"масіў";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"увод",email:"email адрас",url:"URL",emoji:"эмодзі",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO дата і час",date:"ISO дата",time:"ISO час",duration:"ISO працягласць",ipv4:"IPv4 адрас",ipv6:"IPv6 адрас",cidrv4:"IPv4 дыяпазон",cidrv6:"IPv6 дыяпазон",base64:"радок у фармаце base64",base64url:"радок у фармаце base64url",json_string:"JSON радок",e164:"нумар E.164",jwt:"JWT",template_literal:"увод"};return(t)=>{switch(t.code){case"invalid_type":return`Няправільны ўвод: чакаўся ${t.expected}, атрымана ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Няправільны ўвод: чакалася ${A(t.values[0])}`;return`Няправільны варыянт: чакаўся адзін з ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g){let h=Number(t.maximum),_=n4(h,g.unit.one,g.unit.few,g.unit.many);return`Занадта вялікі: чакалася, што ${t.origin??"значэнне"} павінна ${g.verb} ${c}${t.maximum.toString()} ${_}`}return`Занадта вялікі: чакалася, што ${t.origin??"значэнне"} павінна быць ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g){let h=Number(t.minimum),_=n4(h,g.unit.one,g.unit.few,g.unit.many);return`Занадта малы: чакалася, што ${t.origin} павінна ${g.verb} ${c}${t.minimum.toString()} ${_}`}return`Занадта малы: чакалася, што ${t.origin} павінна быць ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Няправільны радок: павінен пачынацца з "${c.prefix}"`;if(c.format==="ends_with")return`Няправільны радок: павінен заканчвацца на "${c.suffix}"`;if(c.format==="includes")return`Няправільны радок: павінен змяшчаць "${c.includes}"`;if(c.format==="regex")return`Няправільны радок: павінен адпавядаць шаблону ${c.pattern}`;return`Няправільны ${u[c.format]??t.format}`}case"not_multiple_of":return`Няправільны лік: павінен быць кратным ${t.divisor}`;case"unrecognized_keys":return`Нераспазнаны ${t.keys.length>1?"ключы":"ключ"}: ${G(t.keys,", ")}`;case"invalid_key":return`Няправільны ключ у ${t.origin}`;case"invalid_union":return"Няправільны ўвод";case"invalid_element":return`Няправільнае значэнне ў ${t.origin}`;default:return"Няправільны ўвод"}}};function d_(){return{localeError:$J()}}var wJ=()=>{let i={string:{unit:"caràcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"entrada",email:"adreça electrònica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adreça IPv4",ipv6:"adreça IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return(t)=>{switch(t.code){case"invalid_type":return`Tipus invàlid: s\'esperava ${t.expected}, s\'ha rebut ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Valor invàlid: s\'esperava ${A(t.values[0])}`;return`Opció invàlida: s\'esperava una de ${G(t.values," o ")}`;case"too_big":{let c=t.inclusive?"com a màxim":"menys de",g=n(t.origin);if(g)return`Massa gran: s\'esperava que ${t.origin??"el valor"} contingués ${c} ${t.maximum.toString()} ${g.unit??"elements"}`;return`Massa gran: s\'esperava que ${t.origin??"el valor"} fos ${c} ${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?"com a mínim":"més de",g=n(t.origin);if(g)return`Massa petit: s\'esperava que ${t.origin} contingués ${c} ${t.minimum.toString()} ${g.unit}`;return`Massa petit: s\'esperava que ${t.origin} fos ${c} ${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Format invàlid: ha de començar amb "${c.prefix}"`;if(c.format==="ends_with")return`Format invàlid: ha d\'acabar amb "${c.suffix}"`;if(c.format==="includes")return`Format invàlid: ha d\'incloure "${c.includes}"`;if(c.format==="regex")return`Format invàlid: ha de coincidir amb el patró ${c.pattern}`;return`Format invàlid per a ${u[c.format]??t.format}`}case"not_multiple_of":return`Número invàlid: ha de ser múltiple de ${t.divisor}`;case"unrecognized_keys":return`Clau${t.keys.length>1?"s":""} no reconeguda${t.keys.length>1?"s":""}: ${G(t.keys,", ")}`;case"invalid_key":return`Clau invàlida a ${t.origin}`;case"invalid_union":return"Entrada invàlida";case"invalid_element":return`Element invàlid a ${t.origin}`;default:return"Entrada invàlida"}}};function a_(){return{localeError:wJ()}}var bJ=()=>{let i={string:{unit:"znaků",verb:"mít"},file:{unit:"bajtů",verb:"mít"},array:{unit:"prvků",verb:"mít"},set:{unit:"prvků",verb:"mít"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"číslo";case"string":return"řetězec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(t))return"pole";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"regulární výraz",email:"e-mailová adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a čas ve formátu ISO",date:"datum ve formátu ISO",time:"čas ve formátu ISO",duration:"doba trvání ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"řetězec zakódovaný ve formátu base64",base64url:"řetězec zakódovaný ve formátu base64url",json_string:"řetězec ve formátu JSON",e164:"číslo E.164",jwt:"JWT",template_literal:"vstup"};return(t)=>{switch(t.code){case"invalid_type":return`Neplatný vstup: očekáváno ${t.expected}, obdrženo ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Neplatný vstup: očekáváno ${A(t.values[0])}`;return`Neplatná možnost: očekávána jedna z hodnot ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Hodnota je příliš velká: ${t.origin??"hodnota"} musí mít ${c}${t.maximum.toString()} ${g.unit??"prvků"}`;return`Hodnota je příliš velká: ${t.origin??"hodnota"} musí být ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Hodnota je příliš malá: ${t.origin??"hodnota"} musí mít ${c}${t.minimum.toString()} ${g.unit??"prvků"}`;return`Hodnota je příliš malá: ${t.origin??"hodnota"} musí být ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Neplatný řetězec: musí začínat na "${c.prefix}"`;if(c.format==="ends_with")return`Neplatný řetězec: musí končit na "${c.suffix}"`;if(c.format==="includes")return`Neplatný řetězec: musí obsahovat "${c.includes}"`;if(c.format==="regex")return`Neplatný řetězec: musí odpovídat vzoru ${c.pattern}`;return`Neplatný formát ${u[c.format]??t.format}`}case"not_multiple_of":return`Neplatné číslo: musí být násobkem ${t.divisor}`;case"unrecognized_keys":return`Neznámé klíče: ${G(t.keys,", ")}`;case"invalid_key":return`Neplatný klíč v ${t.origin}`;case"invalid_union":return"Neplatný vstup";case"invalid_element":return`Neplatná hodnota v ${t.origin}`;default:return"Neplatný vstup"}}};function s_(){return{localeError:bJ()}}var vJ=()=>{let i={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"Zahl";case"object":{if(Array.isArray(t))return"Array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return(t)=>{switch(t.code){case"invalid_type":return`Ungültige Eingabe: erwartet ${t.expected}, erhalten ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Ungültige Eingabe: erwartet ${A(t.values[0])}`;return`Ungültige Option: erwartet eine von ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Zu groß: erwartet, dass ${t.origin??"Wert"} ${c}${t.maximum.toString()} ${g.unit??"Elemente"} hat`;return`Zu groß: erwartet, dass ${t.origin??"Wert"} ${c}${t.maximum.toString()} ist`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Zu klein: erwartet, dass ${t.origin} ${c}${t.minimum.toString()} ${g.unit} hat`;return`Zu klein: erwartet, dass ${t.origin} ${c}${t.minimum.toString()} ist`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Ungültiger String: muss mit "${c.prefix}" beginnen`;if(c.format==="ends_with")return`Ungültiger String: muss mit "${c.suffix}" enden`;if(c.format==="includes")return`Ungültiger String: muss "${c.includes}" enthalten`;if(c.format==="regex")return`Ungültiger String: muss dem Muster ${c.pattern} entsprechen`;return`Ungültig: ${u[c.format]??t.format}`}case"not_multiple_of":return`Ungültige Zahl: muss ein Vielfaches von ${t.divisor} sein`;case"unrecognized_keys":return`${t.keys.length>1?"Unbekannte Schlüssel":"Unbekannter Schlüssel"}: ${G(t.keys,", ")}`;case"invalid_key":return`Ungültiger Schlüssel in ${t.origin}`;case"invalid_union":return"Ungültige Eingabe";case"invalid_element":return`Ungültiger Wert in ${t.origin}`;default:return"Ungültige Eingabe"}}};function il(){return{localeError:vJ()}}var fJ=(i)=>{let n=typeof i;switch(n){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return n},OJ=()=>{let i={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function n(u){return i[u]??null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(u)=>{switch(u.code){case"invalid_type":return`Invalid input: expected ${u.expected}, received ${fJ(u.input)}`;case"invalid_value":if(u.values.length===1)return`Invalid input: expected ${A(u.values[0])}`;return`Invalid option: expected one of ${G(u.values,"|")}`;case"too_big":{let t=u.inclusive?"<=":"<",c=n(u.origin);if(c)return`Too big: expected ${u.origin??"value"} to have ${t}${u.maximum.toString()} ${c.unit??"elements"}`;return`Too big: expected ${u.origin??"value"} to be ${t}${u.maximum.toString()}`}case"too_small":{let t=u.inclusive?">=":">",c=n(u.origin);if(c)return`Too small: expected ${u.origin} to have ${t}${u.minimum.toString()} ${c.unit}`;return`Too small: expected ${u.origin} to be ${t}${u.minimum.toString()}`}case"invalid_format":{let t=u;if(t.format==="starts_with")return`Invalid string: must start with "${t.prefix}"`;if(t.format==="ends_with")return`Invalid string: must end with "${t.suffix}"`;if(t.format==="includes")return`Invalid string: must include "${t.includes}"`;if(t.format==="regex")return`Invalid string: must match pattern ${t.pattern}`;return`Invalid ${r[t.format]??u.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${u.divisor}`;case"unrecognized_keys":return`Unrecognized key${u.keys.length>1?"s":""}: ${G(u.keys,", ")}`;case"invalid_key":return`Invalid key in ${u.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${u.origin}`;default:return"Invalid input"}}};function Wr(){return{localeError:OJ()}}var jJ=()=>{let i={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"número";case"object":{if(Array.isArray(t))return"arreglo";if(t===null)return"nulo";if(Object.getPrototypeOf(t)!==Object.prototype)return t.constructor.name}}return c},u={regex:"entrada",email:"dirección de correo electrónico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duración ISO",ipv4:"dirección IPv4",ipv6:"dirección IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return(t)=>{switch(t.code){case"invalid_type":return`Entrada inválida: se esperaba ${t.expected}, recibido ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Entrada inválida: se esperaba ${A(t.values[0])}`;return`Opción inválida: se esperaba una de ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Demasiado grande: se esperaba que ${t.origin??"valor"} tuviera ${c}${t.maximum.toString()} ${g.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${t.origin??"valor"} fuera ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Demasiado pequeño: se esperaba que ${t.origin} tuviera ${c}${t.minimum.toString()} ${g.unit}`;return`Demasiado pequeño: se esperaba que ${t.origin} fuera ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Cadena inválida: debe comenzar con "${c.prefix}"`;if(c.format==="ends_with")return`Cadena inválida: debe terminar en "${c.suffix}"`;if(c.format==="includes")return`Cadena inválida: debe incluir "${c.includes}"`;if(c.format==="regex")return`Cadena inválida: debe coincidir con el patrón ${c.pattern}`;return`Inválido ${u[c.format]??t.format}`}case"not_multiple_of":return`Número inválido: debe ser múltiplo de ${t.divisor}`;case"unrecognized_keys":return`Llave${t.keys.length>1?"s":""} desconocida${t.keys.length>1?"s":""}: ${G(t.keys,", ")}`;case"invalid_key":return`Llave inválida en ${t.origin}`;case"invalid_union":return"Entrada inválida";case"invalid_element":return`Valor inválido en ${t.origin}`;default:return"Entrada inválida"}}};function nl(){return{localeError:jJ()}}var UJ=()=>{let i={string:{unit:"کاراکتر",verb:"داشته باشد"},file:{unit:"بایت",verb:"داشته باشد"},array:{unit:"آیتم",verb:"داشته باشد"},set:{unit:"آیتم",verb:"داشته باشد"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"عدد";case"object":{if(Array.isArray(t))return"آرایه";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"ورودی",email:"آدرس ایمیل",url:"URL",emoji:"ایموجی",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"تاریخ و زمان ایزو",date:"تاریخ ایزو",time:"زمان ایزو",duration:"مدت زمان ایزو",ipv4:"IPv4 آدرس",ipv6:"IPv6 آدرس",cidrv4:"IPv4 دامنه",cidrv6:"IPv6 دامنه",base64:"base64-encoded رشته",base64url:"base64url-encoded رشته",json_string:"JSON رشته",e164:"E.164 عدد",jwt:"JWT",template_literal:"ورودی"};return(t)=>{switch(t.code){case"invalid_type":return`ورودی نامعتبر: می‌بایست ${t.expected} می‌بود، ${r(t.input)} دریافت شد`;case"invalid_value":if(t.values.length===1)return`ورودی نامعتبر: می‌بایست ${A(t.values[0])} می‌بود`;return`گزینه نامعتبر: می‌بایست یکی از ${G(t.values,"|")} می‌بود`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`خیلی بزرگ: ${t.origin??"مقدار"} باید ${c}${t.maximum.toString()} ${g.unit??"عنصر"} باشد`;return`خیلی بزرگ: ${t.origin??"مقدار"} باید ${c}${t.maximum.toString()} باشد`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`خیلی کوچک: ${t.origin} باید ${c}${t.minimum.toString()} ${g.unit} باشد`;return`خیلی کوچک: ${t.origin} باید ${c}${t.minimum.toString()} باشد`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`رشته نامعتبر: باید با "${c.prefix}" شروع شود`;if(c.format==="ends_with")return`رشته نامعتبر: باید با "${c.suffix}" تمام شود`;if(c.format==="includes")return`رشته نامعتبر: باید شامل "${c.includes}" باشد`;if(c.format==="regex")return`رشته نامعتبر: باید با الگوی ${c.pattern} مطابقت داشته باشد`;return`${u[c.format]??t.format} نامعتبر`}case"not_multiple_of":return`عدد نامعتبر: باید مضرب ${t.divisor} باشد`;case"unrecognized_keys":return`کلید${t.keys.length>1?"های":""} ناشناس: ${G(t.keys,", ")}`;case"invalid_key":return`کلید ناشناس در ${t.origin}`;case"invalid_union":return"ورودی نامعتبر";case"invalid_element":return`مقدار نامعتبر در ${t.origin}`;default:return"ورودی نامعتبر"}}};function tl(){return{localeError:UJ()}}var NJ=()=>{let i={string:{unit:"merkkiä",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"päivämäärän"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"säännöllinen lauseke",email:"sähköpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-päivämäärä",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return(t)=>{switch(t.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${t.expected}, oli ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Virheellinen syöte: täytyy olla ${A(t.values[0])}`;return`Virheellinen valinta: täytyy olla yksi seuraavista: ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Liian suuri: ${g.subject} täytyy olla ${c}${t.maximum.toString()} ${g.unit}`.trim();return`Liian suuri: arvon täytyy olla ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Liian pieni: ${g.subject} täytyy olla ${c}${t.minimum.toString()} ${g.unit}`.trim();return`Liian pieni: arvon täytyy olla ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Virheellinen syöte: täytyy alkaa "${c.prefix}"`;if(c.format==="ends_with")return`Virheellinen syöte: täytyy loppua "${c.suffix}"`;if(c.format==="includes")return`Virheellinen syöte: täytyy sisältää "${c.includes}"`;if(c.format==="regex")return`Virheellinen syöte: täytyy vastata säännöllistä lauseketta ${c.pattern}`;return`Virheellinen ${u[c.format]??t.format}`}case"not_multiple_of":return`Virheellinen luku: täytyy olla luvun ${t.divisor} monikerta`;case"unrecognized_keys":return`${t.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${G(t.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen syöte"}}};function rl(){return{localeError:NJ()}}var zJ=()=>{let i={string:{unit:"caractères",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"éléments",verb:"avoir"},set:{unit:"éléments",verb:"avoir"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"nombre";case"object":{if(Array.isArray(t))return"tableau";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"entrée",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"durée ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaîne encodée en base64",base64url:"chaîne encodée en base64url",json_string:"chaîne JSON",e164:"numéro E.164",jwt:"JWT",template_literal:"entrée"};return(t)=>{switch(t.code){case"invalid_type":return`Entrée invalide : ${t.expected} attendu, ${r(t.input)} reçu`;case"invalid_value":if(t.values.length===1)return`Entrée invalide : ${A(t.values[0])} attendu`;return`Option invalide : une valeur parmi ${G(t.values,"|")} attendue`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Trop grand : ${t.origin??"valeur"} doit ${g.verb} ${c}${t.maximum.toString()} ${g.unit??"élément(s)"}`;return`Trop grand : ${t.origin??"valeur"} doit être ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Trop petit : ${t.origin} doit ${g.verb} ${c}${t.minimum.toString()} ${g.unit}`;return`Trop petit : ${t.origin} doit être ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Chaîne invalide : doit commencer par "${c.prefix}"`;if(c.format==="ends_with")return`Chaîne invalide : doit se terminer par "${c.suffix}"`;if(c.format==="includes")return`Chaîne invalide : doit inclure "${c.includes}"`;if(c.format==="regex")return`Chaîne invalide : doit correspondre au modèle ${c.pattern}`;return`${u[c.format]??t.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit être un multiple de ${t.divisor}`;case"unrecognized_keys":return`Clé${t.keys.length>1?"s":""} non reconnue${t.keys.length>1?"s":""} : ${G(t.keys,", ")}`;case"invalid_key":return`Clé invalide dans ${t.origin}`;case"invalid_union":return"Entrée invalide";case"invalid_element":return`Valeur invalide dans ${t.origin}`;default:return"Entrée invalide"}}};function ul(){return{localeError:zJ()}}var WJ=()=>{let i={string:{unit:"caractères",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"éléments",verb:"avoir"},set:{unit:"éléments",verb:"avoir"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"entrée",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"durée ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaîne encodée en base64",base64url:"chaîne encodée en base64url",json_string:"chaîne JSON",e164:"numéro E.164",jwt:"JWT",template_literal:"entrée"};return(t)=>{switch(t.code){case"invalid_type":return`Entrée invalide : attendu ${t.expected}, reçu ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Entrée invalide : attendu ${A(t.values[0])}`;return`Option invalide : attendu l\'une des valeurs suivantes ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"≤":"<",g=n(t.origin);if(g)return`Trop grand : attendu que ${t.origin??"la valeur"} ait ${c}${t.maximum.toString()} ${g.unit}`;return`Trop grand : attendu que ${t.origin??"la valeur"} soit ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?"≥":">",g=n(t.origin);if(g)return`Trop petit : attendu que ${t.origin} ait ${c}${t.minimum.toString()} ${g.unit}`;return`Trop petit : attendu que ${t.origin} soit ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Chaîne invalide : doit commencer par "${c.prefix}"`;if(c.format==="ends_with")return`Chaîne invalide : doit se terminer par "${c.suffix}"`;if(c.format==="includes")return`Chaîne invalide : doit inclure "${c.includes}"`;if(c.format==="regex")return`Chaîne invalide : doit correspondre au motif ${c.pattern}`;return`${u[c.format]??t.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit être un multiple de ${t.divisor}`;case"unrecognized_keys":return`Clé${t.keys.length>1?"s":""} non reconnue${t.keys.length>1?"s":""} : ${G(t.keys,", ")}`;case"invalid_key":return`Clé invalide dans ${t.origin}`;case"invalid_union":return"Entrée invalide";case"invalid_element":return`Valeur invalide dans ${t.origin}`;default:return"Entrée invalide"}}};function cl(){return{localeError:WJ()}}var DJ=()=>{let i={string:{unit:"אותיות",verb:"לכלול"},file:{unit:"בייטים",verb:"לכלול"},array:{unit:"פריטים",verb:"לכלול"},set:{unit:"פריטים",verb:"לכלול"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"קלט",email:"כתובת אימייל",url:"כתובת רשת",emoji:"אימוג\'י",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"תאריך וזמן ISO",date:"תאריך ISO",time:"זמן ISO",duration:"משך זמן ISO",ipv4:"כתובת IPv4",ipv6:"כתובת IPv6",cidrv4:"טווח IPv4",cidrv6:"טווח IPv6",base64:"מחרוזת בבסיס 64",base64url:"מחרוזת בבסיס 64 לכתובות רשת",json_string:"מחרוזת JSON",e164:"מספר E.164",jwt:"JWT",template_literal:"קלט"};return(t)=>{switch(t.code){case"invalid_type":return`קלט לא תקין: צריך ${t.expected}, התקבל ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`קלט לא תקין: צריך ${A(t.values[0])}`;return`קלט לא תקין: צריך אחת מהאפשרויות  ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`גדול מדי: ${t.origin??"value"} צריך להיות ${c}${t.maximum.toString()} ${g.unit??"elements"}`;return`גדול מדי: ${t.origin??"value"} צריך להיות ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`קטן מדי: ${t.origin} צריך להיות ${c}${t.minimum.toString()} ${g.unit}`;return`קטן מדי: ${t.origin} צריך להיות ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`מחרוזת לא תקינה: חייבת להתחיל ב"${c.prefix}"`;if(c.format==="ends_with")return`מחרוזת לא תקינה: חייבת להסתיים ב "${c.suffix}"`;if(c.format==="includes")return`מחרוזת לא תקינה: חייבת לכלול "${c.includes}"`;if(c.format==="regex")return`מחרוזת לא תקינה: חייבת להתאים לתבנית ${c.pattern}`;return`${u[c.format]??t.format} לא תקין`}case"not_multiple_of":return`מספר לא תקין: חייב להיות מכפלה של ${t.divisor}`;case"unrecognized_keys":return`מפתח${t.keys.length>1?"ות":""} לא מזוה${t.keys.length>1?"ים":"ה"}: ${G(t.keys,", ")}`;case"invalid_key":return`מפתח לא תקין ב${t.origin}`;case"invalid_union":return"קלט לא תקין";case"invalid_element":return`ערך לא תקין ב${t.origin}`;default:return"קלט לא תקין"}}};function ol(){return{localeError:DJ()}}var JJ=()=>{let i={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"szám";case"object":{if(Array.isArray(t))return"tömb";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"bemenet",email:"email cím",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO időbélyeg",date:"ISO dátum",time:"ISO idő",duration:"ISO időintervallum",ipv4:"IPv4 cím",ipv6:"IPv6 cím",cidrv4:"IPv4 tartomány",cidrv6:"IPv6 tartomány",base64:"base64-kódolt string",base64url:"base64url-kódolt string",json_string:"JSON string",e164:"E.164 szám",jwt:"JWT",template_literal:"bemenet"};return(t)=>{switch(t.code){case"invalid_type":return`Érvénytelen bemenet: a várt érték ${t.expected}, a kapott érték ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Érvénytelen bemenet: a várt érték ${A(t.values[0])}`;return`Érvénytelen opció: valamelyik érték várt ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Túl nagy: ${t.origin??"érték"} mérete túl nagy ${c}${t.maximum.toString()} ${g.unit??"elem"}`;return`Túl nagy: a bemeneti érték ${t.origin??"érték"} túl nagy: ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Túl kicsi: a bemeneti érték ${t.origin} mérete túl kicsi ${c}${t.minimum.toString()} ${g.unit}`;return`Túl kicsi: a bemeneti érték ${t.origin} túl kicsi ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Érvénytelen string: "${c.prefix}" értékkel kell kezdődnie`;if(c.format==="ends_with")return`Érvénytelen string: "${c.suffix}" értékkel kell végződnie`;if(c.format==="includes")return`Érvénytelen string: "${c.includes}" értéket kell tartalmaznia`;if(c.format==="regex")return`Érvénytelen string: ${c.pattern} mintának kell megfelelnie`;return`Érvénytelen ${u[c.format]??t.format}`}case"not_multiple_of":return`Érvénytelen szám: ${t.divisor} többszörösének kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${t.keys.length>1?"s":""}: ${G(t.keys,", ")}`;case"invalid_key":return`Érvénytelen kulcs ${t.origin}`;case"invalid_union":return"Érvénytelen bemenet";case"invalid_element":return`Érvénytelen érték: ${t.origin}`;default:return"Érvénytelen bemenet"}}};function gl(){return{localeError:JJ()}}var EJ=()=>{let i={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return(t)=>{switch(t.code){case"invalid_type":return`Input tidak valid: diharapkan ${t.expected}, diterima ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Input tidak valid: diharapkan ${A(t.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Terlalu besar: diharapkan ${t.origin??"value"} memiliki ${c}${t.maximum.toString()} ${g.unit??"elemen"}`;return`Terlalu besar: diharapkan ${t.origin??"value"} menjadi ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Terlalu kecil: diharapkan ${t.origin} memiliki ${c}${t.minimum.toString()} ${g.unit}`;return`Terlalu kecil: diharapkan ${t.origin} menjadi ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`String tidak valid: harus dimulai dengan "${c.prefix}"`;if(c.format==="ends_with")return`String tidak valid: harus berakhir dengan "${c.suffix}"`;if(c.format==="includes")return`String tidak valid: harus menyertakan "${c.includes}"`;if(c.format==="regex")return`String tidak valid: harus sesuai pola ${c.pattern}`;return`${u[c.format]??t.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${t.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${t.keys.length>1?"s":""}: ${G(t.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${t.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${t.origin}`;default:return"Input tidak valid"}}};function hl(){return{localeError:EJ()}}var HJ=()=>{let i={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"numero";case"object":{if(Array.isArray(t))return"vettore";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return(t)=>{switch(t.code){case"invalid_type":return`Input non valido: atteso ${t.expected}, ricevuto ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Input non valido: atteso ${A(t.values[0])}`;return`Opzione non valida: atteso uno tra ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Troppo grande: ${t.origin??"valore"} deve avere ${c}${t.maximum.toString()} ${g.unit??"elementi"}`;return`Troppo grande: ${t.origin??"valore"} deve essere ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Troppo piccolo: ${t.origin} deve avere ${c}${t.minimum.toString()} ${g.unit}`;return`Troppo piccolo: ${t.origin} deve essere ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Stringa non valida: deve iniziare con "${c.prefix}"`;if(c.format==="ends_with")return`Stringa non valida: deve terminare con "${c.suffix}"`;if(c.format==="includes")return`Stringa non valida: deve includere "${c.includes}"`;if(c.format==="regex")return`Stringa non valida: deve corrispondere al pattern ${c.pattern}`;return`Invalid ${u[c.format]??t.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${t.divisor}`;case"unrecognized_keys":return`Chiav${t.keys.length>1?"i":"e"} non riconosciut${t.keys.length>1?"e":"a"}: ${G(t.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${t.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${t.origin}`;default:return"Input non valido"}}};function _l(){return{localeError:HJ()}}var GJ=()=>{let i={string:{unit:"文字",verb:"である"},file:{unit:"バイト",verb:"である"},array:{unit:"要素",verb:"である"},set:{unit:"要素",verb:"である"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"数値";case"object":{if(Array.isArray(t))return"配列";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"入力値",email:"メールアドレス",url:"URL",emoji:"絵文字",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO日時",date:"ISO日付",time:"ISO時刻",duration:"ISO期間",ipv4:"IPv4アドレス",ipv6:"IPv6アドレス",cidrv4:"IPv4範囲",cidrv6:"IPv6範囲",base64:"base64エンコード文字列",base64url:"base64urlエンコード文字列",json_string:"JSON文字列",e164:"E.164番号",jwt:"JWT",template_literal:"入力値"};return(t)=>{switch(t.code){case"invalid_type":return`無効な入力: ${t.expected}が期待されましたが、${r(t.input)}が入力されました`;case"invalid_value":if(t.values.length===1)return`無効な入力: ${A(t.values[0])}が期待されました`;return`無効な選択: ${G(t.values,"、")}のいずれかである必要があります`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`大きすぎる値: ${t.origin??"値"}は${t.maximum.toString()}${g.unit??"要素"}${c}である必要があります`;return`大きすぎる値: ${t.origin??"値"}は${t.maximum.toString()}${c}である必要があります`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`小さすぎる値: ${t.origin}は${t.minimum.toString()}${g.unit}${c}である必要があります`;return`小さすぎる値: ${t.origin}は${t.minimum.toString()}${c}である必要があります`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`無効な文字列: "${c.prefix}"で始まる必要があります`;if(c.format==="ends_with")return`無効な文字列: "${c.suffix}"で終わる必要があります`;if(c.format==="includes")return`無効な文字列: "${c.includes}"を含む必要があります`;if(c.format==="regex")return`無効な文字列: パターン${c.pattern}に一致する必要があります`;return`無効な${u[c.format]??t.format}`}case"not_multiple_of":return`無効な数値: ${t.divisor}の倍数である必要があります`;case"unrecognized_keys":return`認識されていないキー${t.keys.length>1?"群":""}: ${G(t.keys,"、")}`;case"invalid_key":return`${t.origin}内の無効なキー`;case"invalid_union":return"無効な入力";case"invalid_element":return`${t.origin}内の無効な値`;default:return"無効な入力"}}};function ll(){return{localeError:GJ()}}var qJ=()=>{let i={string:{unit:"តួអក្សរ",verb:"គួរមាន"},file:{unit:"បៃ",verb:"គួរមាន"},array:{unit:"ធាតុ",verb:"គួរមាន"},set:{unit:"ធាតុ",verb:"គួរមាន"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"មិនមែនជាលេខ (NaN)":"លេខ";case"object":{if(Array.isArray(t))return"អារេ (Array)";if(t===null)return"គ្មានតម្លៃ (null)";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"ទិន្នន័យបញ្ចូល",email:"អាសយដ្ឋានអ៊ីមែល",url:"URL",emoji:"សញ្ញាអារម្មណ៍",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"កាលបរិច្ឆេទ និងម៉ោង ISO",date:"កាលបរិច្ឆេទ ISO",time:"ម៉ោង ISO",duration:"រយៈពេល ISO",ipv4:"អាសយដ្ឋាន IPv4",ipv6:"អាសយដ្ឋាន IPv6",cidrv4:"ដែនអាសយដ្ឋាន IPv4",cidrv6:"ដែនអាសយដ្ឋាន IPv6",base64:"ខ្សែអក្សរអ៊ិកូដ base64",base64url:"ខ្សែអក្សរអ៊ិកូដ base64url",json_string:"ខ្សែអក្សរ JSON",e164:"លេខ E.164",jwt:"JWT",template_literal:"ទិន្នន័យបញ្ចូល"};return(t)=>{switch(t.code){case"invalid_type":return`ទិន្នន័យបញ្ចូលមិនត្រឹមត្រូវ៖ ត្រូវការ ${t.expected} ប៉ុន្តែទទួលបាន ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`ទិន្នន័យបញ្ចូលមិនត្រឹមត្រូវ៖ ត្រូវការ ${A(t.values[0])}`;return`ជម្រើសមិនត្រឹមត្រូវ៖ ត្រូវជាមួយក្នុងចំណោម ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`ធំពេក៖ ត្រូវការ ${t.origin??"តម្លៃ"} ${c} ${t.maximum.toString()} ${g.unit??"ធាតុ"}`;return`ធំពេក៖ ត្រូវការ ${t.origin??"តម្លៃ"} ${c} ${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`តូចពេក៖ ត្រូវការ ${t.origin} ${c} ${t.minimum.toString()} ${g.unit}`;return`តូចពេក៖ ត្រូវការ ${t.origin} ${c} ${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវចាប់ផ្តើមដោយ "${c.prefix}"`;if(c.format==="ends_with")return`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវបញ្ចប់ដោយ "${c.suffix}"`;if(c.format==="includes")return`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវមាន "${c.includes}"`;if(c.format==="regex")return`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវតែផ្គូផ្គងនឹងទម្រង់ដែលបានកំណត់ ${c.pattern}`;return`មិនត្រឹមត្រូវ៖ ${u[c.format]??t.format}`}case"not_multiple_of":return`លេខមិនត្រឹមត្រូវ៖ ត្រូវតែជាពហុគុណនៃ ${t.divisor}`;case"unrecognized_keys":return`រកឃើញសោមិនស្គាល់៖ ${G(t.keys,", ")}`;case"invalid_key":return`សោមិនត្រឹមត្រូវនៅក្នុង ${t.origin}`;case"invalid_union":return"ទិន្នន័យមិនត្រឹមត្រូវ";case"invalid_element":return`ទិន្នន័យមិនត្រឹមត្រូវនៅក្នុង ${t.origin}`;default:return"ទិន្នន័យមិនត្រឹមត្រូវ"}}};function $l(){return{localeError:qJ()}}var XJ=()=>{let i={string:{unit:"문자",verb:"to have"},file:{unit:"바이트",verb:"to have"},array:{unit:"개",verb:"to have"},set:{unit:"개",verb:"to have"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"입력",email:"이메일 주소",url:"URL",emoji:"이모지",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO 날짜시간",date:"ISO 날짜",time:"ISO 시간",duration:"ISO 기간",ipv4:"IPv4 주소",ipv6:"IPv6 주소",cidrv4:"IPv4 범위",cidrv6:"IPv6 범위",base64:"base64 인코딩 문자열",base64url:"base64url 인코딩 문자열",json_string:"JSON 문자열",e164:"E.164 번호",jwt:"JWT",template_literal:"입력"};return(t)=>{switch(t.code){case"invalid_type":return`잘못된 입력: 예상 타입은 ${t.expected}, 받은 타입은 ${r(t.input)}입니다`;case"invalid_value":if(t.values.length===1)return`잘못된 입력: 값은 ${A(t.values[0])} 이어야 합니다`;return`잘못된 옵션: ${G(t.values,"또는 ")} 중 하나여야 합니다`;case"too_big":{let c=t.inclusive?"이하":"미만",g=c==="미만"?"이어야 합니다":"여야 합니다",h=n(t.origin),_=h?.unit??"요소";if(h)return`${t.origin??"값"}이 너무 큽니다: ${t.maximum.toString()}${_} ${c}${g}`;return`${t.origin??"값"}이 너무 큽니다: ${t.maximum.toString()} ${c}${g}`}case"too_small":{let c=t.inclusive?"이상":"초과",g=c==="이상"?"이어야 합니다":"여야 합니다",h=n(t.origin),_=h?.unit??"요소";if(h)return`${t.origin??"값"}이 너무 작습니다: ${t.minimum.toString()}${_} ${c}${g}`;return`${t.origin??"값"}이 너무 작습니다: ${t.minimum.toString()} ${c}${g}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`잘못된 문자열: "${c.prefix}"(으)로 시작해야 합니다`;if(c.format==="ends_with")return`잘못된 문자열: "${c.suffix}"(으)로 끝나야 합니다`;if(c.format==="includes")return`잘못된 문자열: "${c.includes}"을(를) 포함해야 합니다`;if(c.format==="regex")return`잘못된 문자열: 정규식 ${c.pattern} 패턴과 일치해야 합니다`;return`잘못된 ${u[c.format]??t.format}`}case"not_multiple_of":return`잘못된 숫자: ${t.divisor}의 배수여야 합니다`;case"unrecognized_keys":return`인식할 수 없는 키: ${G(t.keys,", ")}`;case"invalid_key":return`잘못된 키: ${t.origin}`;case"invalid_union":return"잘못된 입력";case"invalid_element":return`잘못된 값: ${t.origin}`;default:return"잘못된 입력"}}};function wl(){return{localeError:XJ()}}var LJ=()=>{let i={string:{unit:"знаци",verb:"да имаат"},file:{unit:"бајти",verb:"да имаат"},array:{unit:"ставки",verb:"да имаат"},set:{unit:"ставки",verb:"да имаат"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"број";case"object":{if(Array.isArray(t))return"низа";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"внес",email:"адреса на е-пошта",url:"URL",emoji:"емоџи",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO датум и време",date:"ISO датум",time:"ISO време",duration:"ISO времетраење",ipv4:"IPv4 адреса",ipv6:"IPv6 адреса",cidrv4:"IPv4 опсег",cidrv6:"IPv6 опсег",base64:"base64-енкодирана низа",base64url:"base64url-енкодирана низа",json_string:"JSON низа",e164:"E.164 број",jwt:"JWT",template_literal:"внес"};return(t)=>{switch(t.code){case"invalid_type":return`Грешен внес: се очекува ${t.expected}, примено ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Invalid input: expected ${A(t.values[0])}`;return`Грешана опција: се очекува една ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Премногу голем: се очекува ${t.origin??"вредноста"} да има ${c}${t.maximum.toString()} ${g.unit??"елементи"}`;return`Премногу голем: се очекува ${t.origin??"вредноста"} да биде ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Премногу мал: се очекува ${t.origin} да има ${c}${t.minimum.toString()} ${g.unit}`;return`Премногу мал: се очекува ${t.origin} да биде ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Неважечка низа: мора да започнува со "${c.prefix}"`;if(c.format==="ends_with")return`Неважечка низа: мора да завршува со "${c.suffix}"`;if(c.format==="includes")return`Неважечка низа: мора да вклучува "${c.includes}"`;if(c.format==="regex")return`Неважечка низа: мора да одгоара на патернот ${c.pattern}`;return`Invalid ${u[c.format]??t.format}`}case"not_multiple_of":return`Грешен број: мора да биде делив со ${t.divisor}`;case"unrecognized_keys":return`${t.keys.length>1?"Непрепознаени клучеви":"Непрепознаен клуч"}: ${G(t.keys,", ")}`;case"invalid_key":return`Грешен клуч во ${t.origin}`;case"invalid_union":return"Грешен внес";case"invalid_element":return`Грешна вредност во ${t.origin}`;default:return"Грешен внес"}}};function bl(){return{localeError:LJ()}}var IJ=()=>{let i={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"nombor";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return(t)=>{switch(t.code){case"invalid_type":return`Input tidak sah: dijangka ${t.expected}, diterima ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Input tidak sah: dijangka ${A(t.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Terlalu besar: dijangka ${t.origin??"nilai"} ${g.verb} ${c}${t.maximum.toString()} ${g.unit??"elemen"}`;return`Terlalu besar: dijangka ${t.origin??"nilai"} adalah ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Terlalu kecil: dijangka ${t.origin} ${g.verb} ${c}${t.minimum.toString()} ${g.unit}`;return`Terlalu kecil: dijangka ${t.origin} adalah ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`String tidak sah: mesti bermula dengan "${c.prefix}"`;if(c.format==="ends_with")return`String tidak sah: mesti berakhir dengan "${c.suffix}"`;if(c.format==="includes")return`String tidak sah: mesti mengandungi "${c.includes}"`;if(c.format==="regex")return`String tidak sah: mesti sepadan dengan corak ${c.pattern}`;return`${u[c.format]??t.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${t.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${G(t.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${t.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${t.origin}`;default:return"Input tidak sah"}}};function vl(){return{localeError:IJ()}}var YJ=()=>{let i={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"getal";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return(t)=>{switch(t.code){case"invalid_type":return`Ongeldige invoer: verwacht ${t.expected}, ontving ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Ongeldige invoer: verwacht ${A(t.values[0])}`;return`Ongeldige optie: verwacht één van ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Te lang: verwacht dat ${t.origin??"waarde"} ${c}${t.maximum.toString()} ${g.unit??"elementen"} bevat`;return`Te lang: verwacht dat ${t.origin??"waarde"} ${c}${t.maximum.toString()} is`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Te kort: verwacht dat ${t.origin} ${c}${t.minimum.toString()} ${g.unit} bevat`;return`Te kort: verwacht dat ${t.origin} ${c}${t.minimum.toString()} is`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Ongeldige tekst: moet met "${c.prefix}" beginnen`;if(c.format==="ends_with")return`Ongeldige tekst: moet op "${c.suffix}" eindigen`;if(c.format==="includes")return`Ongeldige tekst: moet "${c.includes}" bevatten`;if(c.format==="regex")return`Ongeldige tekst: moet overeenkomen met patroon ${c.pattern}`;return`Ongeldig: ${u[c.format]??t.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${t.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${t.keys.length>1?"s":""}: ${G(t.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${t.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${t.origin}`;default:return"Ongeldige invoer"}}};function fl(){return{localeError:YJ()}}var QJ=()=>{let i={string:{unit:"tegn",verb:"å ha"},file:{unit:"bytes",verb:"å ha"},array:{unit:"elementer",verb:"å inneholde"},set:{unit:"elementer",verb:"å inneholde"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"tall";case"object":{if(Array.isArray(t))return"liste";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-område",ipv6:"IPv6-område",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return(t)=>{switch(t.code){case"invalid_type":return`Ugyldig input: forventet ${t.expected}, fikk ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Ugyldig verdi: forventet ${A(t.values[0])}`;return`Ugyldig valg: forventet en av ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`For stor(t): forventet ${t.origin??"value"} til å ha ${c}${t.maximum.toString()} ${g.unit??"elementer"}`;return`For stor(t): forventet ${t.origin??"value"} til å ha ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`For lite(n): forventet ${t.origin} til å ha ${c}${t.minimum.toString()} ${g.unit}`;return`For lite(n): forventet ${t.origin} til å ha ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Ugyldig streng: må starte med "${c.prefix}"`;if(c.format==="ends_with")return`Ugyldig streng: må ende med "${c.suffix}"`;if(c.format==="includes")return`Ugyldig streng: må inneholde "${c.includes}"`;if(c.format==="regex")return`Ugyldig streng: må matche mønsteret ${c.pattern}`;return`Ugyldig ${u[c.format]??t.format}`}case"not_multiple_of":return`Ugyldig tall: må være et multiplum av ${t.divisor}`;case"unrecognized_keys":return`${t.keys.length>1?"Ukjente nøkler":"Ukjent nøkkel"}: ${G(t.keys,", ")}`;case"invalid_key":return`Ugyldig nøkkel i ${t.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${t.origin}`;default:return"Ugyldig input"}}};function Ol(){return{localeError:QJ()}}var mJ=()=>{let i={string:{unit:"harf",verb:"olmalıdır"},file:{unit:"bayt",verb:"olmalıdır"},array:{unit:"unsur",verb:"olmalıdır"},set:{unit:"unsur",verb:"olmalıdır"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"numara";case"object":{if(Array.isArray(t))return"saf";if(t===null)return"gayb";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"giren",email:"epostagâh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengâmı",date:"ISO tarihi",time:"ISO zamanı",duration:"ISO müddeti",ipv4:"IPv4 nişânı",ipv6:"IPv6 nişânı",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-şifreli metin",base64url:"base64url-şifreli metin",json_string:"JSON metin",e164:"E.164 sayısı",jwt:"JWT",template_literal:"giren"};return(t)=>{switch(t.code){case"invalid_type":return`Fâsit giren: umulan ${t.expected}, alınan ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Fâsit giren: umulan ${A(t.values[0])}`;return`Fâsit tercih: mûteberler ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Fazla büyük: ${t.origin??"value"}, ${c}${t.maximum.toString()} ${g.unit??"elements"} sahip olmalıydı.`;return`Fazla büyük: ${t.origin??"value"}, ${c}${t.maximum.toString()} olmalıydı.`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Fazla küçük: ${t.origin}, ${c}${t.minimum.toString()} ${g.unit} sahip olmalıydı.`;return`Fazla küçük: ${t.origin}, ${c}${t.minimum.toString()} olmalıydı.`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Fâsit metin: "${c.prefix}" ile başlamalı.`;if(c.format==="ends_with")return`Fâsit metin: "${c.suffix}" ile bitmeli.`;if(c.format==="includes")return`Fâsit metin: "${c.includes}" ihtivâ etmeli.`;if(c.format==="regex")return`Fâsit metin: ${c.pattern} nakşına uymalı.`;return`Fâsit ${u[c.format]??t.format}`}case"not_multiple_of":return`Fâsit sayı: ${t.divisor} katı olmalıydı.`;case"unrecognized_keys":return`Tanınmayan anahtar ${t.keys.length>1?"s":""}: ${G(t.keys,", ")}`;case"invalid_key":return`${t.origin} için tanınmayan anahtar var.`;case"invalid_union":return"Giren tanınamadı.";case"invalid_element":return`${t.origin} için tanınmayan kıymet var.`;default:return"Kıymet tanınamadı."}}};function jl(){return{localeError:mJ()}}var SJ=()=>{let i={string:{unit:"znaków",verb:"mieć"},file:{unit:"bajtów",verb:"mieć"},array:{unit:"elementów",verb:"mieć"},set:{unit:"elementów",verb:"mieć"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"liczba";case"object":{if(Array.isArray(t))return"tablica";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"wyrażenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ciąg znaków zakodowany w formacie base64",base64url:"ciąg znaków zakodowany w formacie base64url",json_string:"ciąg znaków w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejście"};return(t)=>{switch(t.code){case"invalid_type":return`Nieprawidłowe dane wejściowe: oczekiwano ${t.expected}, otrzymano ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Nieprawidłowe dane wejściowe: oczekiwano ${A(t.values[0])}`;return`Nieprawidłowa opcja: oczekiwano jednej z wartości ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Za duża wartość: oczekiwano, że ${t.origin??"wartość"} będzie mieć ${c}${t.maximum.toString()} ${g.unit??"elementów"}`;return`Zbyt duż(y/a/e): oczekiwano, że ${t.origin??"wartość"} będzie wynosić ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Za mała wartość: oczekiwano, że ${t.origin??"wartość"} będzie mieć ${c}${t.minimum.toString()} ${g.unit??"elementów"}`;return`Zbyt mał(y/a/e): oczekiwano, że ${t.origin??"wartość"} będzie wynosić ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Nieprawidłowy ciąg znaków: musi zaczynać się od "${c.prefix}"`;if(c.format==="ends_with")return`Nieprawidłowy ciąg znaków: musi kończyć się na "${c.suffix}"`;if(c.format==="includes")return`Nieprawidłowy ciąg znaków: musi zawierać "${c.includes}"`;if(c.format==="regex")return`Nieprawidłowy ciąg znaków: musi odpowiadać wzorcowi ${c.pattern}`;return`Nieprawidłow(y/a/e) ${u[c.format]??t.format}`}case"not_multiple_of":return`Nieprawidłowa liczba: musi być wielokrotnością ${t.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${t.keys.length>1?"s":""}: ${G(t.keys,", ")}`;case"invalid_key":return`Nieprawidłowy klucz w ${t.origin}`;case"invalid_union":return"Nieprawidłowe dane wejściowe";case"invalid_element":return`Nieprawidłowa wartość w ${t.origin}`;default:return"Nieprawidłowe dane wejściowe"}}};function Ul(){return{localeError:SJ()}}var AJ=()=>{let i={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"número";case"object":{if(Array.isArray(t))return"array";if(t===null)return"nulo";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"padrão",email:"endereço de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"duração ISO",ipv4:"endereço IPv4",ipv6:"endereço IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return(t)=>{switch(t.code){case"invalid_type":return`Tipo inválido: esperado ${t.expected}, recebido ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Entrada inválida: esperado ${A(t.values[0])}`;return`Opção inválida: esperada uma das ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Muito grande: esperado que ${t.origin??"valor"} tivesse ${c}${t.maximum.toString()} ${g.unit??"elementos"}`;return`Muito grande: esperado que ${t.origin??"valor"} fosse ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Muito pequeno: esperado que ${t.origin} tivesse ${c}${t.minimum.toString()} ${g.unit}`;return`Muito pequeno: esperado que ${t.origin} fosse ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Texto inválido: deve começar com "${c.prefix}"`;if(c.format==="ends_with")return`Texto inválido: deve terminar com "${c.suffix}"`;if(c.format==="includes")return`Texto inválido: deve incluir "${c.includes}"`;if(c.format==="regex")return`Texto inválido: deve corresponder ao padrão ${c.pattern}`;return`${u[c.format]??t.format} inválido`}case"not_multiple_of":return`Número inválido: deve ser múltiplo de ${t.divisor}`;case"unrecognized_keys":return`Chave${t.keys.length>1?"s":""} desconhecida${t.keys.length>1?"s":""}: ${G(t.keys,", ")}`;case"invalid_key":return`Chave inválida em ${t.origin}`;case"invalid_union":return"Entrada inválida";case"invalid_element":return`Valor inválido em ${t.origin}`;default:return"Campo inválido"}}};function Nl(){return{localeError:AJ()}}function t4(i,n,r,u){let t=Math.abs(i),c=t%10,g=t%100;if(g>=11&&g<=19)return u;if(c===1)return n;if(c>=2&&c<=4)return r;return u}var BJ=()=>{let i={string:{unit:{one:"символ",few:"символа",many:"символов"},verb:"иметь"},file:{unit:{one:"байт",few:"байта",many:"байт"},verb:"иметь"},array:{unit:{one:"элемент",few:"элемента",many:"элементов"},verb:"иметь"},set:{unit:{one:"элемент",few:"элемента",many:"элементов"},verb:"иметь"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"число";case"object":{if(Array.isArray(t))return"массив";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"ввод",email:"email адрес",url:"URL",emoji:"эмодзи",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO дата и время",date:"ISO дата",time:"ISO время",duration:"ISO длительность",ipv4:"IPv4 адрес",ipv6:"IPv6 адрес",cidrv4:"IPv4 диапазон",cidrv6:"IPv6 диапазон",base64:"строка в формате base64",base64url:"строка в формате base64url",json_string:"JSON строка",e164:"номер E.164",jwt:"JWT",template_literal:"ввод"};return(t)=>{switch(t.code){case"invalid_type":return`Неверный ввод: ожидалось ${t.expected}, получено ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Неверный ввод: ожидалось ${A(t.values[0])}`;return`Неверный вариант: ожидалось одно из ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g){let h=Number(t.maximum),_=t4(h,g.unit.one,g.unit.few,g.unit.many);return`Слишком большое значение: ожидалось, что ${t.origin??"значение"} будет иметь ${c}${t.maximum.toString()} ${_}`}return`Слишком большое значение: ожидалось, что ${t.origin??"значение"} будет ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g){let h=Number(t.minimum),_=t4(h,g.unit.one,g.unit.few,g.unit.many);return`Слишком маленькое значение: ожидалось, что ${t.origin} будет иметь ${c}${t.minimum.toString()} ${_}`}return`Слишком маленькое значение: ожидалось, что ${t.origin} будет ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Неверная строка: должна начинаться с "${c.prefix}"`;if(c.format==="ends_with")return`Неверная строка: должна заканчиваться на "${c.suffix}"`;if(c.format==="includes")return`Неверная строка: должна содержать "${c.includes}"`;if(c.format==="regex")return`Неверная строка: должна соответствовать шаблону ${c.pattern}`;return`Неверный ${u[c.format]??t.format}`}case"not_multiple_of":return`Неверное число: должно быть кратным ${t.divisor}`;case"unrecognized_keys":return`Нераспознанн${t.keys.length>1?"ые":"ый"} ключ${t.keys.length>1?"и":""}: ${G(t.keys,", ")}`;case"invalid_key":return`Неверный ключ в ${t.origin}`;case"invalid_union":return"Неверные входные данные";case"invalid_element":return`Неверное значение в ${t.origin}`;default:return"Неверные входные данные"}}};function zl(){return{localeError:BJ()}}var KJ=()=>{let i={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"število";case"object":{if(Array.isArray(t))return"tabela";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"vnos",email:"e-poštni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in čas",date:"ISO datum",time:"ISO čas",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 številka",jwt:"JWT",template_literal:"vnos"};return(t)=>{switch(t.code){case"invalid_type":return`Neveljaven vnos: pričakovano ${t.expected}, prejeto ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Neveljaven vnos: pričakovano ${A(t.values[0])}`;return`Neveljavna možnost: pričakovano eno izmed ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Preveliko: pričakovano, da bo ${t.origin??"vrednost"} imelo ${c}${t.maximum.toString()} ${g.unit??"elementov"}`;return`Preveliko: pričakovano, da bo ${t.origin??"vrednost"} ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Premajhno: pričakovano, da bo ${t.origin} imelo ${c}${t.minimum.toString()} ${g.unit}`;return`Premajhno: pričakovano, da bo ${t.origin} ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Neveljaven niz: mora se začeti z "${c.prefix}"`;if(c.format==="ends_with")return`Neveljaven niz: mora se končati z "${c.suffix}"`;if(c.format==="includes")return`Neveljaven niz: mora vsebovati "${c.includes}"`;if(c.format==="regex")return`Neveljaven niz: mora ustrezati vzorcu ${c.pattern}`;return`Neveljaven ${u[c.format]??t.format}`}case"not_multiple_of":return`Neveljavno število: mora biti večkratnik ${t.divisor}`;case"unrecognized_keys":return`Neprepoznan${t.keys.length>1?"i ključi":" ključ"}: ${G(t.keys,", ")}`;case"invalid_key":return`Neveljaven ključ v ${t.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${t.origin}`;default:return"Neveljaven vnos"}}};function Wl(){return{localeError:KJ()}}var VJ=()=>{let i={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehålla"},set:{unit:"objekt",verb:"att innehålla"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"antal";case"object":{if(Array.isArray(t))return"lista";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"reguljärt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad sträng",base64url:"base64url-kodad sträng",json_string:"JSON-sträng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return(t)=>{switch(t.code){case"invalid_type":return`Ogiltig inmatning: förväntat ${t.expected}, fick ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Ogiltig inmatning: förväntat ${A(t.values[0])}`;return`Ogiltigt val: förväntade en av ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`För stor(t): förväntade ${t.origin??"värdet"} att ha ${c}${t.maximum.toString()} ${g.unit??"element"}`;return`För stor(t): förväntat ${t.origin??"värdet"} att ha ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`För lite(t): förväntade ${t.origin??"värdet"} att ha ${c}${t.minimum.toString()} ${g.unit}`;return`För lite(t): förväntade ${t.origin??"värdet"} att ha ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Ogiltig sträng: måste börja med "${c.prefix}"`;if(c.format==="ends_with")return`Ogiltig sträng: måste sluta med "${c.suffix}"`;if(c.format==="includes")return`Ogiltig sträng: måste innehålla "${c.includes}"`;if(c.format==="regex")return`Ogiltig sträng: måste matcha mönstret "${c.pattern}"`;return`Ogiltig(t) ${u[c.format]??t.format}`}case"not_multiple_of":return`Ogiltigt tal: måste vara en multipel av ${t.divisor}`;case"unrecognized_keys":return`${t.keys.length>1?"Okända nycklar":"Okänd nyckel"}: ${G(t.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${t.origin??"värdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt värde i ${t.origin??"värdet"}`;default:return"Ogiltig input"}}};function Dl(){return{localeError:VJ()}}var MJ=()=>{let i={string:{unit:"எழுத்துக்கள்",verb:"கொண்டிருக்க வேண்டும்"},file:{unit:"பைட்டுகள்",verb:"கொண்டிருக்க வேண்டும்"},array:{unit:"உறுப்புகள்",verb:"கொண்டிருக்க வேண்டும்"},set:{unit:"உறுப்புகள்",verb:"கொண்டிருக்க வேண்டும்"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"எண் அல்லாதது":"எண்";case"object":{if(Array.isArray(t))return"அணி";if(t===null)return"வெறுமை";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"உள்ளீடு",email:"மின்னஞ்சல் முகவரி",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO தேதி நேரம்",date:"ISO தேதி",time:"ISO நேரம்",duration:"ISO கால அளவு",ipv4:"IPv4 முகவரி",ipv6:"IPv6 முகவரி",cidrv4:"IPv4 வரம்பு",cidrv6:"IPv6 வரம்பு",base64:"base64-encoded சரம்",base64url:"base64url-encoded சரம்",json_string:"JSON சரம்",e164:"E.164 எண்",jwt:"JWT",template_literal:"input"};return(t)=>{switch(t.code){case"invalid_type":return`தவறான உள்ளீடு: எதிர்பார்க்கப்பட்டது ${t.expected}, பெறப்பட்டது ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`தவறான உள்ளீடு: எதிர்பார்க்கப்பட்டது ${A(t.values[0])}`;return`தவறான விருப்பம்: எதிர்பார்க்கப்பட்டது ${G(t.values,"|")} இல் ஒன்று`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`மிக பெரியது: எதிர்பார்க்கப்பட்டது ${t.origin??"மதிப்பு"} ${c}${t.maximum.toString()} ${g.unit??"உறுப்புகள்"} ஆக இருக்க வேண்டும்`;return`மிக பெரியது: எதிர்பார்க்கப்பட்டது ${t.origin??"மதிப்பு"} ${c}${t.maximum.toString()} ஆக இருக்க வேண்டும்`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`மிகச் சிறியது: எதிர்பார்க்கப்பட்டது ${t.origin} ${c}${t.minimum.toString()} ${g.unit} ஆக இருக்க வேண்டும்`;return`மிகச் சிறியது: எதிர்பார்க்கப்பட்டது ${t.origin} ${c}${t.minimum.toString()} ஆக இருக்க வேண்டும்`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`தவறான சரம்: "${c.prefix}" இல் தொடங்க வேண்டும்`;if(c.format==="ends_with")return`தவறான சரம்: "${c.suffix}" இல் முடிவடைய வேண்டும்`;if(c.format==="includes")return`தவறான சரம்: "${c.includes}" ஐ உள்ளடக்க வேண்டும்`;if(c.format==="regex")return`தவறான சரம்: ${c.pattern} முறைபாட்டுடன் பொருந்த வேண்டும்`;return`தவறான ${u[c.format]??t.format}`}case"not_multiple_of":return`தவறான எண்: ${t.divisor} இன் பலமாக இருக்க வேண்டும்`;case"unrecognized_keys":return`அடையாளம் தெரியாத விசை${t.keys.length>1?"கள்":""}: ${G(t.keys,", ")}`;case"invalid_key":return`${t.origin} இல் தவறான விசை`;case"invalid_union":return"தவறான உள்ளீடு";case"invalid_element":return`${t.origin} இல் தவறான மதிப்பு`;default:return"தவறான உள்ளீடு"}}};function Jl(){return{localeError:MJ()}}var xJ=()=>{let i={string:{unit:"ตัวอักษร",verb:"ควรมี"},file:{unit:"ไบต์",verb:"ควรมี"},array:{unit:"รายการ",verb:"ควรมี"},set:{unit:"รายการ",verb:"ควรมี"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"ไม่ใช่ตัวเลข (NaN)":"ตัวเลข";case"object":{if(Array.isArray(t))return"อาร์เรย์ (Array)";if(t===null)return"ไม่มีค่า (null)";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"ข้อมูลที่ป้อน",email:"ที่อยู่อีเมล",url:"URL",emoji:"อิโมจิ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"วันที่เวลาแบบ ISO",date:"วันที่แบบ ISO",time:"เวลาแบบ ISO",duration:"ช่วงเวลาแบบ ISO",ipv4:"ที่อยู่ IPv4",ipv6:"ที่อยู่ IPv6",cidrv4:"ช่วง IP แบบ IPv4",cidrv6:"ช่วง IP แบบ IPv6",base64:"ข้อความแบบ Base64",base64url:"ข้อความแบบ Base64 สำหรับ URL",json_string:"ข้อความแบบ JSON",e164:"เบอร์โทรศัพท์ระหว่างประเทศ (E.164)",jwt:"โทเคน JWT",template_literal:"ข้อมูลที่ป้อน"};return(t)=>{switch(t.code){case"invalid_type":return`ประเภทข้อมูลไม่ถูกต้อง: ควรเป็น ${t.expected} แต่ได้รับ ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`ค่าไม่ถูกต้อง: ควรเป็น ${A(t.values[0])}`;return`ตัวเลือกไม่ถูกต้อง: ควรเป็นหนึ่งใน ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"ไม่เกิน":"น้อยกว่า",g=n(t.origin);if(g)return`เกินกำหนด: ${t.origin??"ค่า"} ควรมี${c} ${t.maximum.toString()} ${g.unit??"รายการ"}`;return`เกินกำหนด: ${t.origin??"ค่า"} ควรมี${c} ${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?"อย่างน้อย":"มากกว่า",g=n(t.origin);if(g)return`น้อยกว่ากำหนด: ${t.origin} ควรมี${c} ${t.minimum.toString()} ${g.unit}`;return`น้อยกว่ากำหนด: ${t.origin} ควรมี${c} ${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`รูปแบบไม่ถูกต้อง: ข้อความต้องขึ้นต้นด้วย "${c.prefix}"`;if(c.format==="ends_with")return`รูปแบบไม่ถูกต้อง: ข้อความต้องลงท้ายด้วย "${c.suffix}"`;if(c.format==="includes")return`รูปแบบไม่ถูกต้อง: ข้อความต้องมี "${c.includes}" อยู่ในข้อความ`;if(c.format==="regex")return`รูปแบบไม่ถูกต้อง: ต้องตรงกับรูปแบบที่กำหนด ${c.pattern}`;return`รูปแบบไม่ถูกต้อง: ${u[c.format]??t.format}`}case"not_multiple_of":return`ตัวเลขไม่ถูกต้อง: ต้องเป็นจำนวนที่หารด้วย ${t.divisor} ได้ลงตัว`;case"unrecognized_keys":return`พบคีย์ที่ไม่รู้จัก: ${G(t.keys,", ")}`;case"invalid_key":return`คีย์ไม่ถูกต้องใน ${t.origin}`;case"invalid_union":return"ข้อมูลไม่ถูกต้อง: ไม่ตรงกับรูปแบบยูเนียนที่กำหนดไว้";case"invalid_element":return`ข้อมูลไม่ถูกต้องใน ${t.origin}`;default:return"ข้อมูลไม่ถูกต้อง"}}};function El(){return{localeError:xJ()}}var FJ=(i)=>{let n=typeof i;switch(n){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return n},PJ=()=>{let i={string:{unit:"karakter",verb:"olmalı"},file:{unit:"bayt",verb:"olmalı"},array:{unit:"öğe",verb:"olmalı"},set:{unit:"öğe",verb:"olmalı"}};function n(u){return i[u]??null}let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO süre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aralığı",cidrv6:"IPv6 aralığı",base64:"base64 ile şifrelenmiş metin",base64url:"base64url ile şifrelenmiş metin",json_string:"JSON dizesi",e164:"E.164 sayısı",jwt:"JWT",template_literal:"Şablon dizesi"};return(u)=>{switch(u.code){case"invalid_type":return`Geçersiz değer: beklenen ${u.expected}, alınan ${FJ(u.input)}`;case"invalid_value":if(u.values.length===1)return`Geçersiz değer: beklenen ${A(u.values[0])}`;return`Geçersiz seçenek: aşağıdakilerden biri olmalı: ${G(u.values,"|")}`;case"too_big":{let t=u.inclusive?"<=":"<",c=n(u.origin);if(c)return`Çok büyük: beklenen ${u.origin??"değer"} ${t}${u.maximum.toString()} ${c.unit??"öğe"}`;return`Çok büyük: beklenen ${u.origin??"değer"} ${t}${u.maximum.toString()}`}case"too_small":{let t=u.inclusive?">=":">",c=n(u.origin);if(c)return`Çok küçük: beklenen ${u.origin} ${t}${u.minimum.toString()} ${c.unit}`;return`Çok küçük: beklenen ${u.origin} ${t}${u.minimum.toString()}`}case"invalid_format":{let t=u;if(t.format==="starts_with")return`Geçersiz metin: "${t.prefix}" ile başlamalı`;if(t.format==="ends_with")return`Geçersiz metin: "${t.suffix}" ile bitmeli`;if(t.format==="includes")return`Geçersiz metin: "${t.includes}" içermeli`;if(t.format==="regex")return`Geçersiz metin: ${t.pattern} desenine uymalı`;return`Geçersiz ${r[t.format]??u.format}`}case"not_multiple_of":return`Geçersiz sayı: ${u.divisor} ile tam bölünebilmeli`;case"unrecognized_keys":return`Tanınmayan anahtar${u.keys.length>1?"lar":""}: ${G(u.keys,", ")}`;case"invalid_key":return`${u.origin} içinde geçersiz anahtar`;case"invalid_union":return"Geçersiz değer";case"invalid_element":return`${u.origin} içinde geçersiz değer`;default:return"Geçersiz değer"}}};function Hl(){return{localeError:PJ()}}var yJ=()=>{let i={string:{unit:"символів",verb:"матиме"},file:{unit:"байтів",verb:"матиме"},array:{unit:"елементів",verb:"матиме"},set:{unit:"елементів",verb:"матиме"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"число";case"object":{if(Array.isArray(t))return"масив";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"вхідні дані",email:"адреса електронної пошти",url:"URL",emoji:"емодзі",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"дата та час ISO",date:"дата ISO",time:"час ISO",duration:"тривалість ISO",ipv4:"адреса IPv4",ipv6:"адреса IPv6",cidrv4:"діапазон IPv4",cidrv6:"діапазон IPv6",base64:"рядок у кодуванні base64",base64url:"рядок у кодуванні base64url",json_string:"рядок JSON",e164:"номер E.164",jwt:"JWT",template_literal:"вхідні дані"};return(t)=>{switch(t.code){case"invalid_type":return`Неправильні вхідні дані: очікується ${t.expected}, отримано ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Неправильні вхідні дані: очікується ${A(t.values[0])}`;return`Неправильна опція: очікується одне з ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Занадто велике: очікується, що ${t.origin??"значення"} ${g.verb} ${c}${t.maximum.toString()} ${g.unit??"елементів"}`;return`Занадто велике: очікується, що ${t.origin??"значення"} буде ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Занадто мале: очікується, що ${t.origin} ${g.verb} ${c}${t.minimum.toString()} ${g.unit}`;return`Занадто мале: очікується, що ${t.origin} буде ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Неправильний рядок: повинен починатися з "${c.prefix}"`;if(c.format==="ends_with")return`Неправильний рядок: повинен закінчуватися на "${c.suffix}"`;if(c.format==="includes")return`Неправильний рядок: повинен містити "${c.includes}"`;if(c.format==="regex")return`Неправильний рядок: повинен відповідати шаблону ${c.pattern}`;return`Неправильний ${u[c.format]??t.format}`}case"not_multiple_of":return`Неправильне число: повинно бути кратним ${t.divisor}`;case"unrecognized_keys":return`Нерозпізнаний ключ${t.keys.length>1?"і":""}: ${G(t.keys,", ")}`;case"invalid_key":return`Неправильний ключ у ${t.origin}`;case"invalid_union":return"Неправильні вхідні дані";case"invalid_element":return`Неправильне значення у ${t.origin}`;default:return"Неправильні вхідні дані"}}};function Gl(){return{localeError:yJ()}}var TJ=()=>{let i={string:{unit:"حروف",verb:"ہونا"},file:{unit:"بائٹس",verb:"ہونا"},array:{unit:"آئٹمز",verb:"ہونا"},set:{unit:"آئٹمز",verb:"ہونا"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"نمبر";case"object":{if(Array.isArray(t))return"آرے";if(t===null)return"نل";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"ان پٹ",email:"ای میل ایڈریس",url:"یو آر ایل",emoji:"ایموجی",uuid:"یو یو آئی ڈی",uuidv4:"یو یو آئی ڈی وی 4",uuidv6:"یو یو آئی ڈی وی 6",nanoid:"نینو آئی ڈی",guid:"جی یو آئی ڈی",cuid:"سی یو آئی ڈی",cuid2:"سی یو آئی ڈی 2",ulid:"یو ایل آئی ڈی",xid:"ایکس آئی ڈی",ksuid:"کے ایس یو آئی ڈی",datetime:"آئی ایس او ڈیٹ ٹائم",date:"آئی ایس او تاریخ",time:"آئی ایس او وقت",duration:"آئی ایس او مدت",ipv4:"آئی پی وی 4 ایڈریس",ipv6:"آئی پی وی 6 ایڈریس",cidrv4:"آئی پی وی 4 رینج",cidrv6:"آئی پی وی 6 رینج",base64:"بیس 64 ان کوڈڈ سٹرنگ",base64url:"بیس 64 یو آر ایل ان کوڈڈ سٹرنگ",json_string:"جے ایس او این سٹرنگ",e164:"ای 164 نمبر",jwt:"جے ڈبلیو ٹی",template_literal:"ان پٹ"};return(t)=>{switch(t.code){case"invalid_type":return`غلط ان پٹ: ${t.expected} متوقع تھا، ${r(t.input)} موصول ہوا`;case"invalid_value":if(t.values.length===1)return`غلط ان پٹ: ${A(t.values[0])} متوقع تھا`;return`غلط آپشن: ${G(t.values,"|")} میں سے ایک متوقع تھا`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`بہت بڑا: ${t.origin??"ویلیو"} کے ${c}${t.maximum.toString()} ${g.unit??"عناصر"} ہونے متوقع تھے`;return`بہت بڑا: ${t.origin??"ویلیو"} کا ${c}${t.maximum.toString()} ہونا متوقع تھا`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`بہت چھوٹا: ${t.origin} کے ${c}${t.minimum.toString()} ${g.unit} ہونے متوقع تھے`;return`بہت چھوٹا: ${t.origin} کا ${c}${t.minimum.toString()} ہونا متوقع تھا`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`غلط سٹرنگ: "${c.prefix}" سے شروع ہونا چاہیے`;if(c.format==="ends_with")return`غلط سٹرنگ: "${c.suffix}" پر ختم ہونا چاہیے`;if(c.format==="includes")return`غلط سٹرنگ: "${c.includes}" شامل ہونا چاہیے`;if(c.format==="regex")return`غلط سٹرنگ: پیٹرن ${c.pattern} سے میچ ہونا چاہیے`;return`غلط ${u[c.format]??t.format}`}case"not_multiple_of":return`غلط نمبر: ${t.divisor} کا مضاعف ہونا چاہیے`;case"unrecognized_keys":return`غیر تسلیم شدہ کی${t.keys.length>1?"ز":""}: ${G(t.keys,"، ")}`;case"invalid_key":return`${t.origin} میں غلط کی`;case"invalid_union":return"غلط ان پٹ";case"invalid_element":return`${t.origin} میں غلط ویلیو`;default:return"غلط ان پٹ"}}};function ql(){return{localeError:TJ()}}var kJ=()=>{let i={string:{unit:"ký tự",verb:"có"},file:{unit:"byte",verb:"có"},array:{unit:"phần tử",verb:"có"},set:{unit:"phần tử",verb:"có"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"số";case"object":{if(Array.isArray(t))return"mảng";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"đầu vào",email:"địa chỉ email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngày giờ ISO",date:"ngày ISO",time:"giờ ISO",duration:"khoảng thời gian ISO",ipv4:"địa chỉ IPv4",ipv6:"địa chỉ IPv6",cidrv4:"dải IPv4",cidrv6:"dải IPv6",base64:"chuỗi mã hóa base64",base64url:"chuỗi mã hóa base64url",json_string:"chuỗi JSON",e164:"số E.164",jwt:"JWT",template_literal:"đầu vào"};return(t)=>{switch(t.code){case"invalid_type":return`Đầu vào không hợp lệ: mong đợi ${t.expected}, nhận được ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`Đầu vào không hợp lệ: mong đợi ${A(t.values[0])}`;return`Tùy chọn không hợp lệ: mong đợi một trong các giá trị ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`Quá lớn: mong đợi ${t.origin??"giá trị"} ${g.verb} ${c}${t.maximum.toString()} ${g.unit??"phần tử"}`;return`Quá lớn: mong đợi ${t.origin??"giá trị"} ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`Quá nhỏ: mong đợi ${t.origin} ${g.verb} ${c}${t.minimum.toString()} ${g.unit}`;return`Quá nhỏ: mong đợi ${t.origin} ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`Chuỗi không hợp lệ: phải bắt đầu bằng "${c.prefix}"`;if(c.format==="ends_with")return`Chuỗi không hợp lệ: phải kết thúc bằng "${c.suffix}"`;if(c.format==="includes")return`Chuỗi không hợp lệ: phải bao gồm "${c.includes}"`;if(c.format==="regex")return`Chuỗi không hợp lệ: phải khớp với mẫu ${c.pattern}`;return`${u[c.format]??t.format} không hợp lệ`}case"not_multiple_of":return`Số không hợp lệ: phải là bội số của ${t.divisor}`;case"unrecognized_keys":return`Khóa không được nhận dạng: ${G(t.keys,", ")}`;case"invalid_key":return`Khóa không hợp lệ trong ${t.origin}`;case"invalid_union":return"Đầu vào không hợp lệ";case"invalid_element":return`Giá trị không hợp lệ trong ${t.origin}`;default:return"Đầu vào không hợp lệ"}}};function Xl(){return{localeError:kJ()}}var CJ=()=>{let i={string:{unit:"字符",verb:"包含"},file:{unit:"字节",verb:"包含"},array:{unit:"项",verb:"包含"},set:{unit:"项",verb:"包含"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"非数字(NaN)":"数字";case"object":{if(Array.isArray(t))return"数组";if(t===null)return"空值(null)";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"输入",email:"电子邮件",url:"URL",emoji:"表情符号",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO日期时间",date:"ISO日期",time:"ISO时间",duration:"ISO时长",ipv4:"IPv4地址",ipv6:"IPv6地址",cidrv4:"IPv4网段",cidrv6:"IPv6网段",base64:"base64编码字符串",base64url:"base64url编码字符串",json_string:"JSON字符串",e164:"E.164号码",jwt:"JWT",template_literal:"输入"};return(t)=>{switch(t.code){case"invalid_type":return`无效输入：期望 ${t.expected}，实际接收 ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`无效输入：期望 ${A(t.values[0])}`;return`无效选项：期望以下之一 ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`数值过大：期望 ${t.origin??"值"} ${c}${t.maximum.toString()} ${g.unit??"个元素"}`;return`数值过大：期望 ${t.origin??"值"} ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`数值过小：期望 ${t.origin} ${c}${t.minimum.toString()} ${g.unit}`;return`数值过小：期望 ${t.origin} ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`无效字符串：必须以 "${c.prefix}" 开头`;if(c.format==="ends_with")return`无效字符串：必须以 "${c.suffix}" 结尾`;if(c.format==="includes")return`无效字符串：必须包含 "${c.includes}"`;if(c.format==="regex")return`无效字符串：必须满足正则表达式 ${c.pattern}`;return`无效${u[c.format]??t.format}`}case"not_multiple_of":return`无效数字：必须是 ${t.divisor} 的倍数`;case"unrecognized_keys":return`出现未知的键(key): ${G(t.keys,", ")}`;case"invalid_key":return`${t.origin} 中的键(key)无效`;case"invalid_union":return"无效输入";case"invalid_element":return`${t.origin} 中包含无效值(value)`;default:return"无效输入"}}};function Ll(){return{localeError:CJ()}}var RJ=()=>{let i={string:{unit:"字元",verb:"擁有"},file:{unit:"位元組",verb:"擁有"},array:{unit:"項目",verb:"擁有"},set:{unit:"項目",verb:"擁有"}};function n(t){return i[t]??null}let r=(t)=>{let c=typeof t;switch(c){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return c},u={regex:"輸入",email:"郵件地址",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO 日期時間",date:"ISO 日期",time:"ISO 時間",duration:"ISO 期間",ipv4:"IPv4 位址",ipv6:"IPv6 位址",cidrv4:"IPv4 範圍",cidrv6:"IPv6 範圍",base64:"base64 編碼字串",base64url:"base64url 編碼字串",json_string:"JSON 字串",e164:"E.164 數值",jwt:"JWT",template_literal:"輸入"};return(t)=>{switch(t.code){case"invalid_type":return`無效的輸入值：預期為 ${t.expected}，但收到 ${r(t.input)}`;case"invalid_value":if(t.values.length===1)return`無效的輸入值：預期為 ${A(t.values[0])}`;return`無效的選項：預期為以下其中之一 ${G(t.values,"|")}`;case"too_big":{let c=t.inclusive?"<=":"<",g=n(t.origin);if(g)return`數值過大：預期 ${t.origin??"值"} 應為 ${c}${t.maximum.toString()} ${g.unit??"個元素"}`;return`數值過大：預期 ${t.origin??"值"} 應為 ${c}${t.maximum.toString()}`}case"too_small":{let c=t.inclusive?">=":">",g=n(t.origin);if(g)return`數值過小：預期 ${t.origin} 應為 ${c}${t.minimum.toString()} ${g.unit}`;return`數值過小：預期 ${t.origin} 應為 ${c}${t.minimum.toString()}`}case"invalid_format":{let c=t;if(c.format==="starts_with")return`無效的字串：必須以 "${c.prefix}" 開頭`;if(c.format==="ends_with")return`無效的字串：必須以 "${c.suffix}" 結尾`;if(c.format==="includes")return`無效的字串：必須包含 "${c.includes}"`;if(c.format==="regex")return`無效的字串：必須符合格式 ${c.pattern}`;return`無效的 ${u[c.format]??t.format}`}case"not_multiple_of":return`無效的數字：必須為 ${t.divisor} 的倍數`;case"unrecognized_keys":return`無法識別的鍵值${t.keys.length>1?"們":""}：${G(t.keys,"、")}`;case"invalid_key":return`${t.origin} 中有無效的鍵值`;case"invalid_union":return"無效的輸入值";case"invalid_element":return`${t.origin} 中有無效的值`;default:return"無效的輸入值"}}};function Il(){return{localeError:RJ()}}var Yl=Symbol("ZodOutput"),Ql=Symbol("ZodInput");class Jr{constructor(){this._map=new WeakMap,this._idmap=new Map}add(i,...n){let r=n[0];if(this._map.set(i,r),r&&typeof r==="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,i)}return this}remove(i){return this._map.delete(i),this}get(i){let n=i._zod.parent;if(n){let r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(i)}}return this._map.get(i)}has(i){return this._map.has(i)}}function Oc(){return new Jr}var rn=Oc();function ml(i,n){return new i({type:"string",...I(n)})}function Sl(i,n){return new i({type:"string",coerce:!0,...I(n)})}function jc(i,n){return new i({type:"string",format:"email",check:"string_format",abort:!1,...I(n)})}function Er(i,n){return new i({type:"string",format:"guid",check:"string_format",abort:!1,...I(n)})}function Uc(i,n){return new i({type:"string",format:"uuid",check:"string_format",abort:!1,...I(n)})}function Nc(i,n){return new i({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...I(n)})}function zc(i,n){return new i({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...I(n)})}function Wc(i,n){return new i({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...I(n)})}function Dc(i,n){return new i({type:"string",format:"url",check:"string_format",abort:!1,...I(n)})}function Jc(i,n){return new i({type:"string",format:"emoji",check:"string_format",abort:!1,...I(n)})}function Ec(i,n){return new i({type:"string",format:"nanoid",check:"string_format",abort:!1,...I(n)})}function Hc(i,n){return new i({type:"string",format:"cuid",check:"string_format",abort:!1,...I(n)})}function Gc(i,n){return new i({type:"string",format:"cuid2",check:"string_format",abort:!1,...I(n)})}function qc(i,n){return new i({type:"string",format:"ulid",check:"string_format",abort:!1,...I(n)})}function Xc(i,n){return new i({type:"string",format:"xid",check:"string_format",abort:!1,...I(n)})}function Lc(i,n){return new i({type:"string",format:"ksuid",check:"string_format",abort:!1,...I(n)})}function Ic(i,n){return new i({type:"string",format:"ipv4",check:"string_format",abort:!1,...I(n)})}function Yc(i,n){return new i({type:"string",format:"ipv6",check:"string_format",abort:!1,...I(n)})}function Qc(i,n){return new i({type:"string",format:"cidrv4",check:"string_format",abort:!1,...I(n)})}function mc(i,n){return new i({type:"string",format:"cidrv6",check:"string_format",abort:!1,...I(n)})}function Sc(i,n){return new i({type:"string",format:"base64",check:"string_format",abort:!1,...I(n)})}function Ac(i,n){return new i({type:"string",format:"base64url",check:"string_format",abort:!1,...I(n)})}function Bc(i,n){return new i({type:"string",format:"e164",check:"string_format",abort:!1,...I(n)})}function Kc(i,n){return new i({type:"string",format:"jwt",check:"string_format",abort:!1,...I(n)})}function Al(i,n){return new i({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...I(n)})}function Bl(i,n){return new i({type:"string",format:"date",check:"string_format",...I(n)})}function Kl(i,n){return new i({type:"string",format:"time",check:"string_format",precision:null,...I(n)})}function Vl(i,n){return new i({type:"string",format:"duration",check:"string_format",...I(n)})}function Ml(i,n){return new i({type:"number",checks:[],...I(n)})}function xl(i,n){return new i({type:"number",coerce:!0,checks:[],...I(n)})}function Fl(i,n){return new i({type:"number",check:"number_format",abort:!1,format:"safeint",...I(n)})}function Pl(i,n){return new i({type:"number",check:"number_format",abort:!1,format:"float32",...I(n)})}function yl(i,n){return new i({type:"number",check:"number_format",abort:!1,format:"float64",...I(n)})}function Tl(i,n){return new i({type:"number",check:"number_format",abort:!1,format:"int32",...I(n)})}function kl(i,n){return new i({type:"number",check:"number_format",abort:!1,format:"uint32",...I(n)})}function Cl(i,n){return new i({type:"boolean",...I(n)})}function Rl(i,n){return new i({type:"boolean",coerce:!0,...I(n)})}function Zl(i,n){return new i({type:"bigint",...I(n)})}function el(i,n){return new i({type:"bigint",coerce:!0,...I(n)})}function pl(i,n){return new i({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...I(n)})}function dl(i,n){return new i({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...I(n)})}function al(i,n){return new i({type:"symbol",...I(n)})}function sl(i,n){return new i({type:"undefined",...I(n)})}function i$(i,n){return new i({type:"null",...I(n)})}function n$(i){return new i({type:"any"})}function Gt(i){return new i({type:"unknown"})}function t$(i,n){return new i({type:"never",...I(n)})}function r$(i,n){return new i({type:"void",...I(n)})}function u$(i,n){return new i({type:"date",...I(n)})}function c$(i,n){return new i({type:"date",coerce:!0,...I(n)})}function o$(i,n){return new i({type:"nan",...I(n)})}function On(i,n){return new hc({check:"less_than",...I(n),value:i,inclusive:!1})}function Fi(i,n){return new hc({check:"less_than",...I(n),value:i,inclusive:!0})}function jn(i,n){return new _c({check:"greater_than",...I(n),value:i,inclusive:!1})}function Yi(i,n){return new _c({check:"greater_than",...I(n),value:i,inclusive:!0})}function g$(i){return jn(0,i)}function h$(i){return On(0,i)}function _$(i){return Fi(0,i)}function l$(i){return Yi(0,i)}function ct(i,n){return new qh({check:"multiple_of",...I(n),value:i})}function qt(i,n){return new Ih({check:"max_size",...I(n),maximum:i})}function ot(i,n){return new Yh({check:"min_size",...I(n),minimum:i})}function Hr(i,n){return new Qh({check:"size_equals",...I(n),size:i})}function Xt(i,n){return new mh({check:"max_length",...I(n),maximum:i})}function Vn(i,n){return new Sh({check:"min_length",...I(n),minimum:i})}function Lt(i,n){return new Ah({check:"length_equals",...I(n),length:i})}function Gr(i,n){return new Bh({check:"string_format",format:"regex",...I(n),pattern:i})}function qr(i){return new Kh({check:"string_format",format:"lowercase",...I(i)})}function Xr(i){return new Vh({check:"string_format",format:"uppercase",...I(i)})}function Lr(i,n){return new Mh({check:"string_format",format:"includes",...I(n),includes:i})}function Ir(i,n){return new xh({check:"string_format",format:"starts_with",...I(n),prefix:i})}function Yr(i,n){return new Fh({check:"string_format",format:"ends_with",...I(n),suffix:i})}function $$(i,n,r){return new Ph({check:"property",property:i,schema:n,...I(r)})}function Qr(i,n){return new yh({check:"mime_type",mime:i,...I(n)})}function Un(i){return new Th({check:"overwrite",tx:i})}function mr(i){return Un((n)=>n.normalize(i))}function Sr(){return Un((i)=>i.trim())}function Ar(){return Un((i)=>i.toLowerCase())}function Br(){return Un((i)=>i.toUpperCase())}function Kr(i,n,r){return new i({type:"array",element:n,...I(r)})}function ZJ(i,n,r){return new i({type:"union",options:n,...I(r)})}function eJ(i,n,r,u){return new i({type:"union",options:r,discriminator:n,...I(u)})}function pJ(i,n,r){return new i({type:"intersection",left:n,right:r})}function w$(i,n,r,u){let t=r instanceof y;return new i({type:"tuple",items:n,rest:t?r:null,...I(t?u:r)})}function dJ(i,n,r,u){return new i({type:"record",keyType:n,valueType:r,...I(u)})}function aJ(i,n,r,u){return new i({type:"map",keyType:n,valueType:r,...I(u)})}function sJ(i,n,r){return new i({type:"set",valueType:n,...I(r)})}function iE(i,n,r){let u=Array.isArray(n)?Object.fromEntries(n.map((t)=>[t,t])):n;return new i({type:"enum",entries:u,...I(r)})}function nE(i,n,r){return new i({type:"enum",entries:n,...I(r)})}function tE(i,n,r){return new i({type:"literal",values:Array.isArray(n)?n:[n],...I(r)})}function b$(i,n){return new i({type:"file",...I(n)})}function rE(i,n){return new i({type:"transform",transform:n})}function uE(i,n){return new i({type:"optional",innerType:n})}function cE(i,n){return new i({type:"nullable",innerType:n})}function oE(i,n,r){return new i({type:"default",innerType:n,get defaultValue(){return typeof r==="function"?r():r}})}function gE(i,n,r){return new i({type:"nonoptional",innerType:n,...I(r)})}function hE(i,n){return new i({type:"success",innerType:n})}function _E(i,n,r){return new i({type:"catch",innerType:n,catchValue:typeof r==="function"?r:()=>r})}function lE(i,n,r){return new i({type:"pipe",in:n,out:r})}function $E(i,n){return new i({type:"readonly",innerType:n})}function wE(i,n,r){return new i({type:"template_literal",parts:n,...I(r)})}function bE(i,n){return new i({type:"lazy",getter:n})}function vE(i,n){return new i({type:"promise",innerType:n})}function v$(i,n,r){let u=I(r);return u.abort??(u.abort=!0),new i({type:"custom",check:"custom",fn:n,...u})}function f$(i,n,r){return new i({type:"custom",check:"custom",fn:n,...I(r)})}function O$(i,n){let{case:r,error:u,truthy:t,falsy:c}=I(n),g=new Set(t??["true","1","yes","on","y","enabled"]),h=new Set(c??["false","0","no","off","n","disabled"]),_=i.Pipe??zr,l=i.Boolean??Ur,w=new(i.Unknown??Kn)({type:"unknown",checks:[{_zod:{check:(b)=>{if(typeof b.value==="string"){let v=b.value;if(r!=="sensitive")v=v.toLowerCase();if(g.has(v))b.value=!0;else if(h.has(v))b.value=!1;else b.issues.push({code:"invalid_value",expected:"stringbool",values:[...g,...h],input:b.value,inst:w})}else b.issues.push({code:"invalid_type",expected:"string",input:b.value})},def:{check:"custom"},onattach:[]}}],error:u});return new _({type:"pipe",in:w,out:new l({type:"boolean",error:u}),error:u})}class j${constructor(i){this._def=i,this.def=i}implement(i){if(typeof i!=="function")throw new Error("implement() must be called with a function");let n=(...r)=>{let u=this._def.input?tc(this._def.input,r,void 0,{callee:n}):r;if(!Array.isArray(u))throw new Error("Invalid arguments schema: not an array or tuple schema.");let t=i(...u);return this._def.output?tc(this._def.output,t,void 0,{callee:n}):t};return n}implementAsync(i){if(typeof i!=="function")throw new Error("implement() must be called with a function");let n=async(...r)=>{let u=this._def.input?await uc(this._def.input,r,void 0,{callee:n}):r;if(!Array.isArray(u))throw new Error("Invalid arguments schema: not an array or tuple schema.");let t=await i(...u);return this._def.output?uc(this._def.output,t,void 0,{callee:n}):t};return n}input(...i){let n=this.constructor;if(Array.isArray(i[0]))return new n({type:"function",input:new ut({type:"tuple",items:i[0],rest:i[1]}),output:this._def.output});return new n({type:"function",input:i[0],output:this._def.output})}output(i){return new this.constructor({type:"function",input:this._def.input,output:i})}}function U$(i){return new j$({type:"function",input:Array.isArray(i?.input)?w$(ut,i?.input):i?.input??Kr(Nr,Gt(Kn)),output:i?.output??Gt(Kn)})}class Vc{constructor(i){this.counter=0,this.metadataRegistry=i?.metadata??rn,this.target=i?.target??"draft-2020-12",this.unrepresentable=i?.unrepresentable??"throw",this.override=i?.override??(()=>{}),this.io=i?.io??"output",this.seen=new Map}process(i,n={path:[],schemaPath:[]}){var r;let u=i._zod.def,t={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},c=this.seen.get(i);if(c){if(c.count++,n.schemaPath.includes(i))c.cycle=n.path;return c.schema}let g={schema:{},count:1,cycle:void 0};if(this.seen.set(i,g),i._zod.toJSONSchema)g.schema=i._zod.toJSONSchema();let h={...n,schemaPath:[...n.schemaPath,i],path:n.path},_=i._zod.parent;if(_)g.ref=_,this.process(_,h),this.seen.get(_).isParent=!0;else{let w=g.schema;switch(u.type){case"string":{let b=w;b.type="string";let{minimum:v,maximum:f,format:U,patterns:z,contentEncoding:J}=i._zod.bag;if(typeof v==="number")b.minLength=v;if(typeof f==="number")b.maxLength=f;if(U){if(b.format=t[U]??U,b.format==="")delete b.format}if(J)b.contentEncoding=J;if(z&&z.size>0){let N=[...z];if(N.length===1)b.pattern=N[0].source;else if(N.length>1)g.schema.allOf=[...N.map((j)=>({...this.target==="draft-7"?{type:"string"}:{},pattern:j.source}))]}break}case"number":{let b=w,{minimum:v,maximum:f,format:U,multipleOf:z,exclusiveMaximum:J,exclusiveMinimum:N}=i._zod.bag;if(typeof U==="string"&&U.includes("int"))b.type="integer";else b.type="number";if(typeof N==="number")b.exclusiveMinimum=N;if(typeof v==="number"){if(b.minimum=v,typeof N==="number")if(N>=v)delete b.minimum;else delete b.exclusiveMinimum}if(typeof J==="number")b.exclusiveMaximum=J;if(typeof f==="number"){if(b.maximum=f,typeof J==="number")if(J<=f)delete b.maximum;else delete b.exclusiveMaximum}if(typeof z==="number")b.multipleOf=z;break}case"boolean":{let b=w;b.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"undefined":{let b=w;b.type="null";break}case"null":{w.type="null";break}case"any":break;case"unknown":break;case"never":{w.not={};break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let b=w,{minimum:v,maximum:f}=i._zod.bag;if(typeof v==="number")b.minItems=v;if(typeof f==="number")b.maxItems=f;b.type="array",b.items=this.process(u.element,{...h,path:[...h.path,"items"]});break}case"object":{let b=w;b.type="object",b.properties={};let v=u.shape;for(let z in v)b.properties[z]=this.process(v[z],{...h,path:[...h.path,"properties",z]});let f=new Set(Object.keys(v)),U=new Set([...f].filter((z)=>{let J=u.shape[z]._zod;if(this.io==="input")return J.optin===void 0;else return J.optout===void 0}));if(U.size>0)b.required=Array.from(U);if(u.catchall?._zod.def.type==="never")b.additionalProperties=!1;else if(!u.catchall){if(this.io==="output")b.additionalProperties=!1}else if(u.catchall)b.additionalProperties=this.process(u.catchall,{...h,path:[...h.path,"additionalProperties"]});break}case"union":{let b=w;b.anyOf=u.options.map((v,f)=>this.process(v,{...h,path:[...h.path,"anyOf",f]}));break}case"intersection":{let b=w,v=this.process(u.left,{...h,path:[...h.path,"allOf",0]}),f=this.process(u.right,{...h,path:[...h.path,"allOf",1]}),U=(J)=>("allOf"in J)&&Object.keys(J).length===1,z=[...U(v)?v.allOf:[v],...U(f)?f.allOf:[f]];b.allOf=z;break}case"tuple":{let b=w;b.type="array";let v=u.items.map((z,J)=>this.process(z,{...h,path:[...h.path,"prefixItems",J]}));if(this.target==="draft-2020-12")b.prefixItems=v;else b.items=v;if(u.rest){let z=this.process(u.rest,{...h,path:[...h.path,"items"]});if(this.target==="draft-2020-12")b.items=z;else b.additionalItems=z}if(u.rest)b.items=this.process(u.rest,{...h,path:[...h.path,"items"]});let{minimum:f,maximum:U}=i._zod.bag;if(typeof f==="number")b.minItems=f;if(typeof U==="number")b.maxItems=U;break}case"record":{let b=w;b.type="object",b.propertyNames=this.process(u.keyType,{...h,path:[...h.path,"propertyNames"]}),b.additionalProperties=this.process(u.valueType,{...h,path:[...h.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let b=w,v=gr(u.entries);if(v.every((f)=>typeof f==="number"))b.type="number";if(v.every((f)=>typeof f==="string"))b.type="string";b.enum=v;break}case"literal":{let b=w,v=[];for(let f of u.values)if(f===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof f==="bigint")if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");else v.push(Number(f));else v.push(f);if(v.length===0);else if(v.length===1){let f=v[0];b.type=f===null?"null":typeof f,b.const=f}else{if(v.every((f)=>typeof f==="number"))b.type="number";if(v.every((f)=>typeof f==="string"))b.type="string";if(v.every((f)=>typeof f==="boolean"))b.type="string";if(v.every((f)=>f===null))b.type="null";b.enum=v}break}case"file":{let b=w,v={type:"string",format:"binary",contentEncoding:"binary"},{minimum:f,maximum:U,mime:z}=i._zod.bag;if(f!==void 0)v.minLength=f;if(U!==void 0)v.maxLength=U;if(z)if(z.length===1)v.contentMediaType=z[0],Object.assign(b,v);else b.anyOf=z.map((J)=>{return{...v,contentMediaType:J}});else Object.assign(b,v);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let b=this.process(u.innerType,h);w.anyOf=[b,{type:"null"}];break}case"nonoptional":{this.process(u.innerType,h),g.ref=u.innerType;break}case"success":{let b=w;b.type="boolean";break}case"default":{this.process(u.innerType,h),g.ref=u.innerType,w.default=u.defaultValue;break}case"prefault":{if(this.process(u.innerType,h),g.ref=u.innerType,this.io==="input")w._prefault=u.defaultValue;break}case"catch":{this.process(u.innerType,h),g.ref=u.innerType;let b;try{b=u.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}w.default=b;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let b=w,v=i._zod.pattern;if(!v)throw new Error("Pattern not found in template literal");b.type="string",b.pattern=v.source;break}case"pipe":{let b=this.io==="input"?u.in._zod.def.type==="transform"?u.out:u.in:u.out;this.process(b,h),g.ref=b;break}case"readonly":{this.process(u.innerType,h),g.ref=u.innerType,w.readOnly=!0;break}case"promise":{this.process(u.innerType,h),g.ref=u.innerType;break}case"optional":{this.process(u.innerType,h),g.ref=u.innerType;break}case"lazy":{let b=i._zod.innerType;this.process(b,h),g.ref=b;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}default:}}let l=this.metadataRegistry.get(i);if(l)Object.assign(g.schema,l);if(this.io==="input"&&vi(i))delete g.schema.examples,delete g.schema.default;if(this.io==="input"&&g.schema._prefault)(r=g.schema).default??(r.default=g.schema._prefault);return delete g.schema._prefault,this.seen.get(i).schema}emit(i,n){let r={cycles:n?.cycles??"ref",reused:n?.reused??"inline",external:n?.external??void 0},u=this.seen.get(i);if(!u)throw new Error("Unprocessed schema. This is a bug in Zod.");let t=(l)=>{let $=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){let f=r.external.registry.get(l[0])?.id;if(f)return{ref:r.external.uri(f)};let U=l[1].defId??l[1].schema.id??`schema${this.counter++}`;return l[1].defId=U,{defId:U,ref:`${r.external.uri("__shared")}#/${$}/${U}`}}if(l[1]===u)return{ref:"#"};let b=`${"#"}/${$}/`,v=l[1].schema.id??`__schema${this.counter++}`;return{defId:v,ref:b+v}},c=(l)=>{if(l[1].schema.$ref)return;let $=l[1],{ref:w,defId:b}=t(l);if($.def={...$.schema},b)$.defId=b;let v=$.schema;for(let f in v)delete v[f];v.$ref=w};for(let l of this.seen.entries()){let $=l[1];if(i===l[0]){c(l);continue}if(r.external){let b=r.external.registry.get(l[0])?.id;if(i!==l[0]&&b){c(l);continue}}if(this.metadataRegistry.get(l[0])?.id){c(l);continue}if($.cycle){if(r.cycles==="throw")throw new Error(`Cycle detected: #/${$.cycle?.join("/")}/<root>\n\nSet the \\`cycles\\` parameter to \\`"ref"\\` to resolve cyclical schemas with defs.`);else if(r.cycles==="ref")c(l);continue}if($.count>1){if(r.reused==="ref"){c(l);continue}}}let g=(l,$)=>{let w=this.seen.get(l),b=w.def??w.schema,v={...b};if(w.ref===null)return;let f=w.ref;if(w.ref=null,f){g(f,$);let U=this.seen.get(f).schema;if(U.$ref&&$.target==="draft-7")b.allOf=b.allOf??[],b.allOf.push(U);else Object.assign(b,U),Object.assign(b,v)}if(!w.isParent)this.override({zodSchema:l,jsonSchema:b})};for(let l of[...this.seen.entries()].reverse())g(l[0],{target:this.target});let h={};if(this.target==="draft-2020-12")h.$schema="https://json-schema.org/draft/2020-12/schema";else if(this.target==="draft-7")h.$schema="http://json-schema.org/draft-07/schema#";else console.warn(`Invalid target: ${this.target}`);Object.assign(h,u.def);let _=r.external?.defs??{};for(let l of this.seen.entries()){let $=l[1];if($.def&&$.defId)_[$.defId]=$.def}if(!r.external&&Object.keys(_).length>0)if(this.target==="draft-2020-12")h.$defs=_;else h.definitions=_;try{return JSON.parse(JSON.stringify(h))}catch(l){throw new Error("Error converting schema to JSON.")}}}function Vr(i,n){if(i instanceof Jr){let u=new Vc(n),t={};for(let h of i._idmap.entries()){let[_,l]=h;u.process(l)}let c={},g={registry:i,uri:n?.uri||((h)=>h),defs:t};for(let h of i._idmap.entries()){let[_,l]=h;c[_]=u.emit(l,{...n,external:g})}if(Object.keys(t).length>0){let h=u.target==="draft-2020-12"?"$defs":"definitions";c.__shared={[h]:t}}return{schemas:c}}let r=new Vc(n);return r.process(i),r.emit(i,n)}function vi(i,n){let r=n??{seen:new Set};if(r.seen.has(i))return!1;r.seen.add(i);let t=i._zod.def;switch(t.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return vi(t.element,r);case"object":{for(let c in t.shape)if(vi(t.shape[c],r))return!0;return!1}case"union":{for(let c of t.options)if(vi(c,r))return!0;return!1}case"intersection":return vi(t.left,r)||vi(t.right,r);case"tuple":{for(let c of t.items)if(vi(c,r))return!0;if(t.rest&&vi(t.rest,r))return!0;return!1}case"record":return vi(t.keyType,r)||vi(t.valueType,r);case"map":return vi(t.keyType,r)||vi(t.valueType,r);case"set":return vi(t.valueType,r);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return vi(t.innerType,r);case"lazy":return vi(t.getter(),r);case"default":return vi(t.innerType,r);case"prefault":return vi(t.innerType,r);case"custom":return!1;case"transform":return!0;case"pipe":return vi(t.in,r)||vi(t.out,r);case"success":return!1;case"catch":return!1;default:}throw new Error(`Unknown schema type: ${t.type}`)}var r4={};var yc={};Xn(yc,{time:()=>W$,duration:()=>D$,datetime:()=>N$,date:()=>z$,ZodISOTime:()=>Fc,ZodISODuration:()=>Pc,ZodISODateTime:()=>Mc,ZodISODate:()=>xc});var Mc=D("ZodISODateTime",(i,n)=>{u_.init(i,n),ni.init(i,n)});function N$(i){return Al(Mc,i)}var xc=D("ZodISODate",(i,n)=>{c_.init(i,n),ni.init(i,n)});function z$(i){return Bl(xc,i)}var Fc=D("ZodISOTime",(i,n)=>{o_.init(i,n),ni.init(i,n)});function W$(i){return Kl(Fc,i)}var Pc=D("ZodISODuration",(i,n)=>{g_.init(i,n),ni.init(i,n)});function D$(i){return Vl(Pc,i)}var c4=(i,n)=>{vr.init(i,n),i.name="ZodError",Object.defineProperties(i,{format:{value:(r)=>Or(i,r)},flatten:{value:(r)=>fr(i,r)},addIssue:{value:(r)=>i.issues.push(r)},addIssues:{value:(r)=>i.issues.push(...r)},isEmpty:{get(){return i.issues.length===0}}})},OE=D("ZodError",c4),It=D("ZodError",c4,{Parent:Error});var J$=nc(It),E$=rc(It),H$=cc(It),Mr=oc(It);var C=D("ZodType",(i,n)=>{return y.init(i,n),i.def=n,Object.defineProperty(i,"_def",{value:n}),i.check=(...r)=>{return i.clone({...n,checks:[...n.checks??[],...r.map((u)=>typeof u==="function"?{_zod:{check:u,def:{check:"custom"},onattach:[]}}:u)]})},i.clone=(r,u)=>Si(i,r,u),i.brand=()=>i,i.register=(r,u)=>{return r.add(i,u),i},i.parse=(r,u)=>J$(i,r,u,{callee:i.parse}),i.safeParse=(r,u)=>H$(i,r,u),i.parseAsync=async(r,u)=>E$(i,r,u,{callee:i.parseAsync}),i.safeParseAsync=async(r,u)=>Mr(i,r,u),i.spa=i.safeParseAsync,i.refine=(r,u)=>i.check(k4(r,u)),i.superRefine=(r)=>i.check(C4(r)),i.overwrite=(r)=>i.check(Un(r)),i.optional=()=>Cc(i),i.nullable=()=>Rc(i),i.nullish=()=>Cc(Rc(i)),i.nonoptional=(r)=>m4(i,r),i.array=()=>Z$(i),i.or=(r)=>sc([i,r]),i.and=(r)=>U4(i,r),i.transform=(r)=>Zc(i,d$(r)),i.default=(r)=>I4(i,r),i.prefault=(r)=>Q4(i,r),i.catch=(r)=>B4(i,r),i.pipe=(r)=>Zc(i,r),i.readonly=()=>M4(i),i.describe=(r)=>{let u=i.clone();return rn.add(u,{description:r}),u},Object.defineProperty(i,"description",{get(){return rn.get(i)?.description},configurable:!0}),i.meta=(...r)=>{if(r.length===0)return rn.get(i);let u=i.clone();return rn.add(u,r[0]),u},i.isOptional=()=>i.safeParse(void 0).success,i.isNullable=()=>i.safeParse(null).success,i}),X$=D("_ZodString",(i,n)=>{jr.init(i,n),C.init(i,n);let r=i._zod.bag;i.format=r.format??null,i.minLength=r.minimum??null,i.maxLength=r.maximum??null,i.regex=(...u)=>i.check(Gr(...u)),i.includes=(...u)=>i.check(Lr(...u)),i.startsWith=(...u)=>i.check(Ir(...u)),i.endsWith=(...u)=>i.check(Yr(...u)),i.min=(...u)=>i.check(Vn(...u)),i.max=(...u)=>i.check(Xt(...u)),i.length=(...u)=>i.check(Lt(...u)),i.nonempty=(...u)=>i.check(Vn(1,...u)),i.lowercase=(u)=>i.check(qr(u)),i.uppercase=(u)=>i.check(Xr(u)),i.trim=()=>i.check(Sr()),i.normalize=(...u)=>i.check(mr(...u)),i.toLowerCase=()=>i.check(Ar()),i.toUpperCase=()=>i.check(Br())}),ec=D("ZodString",(i,n)=>{jr.init(i,n),X$.init(i,n),i.email=(r)=>i.check(jc(L$,r)),i.url=(r)=>i.check(Dc(I$,r)),i.jwt=(r)=>i.check(Kc(k$,r)),i.emoji=(r)=>i.check(Jc(Y$,r)),i.guid=(r)=>i.check(Er(Tc,r)),i.uuid=(r)=>i.check(Uc(zn,r)),i.uuidv4=(r)=>i.check(Nc(zn,r)),i.uuidv6=(r)=>i.check(zc(zn,r)),i.uuidv7=(r)=>i.check(Wc(zn,r)),i.nanoid=(r)=>i.check(Ec(Q$,r)),i.guid=(r)=>i.check(Er(Tc,r)),i.cuid=(r)=>i.check(Hc(m$,r)),i.cuid2=(r)=>i.check(Gc(S$,r)),i.ulid=(r)=>i.check(qc(A$,r)),i.base64=(r)=>i.check(Sc(P$,r)),i.base64url=(r)=>i.check(Ac(y$,r)),i.xid=(r)=>i.check(Xc(B$,r)),i.ksuid=(r)=>i.check(Lc(K$,r)),i.ipv4=(r)=>i.check(Ic(V$,r)),i.ipv6=(r)=>i.check(Yc(M$,r)),i.cidrv4=(r)=>i.check(Qc(x$,r)),i.cidrv6=(r)=>i.check(mc(F$,r)),i.e164=(r)=>i.check(Bc(T$,r)),i.datetime=(r)=>i.check(N$(r)),i.date=(r)=>i.check(z$(r)),i.time=(r)=>i.check(W$(r)),i.duration=(r)=>i.check(D$(r))});function G$(i){return ml(ec,i)}var ni=D("ZodStringFormat",(i,n)=>{ii.init(i,n),X$.init(i,n)}),L$=D("ZodEmail",(i,n)=>{eh.init(i,n),ni.init(i,n)});function UE(i){return jc(L$,i)}var Tc=D("ZodGUID",(i,n)=>{Rh.init(i,n),ni.init(i,n)});function NE(i){return Er(Tc,i)}var zn=D("ZodUUID",(i,n)=>{Zh.init(i,n),ni.init(i,n)});function zE(i){return Uc(zn,i)}function WE(i){return Nc(zn,i)}function DE(i){return zc(zn,i)}function JE(i){return Wc(zn,i)}var I$=D("ZodURL",(i,n)=>{ph.init(i,n),ni.init(i,n)});function EE(i){return Dc(I$,i)}var Y$=D("ZodEmoji",(i,n)=>{dh.init(i,n),ni.init(i,n)});function HE(i){return Jc(Y$,i)}var Q$=D("ZodNanoID",(i,n)=>{ah.init(i,n),ni.init(i,n)});function GE(i){return Ec(Q$,i)}var m$=D("ZodCUID",(i,n)=>{sh.init(i,n),ni.init(i,n)});function qE(i){return Hc(m$,i)}var S$=D("ZodCUID2",(i,n)=>{i_.init(i,n),ni.init(i,n)});function XE(i){return Gc(S$,i)}var A$=D("ZodULID",(i,n)=>{n_.init(i,n),ni.init(i,n)});function LE(i){return qc(A$,i)}var B$=D("ZodXID",(i,n)=>{t_.init(i,n),ni.init(i,n)});function IE(i){return Xc(B$,i)}var K$=D("ZodKSUID",(i,n)=>{r_.init(i,n),ni.init(i,n)});function YE(i){return Lc(K$,i)}var V$=D("ZodIPv4",(i,n)=>{h_.init(i,n),ni.init(i,n)});function QE(i){return Ic(V$,i)}var M$=D("ZodIPv6",(i,n)=>{__.init(i,n),ni.init(i,n)});function mE(i){return Yc(M$,i)}var x$=D("ZodCIDRv4",(i,n)=>{l_.init(i,n),ni.init(i,n)});function SE(i){return Qc(x$,i)}var F$=D("ZodCIDRv6",(i,n)=>{$_.init(i,n),ni.init(i,n)});function AE(i){return mc(F$,i)}var P$=D("ZodBase64",(i,n)=>{b_.init(i,n),ni.init(i,n)});function BE(i){return Sc(P$,i)}var y$=D("ZodBase64URL",(i,n)=>{v_.init(i,n),ni.init(i,n)});function KE(i){return Ac(y$,i)}var T$=D("ZodE164",(i,n)=>{f_.init(i,n),ni.init(i,n)});function VE(i){return Bc(T$,i)}var k$=D("ZodJWT",(i,n)=>{O_.init(i,n),ni.init(i,n)});function ME(i){return Kc(k$,i)}var Fr=D("ZodNumber",(i,n)=>{bc.init(i,n),C.init(i,n),i.gt=(u,t)=>i.check(jn(u,t)),i.gte=(u,t)=>i.check(Yi(u,t)),i.min=(u,t)=>i.check(Yi(u,t)),i.lt=(u,t)=>i.check(On(u,t)),i.lte=(u,t)=>i.check(Fi(u,t)),i.max=(u,t)=>i.check(Fi(u,t)),i.int=(u)=>i.check(q$(u)),i.safe=(u)=>i.check(q$(u)),i.positive=(u)=>i.check(jn(0,u)),i.nonnegative=(u)=>i.check(Yi(0,u)),i.negative=(u)=>i.check(On(0,u)),i.nonpositive=(u)=>i.check(Fi(0,u)),i.multipleOf=(u,t)=>i.check(ct(u,t)),i.step=(u,t)=>i.check(ct(u,t)),i.finite=()=>i;let r=i._zod.bag;i.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,i.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,i.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??0.5),i.isFinite=!0,i.format=r.format??null});function o4(i){return Ml(Fr,i)}var Yt=D("ZodNumberFormat",(i,n)=>{j_.init(i,n),Fr.init(i,n)});function q$(i){return Fl(Yt,i)}function xE(i){return Pl(Yt,i)}function FE(i){return yl(Yt,i)}function PE(i){return Tl(Yt,i)}function yE(i){return kl(Yt,i)}var Pr=D("ZodBoolean",(i,n)=>{Ur.init(i,n),C.init(i,n)});function g4(i){return Cl(Pr,i)}var yr=D("ZodBigInt",(i,n)=>{vc.init(i,n),C.init(i,n),i.gte=(u,t)=>i.check(Yi(u,t)),i.min=(u,t)=>i.check(Yi(u,t)),i.gt=(u,t)=>i.check(jn(u,t)),i.gte=(u,t)=>i.check(Yi(u,t)),i.min=(u,t)=>i.check(Yi(u,t)),i.lt=(u,t)=>i.check(On(u,t)),i.lte=(u,t)=>i.check(Fi(u,t)),i.max=(u,t)=>i.check(Fi(u,t)),i.positive=(u)=>i.check(jn(BigInt(0),u)),i.negative=(u)=>i.check(On(BigInt(0),u)),i.nonpositive=(u)=>i.check(Fi(BigInt(0),u)),i.nonnegative=(u)=>i.check(Yi(BigInt(0),u)),i.multipleOf=(u,t)=>i.check(ct(u,t));let r=i._zod.bag;i.minValue=r.minimum??null,i.maxValue=r.maximum??null,i.format=r.format??null});function TE(i){return Zl(yr,i)}var C$=D("ZodBigIntFormat",(i,n)=>{U_.init(i,n),yr.init(i,n)});function kE(i){return pl(C$,i)}function CE(i){return dl(C$,i)}var h4=D("ZodSymbol",(i,n)=>{N_.init(i,n),C.init(i,n)});function RE(i){return al(h4,i)}var _4=D("ZodUndefined",(i,n)=>{z_.init(i,n),C.init(i,n)});function ZE(i){return sl(_4,i)}var l4=D("ZodNull",(i,n)=>{W_.init(i,n),C.init(i,n)});function $4(i){return i$(l4,i)}var w4=D("ZodAny",(i,n)=>{D_.init(i,n),C.init(i,n)});function eE(){return n$(w4)}var R$=D("ZodUnknown",(i,n)=>{Kn.init(i,n),C.init(i,n)});function kc(){return Gt(R$)}var b4=D("ZodNever",(i,n)=>{J_.init(i,n),C.init(i,n)});function pc(i){return t$(b4,i)}var v4=D("ZodVoid",(i,n)=>{E_.init(i,n),C.init(i,n)});function pE(i){return r$(v4,i)}var dc=D("ZodDate",(i,n)=>{H_.init(i,n),C.init(i,n),i.min=(u,t)=>i.check(Yi(u,t)),i.max=(u,t)=>i.check(Fi(u,t));let r=i._zod.bag;i.minDate=r.minimum?new Date(r.minimum):null,i.maxDate=r.maximum?new Date(r.maximum):null});function dE(i){return u$(dc,i)}var f4=D("ZodArray",(i,n)=>{Nr.init(i,n),C.init(i,n),i.element=n.element,i.min=(r,u)=>i.check(Vn(r,u)),i.nonempty=(r)=>i.check(Vn(1,r)),i.max=(r,u)=>i.check(Xt(r,u)),i.length=(r,u)=>i.check(Lt(r,u)),i.unwrap=()=>i.element});function Z$(i,n){return Kr(f4,i,n)}function aE(i){let n=i._zod.def.shape;return H4(Object.keys(n))}var ac=D("ZodObject",(i,n)=>{G_.init(i,n),C.init(i,n),S.defineLazy(i,"shape",()=>{return Object.fromEntries(Object.entries(i._zod.def.shape))}),i.keyof=()=>J4(Object.keys(i._zod.def.shape)),i.catchall=(r)=>i.clone({...i._zod.def,catchall:r}),i.passthrough=()=>i.clone({...i._zod.def,catchall:kc()}),i.loose=()=>i.clone({...i._zod.def,catchall:kc()}),i.strict=()=>i.clone({...i._zod.def,catchall:pc()}),i.strip=()=>i.clone({...i._zod.def,catchall:void 0}),i.extend=(r)=>{return S.extend(i,r)},i.merge=(r)=>S.merge(i,r),i.pick=(r)=>S.pick(i,r),i.omit=(r)=>S.omit(i,r),i.partial=(...r)=>S.partial(a$,i,r[0]),i.required=(...r)=>S.required(s$,i,r[0])});function sE(i,n){let r={type:"object",get shape(){return S.assignProp(this,"shape",{...i}),this.shape},...S.normalizeParams(n)};return new ac(r)}function iH(i,n){return new ac({type:"object",get shape(){return S.assignProp(this,"shape",{...i}),this.shape},catchall:pc(),...S.normalizeParams(n)})}function nH(i,n){return new ac({type:"object",get shape(){return S.assignProp(this,"shape",{...i}),this.shape},catchall:kc(),...S.normalizeParams(n)})}var e$=D("ZodUnion",(i,n)=>{fc.init(i,n),C.init(i,n),i.options=n.options});function sc(i,n){return new e$({type:"union",options:i,...S.normalizeParams(n)})}var O4=D("ZodDiscriminatedUnion",(i,n)=>{e$.init(i,n),q_.init(i,n)});function tH(i,n,r){return new O4({type:"union",options:n,discriminator:i,...S.normalizeParams(r)})}var j4=D("ZodIntersection",(i,n)=>{X_.init(i,n),C.init(i,n)});function U4(i,n){return new j4({type:"intersection",left:i,right:n})}var N4=D("ZodTuple",(i,n)=>{ut.init(i,n),C.init(i,n),i.rest=(r)=>i.clone({...i._zod.def,rest:r})});function rH(i,n,r){let u=n instanceof y,t=u?r:n;return new N4({type:"tuple",items:i,rest:u?n:null,...S.normalizeParams(t)})}var p$=D("ZodRecord",(i,n)=>{L_.init(i,n),C.init(i,n),i.keyType=n.keyType,i.valueType=n.valueType});function z4(i,n,r){return new p$({type:"record",keyType:i,valueType:n,...S.normalizeParams(r)})}function uH(i,n,r){return new p$({type:"record",keyType:sc([i,pc()]),valueType:n,...S.normalizeParams(r)})}var W4=D("ZodMap",(i,n)=>{I_.init(i,n),C.init(i,n),i.keyType=n.keyType,i.valueType=n.valueType});function cH(i,n,r){return new W4({type:"map",keyType:i,valueType:n,...S.normalizeParams(r)})}var D4=D("ZodSet",(i,n)=>{Y_.init(i,n),C.init(i,n),i.min=(...r)=>i.check(ot(...r)),i.nonempty=(r)=>i.check(ot(1,r)),i.max=(...r)=>i.check(qt(...r)),i.size=(...r)=>i.check(Hr(...r))});function oH(i,n){return new D4({type:"set",valueType:i,...S.normalizeParams(n)})}var xr=D("ZodEnum",(i,n)=>{Q_.init(i,n),C.init(i,n),i.enum=n.entries,i.options=Object.values(n.entries);let r=new Set(Object.keys(n.entries));i.extract=(u,t)=>{let c={};for(let g of u)if(r.has(g))c[g]=n.entries[g];else throw new Error(`Key ${g} not found in enum`);return new xr({...n,checks:[],...S.normalizeParams(t),entries:c})},i.exclude=(u,t)=>{let c={...n.entries};for(let g of u)if(r.has(g))delete c[g];else throw new Error(`Key ${g} not found in enum`);return new xr({...n,checks:[],...S.normalizeParams(t),entries:c})}});function J4(i,n){let r=Array.isArray(i)?Object.fromEntries(i.map((u)=>[u,u])):i;return new xr({type:"enum",entries:r,...S.normalizeParams(n)})}function gH(i,n){return new xr({type:"enum",entries:i,...S.normalizeParams(n)})}var E4=D("ZodLiteral",(i,n)=>{m_.init(i,n),C.init(i,n),i.values=new Set(n.values),Object.defineProperty(i,"value",{get(){if(n.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return n.values[0]}})});function H4(i,n){return new E4({type:"literal",values:Array.isArray(i)?i:[i],...S.normalizeParams(n)})}var G4=D("ZodFile",(i,n)=>{S_.init(i,n),C.init(i,n),i.min=(r,u)=>i.check(ot(r,u)),i.max=(r,u)=>i.check(qt(r,u)),i.mime=(r,u)=>i.check(Qr(Array.isArray(r)?r:[r],u))});function hH(i){return b$(G4,i)}var q4=D("ZodTransform",(i,n)=>{A_.init(i,n),C.init(i,n),i._zod.parse=(r,u)=>{r.addIssue=(c)=>{if(typeof c==="string")r.issues.push(S.issue(c,r.value,n));else{let g=c;if(g.fatal)g.continue=!1;g.code??(g.code="custom"),g.input??(g.input=r.value),g.inst??(g.inst=i),g.continue??(g.continue=!0),r.issues.push(S.issue(g))}};let t=n.transform(r.value,r);if(t instanceof Promise)return t.then((c)=>{return r.value=c,r});return r.value=t,r}});function d$(i){return new q4({type:"transform",transform:i})}var a$=D("ZodOptional",(i,n)=>{B_.init(i,n),C.init(i,n),i.unwrap=()=>i._zod.def.innerType});function Cc(i){return new a$({type:"optional",innerType:i})}var X4=D("ZodNullable",(i,n)=>{K_.init(i,n),C.init(i,n),i.unwrap=()=>i._zod.def.innerType});function Rc(i){return new X4({type:"nullable",innerType:i})}function _H(i){return Cc(Rc(i))}var L4=D("ZodDefault",(i,n)=>{V_.init(i,n),C.init(i,n),i.unwrap=()=>i._zod.def.innerType,i.removeDefault=i.unwrap});function I4(i,n){return new L4({type:"default",innerType:i,get defaultValue(){return typeof n==="function"?n():n}})}var Y4=D("ZodPrefault",(i,n)=>{M_.init(i,n),C.init(i,n),i.unwrap=()=>i._zod.def.innerType});function Q4(i,n){return new Y4({type:"prefault",innerType:i,get defaultValue(){return typeof n==="function"?n():n}})}var s$=D("ZodNonOptional",(i,n)=>{x_.init(i,n),C.init(i,n),i.unwrap=()=>i._zod.def.innerType});function m4(i,n){return new s$({type:"nonoptional",innerType:i,...S.normalizeParams(n)})}var S4=D("ZodSuccess",(i,n)=>{F_.init(i,n),C.init(i,n),i.unwrap=()=>i._zod.def.innerType});function lH(i){return new S4({type:"success",innerType:i})}var A4=D("ZodCatch",(i,n)=>{P_.init(i,n),C.init(i,n),i.unwrap=()=>i._zod.def.innerType,i.removeCatch=i.unwrap});function B4(i,n){return new A4({type:"catch",innerType:i,catchValue:typeof n==="function"?n:()=>n})}var K4=D("ZodNaN",(i,n)=>{y_.init(i,n),C.init(i,n)});function $H(i){return o$(K4,i)}var i0=D("ZodPipe",(i,n)=>{zr.init(i,n),C.init(i,n),i.in=n.in,i.out=n.out});function Zc(i,n){return new i0({type:"pipe",in:i,out:n})}var V4=D("ZodReadonly",(i,n)=>{T_.init(i,n),C.init(i,n)});function M4(i){return new V4({type:"readonly",innerType:i})}var x4=D("ZodTemplateLiteral",(i,n)=>{k_.init(i,n),C.init(i,n)});function wH(i,n){return new x4({type:"template_literal",parts:i,...S.normalizeParams(n)})}var F4=D("ZodLazy",(i,n)=>{R_.init(i,n),C.init(i,n),i.unwrap=()=>i._zod.def.getter()});function P4(i){return new F4({type:"lazy",getter:i})}var y4=D("ZodPromise",(i,n)=>{C_.init(i,n),C.init(i,n),i.unwrap=()=>i._zod.def.innerType});function bH(i){return new y4({type:"promise",innerType:i})}var io=D("ZodCustom",(i,n)=>{Z_.init(i,n),C.init(i,n)});function T4(i,n){let r=new ui({check:"custom",...S.normalizeParams(n)});return r._zod.check=i,r}function vH(i,n){return v$(io,i??(()=>!0),n)}function k4(i,n={}){return f$(io,i,n)}function C4(i,n){let r=T4((u)=>{return u.addIssue=(t)=>{if(typeof t==="string")u.issues.push(S.issue(t,u.value,r._zod.def));else{let c=t;if(c.fatal)c.continue=!1;c.code??(c.code="custom"),c.input??(c.input=u.value),c.inst??(c.inst=r),c.continue??(c.continue=!r._zod.def.abort),u.issues.push(S.issue(c))}},i(u.value,u)},n);return r}function fH(i,n={error:`Input not instance of ${i.name}`}){let r=new io({type:"custom",check:"custom",fn:(u)=>u instanceof i,abort:!0,...S.normalizeParams(n)});return r._zod.bag.Class=i,r}var OH=(...i)=>O$({Pipe:i0,Boolean:Pr,Unknown:R$},...i);function jH(i){let n=P4(()=>{return sc([G$(i),o4(),g4(),$4(),Z$(n),z4(G$(),n)])});return n}function UH(i,n){return Zc(d$(i),n)}var NH={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"},zH=Object.freeze({status:"aborted"}),WH=zH;function DH(i){$i({customError:i})}function JH(){return $i().customError}var n0={};Xn(n0,{string:()=>EH,number:()=>HH,date:()=>XH,boolean:()=>GH,bigint:()=>qH});function EH(i){return Sl(ec,i)}function HH(i){return xl(Fr,i)}function GH(i){return Rl(Pr,i)}function qH(i){return el(yr,i)}function XH(i){return c$(dc,i)}$i(Wr());var R4=o;var gt=R4;var Z;(function(i){i.assertEqual=(t)=>{};function n(t){}i.assertIs=n;function r(t){throw new Error}i.assertNever=r,i.arrayToEnum=(t)=>{let c={};for(let g of t)c[g]=g;return c},i.getValidEnumValues=(t)=>{let c=i.objectKeys(t).filter((h)=>typeof t[t[h]]!=="number"),g={};for(let h of c)g[h]=t[h];return i.objectValues(g)},i.objectValues=(t)=>{return i.objectKeys(t).map(function(c){return t[c]})},i.objectKeys=typeof Object.keys==="function"?(t)=>Object.keys(t):(t)=>{let c=[];for(let g in t)if(Object.prototype.hasOwnProperty.call(t,g))c.push(g);return c},i.find=(t,c)=>{for(let g of t)if(c(g))return g;return},i.isInteger=typeof Number.isInteger==="function"?(t)=>Number.isInteger(t):(t)=>typeof t==="number"&&Number.isFinite(t)&&Math.floor(t)===t;function u(t,c=" | "){return t.map((g)=>typeof g==="string"?`\'${g}\'`:g).join(c)}i.joinValues=u,i.jsonStringifyReplacer=(t,c)=>{if(typeof c==="bigint")return c.toString();return c}})(Z||(Z={}));var Z4;(function(i){i.mergeShapes=(n,r)=>{return{...n,...r}}})(Z4||(Z4={}));var m=Z.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Wn=(i)=>{switch(typeof i){case"undefined":return m.undefined;case"string":return m.string;case"number":return Number.isNaN(i)?m.nan:m.number;case"boolean":return m.boolean;case"function":return m.function;case"bigint":return m.bigint;case"symbol":return m.symbol;case"object":if(Array.isArray(i))return m.array;if(i===null)return m.null;if(i.then&&typeof i.then==="function"&&i.catch&&typeof i.catch==="function")return m.promise;if(typeof Map!=="undefined"&&i instanceof Map)return m.map;if(typeof Set!=="undefined"&&i instanceof Set)return m.set;if(typeof Date!=="undefined"&&i instanceof Date)return m.date;return m.object;default:return m.unknown}};var q=Z.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Bi extends Error{get errors(){return this.issues}constructor(i){super();this.issues=[],this.addIssue=(r)=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let n=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,n);else this.__proto__=n;this.name="ZodError",this.issues=i}format(i){let n=i||function(t){return t.message},r={_errors:[]},u=(t)=>{for(let c of t.issues)if(c.code==="invalid_union")c.unionErrors.map(u);else if(c.code==="invalid_return_type")u(c.returnTypeError);else if(c.code==="invalid_arguments")u(c.argumentsError);else if(c.path.length===0)r._errors.push(n(c));else{let g=r,h=0;while(h<c.path.length){let _=c.path[h];if(h!==c.path.length-1)g[_]=g[_]||{_errors:[]};else g[_]=g[_]||{_errors:[]},g[_]._errors.push(n(c));g=g[_],h++}}};return u(this),r}static assert(i){if(!(i instanceof Bi))throw new Error(`Not a ZodError: ${i}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Z.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(i=(n)=>n.message){let n={},r=[];for(let u of this.issues)if(u.path.length>0)n[u.path[0]]=n[u.path[0]]||[],n[u.path[0]].push(i(u));else r.push(i(u));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Bi.create=(i)=>{return new Bi(i)};var IH=(i,n)=>{let r;switch(i.code){case q.invalid_type:if(i.received===m.undefined)r="Required";else r=`Expected ${i.expected}, received ${i.received}`;break;case q.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(i.expected,Z.jsonStringifyReplacer)}`;break;case q.unrecognized_keys:r=`Unrecognized key(s) in object: ${Z.joinValues(i.keys,", ")}`;break;case q.invalid_union:r="Invalid input";break;case q.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Z.joinValues(i.options)}`;break;case q.invalid_enum_value:r=`Invalid enum value. Expected ${Z.joinValues(i.options)}, received \'${i.received}\'`;break;case q.invalid_arguments:r="Invalid function arguments";break;case q.invalid_return_type:r="Invalid function return type";break;case q.invalid_date:r="Invalid date";break;case q.invalid_string:if(typeof i.validation==="object")if("includes"in i.validation){if(r=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position==="number")r=`${r} at one or more positions greater than or equal to ${i.validation.position}`}else if("startsWith"in i.validation)r=`Invalid input: must start with "${i.validation.startsWith}"`;else if("endsWith"in i.validation)r=`Invalid input: must end with "${i.validation.endsWith}"`;else Z.assertNever(i.validation);else if(i.validation!=="regex")r=`Invalid ${i.validation}`;else r="Invalid";break;case q.too_small:if(i.type==="array")r=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`;else if(i.type==="string")r=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`;else if(i.type==="number")r=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`;else if(i.type==="date")r=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`;else r="Invalid input";break;case q.too_big:if(i.type==="array")r=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`;else if(i.type==="string")r=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`;else if(i.type==="number")r=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`;else if(i.type==="bigint")r=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`;else if(i.type==="date")r=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`;else r="Invalid input";break;case q.custom:r="Invalid input";break;case q.invalid_intersection_types:r="Intersection results could not be merged";break;case q.not_multiple_of:r=`Number must be a multiple of ${i.multipleOf}`;break;case q.not_finite:r="Number must be finite";break;default:r=n.defaultError,Z.assertNever(i)}return{message:r}},Mn=IH;var YH=Mn;function Tr(){return YH}var no=(i)=>{let{data:n,path:r,errorMaps:u,issueData:t}=i,c=[...r,...t.path||[]],g={...t,path:c};if(t.message!==void 0)return{...t,path:c,message:t.message};let h="",_=u.filter((l)=>!!l).slice().reverse();for(let l of _)h=l(g,{data:n,defaultError:h}).message;return{...t,path:c,message:h}};function B(i,n){let r=Tr(),u=no({issueData:n,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,r,r===Mn?void 0:Mn].filter((t)=>!!t)});i.common.issues.push(u)}class Ei{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(i,n){let r=[];for(let u of n){if(u.status==="aborted")return F;if(u.status==="dirty")i.dirty();r.push(u.value)}return{status:i.value,value:r}}static async mergeObjectAsync(i,n){let r=[];for(let u of n){let t=await u.key,c=await u.value;r.push({key:t,value:c})}return Ei.mergeObjectSync(i,r)}static mergeObjectSync(i,n){let r={};for(let u of n){let{key:t,value:c}=u;if(t.status==="aborted")return F;if(c.status==="aborted")return F;if(t.status==="dirty")i.dirty();if(c.status==="dirty")i.dirty();if(t.value!=="__proto__"&&(typeof c.value!=="undefined"||u.alwaysSet))r[t.value]=c.value}return{status:i.value,value:r}}}var F=Object.freeze({status:"aborted"}),Qt=(i)=>({status:"dirty",value:i}),Xi=(i)=>({status:"valid",value:i}),t0=(i)=>i.status==="aborted",r0=(i)=>i.status==="dirty",ht=(i)=>i.status==="valid",kr=(i)=>typeof Promise!=="undefined"&&i instanceof Promise;var K;(function(i){i.errToObj=(n)=>typeof n==="string"?{message:n}:n||{},i.toString=(n)=>typeof n==="string"?n:n?.message})(K||(K={}));class Ri{constructor(i,n,r,u){this._cachedPath=[],this.parent=i,this.data=n,this._path=r,this._key=u}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var e4=(i,n)=>{if(ht(n))return{success:!0,data:n.value};else{if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Bi(i.common.issues);return this._error=r,this._error}}}};function k(i){if(!i)return{};let{errorMap:n,invalid_type_error:r,required_error:u,description:t}=i;if(n&&(r||u))throw new Error(`Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(n)return{errorMap:n,description:t};return{errorMap:(g,h)=>{let{message:_}=i;if(g.code==="invalid_enum_value")return{message:_??h.defaultError};if(typeof h.data==="undefined")return{message:_??u??h.defaultError};if(g.code!=="invalid_type")return{message:h.defaultError};return{message:_??r??h.defaultError}},description:t}}class R{get description(){return this._def.description}_getType(i){return Wn(i.data)}_getOrReturnCtx(i,n){return n||{common:i.parent.common,data:i.data,parsedType:Wn(i.data),schemaErrorMap:this._def.errorMap,path:i.path,parent:i.parent}}_processInputParams(i){return{status:new Ei,ctx:{common:i.parent.common,data:i.data,parsedType:Wn(i.data),schemaErrorMap:this._def.errorMap,path:i.path,parent:i.parent}}}_parseSync(i){let n=this._parse(i);if(kr(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(i){let n=this._parse(i);return Promise.resolve(n)}parse(i,n){let r=this.safeParse(i,n);if(r.success)return r.data;throw r.error}safeParse(i,n){let r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:i,parsedType:Wn(i)},u=this._parseSync({data:i,path:r.path,parent:r});return e4(r,u)}"~validate"(i){let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:i,parsedType:Wn(i)};if(!this["~standard"].async)try{let r=this._parseSync({data:i,path:[],parent:n});return ht(r)?{value:r.value}:{issues:n.common.issues}}catch(r){if(r?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;n.common={issues:[],async:!0}}return this._parseAsync({data:i,path:[],parent:n}).then((r)=>ht(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(i,n){let r=await this.safeParseAsync(i,n);if(r.success)return r.data;throw r.error}async safeParseAsync(i,n){let r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:i,parsedType:Wn(i)},u=this._parse({data:i,path:r.path,parent:r}),t=await(kr(u)?u:Promise.resolve(u));return e4(r,t)}refine(i,n){let r=(u)=>{if(typeof n==="string"||typeof n==="undefined")return{message:n};else if(typeof n==="function")return n(u);else return n};return this._refinement((u,t)=>{let c=i(u),g=()=>t.addIssue({code:q.custom,...r(u)});if(typeof Promise!=="undefined"&&c instanceof Promise)return c.then((h)=>{if(!h)return g(),!1;else return!0});if(!c)return g(),!1;else return!0})}refinement(i,n){return this._refinement((r,u)=>{if(!i(r))return u.addIssue(typeof n==="function"?n(r,u):n),!1;else return!0})}_refinement(i){return new on({schema:this,typeName:L.ZodEffects,effect:{type:"refinement",refinement:i}})}superRefine(i){return this._refinement(i)}constructor(i){this.spa=this.safeParseAsync,this._def=i,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(n)=>this["~validate"](n)}}optional(){return cn.create(this,this._def)}nullable(){return xn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return un.create(this)}promise(){return Kt.create(this,this._def)}or(i){return pr.create([this,i],this._def)}and(i){return dr.create(this,i,this._def)}transform(i){return new on({...k(this._def),schema:this,typeName:L.ZodEffects,effect:{type:"transform",transform:i}})}default(i){let n=typeof i==="function"?i:()=>i;return new nu({...k(this._def),innerType:this,defaultValue:n,typeName:L.ZodDefault})}brand(){return new g0({typeName:L.ZodBranded,type:this,...k(this._def)})}catch(i){let n=typeof i==="function"?i:()=>i;return new tu({...k(this._def),innerType:this,catchValue:n,typeName:L.ZodCatch})}describe(i){return new this.constructor({...this._def,description:i})}pipe(i){return _o.create(this,i)}readonly(){return ru.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var QH=/^c[^\\s-]{8,}$/i,mH=/^[0-9a-z]+$/,SH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,AH=/^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i,BH=/^[a-z0-9_-]{21}$/i,KH=/^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/,VH=/^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/,MH=/^(?!\\.)(?!.*\\.\\.)([A-Z0-9_\'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i,xH="^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$",u0,FH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,PH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/,yH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,TH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,kH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,CH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,p4="((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))",RH=new RegExp(`^${p4}$`);function d4(i){let n="[0-5]\\\\d";if(i.precision)n=`${n}\\\\.\\\\d{${i.precision}}`;else if(i.precision==null)n=`${n}(\\\\.\\\\d+)?`;let r=i.precision?"+":"?";return`([01]\\\\d|2[0-3]):[0-5]\\\\d(:${n})${r}`}function ZH(i){return new RegExp(`^${d4(i)}$`)}function eH(i){let n=`${p4}T${d4(i)}`,r=[];if(r.push(i.local?"Z?":"Z"),i.offset)r.push("([+-]\\\\d{2}:?\\\\d{2})");return n=`${n}(${r.join("|")})`,new RegExp(`^${n}$`)}function pH(i,n){if((n==="v4"||!n)&&FH.test(i))return!0;if((n==="v6"||!n)&&yH.test(i))return!0;return!1}function dH(i,n){if(!KH.test(i))return!1;try{let[r]=i.split("."),u=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),t=JSON.parse(atob(u));if(typeof t!=="object"||t===null)return!1;if("typ"in t&&t?.typ!=="JWT")return!1;if(!t.alg)return!1;if(n&&t.alg!==n)return!1;return!0}catch{return!1}}function aH(i,n){if((n==="v4"||!n)&&PH.test(i))return!0;if((n==="v6"||!n)&&TH.test(i))return!0;return!1}class Jn extends R{_parse(i){if(this._def.coerce)i.data=String(i.data);if(this._getType(i)!==m.string){let t=this._getOrReturnCtx(i);return B(t,{code:q.invalid_type,expected:m.string,received:t.parsedType}),F}let r=new Ei,u=void 0;for(let t of this._def.checks)if(t.kind==="min"){if(i.data.length<t.value)u=this._getOrReturnCtx(i,u),B(u,{code:q.too_small,minimum:t.value,type:"string",inclusive:!0,exact:!1,message:t.message}),r.dirty()}else if(t.kind==="max"){if(i.data.length>t.value)u=this._getOrReturnCtx(i,u),B(u,{code:q.too_big,maximum:t.value,type:"string",inclusive:!0,exact:!1,message:t.message}),r.dirty()}else if(t.kind==="length"){let c=i.data.length>t.value,g=i.data.length<t.value;if(c||g){if(u=this._getOrReturnCtx(i,u),c)B(u,{code:q.too_big,maximum:t.value,type:"string",inclusive:!0,exact:!0,message:t.message});else if(g)B(u,{code:q.too_small,minimum:t.value,type:"string",inclusive:!0,exact:!0,message:t.message});r.dirty()}}else if(t.kind==="email"){if(!MH.test(i.data))u=this._getOrReturnCtx(i,u),B(u,{validation:"email",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="emoji"){if(!u0)u0=new RegExp(xH,"u");if(!u0.test(i.data))u=this._getOrReturnCtx(i,u),B(u,{validation:"emoji",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="uuid"){if(!AH.test(i.data))u=this._getOrReturnCtx(i,u),B(u,{validation:"uuid",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="nanoid"){if(!BH.test(i.data))u=this._getOrReturnCtx(i,u),B(u,{validation:"nanoid",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="cuid"){if(!QH.test(i.data))u=this._getOrReturnCtx(i,u),B(u,{validation:"cuid",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="cuid2"){if(!mH.test(i.data))u=this._getOrReturnCtx(i,u),B(u,{validation:"cuid2",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="ulid"){if(!SH.test(i.data))u=this._getOrReturnCtx(i,u),B(u,{validation:"ulid",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="url")try{new URL(i.data)}catch{u=this._getOrReturnCtx(i,u),B(u,{validation:"url",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="regex"){if(t.regex.lastIndex=0,!t.regex.test(i.data))u=this._getOrReturnCtx(i,u),B(u,{validation:"regex",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="trim")i.data=i.data.trim();else if(t.kind==="includes"){if(!i.data.includes(t.value,t.position))u=this._getOrReturnCtx(i,u),B(u,{code:q.invalid_string,validation:{includes:t.value,position:t.position},message:t.message}),r.dirty()}else if(t.kind==="toLowerCase")i.data=i.data.toLowerCase();else if(t.kind==="toUpperCase")i.data=i.data.toUpperCase();else if(t.kind==="startsWith"){if(!i.data.startsWith(t.value))u=this._getOrReturnCtx(i,u),B(u,{code:q.invalid_string,validation:{startsWith:t.value},message:t.message}),r.dirty()}else if(t.kind==="endsWith"){if(!i.data.endsWith(t.value))u=this._getOrReturnCtx(i,u),B(u,{code:q.invalid_string,validation:{endsWith:t.value},message:t.message}),r.dirty()}else if(t.kind==="datetime"){if(!eH(t).test(i.data))u=this._getOrReturnCtx(i,u),B(u,{code:q.invalid_string,validation:"datetime",message:t.message}),r.dirty()}else if(t.kind==="date"){if(!RH.test(i.data))u=this._getOrReturnCtx(i,u),B(u,{code:q.invalid_string,validation:"date",message:t.message}),r.dirty()}else if(t.kind==="time"){if(!ZH(t).test(i.data))u=this._getOrReturnCtx(i,u),B(u,{code:q.invalid_string,validation:"time",message:t.message}),r.dirty()}else if(t.kind==="duration"){if(!VH.test(i.data))u=this._getOrReturnCtx(i,u),B(u,{validation:"duration",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="ip"){if(!pH(i.data,t.version))u=this._getOrReturnCtx(i,u),B(u,{validation:"ip",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="jwt"){if(!dH(i.data,t.alg))u=this._getOrReturnCtx(i,u),B(u,{validation:"jwt",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="cidr"){if(!aH(i.data,t.version))u=this._getOrReturnCtx(i,u),B(u,{validation:"cidr",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="base64"){if(!kH.test(i.data))u=this._getOrReturnCtx(i,u),B(u,{validation:"base64",code:q.invalid_string,message:t.message}),r.dirty()}else if(t.kind==="base64url"){if(!CH.test(i.data))u=this._getOrReturnCtx(i,u),B(u,{validation:"base64url",code:q.invalid_string,message:t.message}),r.dirty()}else Z.assertNever(t);return{status:r.value,value:i.data}}_regex(i,n,r){return this.refinement((u)=>i.test(u),{validation:n,code:q.invalid_string,...K.errToObj(r)})}_addCheck(i){return new Jn({...this._def,checks:[...this._def.checks,i]})}email(i){return this._addCheck({kind:"email",...K.errToObj(i)})}url(i){return this._addCheck({kind:"url",...K.errToObj(i)})}emoji(i){return this._addCheck({kind:"emoji",...K.errToObj(i)})}uuid(i){return this._addCheck({kind:"uuid",...K.errToObj(i)})}nanoid(i){return this._addCheck({kind:"nanoid",...K.errToObj(i)})}cuid(i){return this._addCheck({kind:"cuid",...K.errToObj(i)})}cuid2(i){return this._addCheck({kind:"cuid2",...K.errToObj(i)})}ulid(i){return this._addCheck({kind:"ulid",...K.errToObj(i)})}base64(i){return this._addCheck({kind:"base64",...K.errToObj(i)})}base64url(i){return this._addCheck({kind:"base64url",...K.errToObj(i)})}jwt(i){return this._addCheck({kind:"jwt",...K.errToObj(i)})}ip(i){return this._addCheck({kind:"ip",...K.errToObj(i)})}cidr(i){return this._addCheck({kind:"cidr",...K.errToObj(i)})}datetime(i){if(typeof i==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:i});return this._addCheck({kind:"datetime",precision:typeof i?.precision==="undefined"?null:i?.precision,offset:i?.offset??!1,local:i?.local??!1,...K.errToObj(i?.message)})}date(i){return this._addCheck({kind:"date",message:i})}time(i){if(typeof i==="string")return this._addCheck({kind:"time",precision:null,message:i});return this._addCheck({kind:"time",precision:typeof i?.precision==="undefined"?null:i?.precision,...K.errToObj(i?.message)})}duration(i){return this._addCheck({kind:"duration",...K.errToObj(i)})}regex(i,n){return this._addCheck({kind:"regex",regex:i,...K.errToObj(n)})}includes(i,n){return this._addCheck({kind:"includes",value:i,position:n?.position,...K.errToObj(n?.message)})}startsWith(i,n){return this._addCheck({kind:"startsWith",value:i,...K.errToObj(n)})}endsWith(i,n){return this._addCheck({kind:"endsWith",value:i,...K.errToObj(n)})}min(i,n){return this._addCheck({kind:"min",value:i,...K.errToObj(n)})}max(i,n){return this._addCheck({kind:"max",value:i,...K.errToObj(n)})}length(i,n){return this._addCheck({kind:"length",value:i,...K.errToObj(n)})}nonempty(i){return this.min(1,K.errToObj(i))}trim(){return new Jn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Jn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Jn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((i)=>i.kind==="datetime")}get isDate(){return!!this._def.checks.find((i)=>i.kind==="date")}get isTime(){return!!this._def.checks.find((i)=>i.kind==="time")}get isDuration(){return!!this._def.checks.find((i)=>i.kind==="duration")}get isEmail(){return!!this._def.checks.find((i)=>i.kind==="email")}get isURL(){return!!this._def.checks.find((i)=>i.kind==="url")}get isEmoji(){return!!this._def.checks.find((i)=>i.kind==="emoji")}get isUUID(){return!!this._def.checks.find((i)=>i.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((i)=>i.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((i)=>i.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((i)=>i.kind==="cuid2")}get isULID(){return!!this._def.checks.find((i)=>i.kind==="ulid")}get isIP(){return!!this._def.checks.find((i)=>i.kind==="ip")}get isCIDR(){return!!this._def.checks.find((i)=>i.kind==="cidr")}get isBase64(){return!!this._def.checks.find((i)=>i.kind==="base64")}get isBase64url(){return!!this._def.checks.find((i)=>i.kind==="base64url")}get minLength(){let i=null;for(let n of this._def.checks)if(n.kind==="min"){if(i===null||n.value>i)i=n.value}return i}get maxLength(){let i=null;for(let n of this._def.checks)if(n.kind==="max"){if(i===null||n.value<i)i=n.value}return i}}Jn.create=(i)=>{return new Jn({checks:[],typeName:L.ZodString,coerce:i?.coerce??!1,...k(i)})};function sH(i,n){let r=(i.toString().split(".")[1]||"").length,u=(n.toString().split(".")[1]||"").length,t=r>u?r:u,c=Number.parseInt(i.toFixed(t).replace(".","")),g=Number.parseInt(n.toFixed(t).replace(".",""));return c%g/10**t}class St extends R{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(i){if(this._def.coerce)i.data=Number(i.data);if(this._getType(i)!==m.number){let t=this._getOrReturnCtx(i);return B(t,{code:q.invalid_type,expected:m.number,received:t.parsedType}),F}let r=void 0,u=new Ei;for(let t of this._def.checks)if(t.kind==="int"){if(!Z.isInteger(i.data))r=this._getOrReturnCtx(i,r),B(r,{code:q.invalid_type,expected:"integer",received:"float",message:t.message}),u.dirty()}else if(t.kind==="min"){if(t.inclusive?i.data<t.value:i.data<=t.value)r=this._getOrReturnCtx(i,r),B(r,{code:q.too_small,minimum:t.value,type:"number",inclusive:t.inclusive,exact:!1,message:t.message}),u.dirty()}else if(t.kind==="max"){if(t.inclusive?i.data>t.value:i.data>=t.value)r=this._getOrReturnCtx(i,r),B(r,{code:q.too_big,maximum:t.value,type:"number",inclusive:t.inclusive,exact:!1,message:t.message}),u.dirty()}else if(t.kind==="multipleOf"){if(sH(i.data,t.value)!==0)r=this._getOrReturnCtx(i,r),B(r,{code:q.not_multiple_of,multipleOf:t.value,message:t.message}),u.dirty()}else if(t.kind==="finite"){if(!Number.isFinite(i.data))r=this._getOrReturnCtx(i,r),B(r,{code:q.not_finite,message:t.message}),u.dirty()}else Z.assertNever(t);return{status:u.value,value:i.data}}gte(i,n){return this.setLimit("min",i,!0,K.toString(n))}gt(i,n){return this.setLimit("min",i,!1,K.toString(n))}lte(i,n){return this.setLimit("max",i,!0,K.toString(n))}lt(i,n){return this.setLimit("max",i,!1,K.toString(n))}setLimit(i,n,r,u){return new St({...this._def,checks:[...this._def.checks,{kind:i,value:n,inclusive:r,message:K.toString(u)}]})}_addCheck(i){return new St({...this._def,checks:[...this._def.checks,i]})}int(i){return this._addCheck({kind:"int",message:K.toString(i)})}positive(i){return this._addCheck({kind:"min",value:0,inclusive:!1,message:K.toString(i)})}negative(i){return this._addCheck({kind:"max",value:0,inclusive:!1,message:K.toString(i)})}nonpositive(i){return this._addCheck({kind:"max",value:0,inclusive:!0,message:K.toString(i)})}nonnegative(i){return this._addCheck({kind:"min",value:0,inclusive:!0,message:K.toString(i)})}multipleOf(i,n){return this._addCheck({kind:"multipleOf",value:i,message:K.toString(n)})}finite(i){return this._addCheck({kind:"finite",message:K.toString(i)})}safe(i){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:K.toString(i)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:K.toString(i)})}get minValue(){let i=null;for(let n of this._def.checks)if(n.kind==="min"){if(i===null||n.value>i)i=n.value}return i}get maxValue(){let i=null;for(let n of this._def.checks)if(n.kind==="max"){if(i===null||n.value<i)i=n.value}return i}get isInt(){return!!this._def.checks.find((i)=>i.kind==="int"||i.kind==="multipleOf"&&Z.isInteger(i.value))}get isFinite(){let i=null,n=null;for(let r of this._def.checks)if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;else if(r.kind==="min"){if(n===null||r.value>n)n=r.value}else if(r.kind==="max"){if(i===null||r.value<i)i=r.value}return Number.isFinite(n)&&Number.isFinite(i)}}St.create=(i)=>{return new St({checks:[],typeName:L.ZodNumber,coerce:i?.coerce||!1,...k(i)})};class At extends R{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(i){if(this._def.coerce)try{i.data=BigInt(i.data)}catch{return this._getInvalidInput(i)}if(this._getType(i)!==m.bigint)return this._getInvalidInput(i);let r=void 0,u=new Ei;for(let t of this._def.checks)if(t.kind==="min"){if(t.inclusive?i.data<t.value:i.data<=t.value)r=this._getOrReturnCtx(i,r),B(r,{code:q.too_small,type:"bigint",minimum:t.value,inclusive:t.inclusive,message:t.message}),u.dirty()}else if(t.kind==="max"){if(t.inclusive?i.data>t.value:i.data>=t.value)r=this._getOrReturnCtx(i,r),B(r,{code:q.too_big,type:"bigint",maximum:t.value,inclusive:t.inclusive,message:t.message}),u.dirty()}else if(t.kind==="multipleOf"){if(i.data%t.value!==BigInt(0))r=this._getOrReturnCtx(i,r),B(r,{code:q.not_multiple_of,multipleOf:t.value,message:t.message}),u.dirty()}else Z.assertNever(t);return{status:u.value,value:i.data}}_getInvalidInput(i){let n=this._getOrReturnCtx(i);return B(n,{code:q.invalid_type,expected:m.bigint,received:n.parsedType}),F}gte(i,n){return this.setLimit("min",i,!0,K.toString(n))}gt(i,n){return this.setLimit("min",i,!1,K.toString(n))}lte(i,n){return this.setLimit("max",i,!0,K.toString(n))}lt(i,n){return this.setLimit("max",i,!1,K.toString(n))}setLimit(i,n,r,u){return new At({...this._def,checks:[...this._def.checks,{kind:i,value:n,inclusive:r,message:K.toString(u)}]})}_addCheck(i){return new At({...this._def,checks:[...this._def.checks,i]})}positive(i){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:K.toString(i)})}negative(i){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:K.toString(i)})}nonpositive(i){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:K.toString(i)})}nonnegative(i){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:K.toString(i)})}multipleOf(i,n){return this._addCheck({kind:"multipleOf",value:i,message:K.toString(n)})}get minValue(){let i=null;for(let n of this._def.checks)if(n.kind==="min"){if(i===null||n.value>i)i=n.value}return i}get maxValue(){let i=null;for(let n of this._def.checks)if(n.kind==="max"){if(i===null||n.value<i)i=n.value}return i}}At.create=(i)=>{return new At({checks:[],typeName:L.ZodBigInt,coerce:i?.coerce??!1,...k(i)})};class to extends R{_parse(i){if(this._def.coerce)i.data=Boolean(i.data);if(this._getType(i)!==m.boolean){let r=this._getOrReturnCtx(i);return B(r,{code:q.invalid_type,expected:m.boolean,received:r.parsedType}),F}return Xi(i.data)}}to.create=(i)=>{return new to({typeName:L.ZodBoolean,coerce:i?.coerce||!1,...k(i)})};class Rr extends R{_parse(i){if(this._def.coerce)i.data=new Date(i.data);if(this._getType(i)!==m.date){let t=this._getOrReturnCtx(i);return B(t,{code:q.invalid_type,expected:m.date,received:t.parsedType}),F}if(Number.isNaN(i.data.getTime())){let t=this._getOrReturnCtx(i);return B(t,{code:q.invalid_date}),F}let r=new Ei,u=void 0;for(let t of this._def.checks)if(t.kind==="min"){if(i.data.getTime()<t.value)u=this._getOrReturnCtx(i,u),B(u,{code:q.too_small,message:t.message,inclusive:!0,exact:!1,minimum:t.value,type:"date"}),r.dirty()}else if(t.kind==="max"){if(i.data.getTime()>t.value)u=this._getOrReturnCtx(i,u),B(u,{code:q.too_big,message:t.message,inclusive:!0,exact:!1,maximum:t.value,type:"date"}),r.dirty()}else Z.assertNever(t);return{status:r.value,value:new Date(i.data.getTime())}}_addCheck(i){return new Rr({...this._def,checks:[...this._def.checks,i]})}min(i,n){return this._addCheck({kind:"min",value:i.getTime(),message:K.toString(n)})}max(i,n){return this._addCheck({kind:"max",value:i.getTime(),message:K.toString(n)})}get minDate(){let i=null;for(let n of this._def.checks)if(n.kind==="min"){if(i===null||n.value>i)i=n.value}return i!=null?new Date(i):null}get maxDate(){let i=null;for(let n of this._def.checks)if(n.kind==="max"){if(i===null||n.value<i)i=n.value}return i!=null?new Date(i):null}}Rr.create=(i)=>{return new Rr({checks:[],coerce:i?.coerce||!1,typeName:L.ZodDate,...k(i)})};class ro extends R{_parse(i){if(this._getType(i)!==m.symbol){let r=this._getOrReturnCtx(i);return B(r,{code:q.invalid_type,expected:m.symbol,received:r.parsedType}),F}return Xi(i.data)}}ro.create=(i)=>{return new ro({typeName:L.ZodSymbol,...k(i)})};class Zr extends R{_parse(i){if(this._getType(i)!==m.undefined){let r=this._getOrReturnCtx(i);return B(r,{code:q.invalid_type,expected:m.undefined,received:r.parsedType}),F}return Xi(i.data)}}Zr.create=(i)=>{return new Zr({typeName:L.ZodUndefined,...k(i)})};class er extends R{_parse(i){if(this._getType(i)!==m.null){let r=this._getOrReturnCtx(i);return B(r,{code:q.invalid_type,expected:m.null,received:r.parsedType}),F}return Xi(i.data)}}er.create=(i)=>{return new er({typeName:L.ZodNull,...k(i)})};class uo extends R{constructor(){super(...arguments);this._any=!0}_parse(i){return Xi(i.data)}}uo.create=(i)=>{return new uo({typeName:L.ZodAny,...k(i)})};class _t extends R{constructor(){super(...arguments);this._unknown=!0}_parse(i){return Xi(i.data)}}_t.create=(i)=>{return new _t({typeName:L.ZodUnknown,...k(i)})};class En extends R{_parse(i){let n=this._getOrReturnCtx(i);return B(n,{code:q.invalid_type,expected:m.never,received:n.parsedType}),F}}En.create=(i)=>{return new En({typeName:L.ZodNever,...k(i)})};class co extends R{_parse(i){if(this._getType(i)!==m.undefined){let r=this._getOrReturnCtx(i);return B(r,{code:q.invalid_type,expected:m.void,received:r.parsedType}),F}return Xi(i.data)}}co.create=(i)=>{return new co({typeName:L.ZodVoid,...k(i)})};class un extends R{_parse(i){let{ctx:n,status:r}=this._processInputParams(i),u=this._def;if(n.parsedType!==m.array)return B(n,{code:q.invalid_type,expected:m.array,received:n.parsedType}),F;if(u.exactLength!==null){let c=n.data.length>u.exactLength.value,g=n.data.length<u.exactLength.value;if(c||g)B(n,{code:c?q.too_big:q.too_small,minimum:g?u.exactLength.value:void 0,maximum:c?u.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:u.exactLength.message}),r.dirty()}if(u.minLength!==null){if(n.data.length<u.minLength.value)B(n,{code:q.too_small,minimum:u.minLength.value,type:"array",inclusive:!0,exact:!1,message:u.minLength.message}),r.dirty()}if(u.maxLength!==null){if(n.data.length>u.maxLength.value)B(n,{code:q.too_big,maximum:u.maxLength.value,type:"array",inclusive:!0,exact:!1,message:u.maxLength.message}),r.dirty()}if(n.common.async)return Promise.all([...n.data].map((c,g)=>{return u.type._parseAsync(new Ri(n,c,n.path,g))})).then((c)=>{return Ei.mergeArray(r,c)});let t=[...n.data].map((c,g)=>{return u.type._parseSync(new Ri(n,c,n.path,g))});return Ei.mergeArray(r,t)}get element(){return this._def.type}min(i,n){return new un({...this._def,minLength:{value:i,message:K.toString(n)}})}max(i,n){return new un({...this._def,maxLength:{value:i,message:K.toString(n)}})}length(i,n){return new un({...this._def,exactLength:{value:i,message:K.toString(n)}})}nonempty(i){return this.min(1,i)}}un.create=(i,n)=>{return new un({type:i,minLength:null,maxLength:null,exactLength:null,typeName:L.ZodArray,...k(n)})};function mt(i){if(i instanceof ci){let n={};for(let r in i.shape){let u=i.shape[r];n[r]=cn.create(mt(u))}return new ci({...i._def,shape:()=>n})}else if(i instanceof un)return new un({...i._def,type:mt(i.element)});else if(i instanceof cn)return cn.create(mt(i.unwrap()));else if(i instanceof xn)return xn.create(mt(i.unwrap()));else if(i instanceof Hn)return Hn.create(i.items.map((n)=>mt(n)));else return i}class ci extends R{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let i=this._def.shape(),n=Z.objectKeys(i);return this._cached={shape:i,keys:n},this._cached}_parse(i){if(this._getType(i)!==m.object){let _=this._getOrReturnCtx(i);return B(_,{code:q.invalid_type,expected:m.object,received:_.parsedType}),F}let{status:r,ctx:u}=this._processInputParams(i),{shape:t,keys:c}=this._getCached(),g=[];if(!(this._def.catchall instanceof En&&this._def.unknownKeys==="strip")){for(let _ in u.data)if(!c.includes(_))g.push(_)}let h=[];for(let _ of c){let l=t[_],$=u.data[_];h.push({key:{status:"valid",value:_},value:l._parse(new Ri(u,$,u.path,_)),alwaysSet:_ in u.data})}if(this._def.catchall instanceof En){let _=this._def.unknownKeys;if(_==="passthrough")for(let l of g)h.push({key:{status:"valid",value:l},value:{status:"valid",value:u.data[l]}});else if(_==="strict"){if(g.length>0)B(u,{code:q.unrecognized_keys,keys:g}),r.dirty()}else if(_==="strip");else throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let _=this._def.catchall;for(let l of g){let $=u.data[l];h.push({key:{status:"valid",value:l},value:_._parse(new Ri(u,$,u.path,l)),alwaysSet:l in u.data})}}if(u.common.async)return Promise.resolve().then(async()=>{let _=[];for(let l of h){let $=await l.key,w=await l.value;_.push({key:$,value:w,alwaysSet:l.alwaysSet})}return _}).then((_)=>{return Ei.mergeObjectSync(r,_)});else return Ei.mergeObjectSync(r,h)}get shape(){return this._def.shape()}strict(i){return K.errToObj,new ci({...this._def,unknownKeys:"strict",...i!==void 0?{errorMap:(n,r)=>{let u=this._def.errorMap?.(n,r).message??r.defaultError;if(n.code==="unrecognized_keys")return{message:K.errToObj(i).message??u};return{message:u}}}:{}})}strip(){return new ci({...this._def,unknownKeys:"strip"})}passthrough(){return new ci({...this._def,unknownKeys:"passthrough"})}extend(i){return new ci({...this._def,shape:()=>({...this._def.shape(),...i})})}merge(i){return new ci({unknownKeys:i._def.unknownKeys,catchall:i._def.catchall,shape:()=>({...this._def.shape(),...i._def.shape()}),typeName:L.ZodObject})}setKey(i,n){return this.augment({[i]:n})}catchall(i){return new ci({...this._def,catchall:i})}pick(i){let n={};for(let r of Z.objectKeys(i))if(i[r]&&this.shape[r])n[r]=this.shape[r];return new ci({...this._def,shape:()=>n})}omit(i){let n={};for(let r of Z.objectKeys(this.shape))if(!i[r])n[r]=this.shape[r];return new ci({...this._def,shape:()=>n})}deepPartial(){return mt(this)}partial(i){let n={};for(let r of Z.objectKeys(this.shape)){let u=this.shape[r];if(i&&!i[r])n[r]=u;else n[r]=u.optional()}return new ci({...this._def,shape:()=>n})}required(i){let n={};for(let r of Z.objectKeys(this.shape))if(i&&!i[r])n[r]=this.shape[r];else{let t=this.shape[r];while(t instanceof cn)t=t._def.innerType;n[r]=t}return new ci({...this._def,shape:()=>n})}keyof(){return a4(Z.objectKeys(this.shape))}}ci.create=(i,n)=>{return new ci({shape:()=>i,unknownKeys:"strip",catchall:En.create(),typeName:L.ZodObject,...k(n)})};ci.strictCreate=(i,n)=>{return new ci({shape:()=>i,unknownKeys:"strict",catchall:En.create(),typeName:L.ZodObject,...k(n)})};ci.lazycreate=(i,n)=>{return new ci({shape:i,unknownKeys:"strip",catchall:En.create(),typeName:L.ZodObject,...k(n)})};class pr extends R{_parse(i){let{ctx:n}=this._processInputParams(i),r=this._def.options;function u(t){for(let g of t)if(g.result.status==="valid")return g.result;for(let g of t)if(g.result.status==="dirty")return n.common.issues.push(...g.ctx.common.issues),g.result;let c=t.map((g)=>new Bi(g.ctx.common.issues));return B(n,{code:q.invalid_union,unionErrors:c}),F}if(n.common.async)return Promise.all(r.map(async(t)=>{let c={...n,common:{...n.common,issues:[]},parent:null};return{result:await t._parseAsync({data:n.data,path:n.path,parent:c}),ctx:c}})).then(u);else{let t=void 0,c=[];for(let h of r){let _={...n,common:{...n.common,issues:[]},parent:null},l=h._parseSync({data:n.data,path:n.path,parent:_});if(l.status==="valid")return l;else if(l.status==="dirty"&&!t)t={result:l,ctx:_};if(_.common.issues.length)c.push(_.common.issues)}if(t)return n.common.issues.push(...t.ctx.common.issues),t.result;let g=c.map((h)=>new Bi(h));return B(n,{code:q.invalid_union,unionErrors:g}),F}}get options(){return this._def.options}}pr.create=(i,n)=>{return new pr({options:i,typeName:L.ZodUnion,...k(n)})};var Dn=(i)=>{if(i instanceof ar)return Dn(i.schema);else if(i instanceof on)return Dn(i.innerType());else if(i instanceof sr)return[i.value];else if(i instanceof lt)return i.options;else if(i instanceof iu)return Z.objectValues(i.enum);else if(i instanceof nu)return Dn(i._def.innerType);else if(i instanceof Zr)return[void 0];else if(i instanceof er)return[null];else if(i instanceof cn)return[void 0,...Dn(i.unwrap())];else if(i instanceof xn)return[null,...Dn(i.unwrap())];else if(i instanceof g0)return Dn(i.unwrap());else if(i instanceof ru)return Dn(i.unwrap());else if(i instanceof tu)return Dn(i._def.innerType);else return[]};class o0 extends R{_parse(i){let{ctx:n}=this._processInputParams(i);if(n.parsedType!==m.object)return B(n,{code:q.invalid_type,expected:m.object,received:n.parsedType}),F;let r=this.discriminator,u=n.data[r],t=this.optionsMap.get(u);if(!t)return B(n,{code:q.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),F;if(n.common.async)return t._parseAsync({data:n.data,path:n.path,parent:n});else return t._parseSync({data:n.data,path:n.path,parent:n})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(i,n,r){let u=new Map;for(let t of n){let c=Dn(t.shape[i]);if(!c.length)throw new Error(`A discriminator value for key \\`${i}\\` could not be extracted from all schema options`);for(let g of c){if(u.has(g))throw new Error(`Discriminator property ${String(i)} has duplicate value ${String(g)}`);u.set(g,t)}}return new o0({typeName:L.ZodDiscriminatedUnion,discriminator:i,options:n,optionsMap:u,...k(r)})}}function c0(i,n){let r=Wn(i),u=Wn(n);if(i===n)return{valid:!0,data:i};else if(r===m.object&&u===m.object){let t=Z.objectKeys(n),c=Z.objectKeys(i).filter((h)=>t.indexOf(h)!==-1),g={...i,...n};for(let h of c){let _=c0(i[h],n[h]);if(!_.valid)return{valid:!1};g[h]=_.data}return{valid:!0,data:g}}else if(r===m.array&&u===m.array){if(i.length!==n.length)return{valid:!1};let t=[];for(let c=0;c<i.length;c++){let g=i[c],h=n[c],_=c0(g,h);if(!_.valid)return{valid:!1};t.push(_.data)}return{valid:!0,data:t}}else if(r===m.date&&u===m.date&&+i===+n)return{valid:!0,data:i};else return{valid:!1}}class dr extends R{_parse(i){let{status:n,ctx:r}=this._processInputParams(i),u=(t,c)=>{if(t0(t)||t0(c))return F;let g=c0(t.value,c.value);if(!g.valid)return B(r,{code:q.invalid_intersection_types}),F;if(r0(t)||r0(c))n.dirty();return{status:n.value,value:g.data}};if(r.common.async)return Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([t,c])=>u(t,c));else return u(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}dr.create=(i,n,r)=>{return new dr({left:i,right:n,typeName:L.ZodIntersection,...k(r)})};class Hn extends R{_parse(i){let{status:n,ctx:r}=this._processInputParams(i);if(r.parsedType!==m.array)return B(r,{code:q.invalid_type,expected:m.array,received:r.parsedType}),F;if(r.data.length<this._def.items.length)return B(r,{code:q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),F;if(!this._def.rest&&r.data.length>this._def.items.length)B(r,{code:q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty();let t=[...r.data].map((c,g)=>{let h=this._def.items[g]||this._def.rest;if(!h)return null;return h._parse(new Ri(r,c,r.path,g))}).filter((c)=>!!c);if(r.common.async)return Promise.all(t).then((c)=>{return Ei.mergeArray(n,c)});else return Ei.mergeArray(n,t)}get items(){return this._def.items}rest(i){return new Hn({...this._def,rest:i})}}Hn.create=(i,n)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Hn({items:i,typeName:L.ZodTuple,rest:null,...k(n)})};class oo extends R{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(i){let{status:n,ctx:r}=this._processInputParams(i);if(r.parsedType!==m.object)return B(r,{code:q.invalid_type,expected:m.object,received:r.parsedType}),F;let u=[],t=this._def.keyType,c=this._def.valueType;for(let g in r.data)u.push({key:t._parse(new Ri(r,g,r.path,g)),value:c._parse(new Ri(r,r.data[g],r.path,g)),alwaysSet:g in r.data});if(r.common.async)return Ei.mergeObjectAsync(n,u);else return Ei.mergeObjectSync(n,u)}get element(){return this._def.valueType}static create(i,n,r){if(n instanceof R)return new oo({keyType:i,valueType:n,typeName:L.ZodRecord,...k(r)});return new oo({keyType:Jn.create(),valueType:i,typeName:L.ZodRecord,...k(n)})}}class go extends R{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(i){let{status:n,ctx:r}=this._processInputParams(i);if(r.parsedType!==m.map)return B(r,{code:q.invalid_type,expected:m.map,received:r.parsedType}),F;let u=this._def.keyType,t=this._def.valueType,c=[...r.data.entries()].map(([g,h],_)=>{return{key:u._parse(new Ri(r,g,r.path,[_,"key"])),value:t._parse(new Ri(r,h,r.path,[_,"value"]))}});if(r.common.async){let g=new Map;return Promise.resolve().then(async()=>{for(let h of c){let _=await h.key,l=await h.value;if(_.status==="aborted"||l.status==="aborted")return F;if(_.status==="dirty"||l.status==="dirty")n.dirty();g.set(_.value,l.value)}return{status:n.value,value:g}})}else{let g=new Map;for(let h of c){let{key:_,value:l}=h;if(_.status==="aborted"||l.status==="aborted")return F;if(_.status==="dirty"||l.status==="dirty")n.dirty();g.set(_.value,l.value)}return{status:n.value,value:g}}}}go.create=(i,n,r)=>{return new go({valueType:n,keyType:i,typeName:L.ZodMap,...k(r)})};class Bt extends R{_parse(i){let{status:n,ctx:r}=this._processInputParams(i);if(r.parsedType!==m.set)return B(r,{code:q.invalid_type,expected:m.set,received:r.parsedType}),F;let u=this._def;if(u.minSize!==null){if(r.data.size<u.minSize.value)B(r,{code:q.too_small,minimum:u.minSize.value,type:"set",inclusive:!0,exact:!1,message:u.minSize.message}),n.dirty()}if(u.maxSize!==null){if(r.data.size>u.maxSize.value)B(r,{code:q.too_big,maximum:u.maxSize.value,type:"set",inclusive:!0,exact:!1,message:u.maxSize.message}),n.dirty()}let t=this._def.valueType;function c(h){let _=new Set;for(let l of h){if(l.status==="aborted")return F;if(l.status==="dirty")n.dirty();_.add(l.value)}return{status:n.value,value:_}}let g=[...r.data.values()].map((h,_)=>t._parse(new Ri(r,h,r.path,_)));if(r.common.async)return Promise.all(g).then((h)=>c(h));else return c(g)}min(i,n){return new Bt({...this._def,minSize:{value:i,message:K.toString(n)}})}max(i,n){return new Bt({...this._def,maxSize:{value:i,message:K.toString(n)}})}size(i,n){return this.min(i,n).max(i,n)}nonempty(i){return this.min(1,i)}}Bt.create=(i,n)=>{return new Bt({valueType:i,minSize:null,maxSize:null,typeName:L.ZodSet,...k(n)})};class Cr extends R{constructor(){super(...arguments);this.validate=this.implement}_parse(i){let{ctx:n}=this._processInputParams(i);if(n.parsedType!==m.function)return B(n,{code:q.invalid_type,expected:m.function,received:n.parsedType}),F;function r(g,h){return no({data:g,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Tr(),Mn].filter((_)=>!!_),issueData:{code:q.invalid_arguments,argumentsError:h}})}function u(g,h){return no({data:g,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Tr(),Mn].filter((_)=>!!_),issueData:{code:q.invalid_return_type,returnTypeError:h}})}let t={errorMap:n.common.contextualErrorMap},c=n.data;if(this._def.returns instanceof Kt){let g=this;return Xi(async function(...h){let _=new Bi([]),l=await g._def.args.parseAsync(h,t).catch((b)=>{throw _.addIssue(r(h,b)),_}),$=await Reflect.apply(c,this,l);return await g._def.returns._def.type.parseAsync($,t).catch((b)=>{throw _.addIssue(u($,b)),_})})}else{let g=this;return Xi(function(...h){let _=g._def.args.safeParse(h,t);if(!_.success)throw new Bi([r(h,_.error)]);let l=Reflect.apply(c,this,_.data),$=g._def.returns.safeParse(l,t);if(!$.success)throw new Bi([u(l,$.error)]);return $.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...i){return new Cr({...this._def,args:Hn.create(i).rest(_t.create())})}returns(i){return new Cr({...this._def,returns:i})}implement(i){return this.parse(i)}strictImplement(i){return this.parse(i)}static create(i,n,r){return new Cr({args:i?i:Hn.create([]).rest(_t.create()),returns:n||_t.create(),typeName:L.ZodFunction,...k(r)})}}class ar extends R{get schema(){return this._def.getter()}_parse(i){let{ctx:n}=this._processInputParams(i);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ar.create=(i,n)=>{return new ar({getter:i,typeName:L.ZodLazy,...k(n)})};class sr extends R{_parse(i){if(i.data!==this._def.value){let n=this._getOrReturnCtx(i);return B(n,{received:n.data,code:q.invalid_literal,expected:this._def.value}),F}return{status:"valid",value:i.data}}get value(){return this._def.value}}sr.create=(i,n)=>{return new sr({value:i,typeName:L.ZodLiteral,...k(n)})};function a4(i,n){return new lt({values:i,typeName:L.ZodEnum,...k(n)})}class lt extends R{_parse(i){if(typeof i.data!=="string"){let n=this._getOrReturnCtx(i),r=this._def.values;return B(n,{expected:Z.joinValues(r),received:n.parsedType,code:q.invalid_type}),F}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(i.data)){let n=this._getOrReturnCtx(i),r=this._def.values;return B(n,{received:n.data,code:q.invalid_enum_value,options:r}),F}return Xi(i.data)}get options(){return this._def.values}get enum(){let i={};for(let n of this._def.values)i[n]=n;return i}get Values(){let i={};for(let n of this._def.values)i[n]=n;return i}get Enum(){let i={};for(let n of this._def.values)i[n]=n;return i}extract(i,n=this._def){return lt.create(i,{...this._def,...n})}exclude(i,n=this._def){return lt.create(this.options.filter((r)=>!i.includes(r)),{...this._def,...n})}}lt.create=a4;class iu extends R{_parse(i){let n=Z.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(i);if(r.parsedType!==m.string&&r.parsedType!==m.number){let u=Z.objectValues(n);return B(r,{expected:Z.joinValues(u),received:r.parsedType,code:q.invalid_type}),F}if(!this._cache)this._cache=new Set(Z.getValidEnumValues(this._def.values));if(!this._cache.has(i.data)){let u=Z.objectValues(n);return B(r,{received:r.data,code:q.invalid_enum_value,options:u}),F}return Xi(i.data)}get enum(){return this._def.values}}iu.create=(i,n)=>{return new iu({values:i,typeName:L.ZodNativeEnum,...k(n)})};class Kt extends R{unwrap(){return this._def.type}_parse(i){let{ctx:n}=this._processInputParams(i);if(n.parsedType!==m.promise&&n.common.async===!1)return B(n,{code:q.invalid_type,expected:m.promise,received:n.parsedType}),F;let r=n.parsedType===m.promise?n.data:Promise.resolve(n.data);return Xi(r.then((u)=>{return this._def.type.parseAsync(u,{path:n.path,errorMap:n.common.contextualErrorMap})}))}}Kt.create=(i,n)=>{return new Kt({type:i,typeName:L.ZodPromise,...k(n)})};class on extends R{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===L.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(i){let{status:n,ctx:r}=this._processInputParams(i),u=this._def.effect||null,t={addIssue:(c)=>{if(B(r,c),c.fatal)n.abort();else n.dirty()},get path(){return r.path}};if(t.addIssue=t.addIssue.bind(t),u.type==="preprocess"){let c=u.transform(r.data,t);if(r.common.async)return Promise.resolve(c).then(async(g)=>{if(n.value==="aborted")return F;let h=await this._def.schema._parseAsync({data:g,path:r.path,parent:r});if(h.status==="aborted")return F;if(h.status==="dirty")return Qt(h.value);if(n.value==="dirty")return Qt(h.value);return h});else{if(n.value==="aborted")return F;let g=this._def.schema._parseSync({data:c,path:r.path,parent:r});if(g.status==="aborted")return F;if(g.status==="dirty")return Qt(g.value);if(n.value==="dirty")return Qt(g.value);return g}}if(u.type==="refinement"){let c=(g)=>{let h=u.refinement(g,t);if(r.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return g};if(r.common.async===!1){let g=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(g.status==="aborted")return F;if(g.status==="dirty")n.dirty();return c(g.value),{status:n.value,value:g.value}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((g)=>{if(g.status==="aborted")return F;if(g.status==="dirty")n.dirty();return c(g.value).then(()=>{return{status:n.value,value:g.value}})})}if(u.type==="transform")if(r.common.async===!1){let c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ht(c))return F;let g=u.transform(c.value,t);if(g instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:g}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((c)=>{if(!ht(c))return F;return Promise.resolve(u.transform(c.value,t)).then((g)=>({status:n.value,value:g}))});Z.assertNever(u)}}on.create=(i,n,r)=>{return new on({schema:i,typeName:L.ZodEffects,effect:n,...k(r)})};on.createWithPreprocess=(i,n,r)=>{return new on({schema:n,effect:{type:"preprocess",transform:i},typeName:L.ZodEffects,...k(r)})};class cn extends R{_parse(i){if(this._getType(i)===m.undefined)return Xi(void 0);return this._def.innerType._parse(i)}unwrap(){return this._def.innerType}}cn.create=(i,n)=>{return new cn({innerType:i,typeName:L.ZodOptional,...k(n)})};class xn extends R{_parse(i){if(this._getType(i)===m.null)return Xi(null);return this._def.innerType._parse(i)}unwrap(){return this._def.innerType}}xn.create=(i,n)=>{return new xn({innerType:i,typeName:L.ZodNullable,...k(n)})};class nu extends R{_parse(i){let{ctx:n}=this._processInputParams(i),r=n.data;if(n.parsedType===m.undefined)r=this._def.defaultValue();return this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}nu.create=(i,n)=>{return new nu({innerType:i,typeName:L.ZodDefault,defaultValue:typeof n.default==="function"?n.default:()=>n.default,...k(n)})};class tu extends R{_parse(i){let{ctx:n}=this._processInputParams(i),r={...n,common:{...n.common,issues:[]}},u=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});if(kr(u))return u.then((t)=>{return{status:"valid",value:t.status==="valid"?t.value:this._def.catchValue({get error(){return new Bi(r.common.issues)},input:r.data})}});else return{status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new Bi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}tu.create=(i,n)=>{return new tu({innerType:i,typeName:L.ZodCatch,catchValue:typeof n.catch==="function"?n.catch:()=>n.catch,...k(n)})};class ho extends R{_parse(i){if(this._getType(i)!==m.nan){let r=this._getOrReturnCtx(i);return B(r,{code:q.invalid_type,expected:m.nan,received:r.parsedType}),F}return{status:"valid",value:i.data}}}ho.create=(i)=>{return new ho({typeName:L.ZodNaN,...k(i)})};var QS=Symbol("zod_brand");class g0 extends R{_parse(i){let{ctx:n}=this._processInputParams(i),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class _o extends R{_parse(i){let{status:n,ctx:r}=this._processInputParams(i);if(r.common.async)return(async()=>{let t=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});if(t.status==="aborted")return F;if(t.status==="dirty")return n.dirty(),Qt(t.value);else return this._def.out._parseAsync({data:t.value,path:r.path,parent:r})})();else{let u=this._def.in._parseSync({data:r.data,path:r.path,parent:r});if(u.status==="aborted")return F;if(u.status==="dirty")return n.dirty(),{status:"dirty",value:u.value};else return this._def.out._parseSync({data:u.value,path:r.path,parent:r})}}static create(i,n){return new _o({in:i,out:n,typeName:L.ZodPipeline})}}class ru extends R{_parse(i){let n=this._def.innerType._parse(i),r=(u)=>{if(ht(u))u.value=Object.freeze(u.value);return u};return kr(n)?n.then((u)=>r(u)):r(n)}unwrap(){return this._def.innerType}}ru.create=(i,n)=>{return new ru({innerType:i,typeName:L.ZodReadonly,...k(n)})};var mS={object:ci.lazycreate},L;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(L||(L={}));var SS=Jn.create,AS=St.create,BS=ho.create,KS=At.create,VS=to.create,MS=Rr.create,xS=ro.create,FS=Zr.create,PS=er.create,yS=uo.create,TS=_t.create,kS=En.create,CS=co.create,RS=un.create,ZS=ci.create,eS=ci.strictCreate,pS=pr.create,dS=o0.create,aS=dr.create,sS=Hn.create,iA=oo.create,nA=go.create,tA=Bt.create,rA=Cr.create,uA=ar.create,cA=sr.create,oA=lt.create,gA=iu.create,hA=Kt.create,_A=on.create,lA=cn.create,$A=xn.create,wA=on.createWithPreprocess,bA=_o.create;var Gn=({prefix:i,size:n=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:u="-"}={})=>{let t=()=>{let c=r.length,g=new Array(n);for(let h=0;h<n;h++)g[h]=r[Math.random()*c|0];return g.join("")};if(i==null)return t;if(r.includes(u))throw new Gf({argument:"separator",message:`The separator "${u}" must not be part of the alphabet "${r}".`});return()=>`${i}${u}${t()}`},n6=Gn();function w0(i){if(i==null)return"unknown error";if(typeof i==="string")return i;if(i instanceof Error)return i.message;return JSON.stringify(i)}var i5=/"__proto__"\\s*:/,n5=/"constructor"\\s*:/;function t5(i){let n=JSON.parse(i);if(n===null||typeof n!=="object")return n;if(i5.test(i)===!1&&n5.test(i)===!1)return n;return r5(n)}function r5(i){let n=[i];while(n.length){let r=n;n=[];for(let u of r){if(Object.prototype.hasOwnProperty.call(u,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(u,"constructor")&&Object.prototype.hasOwnProperty.call(u.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let t in u){let c=u[t];if(c&&typeof c==="object")n.push(c)}}}return i}function u5(i){let{stackTraceLimit:n}=Error;Error.stackTraceLimit=0;try{return t5(i)}finally{Error.stackTraceLimit=n}}var lo=Symbol.for("vercel.ai.validator");function c5(i){return{[lo]:!0,validate:i}}function o5(i){return typeof i==="object"&&i!==null&&lo in i&&i[lo]===!0&&"validate"in i}function g5(i){return o5(i)?i:h5(i)}function h5(i){return c5(async(n)=>{let r=await i["~standard"].validate(n);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new sn({value:n,cause:r.issues})}})}async function b0({value:i,schema:n}){let r=await $o({value:i,schema:n});if(!r.success)throw sn.wrap({value:i,cause:r.error});return r.value}async function $o({value:i,schema:n}){let r=g5(n);try{if(r.validate==null)return{success:!0,value:i,rawValue:i};let u=await r.validate(i);if(u.success)return{success:!0,value:u.value,rawValue:i};return{success:!1,error:sn.wrap({value:i,cause:u.error}),rawValue:i}}catch(u){return{success:!1,error:sn.wrap({value:i,cause:u}),rawValue:i}}}async function uu({text:i,schema:n}){try{let r=u5(i);if(n==null)return{success:!0,value:r,rawValue:r};return await $o({value:r,schema:n})}catch(r){return{success:!1,error:Bg.isInstance(r)?r:new Bg({text:i,cause:r}),rawValue:void 0}}}var _5=(i,n)=>{let r=0;for(;r<i.length&&r<n.length;r++)if(i[r]!==n[r])break;return[(i.length-r).toString(),...n.slice(r)].join("/")},l5=Symbol("Let zodToJsonSchema decide on which parser to use"),s4={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},$5=(i)=>typeof i==="string"?{...s4,name:i}:{...s4,...i};function Ki(){return{}}function w5(i,n){var r,u,t;let c={type:"array"};if(((r=i.type)==null?void 0:r._def)&&((t=(u=i.type)==null?void 0:u._def)==null?void 0:t.typeName)!==L.ZodAny)c.items=a(i.type._def,{...n,currentPath:[...n.currentPath,"items"]});if(i.minLength)c.minItems=i.minLength.value;if(i.maxLength)c.maxItems=i.maxLength.value;if(i.exactLength)c.minItems=i.exactLength.value,c.maxItems=i.exactLength.value;return c}function b5(i){let n={type:"integer",format:"int64"};if(!i.checks)return n;for(let r of i.checks)switch(r.kind){case"min":if(r.inclusive)n.minimum=r.value;else n.exclusiveMinimum=r.value;break;case"max":if(r.inclusive)n.maximum=r.value;else n.exclusiveMaximum=r.value;break;case"multipleOf":n.multipleOf=r.value;break}return n}function v5(){return{type:"boolean"}}function t6(i,n){return a(i.type._def,n)}var f5=(i,n)=>{return a(i.innerType._def,n)};function r6(i,n,r){let u=r!=null?r:n.dateStrategy;if(Array.isArray(u))return{anyOf:u.map((t,c)=>r6(i,n,t))};switch(u){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return O5(i)}}var O5=(i)=>{let n={type:"integer",format:"unix-time"};for(let r of i.checks)switch(r.kind){case"min":n.minimum=r.value;break;case"max":n.maximum=r.value;break}return n};function j5(i,n){return{...a(i.innerType._def,n),default:i.defaultValue()}}function U5(i,n){return n.effectStrategy==="input"?a(i.schema._def,n):Ki()}function N5(i){return{type:"string",enum:Array.from(i.values)}}var z5=(i)=>{if("type"in i&&i.type==="string")return!1;return"allOf"in i};function W5(i,n){let r=[a(i.left._def,{...n,currentPath:[...n.currentPath,"allOf","0"]}),a(i.right._def,{...n,currentPath:[...n.currentPath,"allOf","1"]})].filter((t)=>!!t),u=[];return r.forEach((t)=>{if(z5(t))u.push(...t.allOf);else{let c=t;if("additionalProperties"in t&&t.additionalProperties===!1){let{additionalProperties:g,...h}=t;c=h}u.push(c)}}),u.length?{allOf:u}:void 0}function D5(i){let n=typeof i.value;if(n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string")return{type:Array.isArray(i.value)?"array":"object"};return{type:n==="bigint"?"integer":n,const:i.value}}var h0=void 0,Zi={cuid:/^[cC][^\\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\\.)(?!.*\\.\\.)([a-zA-Z0-9_\'+\\-\\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\\-]*\\.)+[a-zA-Z]{2,}$/,emoji:()=>{if(h0===void 0)h0=RegExp("^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$","u");return h0},uuid:/^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/};function u6(i,n){let r={type:"string"};if(i.checks)for(let u of i.checks)switch(u.kind){case"min":r.minLength=typeof r.minLength==="number"?Math.max(r.minLength,u.value):u.value;break;case"max":r.maxLength=typeof r.maxLength==="number"?Math.min(r.maxLength,u.value):u.value;break;case"email":switch(n.emailStrategy){case"format:email":ei(r,"email",u.message,n);break;case"format:idn-email":ei(r,"idn-email",u.message,n);break;case"pattern:zod":Li(r,Zi.email,u.message,n);break}break;case"url":ei(r,"uri",u.message,n);break;case"uuid":ei(r,"uuid",u.message,n);break;case"regex":Li(r,u.regex,u.message,n);break;case"cuid":Li(r,Zi.cuid,u.message,n);break;case"cuid2":Li(r,Zi.cuid2,u.message,n);break;case"startsWith":Li(r,RegExp(`^${_0(u.value,n)}`),u.message,n);break;case"endsWith":Li(r,RegExp(`${_0(u.value,n)}$`),u.message,n);break;case"datetime":ei(r,"date-time",u.message,n);break;case"date":ei(r,"date",u.message,n);break;case"time":ei(r,"time",u.message,n);break;case"duration":ei(r,"duration",u.message,n);break;case"length":r.minLength=typeof r.minLength==="number"?Math.max(r.minLength,u.value):u.value,r.maxLength=typeof r.maxLength==="number"?Math.min(r.maxLength,u.value):u.value;break;case"includes":{Li(r,RegExp(_0(u.value,n)),u.message,n);break}case"ip":{if(u.version!=="v6")ei(r,"ipv4",u.message,n);if(u.version!=="v4")ei(r,"ipv6",u.message,n);break}case"base64url":Li(r,Zi.base64url,u.message,n);break;case"jwt":Li(r,Zi.jwt,u.message,n);break;case"cidr":{if(u.version!=="v6")Li(r,Zi.ipv4Cidr,u.message,n);if(u.version!=="v4")Li(r,Zi.ipv6Cidr,u.message,n);break}case"emoji":Li(r,Zi.emoji(),u.message,n);break;case"ulid":{Li(r,Zi.ulid,u.message,n);break}case"base64":{switch(n.base64Strategy){case"format:binary":{ei(r,"binary",u.message,n);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{Li(r,Zi.base64,u.message,n);break}}break}case"nanoid":Li(r,Zi.nanoid,u.message,n);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function _0(i,n){return n.patternStrategy==="escape"?E5(i):i}var J5=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function E5(i){let n="";for(let r=0;r<i.length;r++){if(!J5.has(i[r]))n+="\\\\";n+=i[r]}return n}function ei(i,n,r,u){var t;if(i.format||((t=i.anyOf)==null?void 0:t.some((c)=>c.format))){if(!i.anyOf)i.anyOf=[];if(i.format)i.anyOf.push({format:i.format}),delete i.format;i.anyOf.push({format:n,...r&&u.errorMessages&&{errorMessage:{format:r}}})}else i.format=n}function Li(i,n,r,u){var t;if(i.pattern||((t=i.allOf)==null?void 0:t.some((c)=>c.pattern))){if(!i.allOf)i.allOf=[];if(i.pattern)i.allOf.push({pattern:i.pattern}),delete i.pattern;i.allOf.push({pattern:i6(n,u),...r&&u.errorMessages&&{errorMessage:{pattern:r}}})}else i.pattern=i6(n,u)}function i6(i,n){var r;if(!n.applyRegexFlags||!i.flags)return i.source;let u={i:i.flags.includes("i"),m:i.flags.includes("m"),s:i.flags.includes("s")},t=u.i?i.source.toLowerCase():i.source,c="",g=!1,h=!1,_=!1;for(let l=0;l<t.length;l++){if(g){c+=t[l],g=!1;continue}if(u.i){if(h){if(t[l].match(/[a-z]/)){if(_)c+=t[l],c+=`${t[l-2]}-${t[l]}`.toUpperCase(),_=!1;else if(t[l+1]==="-"&&((r=t[l+2])==null?void 0:r.match(/[a-z]/)))c+=t[l],_=!0;else c+=`${t[l]}${t[l].toUpperCase()}`;continue}}else if(t[l].match(/[a-z]/)){c+=`[${t[l]}${t[l].toUpperCase()}]`;continue}}if(u.m){if(t[l]==="^"){c+=`(^|(?<=[\\r\n]))`;continue}else if(t[l]==="$"){c+=`($|(?=[\\r\n]))`;continue}}if(u.s&&t[l]==="."){c+=h?`${t[l]}\\r\n`:`[${t[l]}\\r\n]`;continue}if(c+=t[l],t[l]==="\\\\")g=!0;else if(h&&t[l]==="]")h=!1;else if(!h&&t[l]==="[")h=!0}try{new RegExp(c)}catch(l){return console.warn(`Could not convert regex pattern at ${n.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),i.source}return c}function c6(i,n){var r,u,t,c,g,h;let _={type:"object",additionalProperties:(r=a(i.valueType._def,{...n,currentPath:[...n.currentPath,"additionalProperties"]}))!=null?r:n.allowedAdditionalProperties};if(((u=i.keyType)==null?void 0:u._def.typeName)===L.ZodString&&((t=i.keyType._def.checks)==null?void 0:t.length)){let{type:l,...$}=u6(i.keyType._def,n);return{..._,propertyNames:$}}else if(((c=i.keyType)==null?void 0:c._def.typeName)===L.ZodEnum)return{..._,propertyNames:{enum:i.keyType._def.values}};else if(((g=i.keyType)==null?void 0:g._def.typeName)===L.ZodBranded&&i.keyType._def.type._def.typeName===L.ZodString&&((h=i.keyType._def.type._def.checks)==null?void 0:h.length)){let{type:l,...$}=t6(i.keyType._def,n);return{..._,propertyNames:$}}return _}function H5(i,n){if(n.mapStrategy==="record")return c6(i,n);let r=a(i.keyType._def,{...n,currentPath:[...n.currentPath,"items","items","0"]})||Ki(),u=a(i.valueType._def,{...n,currentPath:[...n.currentPath,"items","items","1"]})||Ki();return{type:"array",maxItems:125,items:{type:"array",items:[r,u],minItems:2,maxItems:2}}}function G5(i){let n=i.values,u=Object.keys(i.values).filter((c)=>{return typeof n[n[c]]!=="number"}).map((c)=>n[c]),t=Array.from(new Set(u.map((c)=>typeof c)));return{type:t.length===1?t[0]==="string"?"string":"number":["string","number"],enum:u}}function q5(){return{not:Ki()}}function X5(){return{type:"null"}}var l0={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function L5(i,n){let r=i.options instanceof Map?Array.from(i.options.values()):i.options;if(r.every((u)=>(u._def.typeName in l0)&&(!u._def.checks||!u._def.checks.length))){let u=r.reduce((t,c)=>{let g=l0[c._def.typeName];return g&&!t.includes(g)?[...t,g]:t},[]);return{type:u.length>1?u:u[0]}}else if(r.every((u)=>u._def.typeName==="ZodLiteral"&&!u.description)){let u=r.reduce((t,c)=>{let g=typeof c._def.value;switch(g){case"string":case"number":case"boolean":return[...t,g];case"bigint":return[...t,"integer"];case"object":if(c._def.value===null)return[...t,"null"];case"symbol":case"undefined":case"function":default:return t}},[]);if(u.length===r.length){let t=u.filter((c,g,h)=>h.indexOf(c)===g);return{type:t.length>1?t:t[0],enum:r.reduce((c,g)=>{return c.includes(g._def.value)?c:[...c,g._def.value]},[])}}}else if(r.every((u)=>u._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((u,t)=>[...u,...t._def.values.filter((c)=>!u.includes(c))],[])};return I5(i,n)}var I5=(i,n)=>{let r=(i.options instanceof Map?Array.from(i.options.values()):i.options).map((u,t)=>a(u._def,{...n,currentPath:[...n.currentPath,"anyOf",`${t}`]})).filter((u)=>!!u&&(!n.strictUnions||typeof u==="object"&&Object.keys(u).length>0));return r.length?{anyOf:r}:void 0};function Y5(i,n){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(i.innerType._def.typeName)&&(!i.innerType._def.checks||!i.innerType._def.checks.length))return{type:[l0[i.innerType._def.typeName],"null"]};let r=a(i.innerType._def,{...n,currentPath:[...n.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function Q5(i){let n={type:"number"};if(!i.checks)return n;for(let r of i.checks)switch(r.kind){case"int":n.type="integer";break;case"min":if(r.inclusive)n.minimum=r.value;else n.exclusiveMinimum=r.value;break;case"max":if(r.inclusive)n.maximum=r.value;else n.exclusiveMaximum=r.value;break;case"multipleOf":n.multipleOf=r.value;break}return n}function m5(i,n){let r={type:"object",properties:{}},u=[],t=i.shape();for(let g in t){let h=t[g];if(h===void 0||h._def===void 0)continue;let _=A5(h),l=a(h._def,{...n,currentPath:[...n.currentPath,"properties",g],propertyPath:[...n.currentPath,"properties",g]});if(l===void 0)continue;if(r.properties[g]=l,!_)u.push(g)}if(u.length)r.required=u;let c=S5(i,n);if(c!==void 0)r.additionalProperties=c;return r}function S5(i,n){if(i.catchall._def.typeName!=="ZodNever")return a(i.catchall._def,{...n,currentPath:[...n.currentPath,"additionalProperties"]});switch(i.unknownKeys){case"passthrough":return n.allowedAdditionalProperties;case"strict":return n.rejectedAdditionalProperties;case"strip":return n.removeAdditionalStrategy==="strict"?n.allowedAdditionalProperties:n.rejectedAdditionalProperties}}function A5(i){try{return i.isOptional()}catch(n){return!0}}var B5=(i,n)=>{var r;if(n.currentPath.toString()===((r=n.propertyPath)==null?void 0:r.toString()))return a(i.innerType._def,n);let u=a(i.innerType._def,{...n,currentPath:[...n.currentPath,"anyOf","1"]});return u?{anyOf:[{not:Ki()},u]}:Ki()},K5=(i,n)=>{if(n.pipeStrategy==="input")return a(i.in._def,n);else if(n.pipeStrategy==="output")return a(i.out._def,n);let r=a(i.in._def,{...n,currentPath:[...n.currentPath,"allOf","0"]}),u=a(i.out._def,{...n,currentPath:[...n.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,u].filter((t)=>t!==void 0)}};function V5(i,n){return a(i.type._def,n)}function M5(i,n){let u={type:"array",uniqueItems:!0,items:a(i.valueType._def,{...n,currentPath:[...n.currentPath,"items"]})};if(i.minSize)u.minItems=i.minSize.value;if(i.maxSize)u.maxItems=i.maxSize.value;return u}function x5(i,n){if(i.rest)return{type:"array",minItems:i.items.length,items:i.items.map((r,u)=>a(r._def,{...n,currentPath:[...n.currentPath,"items",`${u}`]})).reduce((r,u)=>u===void 0?r:[...r,u],[]),additionalItems:a(i.rest._def,{...n,currentPath:[...n.currentPath,"additionalItems"]})};else return{type:"array",minItems:i.items.length,maxItems:i.items.length,items:i.items.map((r,u)=>a(r._def,{...n,currentPath:[...n.currentPath,"items",`${u}`]})).reduce((r,u)=>u===void 0?r:[...r,u],[])}}function F5(){return{not:Ki()}}function P5(){return Ki()}var y5=(i,n)=>{return a(i.innerType._def,n)},T5=(i,n,r)=>{switch(n){case L.ZodString:return u6(i,r);case L.ZodNumber:return Q5(i);case L.ZodObject:return m5(i,r);case L.ZodBigInt:return b5(i);case L.ZodBoolean:return v5();case L.ZodDate:return r6(i,r);case L.ZodUndefined:return F5();case L.ZodNull:return X5();case L.ZodArray:return w5(i,r);case L.ZodUnion:case L.ZodDiscriminatedUnion:return L5(i,r);case L.ZodIntersection:return W5(i,r);case L.ZodTuple:return x5(i,r);case L.ZodRecord:return c6(i,r);case L.ZodLiteral:return D5(i);case L.ZodEnum:return N5(i);case L.ZodNativeEnum:return G5(i);case L.ZodNullable:return Y5(i,r);case L.ZodOptional:return B5(i,r);case L.ZodMap:return H5(i,r);case L.ZodSet:return M5(i,r);case L.ZodLazy:return()=>i.getter()._def;case L.ZodPromise:return V5(i,r);case L.ZodNaN:case L.ZodNever:return q5();case L.ZodEffects:return U5(i,r);case L.ZodAny:return Ki();case L.ZodUnknown:return P5();case L.ZodDefault:return j5(i,r);case L.ZodBranded:return t6(i,r);case L.ZodReadonly:return y5(i,r);case L.ZodCatch:return f5(i,r);case L.ZodPipeline:return K5(i,r);case L.ZodFunction:case L.ZodVoid:case L.ZodSymbol:return;default:return((u)=>{return})(n)}};function a(i,n,r=!1){var u;let t=n.seen.get(i);if(n.override){let _=(u=n.override)==null?void 0:u.call(n,i,n,t,r);if(_!==l5)return _}if(t&&!r){let _=k5(t,n);if(_!==void 0)return _}let c={def:i,path:n.currentPath,jsonSchema:void 0};n.seen.set(i,c);let g=T5(i,i.typeName,n),h=typeof g==="function"?a(g(),n):g;if(h)C5(i,n,h);if(n.postProcess){let _=n.postProcess(h,i,n);return c.jsonSchema=h,_}return c.jsonSchema=h,h}var k5=(i,n)=>{switch(n.$refStrategy){case"root":return{$ref:i.path.join("/")};case"relative":return{$ref:_5(n.currentPath,i.path)};case"none":case"seen":{if(i.path.length<n.currentPath.length&&i.path.every((r,u)=>n.currentPath[u]===r))return console.warn(`Recursive reference detected at ${n.currentPath.join("/")}! Defaulting to any`),Ki();return n.$refStrategy==="seen"?Ki():void 0}}},C5=(i,n,r)=>{if(i.description)r.description=i.description;return r},R5=(i)=>{let n=$5(i),r=n.name!==void 0?[...n.basePath,n.definitionPath,n.name]:n.basePath;return{...n,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(n.definitions).map(([u,t])=>[t._def,{def:t._def,path:[...n.basePath,n.definitionPath,u],jsonSchema:void 0}]))}},Z5=(i,n)=>{var r;let u=R5(n),t=typeof n==="object"&&n.definitions?Object.entries(n.definitions).reduce((l,[$,w])=>{var b;return{...l,[$]:(b=a(w._def,{...u,currentPath:[...u.basePath,u.definitionPath,$]},!0))!=null?b:Ki()}},{}):void 0,c=typeof n==="string"?n:(n==null?void 0:n.nameStrategy)==="title"?void 0:n==null?void 0:n.name,g=(r=a(i._def,c===void 0?u:{...u,currentPath:[...u.basePath,u.definitionPath,c]},!1))!=null?r:Ki(),h=typeof n==="object"&&n.name!==void 0&&n.nameStrategy==="title"?n.name:void 0;if(h!==void 0)g.title=h;let _=c===void 0?t?{...g,[u.definitionPath]:t}:g:{$ref:[...u.$refStrategy==="relative"?[]:u.basePath,u.definitionPath,c].join("/"),[u.definitionPath]:{...t,[c]:g}};return _.$schema="http://json-schema.org/draft-07/schema#",_},e5=Z5;function p5(i,n){var r;let u=(r=n==null?void 0:n.useReferences)!=null?r:!1;return v0(e5(i,{$refStrategy:u?"root":"none"}),{validate:async(t)=>{let c=await i.safeParseAsync(t);return c.success?{success:!0,value:c.data}:{success:!1,error:c.error}}})}function d5(i,n){var r;let u=(r=n==null?void 0:n.useReferences)!=null?r:!1,t=Vr(i,{target:"draft-7",io:"output",reused:u?"ref":"inline"});return v0(t,{validate:async(c)=>{let g=await Mr(i,c);return g.success?{success:!0,value:g.data}:{success:!1,error:g.error}}})}function a5(i){return"_zod"in i}function s5(i,n){if(a5(i))return d5(i,n);else return p5(i,n)}var $0=Symbol.for("vercel.ai.schema");function v0(i,{validate:n}={}){return{[$0]:!0,_type:void 0,[lo]:!0,jsonSchema:i,validate:n}}function iG(i){return typeof i==="object"&&i!==null&&$0 in i&&i[$0]===!0&&"jsonSchema"in i&&"validate"in i}function o6(i){return i==null?v0({properties:{},additionalProperties:!1}):iG(i)?i:s5(i)}var nG=Object.defineProperty,tG=(i,n)=>{for(var r in n)nG(i,r,{get:n[r],enumerable:!0})},rG="AI_NoOutputSpecifiedError",uG=`vercel.ai.error.${rG}`,cG=Symbol.for(uG),oG;oG=cG;var gG="AI_InvalidArgumentError",hG=`vercel.ai.error.${gG}`,_G=Symbol.for(hG),lG;lG=_G;var $G="AI_InvalidStreamPartError",wG=`vercel.ai.error.${$G}`,bG=Symbol.for(wG),vG;vG=bG;var fG="AI_InvalidToolInputError",OG=`vercel.ai.error.${fG}`,jG=Symbol.for(OG),UG;UG=jG;var NG="AI_MCPClientError",zG=`vercel.ai.error.${NG}`,WG=Symbol.for(zG),DG;DG=WG;var JG="AI_NoImageGeneratedError",EG=`vercel.ai.error.${JG}`,HG=Symbol.for(EG),GG;GG=HG;var l6="AI_NoObjectGeneratedError",$6=`vercel.ai.error.${l6}`,qG=Symbol.for($6),w6,g6=class extends xi{constructor({message:i="No object generated.",cause:n,text:r,response:u,usage:t,finishReason:c}){super({name:l6,message:i,cause:n});this[w6]=!0,this.text=r,this.response=u,this.usage=t,this.finishReason=c}static isInstance(i){return xi.hasMarker(i,$6)}};w6=qG;var XG="AI_NoOutputGeneratedError",LG=`vercel.ai.error.${XG}`,IG=Symbol.for(LG),YG;YG=IG;var QG="AI_NoSuchToolError",mG=`vercel.ai.error.${QG}`,SG=Symbol.for(mG),AG;AG=SG;var BG="AI_ToolCallRepairError",KG=`vercel.ai.error.${BG}`,VG=Symbol.for(KG),MG;MG=VG;var xG="AI_InvalidDataContentError",FG=`vercel.ai.error.${xG}`,PG=Symbol.for(FG),yG;yG=PG;var TG="AI_InvalidMessageRoleError",kG=`vercel.ai.error.${TG}`,CG=Symbol.for(kG),RG;RG=CG;var b6="AI_MessageConversionError",v6=`vercel.ai.error.${b6}`,ZG=Symbol.for(v6),f6,eG=class extends xi{constructor({originalMessage:i,message:n}){super({name:b6,message:n});this[f6]=!0,this.originalMessage=i}static isInstance(i){return xi.hasMarker(i,v6)}};f6=ZG;var pG="AI_DownloadError",dG=`vercel.ai.error.${pG}`,aG=Symbol.for(dG),sG;sG=aG;var iq="AI_RetryError",nq=`vercel.ai.error.${iq}`,tq=Symbol.for(nq),rq;rq=tq;var O6=o.union([o.string(),o.instanceof(Uint8Array),o.instanceof(ArrayBuffer),o.custom((i)=>{var n,r;return(r=(n=globalThis.Buffer)==null?void 0:n.isBuffer(i))!=null?r:!1},{message:"Must be a Buffer"})]);var cu=o.lazy(()=>o.union([o.null(),o.string(),o.number(),o.boolean(),o.record(o.string(),cu),o.array(cu)])),e=o.record(o.string(),o.record(o.string(),cu)),j6=o.object({type:o.literal("text"),text:o.string(),providerOptions:e.optional()}),uq=o.object({type:o.literal("image"),image:o.union([O6,o.instanceof(URL)]),mediaType:o.string().optional(),providerOptions:e.optional()}),U6=o.object({type:o.literal("file"),data:o.union([O6,o.instanceof(URL)]),filename:o.string().optional(),mediaType:o.string(),providerOptions:e.optional()}),cq=o.object({type:o.literal("reasoning"),text:o.string(),providerOptions:e.optional()}),oq=o.object({type:o.literal("tool-call"),toolCallId:o.string(),toolName:o.string(),input:o.unknown(),providerOptions:e.optional(),providerExecuted:o.boolean().optional()}),gq=o.discriminatedUnion("type",[o.object({type:o.literal("text"),value:o.string()}),o.object({type:o.literal("json"),value:cu}),o.object({type:o.literal("error-text"),value:o.string()}),o.object({type:o.literal("error-json"),value:cu}),o.object({type:o.literal("content"),value:o.array(o.union([o.object({type:o.literal("text"),text:o.string()}),o.object({type:o.literal("media"),data:o.string(),mediaType:o.string()})]))})]),N6=o.object({type:o.literal("tool-result"),toolCallId:o.string(),toolName:o.string(),output:gq,providerOptions:e.optional()}),hq=o.object({role:o.literal("system"),content:o.string(),providerOptions:e.optional()});var _q=o.object({role:o.literal("user"),content:o.union([o.string(),o.array(o.union([j6,uq,U6]))]),providerOptions:e.optional()});var lq=o.object({role:o.literal("assistant"),content:o.union([o.string(),o.array(o.union([j6,U6,cq,oq,N6]))]),providerOptions:e.optional()});var $q=o.object({role:o.literal("tool"),content:o.array(N6),providerOptions:e.optional()});var SA=o.union([hq,_q,lq,$q]);function h6({output:i,tool:n,errorMode:r}){if(r==="text")return{type:"error-text",value:au(i)};else if(r==="json")return{type:"error-json",value:_6(i)};if(n==null?void 0:n.toModelOutput)return n.toModelOutput(i);return typeof i==="string"?{type:"text",value:i}:{type:"json",value:_6(i)}}function _6(i){return i===void 0?null:i}var BA=Gn({prefix:"aitxt",size:24});var VA=class extends TransformStream{constructor(){super({transform(i,n){n.enqueue(`data: ${JSON.stringify(i)}\n\n`)},flush(i){i.enqueue(`data: [DONE]\n\n`)}})}};var FA=o.union([o.strictObject({type:o.literal("text-start"),id:o.string(),providerMetadata:e.optional()}),o.strictObject({type:o.literal("text-delta"),id:o.string(),delta:o.string(),providerMetadata:e.optional()}),o.strictObject({type:o.literal("text-end"),id:o.string(),providerMetadata:e.optional()}),o.strictObject({type:o.literal("error"),errorText:o.string()}),o.strictObject({type:o.literal("tool-input-start"),toolCallId:o.string(),toolName:o.string(),providerExecuted:o.boolean().optional(),dynamic:o.boolean().optional()}),o.strictObject({type:o.literal("tool-input-delta"),toolCallId:o.string(),inputTextDelta:o.string()}),o.strictObject({type:o.literal("tool-input-available"),toolCallId:o.string(),toolName:o.string(),input:o.unknown(),providerExecuted:o.boolean().optional(),providerMetadata:e.optional(),dynamic:o.boolean().optional()}),o.strictObject({type:o.literal("tool-input-error"),toolCallId:o.string(),toolName:o.string(),input:o.unknown(),providerExecuted:o.boolean().optional(),providerMetadata:e.optional(),dynamic:o.boolean().optional(),errorText:o.string()}),o.strictObject({type:o.literal("tool-output-available"),toolCallId:o.string(),output:o.unknown(),providerExecuted:o.boolean().optional(),dynamic:o.boolean().optional(),preliminary:o.boolean().optional()}),o.strictObject({type:o.literal("tool-output-error"),toolCallId:o.string(),errorText:o.string(),providerExecuted:o.boolean().optional(),dynamic:o.boolean().optional()}),o.strictObject({type:o.literal("reasoning"),text:o.string(),providerMetadata:e.optional()}),o.strictObject({type:o.literal("reasoning-start"),id:o.string(),providerMetadata:e.optional()}),o.strictObject({type:o.literal("reasoning-delta"),id:o.string(),delta:o.string(),providerMetadata:e.optional()}),o.strictObject({type:o.literal("reasoning-end"),id:o.string(),providerMetadata:e.optional()}),o.strictObject({type:o.literal("reasoning-part-finish")}),o.strictObject({type:o.literal("source-url"),sourceId:o.string(),url:o.string(),title:o.string().optional(),providerMetadata:e.optional()}),o.strictObject({type:o.literal("source-document"),sourceId:o.string(),mediaType:o.string(),title:o.string(),filename:o.string().optional(),providerMetadata:e.optional()}),o.strictObject({type:o.literal("file"),url:o.string(),mediaType:o.string(),providerMetadata:e.optional()}),o.strictObject({type:o.string().startsWith("data-"),id:o.string().optional(),data:o.unknown(),transient:o.boolean().optional()}),o.strictObject({type:o.literal("start-step")}),o.strictObject({type:o.literal("finish-step")}),o.strictObject({type:o.literal("start"),messageId:o.string().optional(),messageMetadata:o.unknown().optional()}),o.strictObject({type:o.literal("finish"),messageMetadata:o.unknown().optional()}),o.strictObject({type:o.literal("abort")}),o.strictObject({type:o.literal("message-metadata"),messageMetadata:o.unknown()})]);function wq(i){return i.type.startsWith("data-")}function z6(i,n){if(i===void 0&&n===void 0)return;if(i===void 0)return n;if(n===void 0)return i;let r={...i};for(let u in n)if(Object.prototype.hasOwnProperty.call(n,u)){let t=n[u];if(t===void 0)continue;let c=u in i?i[u]:void 0,g=t!==null&&typeof t==="object"&&!Array.isArray(t)&&!(t instanceof Date)&&!(t instanceof RegExp),h=c!==null&&c!==void 0&&typeof c==="object"&&!Array.isArray(c)&&!(c instanceof Date)&&!(c instanceof RegExp);if(g&&h)r[u]=z6(c,t);else r[u]=t}return r}function bq(i){let n=["ROOT"],r=-1,u=null;function t(_,l,$){switch(_){case\'"\':{r=l,n.pop(),n.push($),n.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=l,u=l,n.pop(),n.push($),n.push("INSIDE_LITERAL");break}case"-":{n.pop(),n.push($),n.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=l,n.pop(),n.push($),n.push("INSIDE_NUMBER");break}case"{":{r=l,n.pop(),n.push($),n.push("INSIDE_OBJECT_START");break}case"[":{r=l,n.pop(),n.push($),n.push("INSIDE_ARRAY_START");break}}}function c(_,l){switch(_){case",":{n.pop(),n.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=l,n.pop();break}}}function g(_,l){switch(_){case",":{n.pop(),n.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=l,n.pop();break}}}for(let _=0;_<i.length;_++){let l=i[_];switch(n[n.length-1]){case"ROOT":t(l,_,"FINISH");break;case"INSIDE_OBJECT_START":{switch(l){case\'"\':{n.pop(),n.push("INSIDE_OBJECT_KEY");break}case"}":{r=_,n.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(l){case\'"\':{n.pop(),n.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(l){case\'"\':{n.pop(),n.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(l){case":":{n.pop(),n.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{t(l,_,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{c(l,_);break}case"INSIDE_STRING":{switch(l){case\'"\':{n.pop(),r=_;break}case"\\\\":{n.push("INSIDE_STRING_ESCAPE");break}default:r=_}break}case"INSIDE_ARRAY_START":{switch(l){case"]":{r=_,n.pop();break}default:{r=_,t(l,_,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(l){case",":{n.pop(),n.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=_,n.pop();break}default:{r=_;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{t(l,_,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{n.pop(),r=_;break}case"INSIDE_NUMBER":{switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=_;break}case"e":case"E":case"-":case".":break;case",":{if(n.pop(),n[n.length-1]==="INSIDE_ARRAY_AFTER_VALUE")g(l,_);if(n[n.length-1]==="INSIDE_OBJECT_AFTER_VALUE")c(l,_);break}case"}":{if(n.pop(),n[n.length-1]==="INSIDE_OBJECT_AFTER_VALUE")c(l,_);break}case"]":{if(n.pop(),n[n.length-1]==="INSIDE_ARRAY_AFTER_VALUE")g(l,_);break}default:{n.pop();break}}break}case"INSIDE_LITERAL":{let w=i.substring(u,_+1);if(!"false".startsWith(w)&&!"true".startsWith(w)&&!"null".startsWith(w)){if(n.pop(),n[n.length-1]==="INSIDE_OBJECT_AFTER_VALUE")c(l,_);else if(n[n.length-1]==="INSIDE_ARRAY_AFTER_VALUE")g(l,_)}else r=_;break}}}let h=i.slice(0,r+1);for(let _=n.length-1;_>=0;_--)switch(n[_]){case"INSIDE_STRING":{h+=\'"\';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{h+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{h+="]";break}case"INSIDE_LITERAL":{let $=i.substring(u,i.length);if("true".startsWith($))h+="true".slice($.length);else if("false".startsWith($))h+="false".slice($.length);else if("null".startsWith($))h+="null".slice($.length)}}return h}async function W6(i){if(i===void 0)return{value:void 0,state:"undefined-input"};let n=await uu({text:i});if(n.success)return{value:n.value,state:"successful-parse"};if(n=await uu({text:bq(i)}),n.success)return{value:n.value,state:"repaired-parse"};return{value:void 0,state:"failed-parse"}}function qn(i){return i.type.startsWith("tool-")}function vq(i){return i.type==="dynamic-tool"}function fq(i){return qn(i)||vq(i)}function $t(i){return i.type.split("-").slice(1).join("-")}function Oq({lastMessage:i,messageId:n}){return{message:(i==null?void 0:i.role)==="assistant"?i:{id:n,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function jq({stream:i,messageMetadataSchema:n,dataPartSchemas:r,runUpdateMessageJob:u,onError:t,onToolCall:c,onData:g}){return i.pipeThrough(new TransformStream({async transform(h,_){await u(async({state:l,write:$})=>{var w,b,v,f;function U(O){let E=l.message.parts.filter(qn).find((X)=>X.toolCallId===O);if(E==null)throw new Error("tool-output-error must be preceded by a tool-input-available");return E}function z(O){let E=l.message.parts.filter((X)=>X.type==="dynamic-tool").find((X)=>X.toolCallId===O);if(E==null)throw new Error("tool-output-error must be preceded by a tool-input-available");return E}function J(O){var W;let E=l.message.parts.find((Y)=>qn(Y)&&Y.toolCallId===O.toolCallId),X=O,H=E;if(E!=null){if(E.state=O.state,H.input=X.input,H.output=X.output,H.errorText=X.errorText,H.rawInput=X.rawInput,H.preliminary=X.preliminary,H.providerExecuted=(W=X.providerExecuted)!=null?W:E.providerExecuted,X.providerMetadata!=null&&E.state==="input-available")E.callProviderMetadata=X.providerMetadata}else l.message.parts.push({type:`tool-${O.toolName}`,toolCallId:O.toolCallId,state:O.state,input:X.input,output:X.output,rawInput:X.rawInput,errorText:X.errorText,providerExecuted:X.providerExecuted,preliminary:X.preliminary,...X.providerMetadata!=null?{callProviderMetadata:X.providerMetadata}:{}})}function N(O){var W;let E=l.message.parts.find((Y)=>Y.type==="dynamic-tool"&&Y.toolCallId===O.toolCallId),X=O,H=E;if(E!=null){if(E.state=O.state,H.toolName=O.toolName,H.input=X.input,H.output=X.output,H.errorText=X.errorText,H.rawInput=(W=X.rawInput)!=null?W:H.rawInput,H.preliminary=X.preliminary,X.providerMetadata!=null&&E.state==="input-available")E.callProviderMetadata=X.providerMetadata}else l.message.parts.push({type:"dynamic-tool",toolName:O.toolName,toolCallId:O.toolCallId,state:O.state,input:X.input,output:X.output,errorText:X.errorText,preliminary:X.preliminary,...X.providerMetadata!=null?{callProviderMetadata:X.providerMetadata}:{}})}async function j(O){if(O!=null){let W=l.message.metadata!=null?z6(l.message.metadata,O):O;if(n!=null)await b0({value:W,schema:n});l.message.metadata=W}}switch(h.type){case"text-start":{let O={type:"text",text:"",providerMetadata:h.providerMetadata,state:"streaming"};l.activeTextParts[h.id]=O,l.message.parts.push(O),$();break}case"text-delta":{let O=l.activeTextParts[h.id];O.text+=h.delta,O.providerMetadata=(w=h.providerMetadata)!=null?w:O.providerMetadata,$();break}case"text-end":{let O=l.activeTextParts[h.id];O.state="done",O.providerMetadata=(b=h.providerMetadata)!=null?b:O.providerMetadata,delete l.activeTextParts[h.id],$();break}case"reasoning-start":{let O={type:"reasoning",text:"",providerMetadata:h.providerMetadata,state:"streaming"};l.activeReasoningParts[h.id]=O,l.message.parts.push(O),$();break}case"reasoning-delta":{let O=l.activeReasoningParts[h.id];O.text+=h.delta,O.providerMetadata=(v=h.providerMetadata)!=null?v:O.providerMetadata,$();break}case"reasoning-end":{let O=l.activeReasoningParts[h.id];O.providerMetadata=(f=h.providerMetadata)!=null?f:O.providerMetadata,O.state="done",delete l.activeReasoningParts[h.id],$();break}case"file":{l.message.parts.push({type:"file",mediaType:h.mediaType,url:h.url}),$();break}case"source-url":{l.message.parts.push({type:"source-url",sourceId:h.sourceId,url:h.url,title:h.title,providerMetadata:h.providerMetadata}),$();break}case"source-document":{l.message.parts.push({type:"source-document",sourceId:h.sourceId,mediaType:h.mediaType,title:h.title,filename:h.filename,providerMetadata:h.providerMetadata}),$();break}case"tool-input-start":{let O=l.message.parts.filter(qn);if(l.partialToolCalls[h.toolCallId]={text:"",toolName:h.toolName,index:O.length,dynamic:h.dynamic},h.dynamic)N({toolCallId:h.toolCallId,toolName:h.toolName,state:"input-streaming",input:void 0});else J({toolCallId:h.toolCallId,toolName:h.toolName,state:"input-streaming",input:void 0,providerExecuted:h.providerExecuted});$();break}case"tool-input-delta":{let O=l.partialToolCalls[h.toolCallId];O.text+=h.inputTextDelta;let{value:W}=await W6(O.text);if(O.dynamic)N({toolCallId:h.toolCallId,toolName:O.toolName,state:"input-streaming",input:W});else J({toolCallId:h.toolCallId,toolName:O.toolName,state:"input-streaming",input:W});$();break}case"tool-input-available":{if(h.dynamic)N({toolCallId:h.toolCallId,toolName:h.toolName,state:"input-available",input:h.input,providerMetadata:h.providerMetadata});else J({toolCallId:h.toolCallId,toolName:h.toolName,state:"input-available",input:h.input,providerExecuted:h.providerExecuted,providerMetadata:h.providerMetadata});if($(),c&&!h.providerExecuted)await c({toolCall:h});break}case"tool-input-error":{if(h.dynamic)N({toolCallId:h.toolCallId,toolName:h.toolName,state:"output-error",input:h.input,errorText:h.errorText,providerMetadata:h.providerMetadata});else J({toolCallId:h.toolCallId,toolName:h.toolName,state:"output-error",input:void 0,rawInput:h.input,errorText:h.errorText,providerExecuted:h.providerExecuted,providerMetadata:h.providerMetadata});$();break}case"tool-output-available":{if(h.dynamic){let O=z(h.toolCallId);N({toolCallId:h.toolCallId,toolName:O.toolName,state:"output-available",input:O.input,output:h.output,preliminary:h.preliminary})}else{let O=U(h.toolCallId);J({toolCallId:h.toolCallId,toolName:$t(O),state:"output-available",input:O.input,output:h.output,providerExecuted:h.providerExecuted,preliminary:h.preliminary})}$();break}case"tool-output-error":{if(h.dynamic){let O=z(h.toolCallId);N({toolCallId:h.toolCallId,toolName:O.toolName,state:"output-error",input:O.input,errorText:h.errorText})}else{let O=U(h.toolCallId);J({toolCallId:h.toolCallId,toolName:$t(O),state:"output-error",input:O.input,rawInput:O.rawInput,errorText:h.errorText})}$();break}case"start-step":{l.message.parts.push({type:"step-start"});break}case"finish-step":{l.activeTextParts={},l.activeReasoningParts={};break}case"start":{if(h.messageId!=null)l.message.id=h.messageId;if(await j(h.messageMetadata),h.messageId!=null||h.messageMetadata!=null)$();break}case"finish":{if(await j(h.messageMetadata),h.messageMetadata!=null)$();break}case"message-metadata":{if(await j(h.messageMetadata),h.messageMetadata!=null)$();break}case"error":{t==null||t(new Error(h.errorText));break}default:if(wq(h)){if((r==null?void 0:r[h.type])!=null)await b0({value:h.data,schema:r[h.type]});let O=h;if(O.transient){g==null||g(O);break}let W=O.id!=null?l.message.parts.find((E)=>O.type===E.type&&O.id===E.id):void 0;if(W!=null)W.data=O.data;else l.message.parts.push(O);g==null||g(O),$()}}_.enqueue(h)})}}))}function Uq({messageId:i,originalMessages:n=[],onFinish:r,onError:u,stream:t}){let c=n==null?void 0:n[n.length-1];if((c==null?void 0:c.role)!=="assistant")c=void 0;else i=c.id;let g=!1,h=t.pipeThrough(new TransformStream({transform(b,v){if(b.type==="start"){let f=b;if(f.messageId==null&&i!=null)f.messageId=i}if(b.type==="abort")g=!0;v.enqueue(b)}}));if(r==null)return h;let _=Oq({lastMessage:c?structuredClone(c):void 0,messageId:i!=null?i:""}),l=async(b)=>{await b({state:_,write:()=>{}})},$=!1,w=async()=>{if($||!r)return;$=!0;let b=_.message.id===(c==null?void 0:c.id);await r({isAborted:g,isContinuation:b,responseMessage:_.message,messages:[...b?n.slice(0,-1):n,_.message]})};return jq({stream:h,runUpdateMessageJob:l,onError:u}).pipeThrough(new TransformStream({transform(b,v){v.enqueue(b)},async cancel(){await w()},async flush(){await w()}}))}var yA=Gn({prefix:"aitxt",size:24});function D6(i,n){let r=[];if(n==null?void 0:n.ignoreIncompleteToolCalls)i=i.map((t)=>({...t,parts:t.parts.filter((c)=>!fq(c)||c.state!=="input-streaming"&&c.state!=="input-available")}));for(let t of i)switch(t.role){case"system":{let c=t.parts.filter((h)=>h.type==="text"),g=c.reduce((h,_)=>{if(_.providerMetadata!=null)return{...h,..._.providerMetadata};return h},{});r.push({role:"system",content:c.map((h)=>h.text).join(""),...Object.keys(g).length>0?{providerOptions:g}:{}});break}case"user":{r.push({role:"user",content:t.parts.filter((c)=>c.type==="text"||c.type==="file").map((c)=>{switch(c.type){case"text":return{type:"text",text:c.text,...c.providerMetadata!=null?{providerOptions:c.providerMetadata}:{}};case"file":return{type:"file",mediaType:c.mediaType,filename:c.filename,data:c.url,...c.providerMetadata!=null?{providerOptions:c.providerMetadata}:{}};default:return c}})});break}case"assistant":{if(t.parts!=null){let c=function(){var h,_;if(g.length===0)return;let l=[];for(let w of g)if(w.type==="text")l.push({type:"text",text:w.text,...w.providerMetadata!=null?{providerOptions:w.providerMetadata}:{}});else if(w.type==="file")l.push({type:"file",mediaType:w.mediaType,filename:w.filename,data:w.url});else if(w.type==="reasoning")l.push({type:"reasoning",text:w.text,providerOptions:w.providerMetadata});else if(w.type==="dynamic-tool"){let b=w.toolName;if(w.state!=="input-streaming")l.push({type:"tool-call",toolCallId:w.toolCallId,toolName:b,input:w.input,...w.callProviderMetadata!=null?{providerOptions:w.callProviderMetadata}:{}})}else if(qn(w)){let b=$t(w);if(w.state!=="input-streaming"){if(l.push({type:"tool-call",toolCallId:w.toolCallId,toolName:b,input:w.state==="output-error"?(h=w.input)!=null?h:w.rawInput:w.input,providerExecuted:w.providerExecuted,...w.callProviderMetadata!=null?{providerOptions:w.callProviderMetadata}:{}}),w.providerExecuted===!0&&(w.state==="output-available"||w.state==="output-error"))l.push({type:"tool-result",toolCallId:w.toolCallId,toolName:b,output:h6({output:w.state==="output-error"?w.errorText:w.output,tool:(_=n==null?void 0:n.tools)==null?void 0:_[b],errorMode:w.state==="output-error"?"json":"none"})})}}else throw new Error(`Unsupported part: ${w}`);r.push({role:"assistant",content:l});let $=g.filter((w)=>qn(w)&&w.providerExecuted!==!0||w.type==="dynamic-tool");if($.length>0)r.push({role:"tool",content:$.map((w)=>{var b;switch(w.state){case"output-error":case"output-available":{let v=w.type==="dynamic-tool"?w.toolName:$t(w);return{type:"tool-result",toolCallId:w.toolCallId,toolName:v,output:h6({output:w.state==="output-error"?w.errorText:w.output,tool:(b=n==null?void 0:n.tools)==null?void 0:b[v],errorMode:w.state==="output-error"?"text":"none"})}}default:return null}}).filter((w)=>w!=null)});g=[]};var u=c;let g=[];for(let h of t.parts)if(h.type==="text"||h.type==="reasoning"||h.type==="file"||h.type==="dynamic-tool"||qn(h))g.push(h);else if(h.type==="step-start")c();c();break}break}default:{let c=t.role;throw new eG({originalMessage:t,message:`Unsupported role: ${c}`})}}return r}var kA=Gn({prefix:"aiobj",size:24});var RA=Gn({prefix:"aiobj",size:24});var Nq={};tG(Nq,{object:()=>Wq,text:()=>zq});var zq=()=>({type:"text",responseFormat:{type:"text"},async parsePartial({text:i}){return{partial:i}},async parseOutput({text:i}){return i}}),Wq=({schema:i})=>{let n=o6(i);return{type:"object",responseFormat:{type:"json",schema:n.jsonSchema},async parsePartial({text:r}){let u=await W6(r);switch(u.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:u.value};default:{let t=u.state;throw new Error(`Unsupported parse state: ${t}`)}}},async parseOutput({text:r},u){let t=await uu({text:r});if(!t.success)throw new g6({message:"No object generated: could not parse the response.",cause:t.error,text:r,response:u.response,usage:u.usage,finishReason:u.finishReason});let c=await $o({value:t.value,schema:n});if(!c.success)throw new g6({message:"No object generated: response did not match schema.",cause:c.error,text:r,response:u.response,usage:u.usage,finishReason:u.finishReason});return c.value}}};var Dq="AI_NoSuchProviderError",Jq=`vercel.ai.error.${Dq}`,Eq=Symbol.for(Jq),Hq;Hq=Eq;var Gq=o.looseObject({name:o.string(),version:o.string()}),f0=o.looseObject({_meta:o.optional(o.object({}).loose())}),ou=f0,qq=o.object({method:o.string(),params:o.optional(f0)}),Xq=o.looseObject({experimental:o.optional(o.object({}).loose()),logging:o.optional(o.object({}).loose()),prompts:o.optional(o.looseObject({listChanged:o.optional(o.boolean())})),resources:o.optional(o.looseObject({subscribe:o.optional(o.boolean()),listChanged:o.optional(o.boolean())})),tools:o.optional(o.looseObject({listChanged:o.optional(o.boolean())}))}),dA=ou.extend({protocolVersion:o.string(),capabilities:Xq,serverInfo:Gq,instructions:o.optional(o.string())}),Lq=ou.extend({nextCursor:o.optional(o.string())}),Iq=o.object({name:o.string(),description:o.optional(o.string()),inputSchema:o.object({type:o.literal("object"),properties:o.optional(o.object({}).loose())}).loose()}).loose(),aA=Lq.extend({tools:o.array(Iq)}),Yq=o.object({type:o.literal("text"),text:o.string()}).loose(),Qq=o.object({type:o.literal("image"),data:o.base64(),mimeType:o.string()}).loose(),J6=o.object({uri:o.string(),mimeType:o.optional(o.string())}).loose(),mq=J6.extend({text:o.string()}),Sq=J6.extend({blob:o.base64()}),Aq=o.object({type:o.literal("resource"),resource:o.union([mq,Sq])}).loose(),sA=ou.extend({content:o.array(o.union([Yq,Qq,Aq])),isError:o.boolean().default(!1).optional()}).or(ou.extend({toolResult:o.unknown()})),wo="2.0",Bq=o.object({jsonrpc:o.literal(wo),id:o.union([o.string(),o.number().int()])}).merge(qq).strict(),Kq=o.object({jsonrpc:o.literal(wo),id:o.union([o.string(),o.number().int()]),result:ou}).strict(),Vq=o.object({jsonrpc:o.literal(wo),id:o.union([o.string(),o.number().int()]),error:o.object({code:o.number().int(),message:o.string(),data:o.optional(o.unknown())})}).strict(),Mq=o.object({jsonrpc:o.literal(wo)}).merge(o.object({method:o.string(),params:o.optional(f0)})).strict(),i8=o.union([Bq,Mq,Kq,Vq]);var xq=o.object({type:o.literal("text"),text:o.string(),state:o.enum(["streaming","done"]).optional(),providerMetadata:e.optional()}),Fq=o.object({type:o.literal("reasoning"),text:o.string(),state:o.enum(["streaming","done"]).optional(),providerMetadata:e.optional()}),Pq=o.object({type:o.literal("source-url"),sourceId:o.string(),url:o.string(),title:o.string().optional(),providerMetadata:e.optional()}),yq=o.object({type:o.literal("source-document"),sourceId:o.string(),mediaType:o.string(),title:o.string(),filename:o.string().optional(),providerMetadata:e.optional()}),Tq=o.object({type:o.literal("file"),mediaType:o.string(),filename:o.string().optional(),url:o.string(),providerMetadata:e.optional()}),kq=o.object({type:o.literal("step-start")}),Cq=o.object({type:o.string().startsWith("data-"),id:o.string().optional(),data:o.unknown()}),Rq=[o.object({type:o.literal("dynamic-tool"),toolName:o.string(),toolCallId:o.string(),state:o.literal("input-streaming"),input:o.unknown().optional(),output:o.never().optional(),errorText:o.never().optional()}),o.object({type:o.literal("dynamic-tool"),toolName:o.string(),toolCallId:o.string(),state:o.literal("input-available"),input:o.unknown(),output:o.never().optional(),errorText:o.never().optional(),callProviderMetadata:e.optional()}),o.object({type:o.literal("dynamic-tool"),toolName:o.string(),toolCallId:o.string(),state:o.literal("output-available"),input:o.unknown(),output:o.unknown(),errorText:o.never().optional(),callProviderMetadata:e.optional(),preliminary:o.boolean().optional()}),o.object({type:o.literal("dynamic-tool"),toolName:o.string(),toolCallId:o.string(),state:o.literal("output-error"),input:o.unknown(),output:o.never().optional(),errorText:o.string(),callProviderMetadata:e.optional()})],Zq=[o.object({type:o.string().startsWith("tool-"),toolCallId:o.string(),state:o.literal("input-streaming"),input:o.unknown().optional(),output:o.never().optional(),errorText:o.never().optional()}),o.object({type:o.string().startsWith("tool-"),toolCallId:o.string(),state:o.literal("input-available"),input:o.unknown(),output:o.never().optional(),errorText:o.never().optional(),callProviderMetadata:e.optional()}),o.object({type:o.string().startsWith("tool-"),toolCallId:o.string(),state:o.literal("output-available"),input:o.unknown(),output:o.unknown(),errorText:o.never().optional(),callProviderMetadata:e.optional(),preliminary:o.boolean().optional()}),o.object({type:o.string().startsWith("tool-"),toolCallId:o.string(),state:o.literal("output-error"),input:o.unknown(),output:o.never().optional(),errorText:o.string(),callProviderMetadata:e.optional()})],t8=o.object({id:o.string(),role:o.enum(["system","user","assistant"]),metadata:o.unknown().optional(),parts:o.array(o.union([xq,Fq,Pq,yq,Tq,kq,Cq,...Rq,...Zq]))});function E6({execute:i,onError:n=w0,originalMessages:r,onFinish:u,generateId:t=n6}){let c,g=[],h=new ReadableStream({start($){c=$}});function _($){try{c.enqueue($)}catch(w){}}try{let $=i({writer:{write(w){_(w)},merge(w){g.push((async()=>{let b=w.getReader();while(!0){let{done:v,value:f}=await b.read();if(v)break;_(f)}})().catch((b)=>{_({type:"error",errorText:n(b)})}))},onError:n}});if($)g.push($.catch((w)=>{_({type:"error",errorText:n(w)})}))}catch($){_({type:"error",errorText:n($)})}return new Promise(async($)=>{while(g.length>0)await g.shift();$()}).finally(()=>{try{c.close()}catch($){}}),Uq({stream:h,messageId:t(),originalMessages:r,onFinish:u,onError:n})}function eq(i){return typeof i=="object"&&!!i&&typeof i[Symbol.asyncIterator]=="function"}var pq=class extends Error{constructor(i,n){super(i),this.response=n}};var _8=Object.freeze({withContext(i,n){let r={};for(let u of Object.keys(i))r[u]=i[u].withContext(n);return r},with(i,n){let r={};for(let u of Object.keys(i))r[u]=i[u].withContext(n);return r},async withApproval(i){let n={};for(let[t,c]of Object.entries(i.tools)){let g=c.execute;n[t]={...c,execute:async(h,_)=>c.autoApprove&&g&&await c.autoApprove(h)?g(h,_):{type:"tool-approval",outcome:"pending"}}}let r=i.messages[i.messages.length-1];if(!r?.parts)return n;let u=[];for(let t of r.parts){if(!qn(t))continue;let c=$t(t),g=i.tools[c];g&&t.state==="output-available"&&g.execute&&dq(t.output)&&t.output.outcome==="approved"&&u.push({toolName:$t(t),tool:g,input:t.input,toolCallId:t.toolCallId})}if(u.length>0){let t=E6({execute:async({writer:c})=>{c.write({type:"start-step"}),await Promise.all(u.map(async(g)=>{if(!g.tool.execute)throw Error("Tool does not support execute.");c.write({type:"tool-input-available",toolCallId:g.toolCallId,toolName:g.toolName,input:g.input});try{let h=await g.tool.execute(g.input,{toolCallId:g.toolCallId,messages:D6(i.messages,{tools:i.tools}),abortSignal:i.abortSignal});if(eq(h))for await(let _ of h)c.write({type:"tool-output-available",toolCallId:g.toolCallId,output:_,preliminary:!0});c.write({type:"tool-output-available",toolCallId:g.toolCallId,output:h})}catch(h){c.write({type:"tool-output-error",toolCallId:g.toolCallId,errorText:h instanceof Error?h.message:String(h)})}})),c.write({type:"finish"})}});throw new pq("Executing tools",t)}return n},prefix(i,n){let r={};for(let[u,t]of Object.entries(i))r[`${n}${u}`]=t;return r}});function dq(i){return typeof i=="object"&&!!i&&"type"in i&&i.type==="tool-approval"}var H6=class extends Error{constructor(i,n){super(i),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function O0(i){}function aq(i){if(typeof i=="function")throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:n=O0,onError:r=O0,onRetry:u=O0,onComment:t}=i,c="",g=!0,h,_="",l="";function $(U){let z=g?U.replace(/^\\xEF\\xBB\\xBF/,""):U,[J,N]=sq(`${c}${z}`);for(let j of J)w(j);c=N,g=!1}function w(U){if(U===""){v();return}if(U.startsWith(":")){t&&t(U.slice(U.startsWith(": ")?2:1));return}let z=U.indexOf(":");if(z!==-1){let J=U.slice(0,z),N=U[z+1]===" "?2:1,j=U.slice(z+N);b(J,j,U);return}b(U,"",U)}function b(U,z,J){switch(U){case"event":l=z;break;case"data":_=`${_}${z}\n`;break;case"id":h=z.includes("\\x00")?void 0:z;break;case"retry":/^\\d+$/.test(z)?u(parseInt(z,10)):r(new H6(`Invalid \\`retry\\` value: "${z}"`,{type:"invalid-retry",value:z,line:J}));break;default:r(new H6(`Unknown field "${U.length>20?`${U.slice(0,20)}…`:U}"`,{type:"unknown-field",field:U,value:z,line:J}));break}}function v(){_.length>0&&n({id:h,event:l||void 0,data:_.endsWith(`\n`)?_.slice(0,-1):_}),h=void 0,_="",l=""}function f(U={}){c&&U.consume&&w(c),g=!0,h=void 0,_="",l="",c=""}return{feed:$,reset:f}}function sq(i){let n=[],r="",u=0;for(;u<i.length;){let t=i.indexOf("\\r",u),c=i.indexOf(`\n`,u),g=-1;if(t!==-1&&c!==-1?g=Math.min(t,c):t===-1?c!==-1&&(g=c):g=t===i.length-1?-1:t,g===-1){r=i.slice(u);break}else{let h=i.slice(u,g);n.push(h),u=g+1,i[u-1]==="\\r"&&i[u]===`\n`&&u++}}return[n,r]}var iX=class extends TransformStream{constructor({onError:i,onRetry:n,onComment:r}={}){let u;super({start(t){u=aq({onEvent:(c)=>{t.enqueue(c)},onError(c){i==="terminate"?t.error(c):typeof i=="function"&&i(c)},onRetry:n,onComment:r})},transform(t){u.feed(t)}})}};var k6="vercel.ai.error",nX=Symbol.for(k6),C6,tX=class i extends Error{constructor({name:n,message:r,cause:u}){super(r),this[C6]=!0,this.name=n,this.cause=u}static isInstance(n){return i.hasMarker(n,k6)}static hasMarker(n,r){let u=Symbol.for(r);return typeof n=="object"&&!!n&&u in n&&typeof n[u]=="boolean"&&n[u]===!0}};C6=nX;var gi=tX,R6="AI_APICallError",Z6=`vercel.ai.error.${R6}`,rX=Symbol.for(Z6),e6,Pi=class extends gi{constructor({message:i,url:n,requestBodyValues:r,statusCode:u,responseHeaders:t,responseBody:c,cause:g,isRetryable:h=u!=null&&(u===408||u===409||u===429||u>=500),data:_}){super({name:R6,message:i,cause:g}),this[e6]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=u,this.responseHeaders=t,this.responseBody=c,this.isRetryable=h,this.data=_}static isInstance(i){return gi.hasMarker(i,Z6)}};e6=rX;var p6="AI_EmptyResponseBodyError",d6=`vercel.ai.error.${p6}`,uX=Symbol.for(d6),a6,cX=class extends gi{constructor({message:i="Empty response body"}={}){super({name:p6,message:i}),this[a6]=!0}static isInstance(i){return gi.hasMarker(i,d6)}};a6=uX;function s6(i){return i==null?"unknown error":typeof i=="string"?i:i instanceof Error?i.message:JSON.stringify(i)}var iO="AI_InvalidArgumentError",nO=`vercel.ai.error.${iO}`,oX=Symbol.for(nO),tO,rO=class extends gi{constructor({message:i,cause:n,argument:r}){super({name:iO,message:i,cause:n}),this[tO]=!0,this.argument=r}static isInstance(i){return gi.hasMarker(i,nO)}};tO=oX;var uO="AI_InvalidPromptError",cO=`vercel.ai.error.${uO}`,gX=Symbol.for(cO),oO,hX=class extends gi{constructor({prompt:i,message:n,cause:r}){super({name:uO,message:`Invalid prompt: ${n}`,cause:r}),this[oO]=!0,this.prompt=i}static isInstance(i){return gi.hasMarker(i,cO)}};oO=gX;var gO="AI_InvalidResponseDataError",hO=`vercel.ai.error.${gO}`,_X=Symbol.for(hO),_O,j0=class extends gi{constructor({data:i,message:n=`Invalid response data: ${JSON.stringify(i)}.`}){super({name:gO,message:n}),this[_O]=!0,this.data=i}static isInstance(i){return gi.hasMarker(i,hO)}};_O=_X;var lO="AI_JSONParseError",$O=`vercel.ai.error.${lO}`,lX=Symbol.for($O),wO,vo=class extends gi{constructor({text:i,cause:n}){super({name:lO,message:`JSON parsing failed: Text: ${i}.\nError message: ${s6(n)}`,cause:n}),this[wO]=!0,this.text=i}static isInstance(i){return gi.hasMarker(i,$O)}};wO=lX;var bO="AI_LoadAPIKeyError",vO=`vercel.ai.error.${bO}`,$X=Symbol.for(vO),fO,bo=class extends gi{constructor({message:i}){super({name:bO,message:i}),this[fO]=!0}static isInstance(i){return gi.hasMarker(i,vO)}};fO=$X;var OO="AI_NoSuchModelError",jO=`vercel.ai.error.${OO}`,wX=Symbol.for(jO),UO,U0=class extends gi{constructor({errorName:i=OO,modelId:n,modelType:r,message:u=`No such ${r}: ${n}`}){super({name:i,message:u}),this[UO]=!0,this.modelId=n,this.modelType=r}static isInstance(i){return gi.hasMarker(i,jO)}};UO=wX;var NO="AI_TooManyEmbeddingValuesForCallError",zO=`vercel.ai.error.${NO}`,bX=Symbol.for(zO),WO,DO=class extends gi{constructor(i){super({name:NO,message:`Too many values for a single embedding call. The ${i.provider} model "${i.modelId}" can only embed up to ${i.maxEmbeddingsPerCall} values per call, but ${i.values.length} values were provided.`}),this[WO]=!0,this.provider=i.provider,this.modelId=i.modelId,this.maxEmbeddingsPerCall=i.maxEmbeddingsPerCall,this.values=i.values}static isInstance(i){return gi.hasMarker(i,zO)}};WO=bX;var JO="AI_TypeValidationError",EO=`vercel.ai.error.${JO}`,vX=Symbol.for(EO),HO,fX=class i extends gi{constructor({value:n,cause:r}){super({name:JO,message:`Type validation failed: Value: ${JSON.stringify(n)}.\nError message: ${s6(r)}`,cause:r}),this[HO]=!0,this.value=n}static isInstance(n){return gi.hasMarker(n,EO)}static wrap({value:n,cause:r}){return i.isInstance(r)&&r.value===n?r:new i({value:n,cause:r})}};HO=vX;var hu=fX,GO="AI_UnsupportedFunctionalityError",qO=`vercel.ai.error.${GO}`,OX=Symbol.for(qO),XO,oi=class extends gi{constructor({functionality:i,message:n=`\'${i}\' functionality not supported.`}){super({name:GO,message:n}),this[XO]=!0,this.functionality=i}static isInstance(i){return gi.hasMarker(i,qO)}};XO=OX;function Ui(...i){return i.reduce((n,r)=>({...n,...r??{}}),{})}function $u(i){return Object.fromEntries([...i.headers])}function jX(i=globalThis){return i.window?"runtime/browser":i.navigator?.userAgent?`runtime/${i.navigator.userAgent.toLowerCase()}`:i.process?.versions?.node?`runtime/node.js/${i.process.version.substring(0)}`:i.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function UX(i){return Object.fromEntries(Object.entries(i).filter(([n,r])=>r!=null))}function wu(i,...n){let r=UX(i??{}),u=new Headers(r),t=u.get("user-agent")||"";return u.set("user-agent",[t,...n].filter(Boolean).join(" ")),Object.fromEntries(u)}var Qi=(({prefix:i,size:n=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:u="-"}={})=>{let t=()=>{let c=r.length,g=Array(n);for(let h=0;h<n;h++)g[h]=r[Math.random()*c|0];return g.join("")};if(i==null)return t;if(r.includes(u))throw new rO({argument:"separator",message:`The separator "${u}" must not be part of the alphabet "${r}".`});return()=>`${i}${u}${t()}`})();function N0(i){return(i instanceof Error||i instanceof DOMException)&&(i.name==="AbortError"||i.name==="ResponseAborted"||i.name==="TimeoutError")}var NX=["fetch failed","failed to fetch"];function zX({error:i,url:n,requestBodyValues:r}){if(N0(i))return i;if(i instanceof TypeError&&NX.includes(i.message.toLowerCase())){let u=i.cause;if(u!=null)return new Pi({message:`Cannot connect to API: ${u.message}`,cause:u,url:n,requestBodyValues:r,isRetryable:!0})}return i}var WX="3.0.10";function Oo({apiKey:i,environmentVariableName:n,apiKeyParameterName:r="apiKey",description:u}){if(typeof i=="string")return i;if(i!=null)throw new bo({message:`${u} API key must be a string.`});if(typeof process>"u")throw new bo({message:`${u} API key is missing. Pass it using the \'${r}\' parameter. Environment variables is not supported in this environment.`});if(i=process.env[n],i==null)throw new bo({message:`${u} API key is missing. Pass it using the \'${r}\' parameter or the ${n} environment variable.`});if(typeof i!="string")throw new bo({message:`${u} API key must be a string. The value of the ${n} environment variable is not a string.`});return i}function DX({settingValue:i,environmentVariableName:n}){if(typeof i=="string"||!(i!=null||typeof process>"u")&&(i=process.env[n],!(i==null||typeof i!="string")))return i}function JX(i){let[n,r=""]=i.toLowerCase().split("/");return{mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[r]??r}var EX=/"__proto__"\\s*:/,HX=/"constructor"\\s*:/;function GX(i){let n=JSON.parse(i);return typeof n!="object"||!n||EX.test(i)===!1&&HX.test(i)===!1?n:qX(n)}function qX(i){let n=[i];for(;n.length;){let r=n;n=[];for(let u of r){if(Object.prototype.hasOwnProperty.call(u,"__proto__")||Object.prototype.hasOwnProperty.call(u,"constructor")&&Object.prototype.hasOwnProperty.call(u.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let t in u){let c=u[t];c&&typeof c=="object"&&n.push(c)}}}return i}function W0(i){let{stackTraceLimit:n}=Error;Error.stackTraceLimit=0;try{return GX(i)}finally{Error.stackTraceLimit=n}}var z0=Symbol.for("vercel.ai.validator");function XX(i){return{[z0]:!0,validate:i}}function LX(i){return typeof i=="object"&&!!i&&z0 in i&&i[z0]===!0&&"validate"in i}function IX(i){return LX(i)?i:YX(i)}function YX(i){return XX(async(n)=>{let r=await i["~standard"].validate(n);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new hu({value:n,cause:r.issues})}})}async function QX({value:i,schema:n}){let r=await D0({value:i,schema:n});if(!r.success)throw hu.wrap({value:i,cause:r.error});return r.value}async function D0({value:i,schema:n}){let r=IX(n);try{if(r.validate==null)return{success:!0,value:i,rawValue:i};let u=await r.validate(i);return u.success?{success:!0,value:u.value,rawValue:i}:{success:!1,error:hu.wrap({value:i,cause:u.error}),rawValue:i}}catch(u){return{success:!1,error:hu.wrap({value:i,cause:u}),rawValue:i}}}async function mX({text:i,schema:n}){try{let r=W0(i);return n==null?r:QX({value:r,schema:n})}catch(r){throw vo.isInstance(r)||hu.isInstance(r)?r:new vo({text:i,cause:r})}}async function LO({text:i,schema:n}){try{let r=W0(i);return n==null?{success:!0,value:r,rawValue:r}:await D0({value:r,schema:n})}catch(r){return{success:!1,error:vo.isInstance(r)?r:new vo({text:i,cause:r}),rawValue:void 0}}}function G6(i){try{return W0(i),!0}catch{return!1}}function SX({stream:i,schema:n}){return i.pipeThrough(new TextDecoderStream).pipeThrough(new iX).pipeThrough(new TransformStream({async transform({data:r},u){r!=="[DONE]"&&u.enqueue(await LO({text:r,schema:n}))}}))}async function Hi({provider:i,providerOptions:n,schema:r}){if(n?.[i]==null)return;let u=await D0({value:n[i],schema:r});if(!u.success)throw new rO({argument:"providerOptions",message:`invalid ${i} provider options`,cause:u.error});return u.value}var AX=()=>globalThis.fetch,fi=async({url:i,headers:n,body:r,failedResponseHandler:u,successfulResponseHandler:t,abortSignal:c,fetch:g})=>IO({url:i,headers:{"Content-Type":"application/json",...n},body:{content:JSON.stringify(r),values:r},failedResponseHandler:u,successfulResponseHandler:t,abortSignal:c,fetch:g}),BX=async({url:i,headers:n,formData:r,failedResponseHandler:u,successfulResponseHandler:t,abortSignal:c,fetch:g})=>IO({url:i,headers:n,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:u,successfulResponseHandler:t,abortSignal:c,fetch:g}),IO=async({url:i,headers:n={},body:r,successfulResponseHandler:u,failedResponseHandler:t,abortSignal:c,fetch:g=AX()})=>{try{let h=await g(i,{method:"POST",headers:wu(n,`ai-sdk/provider-utils/${WX}`,jX()),body:r.content,signal:c}),_=$u(h);if(!h.ok){let l;try{l=await t({response:h,url:i,requestBodyValues:r.values})}catch($){throw N0($)||Pi.isInstance($)?$:new Pi({message:"Failed to process error response",cause:$,statusCode:h.status,url:i,responseHeaders:_,requestBodyValues:r.values})}throw l.value}try{return await u({response:h,url:i,requestBodyValues:r.values})}catch(l){throw l instanceof Error&&(N0(l)||Pi.isInstance(l))?l:new Pi({message:"Failed to process successful response",cause:l,statusCode:h.status,url:i,responseHeaders:_,requestBodyValues:r.values})}}catch(h){throw zX({error:h,url:i,requestBodyValues:r.values})}};function YO(i){return i}function yi({id:i,name:n,inputSchema:r}){return({execute:u,outputSchema:t,toModelOutput:c,onInputStart:g,onInputDelta:h,onInputAvailable:_,...l})=>YO({type:"provider-defined",id:i,name:n,args:l,inputSchema:r,outputSchema:t,execute:u,toModelOutput:c,onInputStart:g,onInputDelta:h,onInputAvailable:_})}function Pn({id:i,name:n,inputSchema:r,outputSchema:u}){return({execute:t,toModelOutput:c,onInputStart:g,onInputDelta:h,onInputAvailable:_,...l})=>YO({type:"provider-defined",id:i,name:n,args:l,inputSchema:r,outputSchema:u,execute:t,toModelOutput:c,onInputStart:g,onInputDelta:h,onInputAvailable:_})}async function _u(i){return typeof i=="function"&&(i=i()),Promise.resolve(i)}var bu=({errorSchema:i,errorToMessage:n,isRetryable:r})=>async({response:u,url:t,requestBodyValues:c})=>{let g=await u.text(),h=$u(u);if(g.trim()==="")return{responseHeaders:h,value:new Pi({message:u.statusText,url:t,requestBodyValues:c,statusCode:u.status,responseHeaders:h,responseBody:g,isRetryable:r?.(u)})};try{let _=await mX({text:g,schema:i});return{responseHeaders:h,value:new Pi({message:n(_),url:t,requestBodyValues:c,statusCode:u.status,responseHeaders:h,responseBody:g,data:_,isRetryable:r?.(u,_)})}}catch{return{responseHeaders:h,value:new Pi({message:u.statusText,url:t,requestBodyValues:c,statusCode:u.status,responseHeaders:h,responseBody:g,isRetryable:r?.(u)})}}},Vt=(i)=>async({response:n})=>{let r=$u(n);if(n.body==null)throw new cX({});return{responseHeaders:r,value:SX({stream:n.body,schema:i})}},Vi=(i)=>async({response:n,url:r,requestBodyValues:u})=>{let t=await n.text(),c=await LO({text:t,schema:i}),g=$u(n);if(!c.success)throw new Pi({message:"Invalid JSON response",cause:c.error,statusCode:n.status,responseHeaders:g,responseBody:t,url:r,requestBodyValues:u});return{responseHeaders:g,value:c.value,rawValue:c.rawValue}},KX=()=>async({response:i,url:n,requestBodyValues:r})=>{let u=$u(i);if(!i.body)throw new Pi({message:"Response body is empty",url:n,requestBodyValues:r,statusCode:i.status,responseHeaders:u,responseBody:void 0});try{let t=await i.arrayBuffer();return{responseHeaders:u,value:new Uint8Array(t)}}catch(t){throw new Pi({message:"Failed to read response as array buffer",url:n,requestBodyValues:r,statusCode:i.status,responseHeaders:u,responseBody:void 0,cause:t})}},{btoa:VX,atob:MX}=globalThis;function xX(i){let n=i.replace(/-/g,"+").replace(/_/g,"/"),r=MX(n);return Uint8Array.from(r,(u)=>u.codePointAt(0))}function FX(i){let n="";for(let r=0;r<i.length;r++)n+=String.fromCodePoint(i[r]);return VX(n)}function pi(i){return i instanceof Uint8Array?FX(i):i}function jo(i){return i?.replace(/\\/$/,"")}var PX="2.0.23",yX=o.object({type:o.literal("error"),error:o.object({type:o.string(),message:o.string()})}),q6=bu({errorSchema:yX,errorToMessage:(i)=>i.error.message}),X6=o.object({citations:o.object({enabled:o.boolean()}).optional(),title:o.string().optional(),context:o.string().optional()}),TX=o.object({sendReasoning:o.boolean().optional(),thinking:o.object({type:o.union([o.literal("enabled"),o.literal("disabled")]),budgetTokens:o.number().optional()}).optional(),disableParallelToolUse:o.boolean().optional(),cacheControl:o.object({type:o.literal("ephemeral"),ttl:o.union([o.literal("5m"),o.literal("1h")]).optional()}).optional()});function Fn(i){let n=i?.anthropic;return n?.cacheControl??n?.cache_control}var kX=o.object({maxCharacters:o.number().optional()}),CX=yi({id:"anthropic.text_editor_20250728",name:"str_replace_based_edit_tool",inputSchema:o.object({command:o.enum(["view","create","str_replace","insert"]),path:o.string(),file_text:o.string().optional(),insert_line:o.number().int().optional(),new_str:o.string().optional(),old_str:o.string().optional(),view_range:o.array(o.number().int()).optional()})}),RX=(i={})=>CX(i),ZX=o.object({maxUses:o.number().optional(),allowedDomains:o.array(o.string()).optional(),blockedDomains:o.array(o.string()).optional(),userLocation:o.object({type:o.literal("approximate"),city:o.string().optional(),region:o.string().optional(),country:o.string().optional(),timezone:o.string().optional()}).optional()}),QO=o.array(o.object({url:o.string(),title:o.string(),pageAge:o.string().nullable(),encryptedContent:o.string(),type:o.literal("web_search_result")})),eX=Pn({id:"anthropic.web_search_20250305",name:"web_search",inputSchema:o.object({query:o.string()}),outputSchema:QO}),pX=(i={})=>eX(i),dX=o.object({maxUses:o.number().optional(),allowedDomains:o.array(o.string()).optional(),blockedDomains:o.array(o.string()).optional(),citations:o.object({enabled:o.boolean()}).optional(),maxContentTokens:o.number().optional()}),mO=o.object({type:o.literal("web_fetch_result"),url:o.string(),content:o.object({type:o.literal("document"),title:o.string(),citations:o.object({enabled:o.boolean()}).optional(),source:o.union([o.object({type:o.literal("base64"),mediaType:o.literal("application/pdf"),data:o.string()}),o.object({type:o.literal("text"),mediaType:o.literal("text/plain"),data:o.string()})])}),retrievedAt:o.string().nullable()}),aX=Pn({id:"anthropic.web_fetch_20250910",name:"web_fetch",inputSchema:o.object({url:o.string()}),outputSchema:mO}),sX=(i={})=>aX(i);function iL({tools:i,toolChoice:n,disableParallelToolUse:r}){i=i?.length?i:void 0;let u=[],t=new Set;if(i==null)return{tools:void 0,toolChoice:void 0,toolWarnings:u,betas:t};let c=[];for(let h of i)switch(h.type){case"function":{let _=Fn(h.providerOptions);c.push({name:h.name,description:h.description,input_schema:h.inputSchema,cache_control:_});break}case"provider-defined":switch(h.id){case"anthropic.code_execution_20250522":t.add("code-execution-2025-05-22"),c.push({type:"code_execution_20250522",name:"code_execution"});break;case"anthropic.computer_20250124":t.add("computer-use-2025-01-24"),c.push({name:"computer",type:"computer_20250124",display_width_px:h.args.displayWidthPx,display_height_px:h.args.displayHeightPx,display_number:h.args.displayNumber});break;case"anthropic.computer_20241022":t.add("computer-use-2024-10-22"),c.push({name:"computer",type:"computer_20241022",display_width_px:h.args.displayWidthPx,display_height_px:h.args.displayHeightPx,display_number:h.args.displayNumber});break;case"anthropic.text_editor_20250124":t.add("computer-use-2025-01-24"),c.push({name:"str_replace_editor",type:"text_editor_20250124"});break;case"anthropic.text_editor_20241022":t.add("computer-use-2024-10-22"),c.push({name:"str_replace_editor",type:"text_editor_20241022"});break;case"anthropic.text_editor_20250429":t.add("computer-use-2025-01-24"),c.push({name:"str_replace_based_edit_tool",type:"text_editor_20250429"});break;case"anthropic.text_editor_20250728":{let _=kX.parse(h.args);c.push({name:"str_replace_based_edit_tool",type:"text_editor_20250728",max_characters:_.maxCharacters});break}case"anthropic.bash_20250124":t.add("computer-use-2025-01-24"),c.push({name:"bash",type:"bash_20250124"});break;case"anthropic.bash_20241022":t.add("computer-use-2024-10-22"),c.push({name:"bash",type:"bash_20241022"});break;case"anthropic.web_fetch_20250910":{t.add("web-fetch-2025-09-10");let _=dX.parse(h.args);c.push({type:"web_fetch_20250910",name:"web_fetch",max_uses:_.maxUses,allowed_domains:_.allowedDomains,blocked_domains:_.blockedDomains,citations:_.citations,max_content_tokens:_.maxContentTokens});break}case"anthropic.web_search_20250305":{let _=ZX.parse(h.args);c.push({type:"web_search_20250305",name:"web_search",max_uses:_.maxUses,allowed_domains:_.allowedDomains,blocked_domains:_.blockedDomains,user_location:_.userLocation});break}default:u.push({type:"unsupported-tool",tool:h});break}break;default:u.push({type:"unsupported-tool",tool:h});break}if(n==null)return{tools:c,toolChoice:r?{type:"auto",disable_parallel_tool_use:r}:void 0,toolWarnings:u,betas:t};let g=n.type;switch(g){case"auto":return{tools:c,toolChoice:{type:"auto",disable_parallel_tool_use:r},toolWarnings:u,betas:t};case"required":return{tools:c,toolChoice:{type:"any",disable_parallel_tool_use:r},toolWarnings:u,betas:t};case"none":return{tools:void 0,toolChoice:void 0,toolWarnings:u,betas:t};case"tool":return{tools:c,toolChoice:{type:"tool",name:n.toolName,disable_parallel_tool_use:r},toolWarnings:u,betas:t};default:throw new oi({functionality:`tool choice type: ${g}`})}}var SO=o.object({type:o.literal("code_execution_result"),stdout:o.string(),stderr:o.string(),return_code:o.number()}),nL=Pn({id:"anthropic.code_execution_20250522",name:"code_execution",inputSchema:o.object({code:o.string()}),outputSchema:SO}),tL=(i={})=>nL(i);function rL(i){if(typeof i=="string")return Buffer.from(i,"base64").toString("utf-8");if(i instanceof Uint8Array)return new TextDecoder().decode(i);throw i instanceof URL?new oi({functionality:"URL-based text documents are not supported for citations"}):new oi({functionality:`unsupported data type for text documents: ${typeof i}`})}async function uL({prompt:i,sendReasoning:n,warnings:r}){let u=new Set,t=cL(i),c,g=[];async function h(l){return(await Hi({provider:"anthropic",providerOptions:l,schema:X6}))?.citations?.enabled??!1}async function _(l){let $=await Hi({provider:"anthropic",providerOptions:l,schema:X6});return{title:$?.title,context:$?.context}}for(let l=0;l<t.length;l++){let $=t[l],w=l===t.length-1,b=$.type;switch(b){case"system":if(c!=null)throw new oi({functionality:"Multiple system messages that are separated by user/assistant messages"});c=$.messages.map(({content:v,providerOptions:f})=>({type:"text",text:v,cache_control:Fn(f)}));break;case"user":{let v=[];for(let f of $.messages){let{role:U,content:z}=f;switch(U){case"user":for(let J=0;J<z.length;J++){let N=z[J],j=J===z.length-1,O=Fn(N.providerOptions)??(j?Fn(f.providerOptions):void 0);switch(N.type){case"text":v.push({type:"text",text:N.text,cache_control:O});break;case"file":if(N.mediaType.startsWith("image/"))v.push({type:"image",source:N.data instanceof URL?{type:"url",url:N.data.toString()}:{type:"base64",media_type:N.mediaType==="image/*"?"image/jpeg":N.mediaType,data:pi(N.data)},cache_control:O});else if(N.mediaType==="application/pdf"){u.add("pdfs-2024-09-25");let W=await h(N.providerOptions),E=await _(N.providerOptions);v.push({type:"document",source:N.data instanceof URL?{type:"url",url:N.data.toString()}:{type:"base64",media_type:"application/pdf",data:pi(N.data)},title:E.title??N.filename,...E.context&&{context:E.context},...W&&{citations:{enabled:!0}},cache_control:O})}else if(N.mediaType==="text/plain"){let W=await h(N.providerOptions),E=await _(N.providerOptions);v.push({type:"document",source:N.data instanceof URL?{type:"url",url:N.data.toString()}:{type:"text",media_type:"text/plain",data:rL(N.data)},title:E.title??N.filename,...E.context&&{context:E.context},...W&&{citations:{enabled:!0}},cache_control:O})}else throw new oi({functionality:`media type: ${N.mediaType}`});break}}break;case"tool":for(let J=0;J<z.length;J++){let N=z[J],j=J===z.length-1,O=Fn(N.providerOptions)??(j?Fn(f.providerOptions):void 0),W=N.output,E;switch(W.type){case"content":E=W.value.map((X)=>{switch(X.type){case"text":return{type:"text",text:X.text,cache_control:void 0};case"media":if(X.mediaType.startsWith("image/"))return{type:"image",source:{type:"base64",media_type:X.mediaType,data:X.data},cache_control:void 0};throw new oi({functionality:`media type: ${X.mediaType}`})}});break;case"text":case"error-text":E=W.value;break;case"json":case"error-json":default:E=JSON.stringify(W.value);break}v.push({type:"tool_result",tool_use_id:N.toolCallId,content:E,is_error:W.type==="error-text"||W.type==="error-json"?!0:void 0,cache_control:O})}break;default:throw Error(`Unsupported role: ${U}`)}}g.push({role:"user",content:v});break}case"assistant":{let v=[];for(let f=0;f<$.messages.length;f++){let U=$.messages[f],z=f===$.messages.length-1,{content:J}=U;for(let N=0;N<J.length;N++){let j=J[N],O=N===J.length-1,W=Fn(j.providerOptions)??(O?Fn(U.providerOptions):void 0);switch(j.type){case"text":v.push({type:"text",text:w&&z&&O?j.text.trim():j.text,cache_control:W});break;case"reasoning":if(n){let E=await Hi({provider:"anthropic",providerOptions:j.providerOptions,schema:lL});E==null?r.push({type:"other",message:"unsupported reasoning metadata"}):E.signature==null?E.redactedData==null?r.push({type:"other",message:"unsupported reasoning metadata"}):v.push({type:"redacted_thinking",data:E.redactedData,cache_control:W}):v.push({type:"thinking",thinking:j.text,signature:E.signature,cache_control:W})}else r.push({type:"other",message:"sending reasoning content is disabled for this model"});break;case"tool-call":if(j.providerExecuted){j.toolName==="code_execution"||j.toolName==="web_fetch"||j.toolName==="web_search"?v.push({type:"server_tool_use",id:j.toolCallId,name:j.toolName,input:j.input,cache_control:W}):r.push({type:"other",message:`provider executed tool call for tool ${j.toolName} is not supported`});break}v.push({type:"tool_use",id:j.toolCallId,name:j.toolName,input:j.input,cache_control:W});break;case"tool-result":if(j.toolName==="code_execution"){let E=j.output;if(E.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${E.type} for tool ${j.toolName} is not supported`});break}let X=SO.parse(E.value);v.push({type:"code_execution_tool_result",tool_use_id:j.toolCallId,content:{type:X.type,stdout:X.stdout,stderr:X.stderr,return_code:X.return_code},cache_control:W});break}if(j.toolName==="web_fetch"){let E=j.output;if(E.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${E.type} for tool ${j.toolName} is not supported`});break}let X=mO.parse(E.value);v.push({type:"web_fetch_tool_result",tool_use_id:j.toolCallId,content:{type:"web_fetch_result",url:X.url,retrieved_at:X.retrievedAt,content:{type:"document",title:X.content.title,citations:X.content.citations,source:{type:X.content.source.type,media_type:X.content.source.mediaType,data:X.content.source.data}}},cache_control:W});break}if(j.toolName==="web_search"){let E=j.output;if(E.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${E.type} for tool ${j.toolName} is not supported`});break}let X=QO.parse(E.value);v.push({type:"web_search_tool_result",tool_use_id:j.toolCallId,content:X.map((H)=>({url:H.url,title:H.title,page_age:H.pageAge,encrypted_content:H.encryptedContent,type:H.type})),cache_control:W});break}r.push({type:"other",message:`provider executed tool result for tool ${j.toolName} is not supported`});break}}}g.push({role:"assistant",content:v});break}default:throw Error(`content type: ${b}`)}}return{prompt:{system:c,messages:g},betas:u}}function cL(i){let n=[],r;for(let u of i){let{role:t}=u;switch(t){case"system":r?.type!=="system"&&(r={type:"system",messages:[]},n.push(r)),r.messages.push(u);break;case"assistant":r?.type!=="assistant"&&(r={type:"assistant",messages:[]},n.push(r)),r.messages.push(u);break;case"user":r?.type!=="user"&&(r={type:"user",messages:[]},n.push(r)),r.messages.push(u);break;case"tool":r?.type!=="user"&&(r={type:"user",messages:[]},n.push(r)),r.messages.push(u);break;default:throw Error(`Unsupported role: ${t}`)}}return n}function L6({finishReason:i,isJsonResponseFromTool:n}){switch(i){case"pause_turn":case"end_turn":case"stop_sequence":return"stop";case"refusal":return"content-filter";case"tool_use":return n?"stop":"tool-calls";case"max_tokens":return"length";default:return"unknown"}}var gu={webSearchResult:o.object({type:o.literal("web_search_result_location"),cited_text:o.string(),url:o.string(),title:o.string(),encrypted_index:o.string()}),pageLocation:o.object({type:o.literal("page_location"),cited_text:o.string(),document_index:o.number(),document_title:o.string().nullable(),start_page_number:o.number(),end_page_number:o.number()}),charLocation:o.object({type:o.literal("char_location"),cited_text:o.string(),document_index:o.number(),document_title:o.string().nullable(),start_char_index:o.number(),end_char_index:o.number()})},AO=o.discriminatedUnion("type",[gu.webSearchResult,gu.pageLocation,gu.charLocation]);o.discriminatedUnion("type",[gu.pageLocation,gu.charLocation]);function I6(i,n,r,u){if(i.type==="page_location"||i.type==="char_location"){let t=oL(i,n,r);t&&u(t)}}function oL(i,n,r){let u=n[i.document_index];if(!u)return null;let t=i.type==="page_location"?{citedText:i.cited_text,startPageNumber:i.start_page_number,endPageNumber:i.end_page_number}:{citedText:i.cited_text,startCharIndex:i.start_char_index,endCharIndex:i.end_char_index};return{type:"source",sourceType:"document",id:r(),mediaType:u.mediaType,title:i.document_title??u.title,filename:u.filename,providerMetadata:{anthropic:t}}}var gL=class{constructor(i,n){this.specificationVersion="v2",this.modelId=i,this.config=n,this.generateId=n.generateId??Qi}supportsUrl(i){return i.protocol==="https:"}get provider(){return this.config.provider}get supportedUrls(){var i;return(i=this.config).supportedUrls?.call(i)??{}}async getArgs({prompt:i,maxOutputTokens:n=4096,temperature:r,topP:u,topK:t,frequencyPenalty:c,presencePenalty:g,stopSequences:h,responseFormat:_,seed:l,tools:$,toolChoice:w,providerOptions:b}){let v=[];c!=null&&v.push({type:"unsupported-setting",setting:"frequencyPenalty"}),g!=null&&v.push({type:"unsupported-setting",setting:"presencePenalty"}),l!=null&&v.push({type:"unsupported-setting",setting:"seed"}),_?.type==="json"&&(_.schema==null?v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format requires a schema. The response format is ignored."}):$!=null&&v.push({type:"unsupported-setting",setting:"tools",details:"JSON response format does not support tools. The provided tools are ignored."}));let f=_?.type==="json"&&_.schema!=null?{type:"function",name:"json",description:"Respond with a JSON object.",inputSchema:_.schema}:void 0,U=await Hi({provider:"anthropic",providerOptions:b,schema:TX}),{prompt:z,betas:J}=await uL({prompt:i,sendReasoning:U?.sendReasoning??!0,warnings:v}),N=U?.thinking?.type==="enabled",j=U?.thinking?.budgetTokens,O={model:this.modelId,max_tokens:n,temperature:r,top_k:t,top_p:u,stop_sequences:h,...N&&{thinking:{type:"enabled",budget_tokens:j}},system:z.system,messages:z.messages};if(N){if(j==null)throw new oi({functionality:"thinking requires a budget"});O.temperature!=null&&(O.temperature=void 0,v.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),t!=null&&(O.top_k=void 0,v.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),u!=null&&(O.top_p=void 0,v.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),O.max_tokens=n+j}let{tools:W,toolChoice:E,toolWarnings:X,betas:H}=iL(f==null?{tools:$??[],toolChoice:w,disableParallelToolUse:U?.disableParallelToolUse}:{tools:[f],toolChoice:{type:"tool",toolName:f.name},disableParallelToolUse:!0});return{args:{...O,tools:W,tool_choice:E},warnings:[...v,...X],betas:new Set([...J,...H]),usesJsonResponseTool:f!=null}}async getHeaders({betas:i,headers:n}){return Ui(await _u(this.config.headers),i.size>0?{"anthropic-beta":Array.from(i).join(",")}:{},n)}buildRequestUrl(i){var n;return(n=this.config).buildRequestUrl?.call(n,this.config.baseURL,i)??`${this.config.baseURL}/messages`}transformRequestBody(i){var n;return(n=this.config).transformRequestBody?.call(n,i)??i}extractCitationDocuments(i){return i.filter((n)=>n.role==="user").flatMap((n)=>n.content).filter((n)=>n.type!=="file"||n.mediaType!=="application/pdf"&&n.mediaType!=="text/plain"?!1:n.providerOptions?.anthropic?.citations?.enabled??!1).map((n)=>{let r=n;return{title:r.filename??"Untitled Document",filename:r.filename,mediaType:r.mediaType}})}async doGenerate(i){let{args:n,warnings:r,betas:u,usesJsonResponseTool:t}=await this.getArgs(i),c=this.extractCitationDocuments(i.prompt),{responseHeaders:g,value:h,rawValue:_}=await fi({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:u,headers:i.headers}),body:this.transformRequestBody(n),failedResponseHandler:q6,successfulResponseHandler:Vi(hL),abortSignal:i.abortSignal,fetch:this.config.fetch}),l=[];for(let $ of h.content)switch($.type){case"text":if(!t&&(l.push({type:"text",text:$.text}),$.citations))for(let w of $.citations)I6(w,c,this.generateId,(b)=>l.push(b));break;case"thinking":l.push({type:"reasoning",text:$.thinking,providerMetadata:{anthropic:{signature:$.signature}}});break;case"redacted_thinking":l.push({type:"reasoning",text:"",providerMetadata:{anthropic:{redactedData:$.data}}});break;case"tool_use":l.push(t?{type:"text",text:JSON.stringify($.input)}:{type:"tool-call",toolCallId:$.id,toolName:$.name,input:JSON.stringify($.input)});break;case"server_tool_use":($.name==="web_search"||$.name==="code_execution"||$.name==="web_fetch")&&l.push({type:"tool-call",toolCallId:$.id,toolName:$.name,input:JSON.stringify($.input),providerExecuted:!0});break;case"web_fetch_tool_result":$.content.type==="web_fetch_result"?l.push({type:"tool-result",toolCallId:$.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:$.content.url,retrievedAt:$.content.retrieved_at,content:{type:$.content.content.type,title:$.content.content.title,citations:$.content.content.citations,source:{type:$.content.content.source.type,mediaType:$.content.content.source.media_type,data:$.content.content.source.data}}},providerExecuted:!0}):$.content.type==="web_fetch_tool_result_error"&&l.push({type:"tool-result",toolCallId:$.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:$.content.error_code},providerExecuted:!0});break;case"web_search_tool_result":if(Array.isArray($.content)){l.push({type:"tool-result",toolCallId:$.tool_use_id,toolName:"web_search",result:$.content.map((w)=>({url:w.url,title:w.title,pageAge:w.page_age??null,encryptedContent:w.encrypted_content,type:w.type})),providerExecuted:!0});for(let w of $.content)l.push({type:"source",sourceType:"url",id:this.generateId(),url:w.url,title:w.title,providerMetadata:{anthropic:{pageAge:w.page_age??null}}})}else l.push({type:"tool-result",toolCallId:$.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:$.content.error_code},providerExecuted:!0});break;case"code_execution_tool_result":$.content.type==="code_execution_result"?l.push({type:"tool-result",toolCallId:$.tool_use_id,toolName:"code_execution",result:{type:$.content.type,stdout:$.content.stdout,stderr:$.content.stderr,return_code:$.content.return_code},providerExecuted:!0}):$.content.type==="code_execution_tool_result_error"&&l.push({type:"tool-result",toolCallId:$.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:$.content.error_code},providerExecuted:!0});break}return{content:l,finishReason:L6({finishReason:h.stop_reason,isJsonResponseFromTool:t}),usage:{inputTokens:h.usage.input_tokens,outputTokens:h.usage.output_tokens,totalTokens:h.usage.input_tokens+h.usage.output_tokens,cachedInputTokens:h.usage.cache_read_input_tokens??void 0},request:{body:n},response:{id:h.id??void 0,modelId:h.model??void 0,headers:g,body:_},warnings:r,providerMetadata:{anthropic:{usage:h.usage,cacheCreationInputTokens:h.usage.cache_creation_input_tokens??null,stopSequence:h.stop_sequence??null}}}}async doStream(i){let{args:n,warnings:r,betas:u,usesJsonResponseTool:t}=await this.getArgs(i),c=this.extractCitationDocuments(i.prompt),g={...n,stream:!0},{responseHeaders:h,value:_}=await fi({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:u,headers:i.headers}),body:this.transformRequestBody(g),failedResponseHandler:q6,successfulResponseHandler:Vt(_L),abortSignal:i.abortSignal,fetch:this.config.fetch}),l="unknown",$={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},w={},b,v=null,f=null,U,z=this.generateId;return{stream:_.pipeThrough(new TransformStream({start(J){J.enqueue({type:"stream-start",warnings:r})},transform(J,N){if(i.includeRawChunks&&N.enqueue({type:"raw",rawValue:J.rawValue}),!J.success){N.enqueue({type:"error",error:J.error});return}let j=J.value;switch(j.type){case"ping":return;case"content_block_start":{let O=j.content_block.type;switch(U=O,O){case"text":w[j.index]={type:"text"},N.enqueue({type:"text-start",id:String(j.index)});return;case"thinking":w[j.index]={type:"reasoning"},N.enqueue({type:"reasoning-start",id:String(j.index)});return;case"redacted_thinking":w[j.index]={type:"reasoning"},N.enqueue({type:"reasoning-start",id:String(j.index),providerMetadata:{anthropic:{redactedData:j.content_block.data}}});return;case"tool_use":w[j.index]=t?{type:"text"}:{type:"tool-call",toolCallId:j.content_block.id,toolName:j.content_block.name,input:""},N.enqueue(t?{type:"text-start",id:String(j.index)}:{type:"tool-input-start",id:j.content_block.id,toolName:j.content_block.name});return;case"server_tool_use":(j.content_block.name==="web_fetch"||j.content_block.name==="web_search"||j.content_block.name==="code_execution")&&(w[j.index]={type:"tool-call",toolCallId:j.content_block.id,toolName:j.content_block.name,input:"",providerExecuted:!0},N.enqueue({type:"tool-input-start",id:j.content_block.id,toolName:j.content_block.name,providerExecuted:!0}));return;case"web_fetch_tool_result":{let W=j.content_block;W.content.type==="web_fetch_result"?N.enqueue({type:"tool-result",toolCallId:W.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:W.content.url,retrievedAt:W.content.retrieved_at,content:{type:W.content.content.type,title:W.content.content.title,citations:W.content.content.citations,source:{type:W.content.content.source.type,mediaType:W.content.content.source.media_type,data:W.content.content.source.data}}}}):W.content.type==="web_fetch_tool_result_error"&&N.enqueue({type:"tool-result",toolCallId:W.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:W.content.error_code},providerExecuted:!0});return}case"web_search_tool_result":{let W=j.content_block;if(Array.isArray(W.content)){N.enqueue({type:"tool-result",toolCallId:W.tool_use_id,toolName:"web_search",result:W.content.map((E)=>({url:E.url,title:E.title,pageAge:E.page_age??null,encryptedContent:E.encrypted_content,type:E.type})),providerExecuted:!0});for(let E of W.content)N.enqueue({type:"source",sourceType:"url",id:z(),url:E.url,title:E.title,providerMetadata:{anthropic:{pageAge:E.page_age??null}}})}else N.enqueue({type:"tool-result",toolCallId:W.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:W.content.error_code},providerExecuted:!0});return}case"code_execution_tool_result":{let W=j.content_block;W.content.type==="code_execution_result"?N.enqueue({type:"tool-result",toolCallId:W.tool_use_id,toolName:"code_execution",result:{type:W.content.type,stdout:W.content.stdout,stderr:W.content.stderr,return_code:W.content.return_code},providerExecuted:!0}):W.content.type==="code_execution_tool_result_error"&&N.enqueue({type:"tool-result",toolCallId:W.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:W.content.error_code},providerExecuted:!0});return}default:throw Error(`Unsupported content block type: ${O}`)}}case"content_block_stop":if(w[j.index]!=null){let O=w[j.index];switch(O.type){case"text":N.enqueue({type:"text-end",id:String(j.index)});break;case"reasoning":N.enqueue({type:"reasoning-end",id:String(j.index)});break;case"tool-call":t||(N.enqueue({type:"tool-input-end",id:O.toolCallId}),N.enqueue(O));break}delete w[j.index]}U=void 0;return;case"content_block_delta":{let O=j.delta.type;switch(O){case"text_delta":if(t)return;N.enqueue({type:"text-delta",id:String(j.index),delta:j.delta.text});return;case"thinking_delta":N.enqueue({type:"reasoning-delta",id:String(j.index),delta:j.delta.thinking});return;case"signature_delta":U==="thinking"&&N.enqueue({type:"reasoning-delta",id:String(j.index),delta:"",providerMetadata:{anthropic:{signature:j.delta.signature}}});return;case"input_json_delta":{let W=w[j.index],E=j.delta.partial_json;if(t){if(W?.type!=="text")return;N.enqueue({type:"text-delta",id:String(j.index),delta:E})}else{if(W?.type!=="tool-call")return;N.enqueue({type:"tool-input-delta",id:W.toolCallId,delta:E}),W.input+=E}return}case"citations_delta":{let W=j.delta.citation;I6(W,c,z,(E)=>N.enqueue(E));return}default:throw Error(`Unsupported delta type: ${O}`)}}case"message_start":$.inputTokens=j.message.usage.input_tokens,$.cachedInputTokens=j.message.usage.cache_read_input_tokens??void 0,b={...j.message.usage},v=j.message.usage.cache_creation_input_tokens??null,N.enqueue({type:"response-metadata",id:j.message.id??void 0,modelId:j.message.model??void 0});return;case"message_delta":$.outputTokens=j.usage.output_tokens,$.totalTokens=($.inputTokens??0)+(j.usage.output_tokens??0),l=L6({finishReason:j.delta.stop_reason,isJsonResponseFromTool:t}),f=j.delta.stop_sequence??null,b={...b,...j.usage};return;case"message_stop":N.enqueue({type:"finish",finishReason:l,usage:$,providerMetadata:{anthropic:{usage:b??null,cacheCreationInputTokens:v,stopSequence:f}}});return;case"error":N.enqueue({type:"error",error:j.error});return;default:throw Error(`Unsupported chunk type: ${j}`)}}})),request:{body:g},response:{headers:h}}}},hL=o.object({type:o.literal("message"),id:o.string().nullish(),model:o.string().nullish(),content:o.array(o.discriminatedUnion("type",[o.object({type:o.literal("text"),text:o.string(),citations:o.array(AO).optional()}),o.object({type:o.literal("thinking"),thinking:o.string(),signature:o.string()}),o.object({type:o.literal("redacted_thinking"),data:o.string()}),o.object({type:o.literal("tool_use"),id:o.string(),name:o.string(),input:o.unknown()}),o.object({type:o.literal("server_tool_use"),id:o.string(),name:o.string(),input:o.record(o.string(),o.unknown()).nullish()}),o.object({type:o.literal("web_fetch_tool_result"),tool_use_id:o.string(),content:o.union([o.object({type:o.literal("web_fetch_result"),url:o.string(),retrieved_at:o.string(),content:o.object({type:o.literal("document"),title:o.string().nullable(),citations:o.object({enabled:o.boolean()}).optional(),source:o.object({type:o.literal("text"),media_type:o.string(),data:o.string()})})}),o.object({type:o.literal("web_fetch_tool_result_error"),error_code:o.string()})])}),o.object({type:o.literal("web_search_tool_result"),tool_use_id:o.string(),content:o.union([o.array(o.object({type:o.literal("web_search_result"),url:o.string(),title:o.string(),encrypted_content:o.string(),page_age:o.string().nullish()})),o.object({type:o.literal("web_search_tool_result_error"),error_code:o.string()})])}),o.object({type:o.literal("code_execution_tool_result"),tool_use_id:o.string(),content:o.union([o.object({type:o.literal("code_execution_result"),stdout:o.string(),stderr:o.string(),return_code:o.number()}),o.object({type:o.literal("code_execution_tool_result_error"),error_code:o.string()})])})])),stop_reason:o.string().nullish(),stop_sequence:o.string().nullish(),usage:o.looseObject({input_tokens:o.number(),output_tokens:o.number(),cache_creation_input_tokens:o.number().nullish(),cache_read_input_tokens:o.number().nullish()})}),_L=o.discriminatedUnion("type",[o.object({type:o.literal("message_start"),message:o.object({id:o.string().nullish(),model:o.string().nullish(),usage:o.looseObject({input_tokens:o.number(),cache_creation_input_tokens:o.number().nullish(),cache_read_input_tokens:o.number().nullish()})})}),o.object({type:o.literal("content_block_start"),index:o.number(),content_block:o.discriminatedUnion("type",[o.object({type:o.literal("text"),text:o.string()}),o.object({type:o.literal("thinking"),thinking:o.string()}),o.object({type:o.literal("tool_use"),id:o.string(),name:o.string()}),o.object({type:o.literal("redacted_thinking"),data:o.string()}),o.object({type:o.literal("server_tool_use"),id:o.string(),name:o.string(),input:o.record(o.string(),o.unknown()).nullish()}),o.object({type:o.literal("web_fetch_tool_result"),tool_use_id:o.string(),content:o.union([o.object({type:o.literal("web_fetch_result"),url:o.string(),retrieved_at:o.string(),content:o.object({type:o.literal("document"),title:o.string().nullable(),citations:o.object({enabled:o.boolean()}).optional(),source:o.object({type:o.literal("text"),media_type:o.string(),data:o.string()})})}),o.object({type:o.literal("web_fetch_tool_result_error"),error_code:o.string()})])}),o.object({type:o.literal("web_search_tool_result"),tool_use_id:o.string(),content:o.union([o.array(o.object({type:o.literal("web_search_result"),url:o.string(),title:o.string(),encrypted_content:o.string(),page_age:o.string().nullish()})),o.object({type:o.literal("web_search_tool_result_error"),error_code:o.string()})])}),o.object({type:o.literal("code_execution_tool_result"),tool_use_id:o.string(),content:o.union([o.object({type:o.literal("code_execution_result"),stdout:o.string(),stderr:o.string(),return_code:o.number()}),o.object({type:o.literal("code_execution_tool_result_error"),error_code:o.string()})])})])}),o.object({type:o.literal("content_block_delta"),index:o.number(),delta:o.discriminatedUnion("type",[o.object({type:o.literal("input_json_delta"),partial_json:o.string()}),o.object({type:o.literal("text_delta"),text:o.string()}),o.object({type:o.literal("thinking_delta"),thinking:o.string()}),o.object({type:o.literal("signature_delta"),signature:o.string()}),o.object({type:o.literal("citations_delta"),citation:AO})])}),o.object({type:o.literal("content_block_stop"),index:o.number()}),o.object({type:o.literal("error"),error:o.object({type:o.string(),message:o.string()})}),o.object({type:o.literal("message_delta"),delta:o.object({stop_reason:o.string().nullish(),stop_sequence:o.string().nullish()}),usage:o.looseObject({output_tokens:o.number(),cache_creation_input_tokens:o.number().nullish()})}),o.object({type:o.literal("message_stop")}),o.object({type:o.literal("ping")})]),lL=o.object({signature:o.string().optional(),redactedData:o.string().optional()}),$L=yi({id:"anthropic.bash_20241022",name:"bash",inputSchema:gt.object({command:gt.string(),restart:gt.boolean().optional()})}),wL=yi({id:"anthropic.bash_20250124",name:"bash",inputSchema:gt.object({command:gt.string(),restart:gt.boolean().optional()})}),bL=yi({id:"anthropic.computer_20241022",name:"computer",inputSchema:o.object({action:o.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:o.array(o.number().int()).optional(),text:o.string().optional()})}),vL=yi({id:"anthropic.computer_20250124",name:"computer",inputSchema:o.object({action:o.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:o.tuple([o.number().int(),o.number().int()]).optional(),duration:o.number().optional(),scroll_amount:o.number().optional(),scroll_direction:o.enum(["up","down","left","right"]).optional(),start_coordinate:o.tuple([o.number().int(),o.number().int()]).optional(),text:o.string().optional()})}),fL=yi({id:"anthropic.text_editor_20241022",name:"str_replace_editor",inputSchema:o.object({command:o.enum(["view","create","str_replace","insert","undo_edit"]),path:o.string(),file_text:o.string().optional(),insert_line:o.number().int().optional(),new_str:o.string().optional(),old_str:o.string().optional(),view_range:o.array(o.number().int()).optional()})}),OL=yi({id:"anthropic.text_editor_20250124",name:"str_replace_editor",inputSchema:o.object({command:o.enum(["view","create","str_replace","insert","undo_edit"]),path:o.string(),file_text:o.string().optional(),insert_line:o.number().int().optional(),new_str:o.string().optional(),old_str:o.string().optional(),view_range:o.array(o.number().int()).optional()})}),jL=yi({id:"anthropic.text_editor_20250429",name:"str_replace_based_edit_tool",inputSchema:o.object({command:o.enum(["view","create","str_replace","insert"]),path:o.string(),file_text:o.string().optional(),insert_line:o.number().int().optional(),new_str:o.string().optional(),old_str:o.string().optional(),view_range:o.array(o.number().int()).optional()})}),UL={bash_20241022:$L,bash_20250124:wL,codeExecution_20250522:tL,computer_20241022:bL,computer_20250124:vL,textEditor_20241022:fL,textEditor_20250124:OL,textEditor_20250429:jL,textEditor_20250728:RX,webFetch_20250910:sX,webSearch_20250305:pX};function NL(i={}){let n=jo(i.baseURL)??"https://api.anthropic.com/v1",r=()=>wu({"anthropic-version":"2023-06-01","x-api-key":Oo({apiKey:i.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...i.headers},`ai-sdk/anthropic/${PX}`),u=(c)=>new gL(c,{provider:"anthropic.messages",baseURL:n,headers:r,fetch:i.fetch,generateId:i.generateId??Qi,supportedUrls:()=>({"image/*":[/^https?:\\/\\/.*$/]})}),t=function(c){if(new.target)throw Error("The Anthropic model function cannot be called with the new keyword.");return u(c)};return t.languageModel=u,t.chat=u,t.messages=u,t.textEmbeddingModel=(c)=>{throw new U0({modelId:c,modelType:"textEmbeddingModel"})},t.imageModel=(c)=>{throw new U0({modelId:c,modelType:"imageModel"})},t.tools=UL,t}NL();var zL="2.0.17",WL=o.object({error:o.object({code:o.number().nullable(),message:o.string(),status:o.string()})}),lu=bu({errorSchema:WL,errorToMessage:(i)=>i.error.message}),DL=o.object({outputDimensionality:o.number().optional(),taskType:o.enum(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}),JL=class{constructor(i,n){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=i,this.config=n}get provider(){return this.config.provider}async doEmbed({values:i,headers:n,abortSignal:r,providerOptions:u}){let t=await Hi({provider:"google",providerOptions:u,schema:DL});if(i.length>this.maxEmbeddingsPerCall)throw new DO({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:i});let c=Ui(await _u(this.config.headers),n);if(i.length===1){let{responseHeaders:l,value:$,rawValue:w}=await fi({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:c,body:{model:`models/${this.modelId}`,content:{parts:[{text:i[0]}]},outputDimensionality:t?.outputDimensionality,taskType:t?.taskType},failedResponseHandler:lu,successfulResponseHandler:Vi(HL),abortSignal:r,fetch:this.config.fetch});return{embeddings:[$.embedding.values],usage:void 0,response:{headers:l,body:w}}}let{responseHeaders:g,value:h,rawValue:_}=await fi({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:c,body:{requests:i.map((l)=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:l}]},outputDimensionality:t?.outputDimensionality,taskType:t?.taskType}))},failedResponseHandler:lu,successfulResponseHandler:Vi(EL),abortSignal:r,fetch:this.config.fetch});return{embeddings:h.embeddings.map((l)=>l.values),usage:void 0,response:{headers:g,body:_}}}},EL=o.object({embeddings:o.array(o.object({values:o.array(o.number())}))}),HL=o.object({embedding:o.object({values:o.array(o.number())})});function gn(i){if(i==null||GL(i))return;if(typeof i=="boolean")return{type:"boolean",properties:{}};let{type:n,description:r,required:u,properties:t,items:c,allOf:g,anyOf:h,oneOf:_,format:l,const:$,minLength:w,enum:b}=i,v={};if(r&&(v.description=r),u&&(v.required=u),l&&(v.format=l),$!==void 0&&(v.enum=[$]),n&&(Array.isArray(n)?n.includes("null")?(v.type=n.filter((f)=>f!=="null")[0],v.nullable=!0):v.type=n:n==="null"?v.type="null":v.type=n),b!==void 0&&(v.enum=b),t!=null&&(v.properties=Object.entries(t).reduce((f,[U,z])=>(f[U]=gn(z),f),{})),c&&(v.items=Array.isArray(c)?c.map(gn):gn(c)),g&&(v.allOf=g.map(gn)),h)if(h.some((f)=>typeof f=="object"&&f?.type==="null")){let f=h.filter((U)=>!(typeof U=="object"&&U?.type==="null"));if(f.length===1){let U=gn(f[0]);typeof U=="object"&&(v.nullable=!0,Object.assign(v,U))}else v.anyOf=f.map(gn),v.nullable=!0}else v.anyOf=h.map(gn);return _&&(v.oneOf=_.map(gn)),w!==void 0&&(v.minLength=w),v}function GL(i){return typeof i=="object"&&!!i&&i.type==="object"&&(i.properties==null||Object.keys(i.properties).length===0)&&!i.additionalProperties}function qL(i,n){let r=[],u=[],t=!0,c=n?.isGemmaModel??!1;for(let{role:g,content:h}of i)switch(g){case"system":if(!t)throw new oi({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:h});break;case"user":{t=!1;let _=[];for(let l of h)switch(l.type){case"text":_.push({text:l.text});break;case"file":{let $=l.mediaType==="image/*"?"image/jpeg":l.mediaType;_.push(l.data instanceof URL?{fileData:{mimeType:$,fileUri:l.data.toString()}}:{inlineData:{mimeType:$,data:pi(l.data)}});break}}u.push({role:"user",parts:_});break}case"assistant":t=!1,u.push({role:"model",parts:h.map((_)=>{switch(_.type){case"text":return _.text.length===0?void 0:{text:_.text,thoughtSignature:_.providerOptions?.google?.thoughtSignature};case"reasoning":return _.text.length===0?void 0:{text:_.text,thought:!0,thoughtSignature:_.providerOptions?.google?.thoughtSignature};case"file":if(_.mediaType!=="image/png")throw new oi({functionality:"Only PNG images are supported in assistant messages"});if(_.data instanceof URL)throw new oi({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:_.mediaType,data:pi(_.data)}};case"tool-call":return{functionCall:{name:_.toolName,args:_.input},thoughtSignature:_.providerOptions?.google?.thoughtSignature}}}).filter((_)=>_!==void 0)});break;case"tool":{t=!1;let _=[];for(let l of h){let $=l.output;if($.type==="content")for(let w of $.value)switch(w.type){case"text":_.push({functionResponse:{name:l.toolName,response:{name:l.toolName,content:w.text}}});break;case"media":_.push({inlineData:{mimeType:w.mediaType,data:w.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:_.push({text:JSON.stringify(w)});break}else _.push({functionResponse:{name:l.toolName,response:{name:l.toolName,content:$.value}}})}u.push({role:"user",parts:_});break}}if(c&&r.length>0&&u.length>0&&u[0].role==="user"){let g=r.map((h)=>h.text).join(`\n\n`);u[0].parts.unshift({text:g+`\n\n`})}return{systemInstruction:r.length>0&&!c?{parts:r}:void 0,contents:u}}function Y6(i){return i.includes("/")?i:`models/${i}`}var XL=o.object({responseModalities:o.array(o.enum(["TEXT","IMAGE"])).optional(),thinkingConfig:o.object({thinkingBudget:o.number().optional(),includeThoughts:o.boolean().optional()}).optional(),cachedContent:o.string().optional(),structuredOutputs:o.boolean().optional(),safetySettings:o.array(o.object({category:o.enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:o.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:o.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:o.boolean().optional(),labels:o.record(o.string(),o.string()).optional()});function LL({tools:i,toolChoice:n,modelId:r}){i=i?.length?i:void 0;let u=[],t=r.includes("gemini-2"),c=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(i==null)return{tools:void 0,toolConfig:void 0,toolWarnings:u};let g=i.some(($)=>$.type==="function"),h=i.some(($)=>$.type==="provider-defined");if(g&&h&&u.push({type:"unsupported-tool",tool:i.find(($)=>$.type==="function"),details:"Cannot mix function tools with provider-defined tools in the same request. Please use either function tools or provider-defined tools, but not both."}),h){let $={};return i.filter((w)=>w.type==="provider-defined").forEach((w)=>{switch(w.id){case"google.google_search":t?$.googleSearch={}:c?$.googleSearchRetrieval={dynamicRetrievalConfig:{mode:w.args.mode,dynamicThreshold:w.args.dynamicThreshold}}:$.googleSearchRetrieval={};break;case"google.url_context":t?$.urlContext={}:u.push({type:"unsupported-tool",tool:w,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":t?$.codeExecution={}:u.push({type:"unsupported-tool",tool:w,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;default:u.push({type:"unsupported-tool",tool:w});break}}),{tools:Object.keys($).length>0?$:void 0,toolConfig:void 0,toolWarnings:u}}let _=[];for(let $ of i)switch($.type){case"function":_.push({name:$.name,description:$.description??"",parameters:gn($.inputSchema)});break;default:u.push({type:"unsupported-tool",tool:$});break}if(n==null)return{tools:{functionDeclarations:_},toolConfig:void 0,toolWarnings:u};let l=n.type;switch(l){case"auto":return{tools:{functionDeclarations:_},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:u};case"none":return{tools:{functionDeclarations:_},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:u};case"required":return{tools:{functionDeclarations:_},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:u};case"tool":return{tools:{functionDeclarations:_},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[n.toolName]}},toolWarnings:u};default:throw new oi({functionality:`tool choice type: ${l}`})}}function Q6({finishReason:i,hasToolCalls:n}){switch(i){case"STOP":return n?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var IL=o.object({web:o.object({uri:o.string(),title:o.string()}).nullish(),retrievedContext:o.object({uri:o.string(),title:o.string()}).nullish()}),BO=o.object({webSearchQueries:o.array(o.string()).nullish(),retrievalQueries:o.array(o.string()).nullish(),searchEntryPoint:o.object({renderedContent:o.string()}).nullish(),groundingChunks:o.array(IL).nullish(),groundingSupports:o.array(o.object({segment:o.object({startIndex:o.number().nullish(),endIndex:o.number().nullish(),text:o.string().nullish()}),segment_text:o.string().nullish(),groundingChunkIndices:o.array(o.number()).nullish(),supportChunkIndices:o.array(o.number()).nullish(),confidenceScores:o.array(o.number()).nullish(),confidenceScore:o.array(o.number()).nullish()})).nullish(),retrievalMetadata:o.union([o.object({webDynamicRetrievalScore:o.number()}),o.object({})]).nullish()}),YL=yi({id:"google.google_search",name:"google_search",inputSchema:o.object({mode:o.enum(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:o.number().default(1)})}),QL=o.object({retrievedUrl:o.string(),urlRetrievalStatus:o.string()}),KO=o.object({urlMetadata:o.array(QL)}),mL=yi({id:"google.url_context",name:"url_context",inputSchema:o.object({})}),SL=class{constructor(i,n){this.specificationVersion="v2",this.modelId=i,this.config=n,this.generateId=n.generateId??Qi}get provider(){return this.config.provider}get supportedUrls(){var i;return(i=this.config).supportedUrls?.call(i)??{}}async getArgs({prompt:i,maxOutputTokens:n,temperature:r,topP:u,topK:t,frequencyPenalty:c,presencePenalty:g,stopSequences:h,responseFormat:_,seed:l,tools:$,toolChoice:w,providerOptions:b}){let v=[],f=await Hi({provider:"google",providerOptions:b,schema:XL});f?.thinkingConfig?.includeThoughts===!0&&!this.config.provider.startsWith("google.vertex.")&&v.push({type:"other",message:`The \'includeThoughts\' option is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});let U=this.modelId.toLowerCase().startsWith("gemma-"),{contents:z,systemInstruction:J}=qL(i,{isGemmaModel:U}),{tools:N,toolConfig:j,toolWarnings:O}=LL({tools:$,toolChoice:w,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:n,temperature:r,topK:t,topP:u,frequencyPenalty:c,presencePenalty:g,stopSequences:h,seed:l,responseMimeType:_?.type==="json"?"application/json":void 0,responseSchema:_?.type==="json"&&_.schema!=null&&(f?.structuredOutputs??!0)?gn(_.schema):void 0,...f?.audioTimestamp&&{audioTimestamp:f.audioTimestamp},responseModalities:f?.responseModalities,thinkingConfig:f?.thinkingConfig},contents:z,systemInstruction:U?void 0:J,safetySettings:f?.safetySettings,tools:N,toolConfig:j,cachedContent:f?.cachedContent,labels:f?.labels},warnings:[...v,...O]}}async doGenerate(i){let{args:n,warnings:r}=await this.getArgs(i),u=JSON.stringify(n),t=Ui(await _u(this.config.headers),i.headers),{responseHeaders:c,value:g,rawValue:h}=await fi({url:`${this.config.baseURL}/${Y6(this.modelId)}:generateContent`,headers:t,body:n,failedResponseHandler:lu,successfulResponseHandler:Vi(KL),abortSignal:i.abortSignal,fetch:this.config.fetch}),_=g.candidates[0],l=[],$=_.content?.parts??[],w=g.usageMetadata,b;for(let f of $)if("executableCode"in f&&f.executableCode?.code){let U=this.config.generateId();b=U,l.push({type:"tool-call",toolCallId:U,toolName:"code_execution",input:JSON.stringify(f.executableCode),providerExecuted:!0})}else"codeExecutionResult"in f&&f.codeExecutionResult?(l.push({type:"tool-result",toolCallId:b,toolName:"code_execution",result:{outcome:f.codeExecutionResult.outcome,output:f.codeExecutionResult.output},providerExecuted:!0}),b=void 0):("text"in f)&&f.text!=null&&f.text.length>0?l.push({type:f.thought===!0?"reasoning":"text",text:f.text,providerMetadata:f.thoughtSignature?{google:{thoughtSignature:f.thoughtSignature}}:void 0}):("functionCall"in f)?l.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:f.functionCall.name,input:JSON.stringify(f.functionCall.args),providerMetadata:f.thoughtSignature?{google:{thoughtSignature:f.thoughtSignature}}:void 0}):("inlineData"in f)&&l.push({type:"file",data:f.inlineData.data,mediaType:f.inlineData.mimeType});let v=m6({groundingMetadata:_.groundingMetadata,generateId:this.config.generateId})??[];for(let f of v)l.push(f);return{content:l,finishReason:Q6({finishReason:_.finishReason,hasToolCalls:l.some((f)=>f.type==="tool-call")}),usage:{inputTokens:w?.promptTokenCount??void 0,outputTokens:w?.candidatesTokenCount??void 0,totalTokens:w?.totalTokenCount??void 0,reasoningTokens:w?.thoughtsTokenCount??void 0,cachedInputTokens:w?.cachedContentTokenCount??void 0},warnings:r,providerMetadata:{google:{promptFeedback:g.promptFeedback??null,groundingMetadata:_.groundingMetadata??null,urlContextMetadata:_.urlContextMetadata??null,safetyRatings:_.safetyRatings??null,usageMetadata:w??null}},request:{body:u},response:{headers:c,body:h}}}async doStream(i){let{args:n,warnings:r}=await this.getArgs(i),u=JSON.stringify(n),t=Ui(await _u(this.config.headers),i.headers),{responseHeaders:c,value:g}=await fi({url:`${this.config.baseURL}/${Y6(this.modelId)}:streamGenerateContent?alt=sse`,headers:t,body:n,failedResponseHandler:lu,successfulResponseHandler:Vt(VL),abortSignal:i.abortSignal,fetch:this.config.fetch}),h="unknown",_={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},l,$=this.config.generateId,w=!1,b=null,v=null,f=0,U=new Set,z;return{stream:g.pipeThrough(new TransformStream({start(J){J.enqueue({type:"stream-start",warnings:r})},transform(J,N){if(i.includeRawChunks&&N.enqueue({type:"raw",rawValue:J.rawValue}),!J.success){N.enqueue({type:"error",error:J.error});return}let j=J.value,O=j.usageMetadata;O!=null&&(_.inputTokens=O.promptTokenCount??void 0,_.outputTokens=O.candidatesTokenCount??void 0,_.totalTokens=O.totalTokenCount??void 0,_.reasoningTokens=O.thoughtsTokenCount??void 0,_.cachedInputTokens=O.cachedContentTokenCount??void 0);let W=j.candidates?.[0];if(W==null)return;let E=W.content,X=m6({groundingMetadata:W.groundingMetadata,generateId:$});if(X!=null)for(let H of X)H.sourceType==="url"&&!U.has(H.url)&&(U.add(H.url),N.enqueue(H));if(E!=null){let H=E.parts??[];for(let Q of H)if("executableCode"in Q&&Q.executableCode?.code){let M=$();z=M,N.enqueue({type:"tool-call",toolCallId:M,toolName:"code_execution",input:JSON.stringify(Q.executableCode),providerExecuted:!0}),w=!0}else if("codeExecutionResult"in Q&&Q.codeExecutionResult){let M=z;M&&(N.enqueue({type:"tool-result",toolCallId:M,toolName:"code_execution",result:{outcome:Q.codeExecutionResult.outcome,output:Q.codeExecutionResult.output},providerExecuted:!0}),z=void 0)}else"text"in Q&&Q.text!=null&&Q.text.length>0&&(Q.thought===!0?(b!==null&&(N.enqueue({type:"text-end",id:b}),b=null),v===null&&(v=String(f++),N.enqueue({type:"reasoning-start",id:v,providerMetadata:Q.thoughtSignature?{google:{thoughtSignature:Q.thoughtSignature}}:void 0})),N.enqueue({type:"reasoning-delta",id:v,delta:Q.text,providerMetadata:Q.thoughtSignature?{google:{thoughtSignature:Q.thoughtSignature}}:void 0})):(v!==null&&(N.enqueue({type:"reasoning-end",id:v}),v=null),b===null&&(b=String(f++),N.enqueue({type:"text-start",id:b,providerMetadata:Q.thoughtSignature?{google:{thoughtSignature:Q.thoughtSignature}}:void 0})),N.enqueue({type:"text-delta",id:b,delta:Q.text,providerMetadata:Q.thoughtSignature?{google:{thoughtSignature:Q.thoughtSignature}}:void 0})));let Y=BL(E.parts);if(Y!=null)for(let Q of Y)N.enqueue({type:"file",mediaType:Q.inlineData.mimeType,data:Q.inlineData.data});let V=AL({parts:E.parts,generateId:$});if(V!=null)for(let Q of V)N.enqueue({type:"tool-input-start",id:Q.toolCallId,toolName:Q.toolName,providerMetadata:Q.providerMetadata}),N.enqueue({type:"tool-input-delta",id:Q.toolCallId,delta:Q.args,providerMetadata:Q.providerMetadata}),N.enqueue({type:"tool-input-end",id:Q.toolCallId,providerMetadata:Q.providerMetadata}),N.enqueue({type:"tool-call",toolCallId:Q.toolCallId,toolName:Q.toolName,input:Q.args,providerMetadata:Q.providerMetadata}),w=!0}W.finishReason!=null&&(h=Q6({finishReason:W.finishReason,hasToolCalls:w}),l={google:{promptFeedback:j.promptFeedback??null,groundingMetadata:W.groundingMetadata??null,urlContextMetadata:W.urlContextMetadata??null,safetyRatings:W.safetyRatings??null}},O!=null&&(l.google.usageMetadata=O))},flush(J){b!==null&&J.enqueue({type:"text-end",id:b}),v!==null&&J.enqueue({type:"reasoning-end",id:v}),J.enqueue({type:"finish",finishReason:h,usage:_,providerMetadata:l})}})),response:{headers:c},request:{body:u}}}};function AL({parts:i,generateId:n}){let r=i?.filter((u)=>("functionCall"in u));return r==null||r.length===0?void 0:r.map((u)=>({type:"tool-call",toolCallId:n(),toolName:u.functionCall.name,args:JSON.stringify(u.functionCall.args),providerMetadata:u.thoughtSignature?{google:{thoughtSignature:u.thoughtSignature}}:void 0}))}function BL(i){return i?.filter((n)=>("inlineData"in n))}function m6({groundingMetadata:i,generateId:n}){return i?.groundingChunks?.filter((r)=>r.web!=null).map((r)=>({type:"source",sourceType:"url",id:n(),url:r.web.uri,title:r.web.title}))}var VO=o.object({parts:o.array(o.union([o.object({functionCall:o.object({name:o.string(),args:o.unknown()}),thoughtSignature:o.string().nullish()}),o.object({inlineData:o.object({mimeType:o.string(),data:o.string()})}),o.object({executableCode:o.object({language:o.string(),code:o.string()}).nullish(),codeExecutionResult:o.object({outcome:o.string(),output:o.string()}).nullish(),text:o.string().nullish(),thought:o.boolean().nullish(),thoughtSignature:o.string().nullish()})])).nullish()}),fo=o.object({category:o.string().nullish(),probability:o.string().nullish(),probabilityScore:o.number().nullish(),severity:o.string().nullish(),severityScore:o.number().nullish(),blocked:o.boolean().nullish()}),MO=o.object({cachedContentTokenCount:o.number().nullish(),thoughtsTokenCount:o.number().nullish(),promptTokenCount:o.number().nullish(),candidatesTokenCount:o.number().nullish(),totalTokenCount:o.number().nullish()}),KL=o.object({candidates:o.array(o.object({content:VO.nullish().or(o.object({}).strict()),finishReason:o.string().nullish(),safetyRatings:o.array(fo).nullish(),groundingMetadata:BO.nullish(),urlContextMetadata:KO.nullish()})),usageMetadata:MO.nullish(),promptFeedback:o.object({blockReason:o.string().nullish(),safetyRatings:o.array(fo).nullish()}).nullish()}),VL=o.object({candidates:o.array(o.object({content:VO.nullish(),finishReason:o.string().nullish(),safetyRatings:o.array(fo).nullish(),groundingMetadata:BO.nullish(),urlContextMetadata:KO.nullish()})).nullish(),usageMetadata:MO.nullish(),promptFeedback:o.object({blockReason:o.string().nullish(),safetyRatings:o.array(fo).nullish()}).nullish()}),ML=Pn({id:"google.code_execution",name:"code_execution",inputSchema:o.object({language:o.string().describe("The programming language of the code."),code:o.string().describe("The code to be executed.")}),outputSchema:o.object({outcome:o.string().describe(\'The outcome of the execution (e.g., "OUTCOME_OK").\'),output:o.string().describe("The output from the code execution.")})}),xL={googleSearch:YL,urlContext:mL,codeExecution:ML},FL=class{constructor(i,n,r){this.modelId=i,this.settings=n,this.config=r,this.specificationVersion="v2"}get maxImagesPerCall(){return this.settings.maxImagesPerCall??4}get provider(){return this.config.provider}async doGenerate(i){var n;let{prompt:r,n:u=1,size:t="1024x1024",aspectRatio:c="1:1",seed:g,providerOptions:h,headers:_,abortSignal:l}=i,$=[];t!=null&&$.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),g!=null&&$.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});let w=await Hi({provider:"google",providerOptions:h,schema:yL}),b=(n=this.config._internal)?.currentDate?.call(n)??new Date,v={sampleCount:u};c!=null&&(v.aspectRatio=c),w&&Object.assign(v,w);let f={instances:[{prompt:r}],parameters:v},{responseHeaders:U,value:z}=await fi({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:Ui(await _u(this.config.headers),_),body:f,failedResponseHandler:lu,successfulResponseHandler:Vi(PL),abortSignal:l,fetch:this.config.fetch});return{images:z.predictions.map((J)=>J.bytesBase64Encoded),warnings:$??[],providerMetadata:{google:{images:z.predictions.map((J)=>({}))}},response:{timestamp:b,modelId:this.modelId,headers:U}}}},PL=o.object({predictions:o.array(o.object({bytesBase64Encoded:o.string()})).default([])}),yL=o.object({personGeneration:o.enum(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:o.enum(["1:1","3:4","4:3","9:16","16:9"]).nullish()});function TL(i={}){let n=jo(i.baseURL)??"https://generativelanguage.googleapis.com/v1beta",r=()=>wu({"x-goog-api-key":Oo({apiKey:i.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...i.headers},`ai-sdk/google/${zL}`),u=(h)=>new SL(h,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:i.generateId??Qi,supportedUrls:()=>({"*":[RegExp(`^${n}/files/.*$`),RegExp("^https://(?:www\\\\.)?youtube\\\\.com/watch\\\\?v=[\\\\w-]+(?:&[\\\\w=&.-]*)?$"),RegExp("^https://youtu\\\\.be/[\\\\w-]+(?:\\\\?[\\\\w=&.-]*)?$")]}),fetch:i.fetch}),t=(h)=>new JL(h,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:i.fetch}),c=(h,_={})=>new FL(h,_,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:i.fetch}),g=function(h){if(new.target)throw Error("The Google Generative AI model function cannot be called with the new keyword.");return u(h)};return g.languageModel=u,g.chat=u,g.generativeAI=u,g.embedding=t,g.textEmbedding=t,g.textEmbeddingModel=t,g.image=c,g.imageModel=c,g.tools=xL,g}TL();var J0=o.object({error:o.object({message:o.string(),type:o.string().nullish(),param:o.any().nullish(),code:o.union([o.string(),o.number()]).nullish()})}),hn=bu({errorSchema:J0,errorToMessage:(i)=>i.error.message});function kL({prompt:i,systemMessageMode:n="system"}){let r=[],u=[];for(let{role:t,content:c}of i)switch(t){case"system":switch(n){case"system":r.push({role:"system",content:c});break;case"developer":r.push({role:"developer",content:c});break;case"remove":u.push({type:"other",message:"system messages are removed for this model"});break;default:throw Error(`Unsupported system message mode: ${n}`)}break;case"user":if(c.length===1&&c[0].type==="text"){r.push({role:"user",content:c[0].text});break}r.push({role:"user",content:c.map((g,h)=>{switch(g.type){case"text":return{type:"text",text:g.text};case"file":if(g.mediaType.startsWith("image/")){let _=g.mediaType==="image/*"?"image/jpeg":g.mediaType;return{type:"image_url",image_url:{url:g.data instanceof URL?g.data.toString():`data:${_};base64,${pi(g.data)}`,detail:g.providerOptions?.openai?.imageDetail}}}else if(g.mediaType.startsWith("audio/")){if(g.data instanceof URL)throw new oi({functionality:"audio file parts with URLs"});switch(g.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:pi(g.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:pi(g.data),format:"mp3"}};default:throw new oi({functionality:`audio content parts with media type ${g.mediaType}`})}}else if(g.mediaType==="application/pdf"){if(g.data instanceof URL)throw new oi({functionality:"PDF file parts with URLs"});return{type:"file",file:typeof g.data=="string"&&g.data.startsWith("file-")?{file_id:g.data}:{filename:g.filename??`part-${h}.pdf`,file_data:`data:application/pdf;base64,${pi(g.data)}`}}}else throw new oi({functionality:`file part media type ${g.mediaType}`})}})});break;case"assistant":{let g="",h=[];for(let _ of c)switch(_.type){case"text":g+=_.text;break;case"tool-call":h.push({id:_.toolCallId,type:"function",function:{name:_.toolName,arguments:JSON.stringify(_.input)}});break}r.push({role:"assistant",content:g,tool_calls:h.length>0?h:void 0});break}case"tool":for(let g of c){let h=g.output,_;switch(h.type){case"text":case"error-text":_=h.value;break;case"content":case"json":case"error-json":_=JSON.stringify(h.value);break}r.push({role:"tool",tool_call_id:g.toolCallId,content:_})}break;default:throw Error(`Unsupported role: ${t}`)}return{messages:r,warnings:u}}function S6({id:i,model:n,created:r}){return{id:i??void 0,modelId:n??void 0,timestamp:r==null?void 0:new Date(r*1000)}}function A6(i){switch(i){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var CL=o.object({logitBias:o.record(o.coerce.number(),o.number()).optional(),logprobs:o.union([o.boolean(),o.number()]).optional(),parallelToolCalls:o.boolean().optional(),user:o.string().optional(),reasoningEffort:o.enum(["minimal","low","medium","high"]).optional(),maxCompletionTokens:o.number().optional(),store:o.boolean().optional(),metadata:o.record(o.string().max(64),o.string().max(512)).optional(),prediction:o.record(o.string(),o.any()).optional(),structuredOutputs:o.boolean().optional(),serviceTier:o.enum(["auto","flex","priority"]).optional(),strictJsonSchema:o.boolean().optional(),textVerbosity:o.enum(["low","medium","high"]).optional(),promptCacheKey:o.string().optional(),safetyIdentifier:o.string().optional()});function RL({tools:i,toolChoice:n,structuredOutputs:r,strictJsonSchema:u}){i=i?.length?i:void 0;let t=[];if(i==null)return{tools:void 0,toolChoice:void 0,toolWarnings:t};let c=[];for(let h of i)switch(h.type){case"function":c.push({type:"function",function:{name:h.name,description:h.description,parameters:h.inputSchema,strict:r?u:void 0}});break;default:t.push({type:"unsupported-tool",tool:h});break}if(n==null)return{tools:c,toolChoice:void 0,toolWarnings:t};let g=n.type;switch(g){case"auto":case"none":case"required":return{tools:c,toolChoice:g,toolWarnings:t};case"tool":return{tools:c,toolChoice:{type:"function",function:{name:n.toolName}},toolWarnings:t};default:throw new oi({functionality:`tool choice type: ${g}`})}}var ZL=class{constructor(i,n){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\\/\\/.*$/]},this.modelId=i,this.config=n}get provider(){return this.config.provider}async getArgs({prompt:i,maxOutputTokens:n,temperature:r,topP:u,topK:t,frequencyPenalty:c,presencePenalty:g,stopSequences:h,responseFormat:_,seed:l,tools:$,toolChoice:w,providerOptions:b}){let v=[],f=await Hi({provider:"openai",providerOptions:b,schema:CL})??{},U=f.structuredOutputs??!0;t!=null&&v.push({type:"unsupported-setting",setting:"topK"}),_?.type==="json"&&_.schema!=null&&!U&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{messages:z,warnings:J}=kL({prompt:i,systemMessageMode:sL(this.modelId)});v.push(...J);let N=f.strictJsonSchema??!1,j={model:this.modelId,logit_bias:f.logitBias,logprobs:f.logprobs===!0||typeof f.logprobs=="number"?!0:void 0,top_logprobs:typeof f.logprobs=="number"?f.logprobs:typeof f.logprobs=="boolean"&&f.logprobs?0:void 0,user:f.user,parallel_tool_calls:f.parallelToolCalls,max_tokens:n,temperature:r,top_p:u,frequency_penalty:c,presence_penalty:g,response_format:_?.type==="json"?U&&_.schema!=null?{type:"json_schema",json_schema:{schema:_.schema,strict:N,name:_.name??"response",description:_.description}}:{type:"json_object"}:void 0,stop:h,seed:l,verbosity:f.textVerbosity,max_completion_tokens:f.maxCompletionTokens,store:f.store,metadata:f.metadata,prediction:f.prediction,reasoning_effort:f.reasoningEffort,service_tier:f.serviceTier,prompt_cache_key:f.promptCacheKey,safety_identifier:f.safetyIdentifier,messages:z};FO(this.modelId)?(j.temperature!=null&&(j.temperature=void 0,v.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),j.top_p!=null&&(j.top_p=void 0,v.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),j.frequency_penalty!=null&&(j.frequency_penalty=void 0,v.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),j.presence_penalty!=null&&(j.presence_penalty=void 0,v.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),j.logit_bias!=null&&(j.logit_bias=void 0,v.push({type:"other",message:"logitBias is not supported for reasoning models"})),j.logprobs!=null&&(j.logprobs=void 0,v.push({type:"other",message:"logprobs is not supported for reasoning models"})),j.top_logprobs!=null&&(j.top_logprobs=void 0,v.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),j.max_tokens!=null&&(j.max_completion_tokens??=j.max_tokens,j.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&j.temperature!=null&&(j.temperature=void 0,v.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),f.serviceTier==="flex"&&!dL(this.modelId)&&(v.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),j.service_tier=void 0),f.serviceTier==="priority"&&!aL(this.modelId)&&(v.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),j.service_tier=void 0);let{tools:O,toolChoice:W,toolWarnings:E}=RL({tools:$,toolChoice:w,structuredOutputs:U,strictJsonSchema:N});return{args:{...j,tools:O,tool_choice:W},warnings:[...v,...E]}}async doGenerate(i){let{args:n,warnings:r}=await this.getArgs(i),{responseHeaders:u,value:t,rawValue:c}=await fi({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ui(this.config.headers(),i.headers),body:n,failedResponseHandler:hn,successfulResponseHandler:Vi(eL),abortSignal:i.abortSignal,fetch:this.config.fetch}),g=t.choices[0],h=[],_=g.message.content;_!=null&&_.length>0&&h.push({type:"text",text:_});for(let b of g.message.tool_calls??[])h.push({type:"tool-call",toolCallId:b.id??Qi(),toolName:b.function.name,input:b.function.arguments});for(let b of g.message.annotations??[])h.push({type:"source",sourceType:"url",id:Qi(),url:b.url,title:b.title});let l=t.usage?.completion_tokens_details,$=t.usage?.prompt_tokens_details,w={openai:{}};return l?.accepted_prediction_tokens!=null&&(w.openai.acceptedPredictionTokens=l?.accepted_prediction_tokens),l?.rejected_prediction_tokens!=null&&(w.openai.rejectedPredictionTokens=l?.rejected_prediction_tokens),g.logprobs?.content!=null&&(w.openai.logprobs=g.logprobs.content),{content:h,finishReason:A6(g.finish_reason),usage:{inputTokens:t.usage?.prompt_tokens??void 0,outputTokens:t.usage?.completion_tokens??void 0,totalTokens:t.usage?.total_tokens??void 0,reasoningTokens:l?.reasoning_tokens??void 0,cachedInputTokens:$?.cached_tokens??void 0},request:{body:n},response:{...S6(t),headers:u,body:c},warnings:r,providerMetadata:w}}async doStream(i){let{args:n,warnings:r}=await this.getArgs(i),u={...n,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:t,value:c}=await fi({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ui(this.config.headers(),i.headers),body:u,failedResponseHandler:hn,successfulResponseHandler:Vt(pL),abortSignal:i.abortSignal,fetch:this.config.fetch}),g=[],h="unknown",_={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},l=!0,$=!1,w={openai:{}};return{stream:c.pipeThrough(new TransformStream({start(b){b.enqueue({type:"stream-start",warnings:r})},transform(b,v){if(i.includeRawChunks&&v.enqueue({type:"raw",rawValue:b.rawValue}),!b.success){h="error",v.enqueue({type:"error",error:b.error});return}let f=b.value;if("error"in f){h="error",v.enqueue({type:"error",error:f.error});return}l&&(l=!1,v.enqueue({type:"response-metadata",...S6(f)})),f.usage!=null&&(_.inputTokens=f.usage.prompt_tokens??void 0,_.outputTokens=f.usage.completion_tokens??void 0,_.totalTokens=f.usage.total_tokens??void 0,_.reasoningTokens=f.usage.completion_tokens_details?.reasoning_tokens??void 0,_.cachedInputTokens=f.usage.prompt_tokens_details?.cached_tokens??void 0,f.usage.completion_tokens_details?.accepted_prediction_tokens!=null&&(w.openai.acceptedPredictionTokens=f.usage.completion_tokens_details?.accepted_prediction_tokens),f.usage.completion_tokens_details?.rejected_prediction_tokens!=null&&(w.openai.rejectedPredictionTokens=f.usage.completion_tokens_details?.rejected_prediction_tokens));let U=f.choices[0];if(U?.finish_reason!=null&&(h=A6(U.finish_reason)),U?.logprobs?.content!=null&&(w.openai.logprobs=U.logprobs.content),U?.delta==null)return;let z=U.delta;if(z.content!=null&&($||=(v.enqueue({type:"text-start",id:"0"}),!0),v.enqueue({type:"text-delta",id:"0",delta:z.content})),z.tool_calls!=null)for(let J of z.tool_calls){let N=J.index;if(g[N]==null){if(J.type!=="function")throw new j0({data:J,message:"Expected \'function\' type."});if(J.id==null)throw new j0({data:J,message:"Expected \'id\' to be a string."});if(J.function?.name==null)throw new j0({data:J,message:"Expected \'function.name\' to be a string."});v.enqueue({type:"tool-input-start",id:J.id,toolName:J.function.name}),g[N]={id:J.id,type:"function",function:{name:J.function.name,arguments:J.function.arguments??""},hasFinished:!1};let O=g[N];O.function?.name!=null&&O.function?.arguments!=null&&(O.function.arguments.length>0&&v.enqueue({type:"tool-input-delta",id:O.id,delta:O.function.arguments}),G6(O.function.arguments)&&(v.enqueue({type:"tool-input-end",id:O.id}),v.enqueue({type:"tool-call",toolCallId:O.id??Qi(),toolName:O.function.name,input:O.function.arguments}),O.hasFinished=!0));continue}let j=g[N];j.hasFinished||(J.function?.arguments!=null&&(j.function.arguments+=J.function?.arguments??""),v.enqueue({type:"tool-input-delta",id:j.id,delta:J.function.arguments??""}),j.function?.name!=null&&j.function?.arguments!=null&&G6(j.function.arguments)&&(v.enqueue({type:"tool-input-end",id:j.id}),v.enqueue({type:"tool-call",toolCallId:j.id??Qi(),toolName:j.function.name,input:j.function.arguments}),j.hasFinished=!0))}if(z.annotations!=null)for(let J of z.annotations)v.enqueue({type:"source",sourceType:"url",id:Qi(),url:J.url,title:J.title})},flush(b){$&&b.enqueue({type:"text-end",id:"0"}),b.enqueue({type:"finish",finishReason:h,usage:_,...w==null?{}:{providerMetadata:w}})}})),request:{body:u},response:{headers:t}}}},xO=o.object({prompt_tokens:o.number().nullish(),completion_tokens:o.number().nullish(),total_tokens:o.number().nullish(),prompt_tokens_details:o.object({cached_tokens:o.number().nullish()}).nullish(),completion_tokens_details:o.object({reasoning_tokens:o.number().nullish(),accepted_prediction_tokens:o.number().nullish(),rejected_prediction_tokens:o.number().nullish()}).nullish()}).nullish(),eL=o.object({id:o.string().nullish(),created:o.number().nullish(),model:o.string().nullish(),choices:o.array(o.object({message:o.object({role:o.literal("assistant").nullish(),content:o.string().nullish(),tool_calls:o.array(o.object({id:o.string().nullish(),type:o.literal("function"),function:o.object({name:o.string(),arguments:o.string()})})).nullish(),annotations:o.array(o.object({type:o.literal("url_citation"),start_index:o.number(),end_index:o.number(),url:o.string(),title:o.string()})).nullish()}),index:o.number(),logprobs:o.object({content:o.array(o.object({token:o.string(),logprob:o.number(),top_logprobs:o.array(o.object({token:o.string(),logprob:o.number()}))})).nullish()}).nullish(),finish_reason:o.string().nullish()})),usage:xO}),pL=o.union([o.object({id:o.string().nullish(),created:o.number().nullish(),model:o.string().nullish(),choices:o.array(o.object({delta:o.object({role:o.enum(["assistant"]).nullish(),content:o.string().nullish(),tool_calls:o.array(o.object({index:o.number(),id:o.string().nullish(),type:o.literal("function").nullish(),function:o.object({name:o.string().nullish(),arguments:o.string().nullish()})})).nullish(),annotations:o.array(o.object({type:o.literal("url_citation"),start_index:o.number(),end_index:o.number(),url:o.string(),title:o.string()})).nullish()}).nullish(),logprobs:o.object({content:o.array(o.object({token:o.string(),logprob:o.number(),top_logprobs:o.array(o.object({token:o.string(),logprob:o.number()}))})).nullish()}).nullish(),finish_reason:o.string().nullish(),index:o.number()})),usage:xO}),J0]);function FO(i){return(i.startsWith("o")||i.startsWith("gpt-5"))&&!i.startsWith("gpt-5-chat")}function dL(i){return i.startsWith("o3")||i.startsWith("o4-mini")||i.startsWith("gpt-5")&&!i.startsWith("gpt-5-chat")}function aL(i){return i.startsWith("gpt-4")||i.startsWith("gpt-5-mini")||i.startsWith("gpt-5")&&!i.startsWith("gpt-5-nano")&&!i.startsWith("gpt-5-chat")||i.startsWith("o3")||i.startsWith("o4-mini")}function sL(i){return FO(i)?iI[i]?.systemMessageMode??"developer":"system"}var iI={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function nI({prompt:i,user:n="user",assistant:r="assistant"}){let u="";i[0].role==="system"&&(u+=`${i[0].content}\n\n`,i=i.slice(1));for(let{role:t,content:c}of i)switch(t){case"system":throw new hX({message:"Unexpected system message in prompt: ${content}",prompt:i});case"user":{let g=c.map((h)=>{switch(h.type){case"text":return h.text}}).filter(Boolean).join("");u+=`${n}:\n${g}\n\n`;break}case"assistant":{let g=c.map((h)=>{switch(h.type){case"text":return h.text;case"tool-call":throw new oi({functionality:"tool-call messages"})}}).join("");u+=`${r}:\n${g}\n\n`;break}case"tool":throw new oi({functionality:"tool messages"});default:throw Error(`Unsupported role: ${t}`)}return u+=`${r}:\n`,{prompt:u,stopSequences:[`\n${n}:`]}}function B6({id:i,model:n,created:r}){return{id:i??void 0,modelId:n??void 0,timestamp:r==null?void 0:new Date(r*1000)}}function K6(i){switch(i){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var V6=o.object({echo:o.boolean().optional(),logitBias:o.record(o.string(),o.number()).optional(),suffix:o.string().optional(),user:o.string().optional(),logprobs:o.union([o.boolean(),o.number()]).optional()}),tI=class{constructor(i,n){this.specificationVersion="v2",this.supportedUrls={},this.modelId=i,this.config=n}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:i,maxOutputTokens:n,temperature:r,topP:u,topK:t,frequencyPenalty:c,presencePenalty:g,stopSequences:h,responseFormat:_,tools:l,toolChoice:$,seed:w,providerOptions:b}){let v=[],f={...await Hi({provider:"openai",providerOptions:b,schema:V6}),...await Hi({provider:this.providerOptionsName,providerOptions:b,schema:V6})};t!=null&&v.push({type:"unsupported-setting",setting:"topK"}),l?.length&&v.push({type:"unsupported-setting",setting:"tools"}),$!=null&&v.push({type:"unsupported-setting",setting:"toolChoice"}),_!=null&&_.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:U,stopSequences:z}=nI({prompt:i}),J=[...z??[],...h??[]];return{args:{model:this.modelId,echo:f.echo,logit_bias:f.logitBias,logprobs:f?.logprobs===!0?0:f?.logprobs===!1?void 0:f?.logprobs,suffix:f.suffix,user:f.user,max_tokens:n,temperature:r,top_p:u,frequency_penalty:c,presence_penalty:g,seed:w,prompt:U,stop:J.length>0?J:void 0},warnings:v}}async doGenerate(i){let{args:n,warnings:r}=await this.getArgs(i),{responseHeaders:u,value:t,rawValue:c}=await fi({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ui(this.config.headers(),i.headers),body:n,failedResponseHandler:hn,successfulResponseHandler:Vi(rI),abortSignal:i.abortSignal,fetch:this.config.fetch}),g=t.choices[0],h={openai:{}};return g.logprobs!=null&&(h.openai.logprobs=g.logprobs),{content:[{type:"text",text:g.text}],usage:{inputTokens:t.usage?.prompt_tokens,outputTokens:t.usage?.completion_tokens,totalTokens:t.usage?.total_tokens},finishReason:K6(g.finish_reason),request:{body:n},response:{...B6(t),headers:u,body:c},providerMetadata:h,warnings:r}}async doStream(i){let{args:n,warnings:r}=await this.getArgs(i),u={...n,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:t,value:c}=await fi({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ui(this.config.headers(),i.headers),body:u,failedResponseHandler:hn,successfulResponseHandler:Vt(uI),abortSignal:i.abortSignal,fetch:this.config.fetch}),g="unknown",h={openai:{}},_={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},l=!0;return{stream:c.pipeThrough(new TransformStream({start($){$.enqueue({type:"stream-start",warnings:r})},transform($,w){if(i.includeRawChunks&&w.enqueue({type:"raw",rawValue:$.rawValue}),!$.success){g="error",w.enqueue({type:"error",error:$.error});return}let b=$.value;if("error"in b){g="error",w.enqueue({type:"error",error:b.error});return}l&&(l=!1,w.enqueue({type:"response-metadata",...B6(b)}),w.enqueue({type:"text-start",id:"0"})),b.usage!=null&&(_.inputTokens=b.usage.prompt_tokens,_.outputTokens=b.usage.completion_tokens,_.totalTokens=b.usage.total_tokens);let v=b.choices[0];v?.finish_reason!=null&&(g=K6(v.finish_reason)),v?.logprobs!=null&&(h.openai.logprobs=v.logprobs),v?.text!=null&&v.text.length>0&&w.enqueue({type:"text-delta",id:"0",delta:v.text})},flush($){l||$.enqueue({type:"text-end",id:"0"}),$.enqueue({type:"finish",finishReason:g,providerMetadata:h,usage:_})}})),request:{body:u},response:{headers:t}}}},PO=o.object({prompt_tokens:o.number(),completion_tokens:o.number(),total_tokens:o.number()}),rI=o.object({id:o.string().nullish(),created:o.number().nullish(),model:o.string().nullish(),choices:o.array(o.object({text:o.string(),finish_reason:o.string(),logprobs:o.object({tokens:o.array(o.string()),token_logprobs:o.array(o.number()),top_logprobs:o.array(o.record(o.string(),o.number())).nullish()}).nullish()})),usage:PO.nullish()}),uI=o.union([o.object({id:o.string().nullish(),created:o.number().nullish(),model:o.string().nullish(),choices:o.array(o.object({text:o.string(),finish_reason:o.string().nullish(),index:o.number(),logprobs:o.object({tokens:o.array(o.string()),token_logprobs:o.array(o.number()),top_logprobs:o.array(o.record(o.string(),o.number())).nullish()}).nullish()})),usage:PO.nullish()}),J0]),cI=o.object({dimensions:o.number().optional(),user:o.string().optional()}),oI=class{constructor(i,n){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=i,this.config=n}get provider(){return this.config.provider}async doEmbed({values:i,headers:n,abortSignal:r,providerOptions:u}){if(i.length>this.maxEmbeddingsPerCall)throw new DO({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:i});let t=await Hi({provider:"openai",providerOptions:u,schema:cI})??{},{responseHeaders:c,value:g,rawValue:h}=await fi({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Ui(this.config.headers(),n),body:{model:this.modelId,input:i,encoding_format:"float",dimensions:t.dimensions,user:t.user},failedResponseHandler:hn,successfulResponseHandler:Vi(gI),abortSignal:r,fetch:this.config.fetch});return{embeddings:g.data.map((_)=>_.embedding),usage:g.usage?{tokens:g.usage.prompt_tokens}:void 0,response:{headers:c,body:h}}}},gI=o.object({data:o.array(o.object({embedding:o.array(o.number())})),usage:o.object({prompt_tokens:o.number()}).nullish()}),hI={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10},_I=new Set(["gpt-image-1"]),lI=class{constructor(i,n){this.modelId=i,this.config=n,this.specificationVersion="v2"}get maxImagesPerCall(){return hI[this.modelId]??1}get provider(){return this.config.provider}async doGenerate({prompt:i,n,size:r,aspectRatio:u,seed:t,providerOptions:c,headers:g,abortSignal:h}){var _;let l=[];u!=null&&l.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),t!=null&&l.push({type:"unsupported-setting",setting:"seed"});let $=(_=this.config._internal)?.currentDate?.call(_)??new Date,{value:w,responseHeaders:b}=await fi({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Ui(this.config.headers(),g),body:{model:this.modelId,prompt:i,n,size:r,...c.openai??{},..._I.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:hn,successfulResponseHandler:Vi($I),abortSignal:h,fetch:this.config.fetch});return{images:w.data.map((v)=>v.b64_json),warnings:l,response:{timestamp:$,modelId:this.modelId,headers:b},providerMetadata:{openai:{images:w.data.map((v)=>v.revised_prompt?{revisedPrompt:v.revised_prompt}:null)}}}}},$I=o.object({data:o.array(o.object({b64_json:o.string(),revised_prompt:o.string().optional()}))}),wI=o.object({code:o.string().nullish(),containerId:o.string()}),bI=o.object({outputs:o.array(o.discriminatedUnion("type",[o.object({type:o.literal("logs"),logs:o.string()}),o.object({type:o.literal("image"),url:o.string()})])).nullish()}),vI=o.object({container:o.union([o.string(),o.object({fileIds:o.array(o.string()).optional()})]).optional()}),fI=Pn({id:"openai.code_interpreter",name:"code_interpreter",inputSchema:wI,outputSchema:bI}),OI=(i={})=>fI(i),yO=o.object({key:o.string(),type:o.enum(["eq","ne","gt","gte","lt","lte"]),value:o.union([o.string(),o.number(),o.boolean()])}),TO=o.object({type:o.enum(["and","or"]),filters:o.array(o.union([yO,o.lazy(()=>TO)]))}),jI=o.object({vectorStoreIds:o.array(o.string()),maxNumResults:o.number().optional(),ranking:o.object({ranker:o.string().optional(),scoreThreshold:o.number().optional()}).optional(),filters:o.union([yO,TO]).optional()}),UI=o.object({queries:o.array(o.string()),results:o.array(o.object({attributes:o.record(o.string(),o.unknown()),fileId:o.string(),filename:o.string(),score:o.number(),text:o.string()})).nullable()}),NI=Pn({id:"openai.file_search",name:"file_search",inputSchema:o.object({}),outputSchema:UI}),zI=o.object({background:o.enum(["auto","opaque","transparent"]).optional(),inputFidelity:o.enum(["low","high"]).optional(),inputImageMask:o.object({fileId:o.string().optional(),imageUrl:o.string().optional()}).optional(),model:o.string().optional(),moderation:o.enum(["auto"]).optional(),outputCompression:o.number().int().min(0).max(100).optional(),outputFormat:o.enum(["png","jpeg","webp"]).optional(),quality:o.enum(["auto","low","medium","high"]).optional(),size:o.enum(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict(),WI=o.object({result:o.string()}),DI=Pn({id:"openai.image_generation",name:"image_generation",inputSchema:o.object({}),outputSchema:WI}),JI=(i={})=>DI(i),kO=o.object({action:o.object({type:o.literal("exec"),command:o.array(o.string()),timeoutMs:o.number().optional(),user:o.string().optional(),workingDirectory:o.string().optional(),env:o.record(o.string(),o.string()).optional()})}),CO=o.object({output:o.string()}),EI=Pn({id:"openai.local_shell",name:"local_shell",inputSchema:kO,outputSchema:CO}),HI=o.object({filters:o.object({allowedDomains:o.array(o.string()).optional()}).optional(),searchContextSize:o.enum(["low","medium","high"]).optional(),userLocation:o.object({type:o.literal("approximate"),country:o.string().optional(),city:o.string().optional(),region:o.string().optional(),timezone:o.string().optional()}).optional()}),GI=yi({id:"openai.web_search",name:"web_search",inputSchema:o.object({action:o.discriminatedUnion("type",[o.object({type:o.literal("search"),query:o.string().nullish()}),o.object({type:o.literal("open_page"),url:o.string()}),o.object({type:o.literal("find"),url:o.string(),pattern:o.string()})]).nullish()})}),qI=(i={})=>GI(i),XI=o.object({searchContextSize:o.enum(["low","medium","high"]).optional(),userLocation:o.object({type:o.literal("approximate"),country:o.string().optional(),city:o.string().optional(),region:o.string().optional(),timezone:o.string().optional()}).optional()}),LI=yi({id:"openai.web_search_preview",name:"web_search_preview",inputSchema:o.object({action:o.discriminatedUnion("type",[o.object({type:o.literal("search"),query:o.string().nullish()}),o.object({type:o.literal("open_page"),url:o.string()}),o.object({type:o.literal("find"),url:o.string(),pattern:o.string()})]).nullish()})}),II={codeInterpreter:OI,fileSearch:NI,imageGeneration:JI,localShell:EI,webSearchPreview:LI,webSearch:qI};function M6(i,n){return n?n.some((r)=>i.startsWith(r)):!1}async function YI({prompt:i,systemMessageMode:n,fileIdPrefixes:r,store:u,hasLocalShellTool:t=!1}){let c=[],g=[];for(let{role:h,content:_}of i)switch(h){case"system":switch(n){case"system":c.push({role:"system",content:_});break;case"developer":c.push({role:"developer",content:_});break;case"remove":g.push({type:"other",message:"system messages are removed for this model"});break;default:throw Error(`Unsupported system message mode: ${n}`)}break;case"user":c.push({role:"user",content:_.map((l,$)=>{switch(l.type){case"text":return{type:"input_text",text:l.text};case"file":if(l.mediaType.startsWith("image/")){let w=l.mediaType==="image/*"?"image/jpeg":l.mediaType;return{type:"input_image",...l.data instanceof URL?{image_url:l.data.toString()}:typeof l.data=="string"&&M6(l.data,r)?{file_id:l.data}:{image_url:`data:${w};base64,${pi(l.data)}`},detail:l.providerOptions?.openai?.imageDetail}}else if(l.mediaType==="application/pdf")return l.data instanceof URL?{type:"input_file",file_url:l.data.toString()}:{type:"input_file",...typeof l.data=="string"&&M6(l.data,r)?{file_id:l.data}:{filename:l.filename??`part-${$}.pdf`,file_data:`data:application/pdf;base64,${pi(l.data)}`}};else throw new oi({functionality:`file part media type ${l.mediaType}`})}})});break;case"assistant":{let l={},$={};for(let w of _)switch(w.type){case"text":c.push({role:"assistant",content:[{type:"output_text",text:w.text}],id:w.providerOptions?.openai?.itemId??void 0});break;case"tool-call":if($[w.toolCallId]=w,w.providerExecuted)break;if(t&&w.toolName==="local_shell"){let b=kO.parse(w.input);c.push({type:"local_shell_call",call_id:w.toolCallId,id:w.providerOptions?.openai?.itemId??void 0,action:{type:"exec",command:b.action.command,timeout_ms:b.action.timeoutMs,user:b.action.user,working_directory:b.action.workingDirectory,env:b.action.env}});break}c.push({type:"function_call",call_id:w.toolCallId,name:w.toolName,arguments:JSON.stringify(w.input),id:w.providerOptions?.openai?.itemId??void 0});break;case"tool-result":u?c.push({type:"item_reference",id:w.toolCallId}):g.push({type:"other",message:`Results for OpenAI tool ${w.toolName} are not sent to the API when store is false`});break;case"reasoning":{let b=await Hi({provider:"openai",providerOptions:w.providerOptions,schema:QI}),v=b?.itemId;if(v!=null){let f=l[v];if(u)f===void 0&&(c.push({type:"item_reference",id:v}),l[v]={type:"reasoning",id:v,summary:[]});else{let U=[];w.text.length>0?U.push({type:"summary_text",text:w.text}):f!==void 0&&g.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(w)}.`}),f===void 0?(l[v]={type:"reasoning",id:v,encrypted_content:b?.reasoningEncryptedContent,summary:U},c.push(l[v])):f.summary.push(...U)}}else g.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(w)}.`});break}}break}case"tool":for(let l of _){let $=l.output;if(t&&l.toolName==="local_shell"&&$.type==="json"){c.push({type:"local_shell_call_output",call_id:l.toolCallId,output:CO.parse($.value).output});break}let w;switch($.type){case"text":case"error-text":w=$.value;break;case"content":case"json":case"error-json":w=JSON.stringify($.value);break}c.push({type:"function_call_output",call_id:l.toolCallId,output:w})}break;default:throw Error(`Unsupported role: ${h}`)}return{input:c,warnings:g}}var QI=o.object({itemId:o.string().nullish(),reasoningEncryptedContent:o.string().nullish()});function x6({finishReason:i,hasFunctionCall:n}){switch(i){case void 0:case null:return n?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return n?"tool-calls":"unknown"}}function mI({tools:i,toolChoice:n,strictJsonSchema:r}){i=i?.length?i:void 0;let u=[];if(i==null)return{tools:void 0,toolChoice:void 0,toolWarnings:u};let t=[];for(let g of i)switch(g.type){case"function":t.push({type:"function",name:g.name,description:g.description,parameters:g.inputSchema,strict:r});break;case"provider-defined":switch(g.id){case"openai.file_search":{let h=jI.parse(g.args);t.push({type:"file_search",vector_store_ids:h.vectorStoreIds,max_num_results:h.maxNumResults,ranking_options:h.ranking?{ranker:h.ranking.ranker,score_threshold:h.ranking.scoreThreshold}:void 0,filters:h.filters});break}case"openai.local_shell":t.push({type:"local_shell"});break;case"openai.web_search_preview":{let h=XI.parse(g.args);t.push({type:"web_search_preview",search_context_size:h.searchContextSize,user_location:h.userLocation});break}case"openai.web_search":{let h=HI.parse(g.args);t.push({type:"web_search",filters:h.filters==null?void 0:{allowed_domains:h.filters.allowedDomains},search_context_size:h.searchContextSize,user_location:h.userLocation});break}case"openai.code_interpreter":{let h=vI.parse(g.args);t.push({type:"code_interpreter",container:h.container==null?{type:"auto",file_ids:void 0}:typeof h.container=="string"?h.container:{type:"auto",file_ids:h.container.fileIds}});break}case"openai.image_generation":{let h=zI.parse(g.args);t.push({type:"image_generation",background:h.background,input_fidelity:h.inputFidelity,input_image_mask:h.inputImageMask?{file_id:h.inputImageMask.fileId,image_url:h.inputImageMask.imageUrl}:void 0,model:h.model,size:h.size,quality:h.quality,moderation:h.moderation,output_format:h.outputFormat,output_compression:h.outputCompression});break}}break;default:u.push({type:"unsupported-tool",tool:g});break}if(n==null)return{tools:t,toolChoice:void 0,toolWarnings:u};let c=n.type;switch(c){case"auto":case"none":case"required":return{tools:t,toolChoice:c,toolWarnings:u};case"tool":return{tools:t,toolChoice:n.toolName==="code_interpreter"||n.toolName==="file_search"||n.toolName==="image_generation"||n.toolName==="web_search_preview"||n.toolName==="web_search"?{type:n.toolName}:{type:"function",name:n.toolName},toolWarnings:u};default:throw new oi({functionality:`tool choice type: ${c}`})}}var RO=o.object({type:o.literal("web_search_call"),id:o.string(),status:o.string(),action:o.discriminatedUnion("type",[o.object({type:o.literal("search"),query:o.string().nullish()}),o.object({type:o.literal("open_page"),url:o.string()}),o.object({type:o.literal("find"),url:o.string(),pattern:o.string()})]).nullish()}),ZO=o.object({type:o.literal("file_search_call"),id:o.string(),queries:o.array(o.string()),results:o.array(o.object({attributes:o.record(o.string(),o.unknown()),file_id:o.string(),filename:o.string(),score:o.number(),text:o.string()})).nullish()}),eO=o.object({type:o.literal("code_interpreter_call"),id:o.string(),code:o.string().nullable(),container_id:o.string(),outputs:o.array(o.discriminatedUnion("type",[o.object({type:o.literal("logs"),logs:o.string()}),o.object({type:o.literal("image"),url:o.string()})])).nullable()}),pO=o.object({type:o.literal("local_shell_call"),id:o.string(),call_id:o.string(),action:o.object({type:o.literal("exec"),command:o.array(o.string()),timeout_ms:o.number().optional(),user:o.string().optional(),working_directory:o.string().optional(),env:o.record(o.string(),o.string()).optional()})}),dO=o.object({type:o.literal("image_generation_call"),id:o.string(),result:o.string()}),aO=20,sO=o.array(o.object({token:o.string(),logprob:o.number(),top_logprobs:o.array(o.object({token:o.string(),logprob:o.number()}))})),SI=class{constructor(i,n){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\\/\\/.*$/],"application/pdf":[/^https?:\\/\\/.*$/]},this.modelId=i,this.config=n}get provider(){return this.config.provider}async getArgs({maxOutputTokens:i,temperature:n,stopSequences:r,topP:u,topK:t,presencePenalty:c,frequencyPenalty:g,seed:h,prompt:_,providerOptions:l,tools:$,toolChoice:w,responseFormat:b}){let v=[],f=oY(this.modelId);t!=null&&v.push({type:"unsupported-setting",setting:"topK"}),h!=null&&v.push({type:"unsupported-setting",setting:"seed"}),c!=null&&v.push({type:"unsupported-setting",setting:"presencePenalty"}),g!=null&&v.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&v.push({type:"unsupported-setting",setting:"stopSequences"});let U=await Hi({provider:"openai",providerOptions:l,schema:gY}),{input:z,warnings:J}=await YI({prompt:_,systemMessageMode:f.systemMessageMode,fileIdPrefixes:this.config.fileIdPrefixes,store:U?.store??!0,hasLocalShellTool:W("openai.local_shell")});v.push(...J);let N=U?.strictJsonSchema??!1,j=U?.include;function O(M){j=j==null?[M]:[...j,M]}function W(M){return $?.find((p)=>p.type==="provider-defined"&&p.id===M)!=null}let E=typeof U?.logprobs=="number"?U?.logprobs:U?.logprobs===!0?aO:void 0;E&&O("message.output_text.logprobs");let X=$?.find((M)=>M.type==="provider-defined"&&(M.id==="openai.web_search"||M.id==="openai.web_search_preview"))?.name;X&&O("web_search_call.action.sources"),W("openai.code_interpreter")&&O("code_interpreter_call.outputs");let H={model:this.modelId,input:z,temperature:n,top_p:u,max_output_tokens:i,...(b?.type==="json"||U?.textVerbosity)&&{text:{...b?.type==="json"&&{format:b.schema==null?{type:"json_object"}:{type:"json_schema",strict:N,name:b.name??"response",description:b.description,schema:b.schema}},...U?.textVerbosity&&{verbosity:U.textVerbosity}}},max_tool_calls:U?.maxToolCalls,metadata:U?.metadata,parallel_tool_calls:U?.parallelToolCalls,previous_response_id:U?.previousResponseId,store:U?.store,user:U?.user,instructions:U?.instructions,service_tier:U?.serviceTier,include:j,prompt_cache_key:U?.promptCacheKey,safety_identifier:U?.safetyIdentifier,top_logprobs:E,...f.isReasoningModel&&(U?.reasoningEffort!=null||U?.reasoningSummary!=null)&&{reasoning:{...U?.reasoningEffort!=null&&{effort:U.reasoningEffort},...U?.reasoningSummary!=null&&{summary:U.reasoningSummary}}},...f.requiredAutoTruncation&&{truncation:"auto"}};f.isReasoningModel?(H.temperature!=null&&(H.temperature=void 0,v.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),H.top_p!=null&&(H.top_p=void 0,v.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))):(U?.reasoningEffort!=null&&v.push({type:"unsupported-setting",setting:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"}),U?.reasoningSummary!=null&&v.push({type:"unsupported-setting",setting:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})),U?.serviceTier==="flex"&&!f.supportsFlexProcessing&&(v.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete H.service_tier),U?.serviceTier==="priority"&&!f.supportsPriorityProcessing&&(v.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete H.service_tier);let{tools:Y,toolChoice:V,toolWarnings:Q}=mI({tools:$,toolChoice:w,strictJsonSchema:N});return{webSearchToolName:X,args:{...H,tools:Y,tool_choice:V},warnings:[...v,...Q]}}async doGenerate(i){var n,r;let{args:u,warnings:t,webSearchToolName:c}=await this.getArgs(i),g=this.config.url({path:"/responses",modelId:this.modelId}),{responseHeaders:h,value:_,rawValue:l}=await fi({url:g,headers:Ui(this.config.headers(),i.headers),body:u,failedResponseHandler:hn,successfulResponseHandler:Vi(o.object({id:o.string(),created_at:o.number(),error:o.object({code:o.string(),message:o.string()}).nullish(),model:o.string(),output:o.array(o.discriminatedUnion("type",[o.object({type:o.literal("message"),role:o.literal("assistant"),id:o.string(),content:o.array(o.object({type:o.literal("output_text"),text:o.string(),logprobs:sO.nullish(),annotations:o.array(o.discriminatedUnion("type",[o.object({type:o.literal("url_citation"),start_index:o.number(),end_index:o.number(),url:o.string(),title:o.string()}),o.object({type:o.literal("file_citation"),file_id:o.string(),filename:o.string().nullish(),index:o.number().nullish(),start_index:o.number().nullish(),end_index:o.number().nullish(),quote:o.string().nullish()}),o.object({type:o.literal("container_file_citation")})]))}))}),RO,ZO,eO,dO,pO,o.object({type:o.literal("function_call"),call_id:o.string(),name:o.string(),arguments:o.string(),id:o.string()}),o.object({type:o.literal("computer_call"),id:o.string(),status:o.string().optional()}),o.object({type:o.literal("reasoning"),id:o.string(),encrypted_content:o.string().nullish(),summary:o.array(o.object({type:o.literal("summary_text"),text:o.string()}))})])),service_tier:o.string().nullish(),incomplete_details:o.object({reason:o.string()}).nullish(),usage:ij})),abortSignal:i.abortSignal,fetch:this.config.fetch});if(_.error)throw new Pi({message:_.error.message,url:g,requestBodyValues:u,statusCode:400,responseHeaders:h,responseBody:l,isRetryable:!1});let $=[],w=[],b=!1;for(let f of _.output)switch(f.type){case"reasoning":f.summary.length===0&&f.summary.push({type:"summary_text",text:""});for(let U of f.summary)$.push({type:"reasoning",text:U.text,providerMetadata:{openai:{itemId:f.id,reasoningEncryptedContent:f.encrypted_content??null}}});break;case"image_generation_call":$.push({type:"tool-call",toolCallId:f.id,toolName:"image_generation",input:"{}",providerExecuted:!0}),$.push({type:"tool-result",toolCallId:f.id,toolName:"image_generation",result:{result:f.result},providerExecuted:!0});break;case"local_shell_call":$.push({type:"tool-call",toolCallId:f.call_id,toolName:"local_shell",input:JSON.stringify({action:f.action}),providerMetadata:{openai:{itemId:f.id}}});break;case"message":for(let U of f.content){i.providerOptions?.openai?.logprobs&&U.logprobs&&w.push(U.logprobs),$.push({type:"text",text:U.text,providerMetadata:{openai:{itemId:f.id}}});for(let z of U.annotations)z.type==="url_citation"?$.push({type:"source",sourceType:"url",id:(n=this.config).generateId?.call(n)??Qi(),url:z.url,title:z.title}):z.type==="file_citation"&&$.push({type:"source",sourceType:"document",id:(r=this.config).generateId?.call(r)??Qi(),mediaType:"text/plain",title:z.quote??z.filename??"Document",filename:z.filename??z.file_id})}break;case"function_call":b=!0,$.push({type:"tool-call",toolCallId:f.call_id,toolName:f.name,input:f.arguments,providerMetadata:{openai:{itemId:f.id}}});break;case"web_search_call":$.push({type:"tool-call",toolCallId:f.id,toolName:c??"web_search",input:JSON.stringify({action:f.action}),providerExecuted:!0}),$.push({type:"tool-result",toolCallId:f.id,toolName:c??"web_search",result:{status:f.status},providerExecuted:!0});break;case"computer_call":$.push({type:"tool-call",toolCallId:f.id,toolName:"computer_use",input:"",providerExecuted:!0}),$.push({type:"tool-result",toolCallId:f.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:f.status||"completed"},providerExecuted:!0});break;case"file_search_call":$.push({type:"tool-call",toolCallId:f.id,toolName:"file_search",input:"{}",providerExecuted:!0}),$.push({type:"tool-result",toolCallId:f.id,toolName:"file_search",result:{queries:f.queries,results:f.results?.map((U)=>({attributes:U.attributes,fileId:U.file_id,filename:U.filename,score:U.score,text:U.text}))??null},providerExecuted:!0});break;case"code_interpreter_call":$.push({type:"tool-call",toolCallId:f.id,toolName:"code_interpreter",input:JSON.stringify({code:f.code,containerId:f.container_id}),providerExecuted:!0}),$.push({type:"tool-result",toolCallId:f.id,toolName:"code_interpreter",result:{outputs:f.outputs},providerExecuted:!0});break}let v={openai:{responseId:_.id}};return w.length>0&&(v.openai.logprobs=w),typeof _.service_tier=="string"&&(v.openai.serviceTier=_.service_tier),{content:$,finishReason:x6({finishReason:_.incomplete_details?.reason,hasFunctionCall:b}),usage:{inputTokens:_.usage.input_tokens,outputTokens:_.usage.output_tokens,totalTokens:_.usage.input_tokens+_.usage.output_tokens,reasoningTokens:_.usage.output_tokens_details?.reasoning_tokens??void 0,cachedInputTokens:_.usage.input_tokens_details?.cached_tokens??void 0},request:{body:u},response:{id:_.id,timestamp:new Date(_.created_at*1000),modelId:_.model,headers:h,body:l},providerMetadata:v,warnings:t}}async doStream(i){let{args:n,warnings:r,webSearchToolName:u}=await this.getArgs(i),{responseHeaders:t,value:c}=await fi({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Ui(this.config.headers(),i.headers),body:{...n,stream:!0},failedResponseHandler:hn,successfulResponseHandler:Vt(RI),abortSignal:i.abortSignal,fetch:this.config.fetch}),g=this,h="unknown",_={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},l=[],$=null,w={},b=!1,v={},f;return{stream:c.pipeThrough(new TransformStream({start(U){U.enqueue({type:"stream-start",warnings:r})},transform(U,z){var J,N,j;if(i.includeRawChunks&&z.enqueue({type:"raw",rawValue:U.rawValue}),!U.success){h="error",z.enqueue({type:"error",error:U.error});return}let O=U.value;if(tj(O))O.item.type==="function_call"?(w[O.output_index]={toolName:O.item.name,toolCallId:O.item.call_id},z.enqueue({type:"tool-input-start",id:O.item.call_id,toolName:O.item.name})):O.item.type==="web_search_call"?(w[O.output_index]={toolName:u??"web_search",toolCallId:O.item.id},z.enqueue({type:"tool-input-start",id:O.item.id,toolName:u??"web_search"})):O.item.type==="computer_call"?(w[O.output_index]={toolName:"computer_use",toolCallId:O.item.id},z.enqueue({type:"tool-input-start",id:O.item.id,toolName:"computer_use"})):O.item.type==="code_interpreter_call"?(w[O.output_index]={toolName:"code_interpreter",toolCallId:O.item.id,codeInterpreter:{containerId:O.item.container_id}},z.enqueue({type:"tool-input-start",id:O.item.id,toolName:"code_interpreter"}),z.enqueue({type:"tool-input-delta",id:O.item.id,delta:`{"containerId":"${O.item.container_id}","code":"`})):O.item.type==="file_search_call"?z.enqueue({type:"tool-call",toolCallId:O.item.id,toolName:"file_search",input:"{}",providerExecuted:!0}):O.item.type==="image_generation_call"?z.enqueue({type:"tool-call",toolCallId:O.item.id,toolName:"image_generation",input:"{}",providerExecuted:!0}):O.item.type==="message"?z.enqueue({type:"text-start",id:O.item.id,providerMetadata:{openai:{itemId:O.item.id}}}):nY(O)&&(v[O.item.id]={encryptedContent:O.item.encrypted_content,summaryParts:[0]},z.enqueue({type:"reasoning-start",id:`${O.item.id}:0`,providerMetadata:{openai:{itemId:O.item.id,reasoningEncryptedContent:O.item.encrypted_content??null}}}));else if(nj(O)){if(O.item.type==="function_call")w[O.output_index]=void 0,b=!0,z.enqueue({type:"tool-input-end",id:O.item.call_id}),z.enqueue({type:"tool-call",toolCallId:O.item.call_id,toolName:O.item.name,input:O.item.arguments,providerMetadata:{openai:{itemId:O.item.id}}});else if(O.item.type==="web_search_call")w[O.output_index]=void 0,z.enqueue({type:"tool-input-end",id:O.item.id}),z.enqueue({type:"tool-call",toolCallId:O.item.id,toolName:"web_search",input:JSON.stringify({action:O.item.action}),providerExecuted:!0}),z.enqueue({type:"tool-result",toolCallId:O.item.id,toolName:"web_search",result:{status:O.item.status},providerExecuted:!0});else if(O.item.type==="computer_call")w[O.output_index]=void 0,z.enqueue({type:"tool-input-end",id:O.item.id}),z.enqueue({type:"tool-call",toolCallId:O.item.id,toolName:"computer_use",input:"",providerExecuted:!0}),z.enqueue({type:"tool-result",toolCallId:O.item.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:O.item.status||"completed"},providerExecuted:!0});else if(O.item.type==="file_search_call")w[O.output_index]=void 0,z.enqueue({type:"tool-result",toolCallId:O.item.id,toolName:"file_search",result:{queries:O.item.queries,results:O.item.results?.map((W)=>({attributes:W.attributes,fileId:W.file_id,filename:W.filename,score:W.score,text:W.text}))??null},providerExecuted:!0});else if(O.item.type==="code_interpreter_call")w[O.output_index]=void 0,z.enqueue({type:"tool-result",toolCallId:O.item.id,toolName:"code_interpreter",result:{outputs:O.item.outputs},providerExecuted:!0});else if(O.item.type==="image_generation_call")z.enqueue({type:"tool-result",toolCallId:O.item.id,toolName:"image_generation",result:{result:O.item.result},providerExecuted:!0});else if(O.item.type==="local_shell_call")w[O.output_index]=void 0,z.enqueue({type:"tool-call",toolCallId:O.item.call_id,toolName:"local_shell",input:JSON.stringify({action:{type:"exec",command:O.item.action.command,timeoutMs:O.item.action.timeout_ms,user:O.item.action.user,workingDirectory:O.item.action.working_directory,env:O.item.action.env}}),providerMetadata:{openai:{itemId:O.item.id}}});else if(O.item.type==="message")z.enqueue({type:"text-end",id:O.item.id});else if(eI(O)){let W=v[O.item.id];for(let E of W.summaryParts)z.enqueue({type:"reasoning-end",id:`${O.item.id}:${E}`,providerMetadata:{openai:{itemId:O.item.id,reasoningEncryptedContent:O.item.encrypted_content??null}}});delete v[O.item.id]}}else if(aI(O)){let W=w[O.output_index];W!=null&&z.enqueue({type:"tool-input-delta",id:W.toolCallId,delta:O.delta})}else if(sI(O)){let W=w[O.output_index];W!=null&&z.enqueue({type:"tool-input-delta",id:W.toolCallId,delta:JSON.stringify(O.delta).slice(1,-1)})}else if(iY(O)){let W=w[O.output_index];W!=null&&(z.enqueue({type:"tool-input-delta",id:W.toolCallId,delta:\'"}\'}),z.enqueue({type:"tool-input-end",id:W.toolCallId}),z.enqueue({type:"tool-call",toolCallId:W.toolCallId,toolName:"code_interpreter",input:JSON.stringify({code:O.code,containerId:W.codeInterpreter.containerId}),providerExecuted:!0}))}else dI(O)?($=O.response.id,z.enqueue({type:"response-metadata",id:O.response.id,timestamp:new Date(O.response.created_at*1000),modelId:O.response.model})):ZI(O)?(z.enqueue({type:"text-delta",id:O.item_id,delta:O.delta}),i.providerOptions?.openai?.logprobs&&O.logprobs&&l.push(O.logprobs)):rY(O)?O.summary_index>0&&((J=v[O.item_id])==null||J.summaryParts.push(O.summary_index),z.enqueue({type:"reasoning-start",id:`${O.item_id}:${O.summary_index}`,providerMetadata:{openai:{itemId:O.item_id,reasoningEncryptedContent:v[O.item_id]?.encryptedContent??null}}})):uY(O)?z.enqueue({type:"reasoning-delta",id:`${O.item_id}:${O.summary_index}`,delta:O.delta,providerMetadata:{openai:{itemId:O.item_id}}}):pI(O)?(h=x6({finishReason:O.response.incomplete_details?.reason,hasFunctionCall:b}),_.inputTokens=O.response.usage.input_tokens,_.outputTokens=O.response.usage.output_tokens,_.totalTokens=O.response.usage.input_tokens+O.response.usage.output_tokens,_.reasoningTokens=O.response.usage.output_tokens_details?.reasoning_tokens??void 0,_.cachedInputTokens=O.response.usage.input_tokens_details?.cached_tokens??void 0,typeof O.response.service_tier=="string"&&(f=O.response.service_tier)):tY(O)?O.annotation.type==="url_citation"?z.enqueue({type:"source",sourceType:"url",id:(N=g.config).generateId?.call(N)??Qi(),url:O.annotation.url,title:O.annotation.title}):O.annotation.type==="file_citation"&&z.enqueue({type:"source",sourceType:"document",id:(j=g.config).generateId?.call(j)??Qi(),mediaType:"text/plain",title:O.annotation.quote??O.annotation.filename??"Document",filename:O.annotation.filename??O.annotation.file_id}):cY(O)&&z.enqueue({type:"error",error:O})},flush(U){let z={openai:{responseId:$}};l.length>0&&(z.openai.logprobs=l),f!==void 0&&(z.openai.serviceTier=f),U.enqueue({type:"finish",finishReason:h,usage:_,providerMetadata:z})}})),request:{body:n},response:{headers:t}}}},ij=o.object({input_tokens:o.number(),input_tokens_details:o.object({cached_tokens:o.number().nullish()}).nullish(),output_tokens:o.number(),output_tokens_details:o.object({reasoning_tokens:o.number().nullish()}).nullish()}),AI=o.object({type:o.literal("response.output_text.delta"),item_id:o.string(),delta:o.string(),logprobs:sO.nullish()}),BI=o.object({type:o.literal("error"),code:o.string(),message:o.string(),param:o.string().nullish(),sequence_number:o.number()}),KI=o.object({type:o.enum(["response.completed","response.incomplete"]),response:o.object({incomplete_details:o.object({reason:o.string()}).nullish(),usage:ij,service_tier:o.string().nullish()})}),VI=o.object({type:o.literal("response.created"),response:o.object({id:o.string(),created_at:o.number(),model:o.string(),service_tier:o.string().nullish()})}),MI=o.object({type:o.literal("response.output_item.added"),output_index:o.number(),item:o.discriminatedUnion("type",[o.object({type:o.literal("message"),id:o.string()}),o.object({type:o.literal("reasoning"),id:o.string(),encrypted_content:o.string().nullish()}),o.object({type:o.literal("function_call"),id:o.string(),call_id:o.string(),name:o.string(),arguments:o.string()}),o.object({type:o.literal("web_search_call"),id:o.string(),status:o.string(),action:o.object({type:o.literal("search"),query:o.string().optional()}).nullish()}),o.object({type:o.literal("computer_call"),id:o.string(),status:o.string()}),o.object({type:o.literal("file_search_call"),id:o.string()}),o.object({type:o.literal("image_generation_call"),id:o.string()}),o.object({type:o.literal("code_interpreter_call"),id:o.string(),container_id:o.string(),code:o.string().nullable(),outputs:o.array(o.discriminatedUnion("type",[o.object({type:o.literal("logs"),logs:o.string()}),o.object({type:o.literal("image"),url:o.string()})])).nullable(),status:o.string()})])}),xI=o.object({type:o.literal("response.output_item.done"),output_index:o.number(),item:o.discriminatedUnion("type",[o.object({type:o.literal("message"),id:o.string()}),o.object({type:o.literal("reasoning"),id:o.string(),encrypted_content:o.string().nullish()}),o.object({type:o.literal("function_call"),id:o.string(),call_id:o.string(),name:o.string(),arguments:o.string(),status:o.literal("completed")}),eO,dO,RO,ZO,pO,o.object({type:o.literal("computer_call"),id:o.string(),status:o.literal("completed")})])}),FI=o.object({type:o.literal("response.function_call_arguments.delta"),item_id:o.string(),output_index:o.number(),delta:o.string()}),PI=o.object({type:o.literal("response.code_interpreter_call_code.delta"),item_id:o.string(),output_index:o.number(),delta:o.string()}),yI=o.object({type:o.literal("response.code_interpreter_call_code.done"),item_id:o.string(),output_index:o.number(),code:o.string()}),TI=o.object({type:o.literal("response.output_text.annotation.added"),annotation:o.discriminatedUnion("type",[o.object({type:o.literal("url_citation"),url:o.string(),title:o.string()}),o.object({type:o.literal("file_citation"),file_id:o.string(),filename:o.string().nullish(),index:o.number().nullish(),start_index:o.number().nullish(),end_index:o.number().nullish(),quote:o.string().nullish()})])}),kI=o.object({type:o.literal("response.reasoning_summary_part.added"),item_id:o.string(),summary_index:o.number()}),CI=o.object({type:o.literal("response.reasoning_summary_text.delta"),item_id:o.string(),summary_index:o.number(),delta:o.string()}),RI=o.union([AI,KI,VI,MI,xI,FI,PI,yI,TI,kI,CI,BI,o.object({type:o.string()}).loose()]);function ZI(i){return i.type==="response.output_text.delta"}function nj(i){return i.type==="response.output_item.done"}function eI(i){return nj(i)&&i.item.type==="reasoning"}function pI(i){return i.type==="response.completed"||i.type==="response.incomplete"}function dI(i){return i.type==="response.created"}function aI(i){return i.type==="response.function_call_arguments.delta"}function sI(i){return i.type==="response.code_interpreter_call_code.delta"}function iY(i){return i.type==="response.code_interpreter_call_code.done"}function tj(i){return i.type==="response.output_item.added"}function nY(i){return tj(i)&&i.item.type==="reasoning"}function tY(i){return i.type==="response.output_text.annotation.added"}function rY(i){return i.type==="response.reasoning_summary_part.added"}function uY(i){return i.type==="response.reasoning_summary_text.delta"}function cY(i){return i.type==="error"}function oY(i){let n=i.startsWith("o3")||i.startsWith("o4-mini")||i.startsWith("gpt-5")&&!i.startsWith("gpt-5-chat"),r=i.startsWith("gpt-4")||i.startsWith("gpt-5-mini")||i.startsWith("gpt-5")&&!i.startsWith("gpt-5-nano")&&!i.startsWith("gpt-5-chat")||i.startsWith("o3")||i.startsWith("o4-mini"),u={requiredAutoTruncation:!1,systemMessageMode:"system",supportsFlexProcessing:n,supportsPriorityProcessing:r};return i.startsWith("gpt-5-chat")?{...u,isReasoningModel:!1}:i.startsWith("o")||i.startsWith("gpt-5")||i.startsWith("codex-")||i.startsWith("computer-use")?i.startsWith("o1-mini")||i.startsWith("o1-preview")?{...u,isReasoningModel:!0,systemMessageMode:"remove"}:{...u,isReasoningModel:!0,systemMessageMode:"developer"}:{...u,isReasoningModel:!1}}var gY=o.object({include:o.array(o.enum(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:o.string().nullish(),logprobs:o.union([o.boolean(),o.number().min(1).max(aO)]).optional(),maxToolCalls:o.number().nullish(),metadata:o.any().nullish(),parallelToolCalls:o.boolean().nullish(),previousResponseId:o.string().nullish(),promptCacheKey:o.string().nullish(),reasoningEffort:o.string().nullish(),reasoningSummary:o.string().nullish(),safetyIdentifier:o.string().nullish(),serviceTier:o.enum(["auto","flex","priority"]).nullish(),store:o.boolean().nullish(),strictJsonSchema:o.boolean().nullish(),textVerbosity:o.enum(["low","medium","high"]).nullish(),user:o.string().nullish()}),hY=o.object({instructions:o.string().nullish(),speed:o.number().min(0.25).max(4).default(1).nullish()}),_Y=class{constructor(i,n){this.modelId=i,this.config=n,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({text:i,voice:n="alloy",outputFormat:r="mp3",speed:u,instructions:t,language:c,providerOptions:g}){let h=[],_=await Hi({provider:"openai",providerOptions:g,schema:hY}),l={model:this.modelId,input:i,voice:n,response_format:"mp3",speed:u,instructions:t};if(r&&(["mp3","opus","aac","flac","wav","pcm"].includes(r)?l.response_format=r:h.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${r}. Using mp3 instead.`})),_){let $={};for(let w in $){let b=$[w];b!==void 0&&(l[w]=b)}}return c&&h.push({type:"unsupported-setting",setting:"language",details:`OpenAI speech models do not support language selection. Language parameter "${c}" was ignored.`}),{requestBody:l,warnings:h}}async doGenerate(i){var n;let r=(n=this.config._internal)?.currentDate?.call(n)??new Date,{requestBody:u,warnings:t}=await this.getArgs(i),{value:c,responseHeaders:g,rawValue:h}=await fi({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:Ui(this.config.headers(),i.headers),body:u,failedResponseHandler:hn,successfulResponseHandler:KX(),abortSignal:i.abortSignal,fetch:this.config.fetch});return{audio:c,warnings:t,request:{body:JSON.stringify(u)},response:{timestamp:r,modelId:this.modelId,headers:g,body:h}}}},lY=o.object({include:o.array(o.string()).optional(),language:o.string().optional(),prompt:o.string().optional(),temperature:o.number().min(0).max(1).default(0).optional(),timestampGranularities:o.array(o.enum(["word","segment"])).default(["segment"]).optional()}),F6={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},$Y=class{constructor(i,n){this.modelId=i,this.config=n,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({audio:i,mediaType:n,providerOptions:r}){let u=[],t=await Hi({provider:"openai",providerOptions:r,schema:lY}),c=new FormData,g=i instanceof Uint8Array?new Blob([i]):new Blob([xX(i)]);c.append("model",this.modelId);let h=JX(n);if(c.append("file",new File([g],"audio",{type:n}),`audio.${h}`),t){let _={include:t.include,language:t.language,prompt:t.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:t.temperature,timestamp_granularities:t.timestampGranularities};for(let[l,$]of Object.entries(_))if($!=null)if(Array.isArray($))for(let w of $)c.append(`${l}[]`,String(w));else c.append(l,String($))}return{formData:c,warnings:u}}async doGenerate(i){var n;let r=(n=this.config._internal)?.currentDate?.call(n)??new Date,{formData:u,warnings:t}=await this.getArgs(i),{value:c,responseHeaders:g,rawValue:h}=await BX({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:Ui(this.config.headers(),i.headers),formData:u,failedResponseHandler:hn,successfulResponseHandler:Vi(wY),abortSignal:i.abortSignal,fetch:this.config.fetch}),_=c.language!=null&&c.language in F6?F6[c.language]:void 0;return{text:c.text,segments:c.segments?.map((l)=>({text:l.text,startSecond:l.start,endSecond:l.end}))??c.words?.map((l)=>({text:l.word,startSecond:l.start,endSecond:l.end}))??[],language:_,durationInSeconds:c.duration??void 0,warnings:t,response:{timestamp:r,modelId:this.modelId,headers:g,body:h}}}},wY=o.object({text:o.string(),language:o.string().nullish(),duration:o.number().nullish(),words:o.array(o.object({word:o.string(),start:o.number(),end:o.number()})).nullish(),segments:o.array(o.object({id:o.number(),seek:o.number(),start:o.number(),end:o.number(),text:o.string(),tokens:o.array(o.number()),temperature:o.number(),avg_logprob:o.number(),compression_ratio:o.number(),no_speech_prob:o.number()})).nullish()}),bY="2.0.42";function vY(i={}){let n=jo(DX({settingValue:i.baseURL,environmentVariableName:"OPENAI_BASE_URL"}))??"https://api.openai.com/v1",r=i.name??"openai",u=()=>wu({Authorization:`Bearer ${Oo({apiKey:i.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":i.organization,"OpenAI-Project":i.project,...i.headers},`ai-sdk/openai/${bY}`),t=(v)=>new ZL(v,{provider:`${r}.chat`,url:({path:f})=>`${n}${f}`,headers:u,fetch:i.fetch}),c=(v)=>new tI(v,{provider:`${r}.completion`,url:({path:f})=>`${n}${f}`,headers:u,fetch:i.fetch}),g=(v)=>new oI(v,{provider:`${r}.embedding`,url:({path:f})=>`${n}${f}`,headers:u,fetch:i.fetch}),h=(v)=>new lI(v,{provider:`${r}.image`,url:({path:f})=>`${n}${f}`,headers:u,fetch:i.fetch}),_=(v)=>new $Y(v,{provider:`${r}.transcription`,url:({path:f})=>`${n}${f}`,headers:u,fetch:i.fetch}),l=(v)=>new _Y(v,{provider:`${r}.speech`,url:({path:f})=>`${n}${f}`,headers:u,fetch:i.fetch}),$=(v)=>{if(new.target)throw Error("The OpenAI model function cannot be called with the new keyword.");return w(v)},w=(v)=>new SI(v,{provider:`${r}.responses`,url:({path:f})=>`${n}${f}`,headers:u,fetch:i.fetch,fileIdPrefixes:["file-"]}),b=function(v){return $(v)};return b.languageModel=$,b.chat=t,b.completion=c,b.responses=w,b.embedding=g,b.textEmbedding=g,b.textEmbeddingModel=g,b.image=h,b.imageModel=h,b.transcription=_,b.transcriptionModel=_,b.speech=l,b.speechModel=l,b.tools=II,b}vY(),o.object({user:o.string().optional(),reasoningEffort:o.string().optional()});var fY={errorSchema:o.object({error:o.object({message:o.string(),type:o.string().nullish(),param:o.any().nullish(),code:o.union([o.string(),o.number()]).nullish()})}),errorToMessage:(i)=>i.error.message},OY=o.object({prompt_tokens:o.number().nullish(),completion_tokens:o.number().nullish(),total_tokens:o.number().nullish(),prompt_tokens_details:o.object({cached_tokens:o.number().nullish()}).nullish(),completion_tokens_details:o.object({reasoning_tokens:o.number().nullish(),accepted_prediction_tokens:o.number().nullish(),rejected_prediction_tokens:o.number().nullish()}).nullish()}).nullish();o.object({id:o.string().nullish(),created:o.number().nullish(),model:o.string().nullish(),choices:o.array(o.object({message:o.object({role:o.literal("assistant").nullish(),content:o.string().nullish(),reasoning_content:o.string().nullish(),reasoning:o.string().nullish(),tool_calls:o.array(o.object({id:o.string().nullish(),function:o.object({name:o.string(),arguments:o.string()})})).nullish()}),finish_reason:o.string().nullish()})),usage:OY}),o.object({echo:o.boolean().optional(),logitBias:o.record(o.string(),o.number()).optional(),suffix:o.string().optional(),user:o.string().optional()});var jY=o.object({prompt_tokens:o.number(),completion_tokens:o.number(),total_tokens:o.number()});o.object({id:o.string().nullish(),created:o.number().nullish(),model:o.string().nullish(),choices:o.array(o.object({text:o.string(),finish_reason:o.string()})),usage:jY.nullish()}),o.object({dimensions:o.number().optional(),user:o.string().optional()}),o.object({data:o.array(o.object({embedding:o.array(o.number())})),usage:o.object({prompt_tokens:o.number()}).nullish(),providerMetadata:o.record(o.string(),o.record(o.string(),o.any())).optional()});var UY=class{constructor(i,n){this.modelId=i,this.config=n,this.specificationVersion="v2",this.maxImagesPerCall=10}get provider(){return this.config.provider}async doGenerate({prompt:i,n,size:r,aspectRatio:u,seed:t,providerOptions:c,headers:g,abortSignal:h}){var _;let l=[];u!=null&&l.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),t!=null&&l.push({type:"unsupported-setting",setting:"seed"});let $=(_=this.config._internal)?.currentDate?.call(_)??new Date,{value:w,responseHeaders:b}=await fi({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Ui(this.config.headers(),g),body:{model:this.modelId,prompt:i,n,size:r,...c.openai??{},response_format:"b64_json"},failedResponseHandler:bu(this.config.errorStructure??fY),successfulResponseHandler:Vi(NY),abortSignal:h,fetch:this.config.fetch});return{images:w.data.map((v)=>v.b64_json),warnings:l,response:{timestamp:$,modelId:this.modelId,headers:b}}}},NY=o.object({data:o.array(o.object({b64_json:o.string()}))});function zY(i){let n=[],r=[];for(let{role:u,content:t}of i)switch(u){case"system":n.push({role:"system",content:t});break;case"user":if(t.length===1&&t[0].type==="text"){n.push({role:"user",content:t[0].text});break}n.push({role:"user",content:t.map((c)=>{switch(c.type){case"text":return{type:"text",text:c.text};case"file":if(c.mediaType.startsWith("image/")){let g=c.mediaType==="image/*"?"image/jpeg":c.mediaType;return{type:"image_url",image_url:{url:c.data instanceof URL?c.data.toString():`data:${g};base64,${pi(c.data)}`}}}else throw new oi({functionality:`file part media type ${c.mediaType}`})}})});break;case"assistant":{let c="",g=[];for(let h of t)switch(h.type){case"text":c+=h.text;break;case"tool-call":g.push({id:h.toolCallId,type:"function",function:{name:h.toolName,arguments:JSON.stringify(h.input)}});break}n.push({role:"assistant",content:c,tool_calls:g.length>0?g:void 0});break}case"tool":for(let c of t){let g=c.output,h;switch(g.type){case"text":case"error-text":h=g.value;break;case"content":case"json":case"error-json":h=JSON.stringify(g.value);break}n.push({role:"tool",tool_call_id:c.toolCallId,content:h})}break;default:throw Error(`Unsupported role: ${u}`)}return{messages:n,warnings:r}}function P6({id:i,model:n,created:r}){return{id:i??void 0,modelId:n??void 0,timestamp:r==null?void 0:new Date(r*1000)}}function y6(i){switch(i){case"stop":return"stop";case"length":return"length";case"tool_calls":case"function_call":return"tool-calls";case"content_filter":return"content-filter";default:return"unknown"}}var WY=o.object({type:o.literal("web"),country:o.string().length(2).optional(),excludedWebsites:o.array(o.string()).max(5).optional(),allowedWebsites:o.array(o.string()).max(5).optional(),safeSearch:o.boolean().optional()}),DY=o.object({type:o.literal("x"),excludedXHandles:o.array(o.string()).optional(),includedXHandles:o.array(o.string()).optional(),postFavoriteCount:o.number().int().optional(),postViewCount:o.number().int().optional(),xHandles:o.array(o.string()).optional()}),JY=o.object({type:o.literal("news"),country:o.string().length(2).optional(),excludedWebsites:o.array(o.string()).max(5).optional(),safeSearch:o.boolean().optional()}),EY=o.object({type:o.literal("rss"),links:o.array(o.string().url()).max(1)}),HY=o.discriminatedUnion("type",[WY,DY,JY,EY]),GY=o.object({reasoningEffort:o.enum(["low","high"]).optional(),searchParameters:o.object({mode:o.enum(["off","auto","on"]),returnCitations:o.boolean().optional(),fromDate:o.string().optional(),toDate:o.string().optional(),maxSearchResults:o.number().min(1).max(50).optional(),sources:o.array(HY).optional()}).optional()}),rj=o.object({error:o.object({message:o.string(),type:o.string().nullish(),param:o.any().nullish(),code:o.union([o.string(),o.number()]).nullish()})}),T6=bu({errorSchema:rj,errorToMessage:(i)=>i.error.message});function qY({tools:i,toolChoice:n}){i=i?.length?i:void 0;let r=[];if(i==null)return{tools:void 0,toolChoice:void 0,toolWarnings:r};let u=[];for(let c of i)c.type==="provider-defined"?r.push({type:"unsupported-tool",tool:c}):u.push({type:"function",function:{name:c.name,description:c.description,parameters:c.inputSchema}});if(n==null)return{tools:u,toolChoice:void 0,toolWarnings:r};let t=n.type;switch(t){case"auto":case"none":return{tools:u,toolChoice:t,toolWarnings:r};case"required":return{tools:u,toolChoice:"required",toolWarnings:r};case"tool":return{tools:u,toolChoice:{type:"function",function:{name:n.toolName}},toolWarnings:r};default:throw new oi({functionality:`tool choice type: ${t}`})}}var XY=class{constructor(i,n){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\\/\\/.*$/]},this.modelId=i,this.config=n}get provider(){return this.config.provider}async getArgs({prompt:i,maxOutputTokens:n,temperature:r,topP:u,topK:t,frequencyPenalty:c,presencePenalty:g,stopSequences:h,seed:_,responseFormat:l,providerOptions:$,tools:w,toolChoice:b}){let v=[],f=await Hi({provider:"xai",providerOptions:$,schema:GY})??{};t!=null&&v.push({type:"unsupported-setting",setting:"topK"}),c!=null&&v.push({type:"unsupported-setting",setting:"frequencyPenalty"}),g!=null&&v.push({type:"unsupported-setting",setting:"presencePenalty"}),h!=null&&v.push({type:"unsupported-setting",setting:"stopSequences"}),l!=null&&l.type==="json"&&l.schema!=null&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is not supported"});let{messages:U,warnings:z}=zY(i);v.push(...z);let{tools:J,toolChoice:N,toolWarnings:j}=qY({tools:w,toolChoice:b});return v.push(...j),{args:{model:this.modelId,max_tokens:n,temperature:r,top_p:u,seed:_,reasoning_effort:f.reasoningEffort,response_format:l?.type==="json"?l.schema==null?{type:"json_object"}:{type:"json_schema",json_schema:{name:l.name??"response",schema:l.schema,strict:!0}}:void 0,search_parameters:f.searchParameters?{mode:f.searchParameters.mode,return_citations:f.searchParameters.returnCitations,from_date:f.searchParameters.fromDate,to_date:f.searchParameters.toDate,max_search_results:f.searchParameters.maxSearchResults,sources:f.searchParameters.sources?.map((O)=>({type:O.type,...O.type==="web"&&{country:O.country,excluded_websites:O.excludedWebsites,allowed_websites:O.allowedWebsites,safe_search:O.safeSearch},...O.type==="x"&&{excluded_x_handles:O.excludedXHandles,included_x_handles:O.includedXHandles??O.xHandles,post_favorite_count:O.postFavoriteCount,post_view_count:O.postViewCount},...O.type==="news"&&{country:O.country,excluded_websites:O.excludedWebsites,safe_search:O.safeSearch},...O.type==="rss"&&{links:O.links}}))}:void 0,messages:U,tools:J,tool_choice:N},warnings:v}}async doGenerate(i){let{args:n,warnings:r}=await this.getArgs(i),{responseHeaders:u,value:t,rawValue:c}=await fi({url:`${this.config.baseURL??"https://api.x.ai/v1"}/chat/completions`,headers:Ui(this.config.headers(),i.headers),body:n,failedResponseHandler:T6,successfulResponseHandler:Vi(LY),abortSignal:i.abortSignal,fetch:this.config.fetch}),g=t.choices[0],h=[];if(g.message.content!=null&&g.message.content.length>0){let _=g.message.content,l=n.messages[n.messages.length-1];l?.role==="assistant"&&_===l.content&&(_=""),_.length>0&&h.push({type:"text",text:_})}if(g.message.reasoning_content!=null&&g.message.reasoning_content.length>0&&h.push({type:"reasoning",text:g.message.reasoning_content}),g.message.tool_calls!=null)for(let _ of g.message.tool_calls)h.push({type:"tool-call",toolCallId:_.id,toolName:_.function.name,input:_.function.arguments});if(t.citations!=null)for(let _ of t.citations)h.push({type:"source",sourceType:"url",id:this.config.generateId(),url:_});return{content:h,finishReason:y6(g.finish_reason),usage:{inputTokens:t.usage.prompt_tokens,outputTokens:t.usage.completion_tokens,totalTokens:t.usage.total_tokens,reasoningTokens:t.usage.completion_tokens_details?.reasoning_tokens??void 0},request:{body:n},response:{...P6(t),headers:u,body:c},warnings:r}}async doStream(i){let{args:n,warnings:r}=await this.getArgs(i),u={...n,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:t,value:c}=await fi({url:`${this.config.baseURL??"https://api.x.ai/v1"}/chat/completions`,headers:Ui(this.config.headers(),i.headers),body:u,failedResponseHandler:T6,successfulResponseHandler:Vt(IY),abortSignal:i.abortSignal,fetch:this.config.fetch}),g="unknown",h={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},_=!0,l={},$={},w=this;return{stream:c.pipeThrough(new TransformStream({start(b){b.enqueue({type:"stream-start",warnings:r})},transform(b,v){if(i.includeRawChunks&&v.enqueue({type:"raw",rawValue:b.rawValue}),!b.success){v.enqueue({type:"error",error:b.error});return}let f=b.value;if(_&&=(v.enqueue({type:"response-metadata",...P6(f)}),!1),f.citations!=null)for(let N of f.citations)v.enqueue({type:"source",sourceType:"url",id:w.config.generateId(),url:N});f.usage!=null&&(h.inputTokens=f.usage.prompt_tokens,h.outputTokens=f.usage.completion_tokens,h.totalTokens=f.usage.total_tokens,h.reasoningTokens=f.usage.completion_tokens_details?.reasoning_tokens??void 0);let U=f.choices[0];if(U?.finish_reason!=null&&(g=y6(U.finish_reason)),U?.delta==null)return;let{delta:z,index:J}=U;if(z.content!=null&&z.content.length>0){let N=z.content,j=u.messages[u.messages.length-1];if(j?.role==="assistant"&&N===j.content)return;let O=`text-${f.id||J}`;l[O]??(l[O]={type:"text"},v.enqueue({type:"text-start",id:O})),v.enqueue({type:"text-delta",id:O,delta:N})}if(z.reasoning_content!=null&&z.reasoning_content.length>0){let N=`reasoning-${f.id||J}`;if($[N]===z.reasoning_content)return;$[N]=z.reasoning_content,l[N]??(l[N]={type:"reasoning"},v.enqueue({type:"reasoning-start",id:N})),v.enqueue({type:"reasoning-delta",id:N,delta:z.reasoning_content})}if(z.tool_calls!=null)for(let N of z.tool_calls){let j=N.id;v.enqueue({type:"tool-input-start",id:j,toolName:N.function.name}),v.enqueue({type:"tool-input-delta",id:j,delta:N.function.arguments}),v.enqueue({type:"tool-input-end",id:j}),v.enqueue({type:"tool-call",toolCallId:j,toolName:N.function.name,input:N.function.arguments})}},flush(b){for(let[v,f]of Object.entries(l))b.enqueue({type:f.type==="text"?"text-end":"reasoning-end",id:v});b.enqueue({type:"finish",finishReason:g,usage:h})}})),request:{body:u},response:{headers:t}}}},uj=o.object({prompt_tokens:o.number(),completion_tokens:o.number(),total_tokens:o.number(),completion_tokens_details:o.object({reasoning_tokens:o.number().nullish()}).nullish()}),LY=o.object({id:o.string().nullish(),created:o.number().nullish(),model:o.string().nullish(),choices:o.array(o.object({message:o.object({role:o.literal("assistant"),content:o.string().nullish(),reasoning_content:o.string().nullish(),tool_calls:o.array(o.object({id:o.string(),type:o.literal("function"),function:o.object({name:o.string(),arguments:o.string()})})).nullish()}),index:o.number(),finish_reason:o.string().nullish()})),object:o.literal("chat.completion"),usage:uj,citations:o.array(o.string().url()).nullish()}),IY=o.object({id:o.string().nullish(),created:o.number().nullish(),model:o.string().nullish(),choices:o.array(o.object({delta:o.object({role:o.enum(["assistant"]).optional(),content:o.string().nullish(),reasoning_content:o.string().nullish(),tool_calls:o.array(o.object({id:o.string(),type:o.literal("function"),function:o.object({name:o.string(),arguments:o.string()})})).nullish()}),finish_reason:o.string().nullish(),index:o.number()})),usage:uj.nullish(),citations:o.array(o.string().url()).nullish()}),YY="2.0.23",QY={errorSchema:rj,errorToMessage:(i)=>i.error.message};function mY(i={}){let n=jo(i.baseURL??"https://api.x.ai/v1"),r=()=>wu({Authorization:`Bearer ${Oo({apiKey:i.apiKey,environmentVariableName:"XAI_API_KEY",description:"xAI API key"})}`,...i.headers},`ai-sdk/xai/${YY}`),u=(g)=>new XY(g,{provider:"xai.chat",baseURL:n,headers:r,generateId:Qi,fetch:i.fetch}),t=(g)=>new UY(g,{provider:"xai.image",url:({path:h})=>`${n}${h}`,headers:r,fetch:i.fetch,errorStructure:QY}),c=(g)=>u(g);return c.languageModel=u,c.chat=u,c.textEmbeddingModel=(g)=>{throw new U0({modelId:g,modelType:"textEmbeddingModel"})},c.imageModel=t,c.image=t,c}mY();var cj="BLINK_API_URL";function gj(){let i,n=()=>{return new Ru({baseURL:process.env[G0],authToken:i})},r=process.env[zo]?parseInt(process.env[zo]):12345,u={get(h){return n().getStorage(h)},set(h,_){return n().setStorage(h,_)},delete(h){return n().deleteStorage(h)},list(h,_){return n().listStorage(h,_)}},t={traces(h){return n().proxyOtlpTraces(h)}},c={upsert:async(h)=>{let _=await n().upsertChat(JSON.stringify(h));return{created:_.created,id:_.id,createdAt:_.created_at}},delete:async(h)=>{await n().deleteChat(h)},deleteMessages:async(h,_)=>{await n().deleteMessages(h,_)},get:async(h)=>{let _=await n().getChat(h);if(!_)return;return{id:_.id,createdAt:_.createdAt}},getMessages:async(h)=>{return(await n().getMessages(h)).map((l)=>({id:l.id,role:l.role,parts:l.parts,metadata:l.metadata}))},start:async(h)=>{await n().startChat(h)},stop:async(h)=>{await n().stopChat(h)},sendMessages:async(h,_,l)=>{await n().sendMessages(h,{messages:_.map(($)=>({id:$.id,role:$.role,parts:$.parts,metadata:$.metadata})),behavior:l?.behavior??"enqueue"})}},g=SY(Gg((h)=>{return zf.fetch(h,{chat:c,store:u,otlp:t})}));return g.listen(r,"127.0.0.1"),process.env[cj]=`http://127.0.0.1:${r}`,{server:g,port:r,setAuthToken(h){i=h,process.env.BLINK_INVOCATION_AUTH_TOKEN=h}}}async function hj(i,n,r=!1){let u=process.env.PORT;process.env.PORT=n.toString();let t=oj.prototype.listen,c=new Promise((_,l)=>{oj.prototype.listen=function(...$){if(this.on("listening",()=>{_(void 0)}),this.on("error",(w)=>{l(w)}),r)this.unref();return t.apply(this,$)}});await import(i),process.env.PORT=u;let g=`http://127.0.0.1:${n}`,h=Gg((_)=>{let l=new URL(_.url),$=new URL(g);return $.pathname=l.pathname,$.search=l.search,fetch($.toString(),_)});return await c,h}var{setAuthToken:KY,server:VY}=gj();VY.unref();if(!process.env.ENTRYPOINT)throw new Error("developer error: ENTRYPOINT is not set");var E0=process.env.PORT?parseInt(process.env.PORT):12345,MY=await hj(BY(process.env.ENTRYPOINT),E0+1);AY.createServer((i,n)=>{KY(i.headers[H0]),MY(i,n)}).listen(E0,()=>{console.log(`Server is running on port ${E0}`)});\n';
