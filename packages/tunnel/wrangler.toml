name = "tunnel-server"
main = "src/server/cloudflare.ts"
compatibility_date = "2025-01-01"
routes = [
   { pattern = "try.blink.host/*", zone_name = "blink.host" },
   { pattern = "*.try.blink.host/*", zone_name = "blink.host" },
]
workers_dev = true
preview_urls = true

[vars]
# Server secret for HMAC signing. Change this!
# TUNNEL_SECRET = "change-me-to-a-secure-random-string"

# Base URL for generating public URLs
# For wildcard mode: https://tunnel.example.com
# For subpath mode: https://example.com
TUNNEL_BASE_URL = "https://try.blink.host"

# Routing mode: "wildcard" or "subpath"
TUNNEL_MODE = "wildcard"

[[durable_objects.bindings]]
name = "TUNNEL_SESSION"
class_name = "TunnelSession"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["TunnelSession"]
